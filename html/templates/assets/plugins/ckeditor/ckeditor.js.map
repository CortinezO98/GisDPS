{"version":3,"sources":["webpack://ClassicEditor/webpack/universalModuleDefinition","webpack://ClassicEditor/webpack/bootstrap","webpack://ClassicEditor/../ckeditor5-utils/src/ckeditorerror.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_root.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isBuffer.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_nodeUtil.js","webpack://ClassicEditor/../ckeditor5-utils/src/version.js","webpack://ClassicEditor/../ckeditor5-ui/theme/components/responsive-form/responsiveform.css?6f59","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_freeGlobal.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_cloneBuffer.js","webpack://ClassicEditor/(webpack)/buildin/harmony-module.js","webpack://ClassicEditor/(webpack)/buildin/global.js","webpack://ClassicEditor/../ckeditor5-heading/theme/heading.css?e55a","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/stubFalse.js","webpack://ClassicEditor/../ckeditor5-engine/theme/placeholder.css?da8f","webpack://ClassicEditor/../ckeditor5-engine/theme/placeholder.css","webpack://ClassicEditor/../ckeditor5-ui/theme/globals/globals.css?2fbc","webpack://ClassicEditor/../ckeditor5-ui/theme/globals/globals.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/editorui/editorui.css?1b42","webpack://ClassicEditor/../ckeditor5-ui/theme/components/editorui/editorui.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/label/label.css?fe04","webpack://ClassicEditor/../ckeditor5-ui/theme/components/label/label.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/panel/stickypanel.css?4d41","webpack://ClassicEditor/../ckeditor5-ui/theme/components/panel/stickypanel.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/dropdown/dropdown.css?ed4c","webpack://ClassicEditor/../ckeditor5-ui/theme/components/dropdown/dropdown.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/icon/icon.css?5727","webpack://ClassicEditor/../ckeditor5-ui/theme/components/icon/icon.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/tooltip/tooltip.css?8e75","webpack://ClassicEditor/../ckeditor5-ui/theme/components/tooltip/tooltip.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/button/button.css?ce6e","webpack://ClassicEditor/../ckeditor5-ui/theme/components/button/button.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/list/list.css?022f","webpack://ClassicEditor/../ckeditor5-ui/theme/components/list/list.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/button/switchbutton.css?0c2d","webpack://ClassicEditor/../ckeditor5-ui/theme/components/button/switchbutton.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/dropdown/toolbardropdown.css?8b86","webpack://ClassicEditor/../ckeditor5-ui/theme/components/dropdown/toolbardropdown.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/dropdown/listdropdown.css?df0b","webpack://ClassicEditor/../ckeditor5-ui/theme/components/dropdown/listdropdown.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/toolbar/toolbar.css?25c7","webpack://ClassicEditor/../ckeditor5-ui/theme/components/toolbar/toolbar.css","webpack://ClassicEditor/../ckeditor5-editor-classic/theme/classiceditor.css?78b5","webpack://ClassicEditor/../ckeditor5-editor-classic/theme/classiceditor.css","webpack://ClassicEditor/../ckeditor5-block-quote/theme/blockquote.css?446e","webpack://ClassicEditor/../ckeditor5-block-quote/theme/blockquote.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/panel/balloonpanel.css?d9a5","webpack://ClassicEditor/../ckeditor5-ui/theme/components/panel/balloonpanel.css","webpack://ClassicEditor/../ckeditor5-link/theme/link.css?fff3","webpack://ClassicEditor/../ckeditor5-link/theme/link.css","webpack://ClassicEditor/../ckeditor5-widget/theme/widgettypearound.css?4755","webpack://ClassicEditor/../ckeditor5-widget/theme/widgettypearound.css","webpack://ClassicEditor/../ckeditor5-widget/theme/widget.css?4a91","webpack://ClassicEditor/../ckeditor5-widget/theme/widget.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/labeledfield/labeledfieldview.css?18da","webpack://ClassicEditor/../ckeditor5-ui/theme/components/labeledfield/labeledfieldview.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/inputtext/inputtext.css?62e4","webpack://ClassicEditor/../ckeditor5-ui/theme/components/inputtext/inputtext.css","webpack://ClassicEditor/../ckeditor5-image/theme/textalternativeform.css?387b","webpack://ClassicEditor/../ckeditor5-image/theme/textalternativeform.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/responsive-form/responsiveform.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/panel/balloonrotator.css?67c7","webpack://ClassicEditor/../ckeditor5-ui/theme/components/panel/balloonrotator.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/panel/fakepanel.css?a8d1","webpack://ClassicEditor/../ckeditor5-ui/theme/components/panel/fakepanel.css","webpack://ClassicEditor/../ckeditor5-image/theme/image.css?5712","webpack://ClassicEditor/../ckeditor5-image/theme/image.css","webpack://ClassicEditor/../ckeditor5-image/theme/imageuploadprogress.css?e96b","webpack://ClassicEditor/../ckeditor5-image/theme/imageuploadprogress.css","webpack://ClassicEditor/../ckeditor5-image/theme/imageuploadicon.css?f4ac","webpack://ClassicEditor/../ckeditor5-image/theme/imageuploadicon.css","webpack://ClassicEditor/../ckeditor5-image/theme/imageuploadloader.css?82d9","webpack://ClassicEditor/../ckeditor5-image/theme/imageuploadloader.css","webpack://ClassicEditor/../ckeditor5-heading/theme/heading.css","webpack://ClassicEditor/../ckeditor5-image/theme/imagecaption.css?0273","webpack://ClassicEditor/../ckeditor5-image/theme/imagecaption.css","webpack://ClassicEditor/../ckeditor5-image/theme/imagestyle.css?f76f","webpack://ClassicEditor/../ckeditor5-image/theme/imagestyle.css","webpack://ClassicEditor/../ckeditor5-link/theme/linkform.css?4f98","webpack://ClassicEditor/../ckeditor5-link/theme/linkform.css","webpack://ClassicEditor/../ckeditor5-link/theme/linkactions.css?b826","webpack://ClassicEditor/../ckeditor5-link/theme/linkactions.css","webpack://ClassicEditor/../ckeditor5-media-embed/theme/mediaembedediting.css?5710","webpack://ClassicEditor/../ckeditor5-media-embed/theme/mediaembedediting.css","webpack://ClassicEditor/../ckeditor5-media-embed/theme/mediaform.css?6b39","webpack://ClassicEditor/../ckeditor5-media-embed/theme/mediaform.css","webpack://ClassicEditor/../ckeditor5-media-embed/theme/mediaembed.css?159a","webpack://ClassicEditor/../ckeditor5-media-embed/theme/mediaembed.css","webpack://ClassicEditor/../ckeditor5-table/theme/tableediting.css?41d4","webpack://ClassicEditor/../ckeditor5-table/theme/tableediting.css","webpack://ClassicEditor/../ckeditor5-ui/theme/components/dropdown/splitbutton.css?0160","webpack://ClassicEditor/../ckeditor5-ui/theme/components/dropdown/splitbutton.css","webpack://ClassicEditor/../ckeditor5-table/theme/inserttable.css?3ff7","webpack://ClassicEditor/../ckeditor5-table/theme/inserttable.css","webpack://ClassicEditor/../ckeditor5-table/theme/tableselection.css?4eee","webpack://ClassicEditor/../ckeditor5-table/theme/tableselection.css","webpack://ClassicEditor/../ckeditor5-table/theme/table.css?02bc","webpack://ClassicEditor/../ckeditor5-table/theme/table.css","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_Symbol.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_getRawTag.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_objectToString.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseGetTag.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_overArg.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_getPrototype.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isObjectLike.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isPlainObject.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_listCacheClear.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/eq.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_assocIndexOf.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_listCacheDelete.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_listCacheGet.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_listCacheHas.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_listCacheSet.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_ListCache.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_stackClear.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_stackDelete.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_stackGet.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_stackHas.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isObject.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isFunction.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_isMasked.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_coreJsData.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_toSource.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseIsNative.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_getValue.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_getNative.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_Map.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_nativeCreate.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_hashClear.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_hashDelete.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_hashGet.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_hashHas.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_hashSet.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_Hash.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_mapCacheClear.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_isKeyable.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_getMapData.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_mapCacheDelete.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_mapCacheGet.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_mapCacheHas.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_mapCacheSet.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_MapCache.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_stackSet.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_Stack.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_arrayEach.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_defineProperty.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseAssignValue.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_assignValue.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_copyObject.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseTimes.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseIsArguments.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isArguments.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isArray.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_isIndex.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isLength.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseIsTypedArray.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseUnary.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isTypedArray.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_arrayLikeKeys.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_isPrototype.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_nativeKeys.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseKeys.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isArrayLike.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/keys.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseAssign.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_nativeKeysIn.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseKeysIn.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/keysIn.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseAssignIn.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_copyArray.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_arrayFilter.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/stubArray.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_getSymbols.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_copySymbols.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_arrayPush.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_getSymbolsIn.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_copySymbolsIn.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseGetAllKeys.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_getAllKeys.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_getAllKeysIn.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_DataView.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_Promise.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_Set.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_WeakMap.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_getTag.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_initCloneArray.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_Uint8Array.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_cloneArrayBuffer.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_cloneDataView.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_cloneRegExp.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_cloneSymbol.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_cloneTypedArray.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_initCloneByTag.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseCreate.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_initCloneObject.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseIsMap.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isMap.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseIsSet.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isSet.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseClone.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/cloneDeepWith.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isElement.js","webpack://ClassicEditor/../ckeditor5-utils/src/config.js","webpack://ClassicEditor/../ckeditor5-utils/src/spy.js","webpack://ClassicEditor/../ckeditor5-utils/src/eventinfo.js","webpack://ClassicEditor/../ckeditor5-utils/src/uid.js","webpack://ClassicEditor/../ckeditor5-utils/src/priorities.js","webpack://ClassicEditor/../ckeditor5-utils/src/emittermixin.js","webpack://ClassicEditor/../ckeditor5-utils/src/isiterable.js","webpack://ClassicEditor/../ckeditor5-utils/src/mix.js","webpack://ClassicEditor/../ckeditor5-utils/src/collection.js","webpack://ClassicEditor/../ckeditor5-core/src/plugincollection.js","webpack://ClassicEditor/../ckeditor5-utils/src/toarray.js","webpack://ClassicEditor/../ckeditor5-utils/src/translation-service.js","webpack://ClassicEditor/../ckeditor5-utils/src/locale.js","webpack://ClassicEditor/../ckeditor5-core/src/context.js","webpack://ClassicEditor/../ckeditor5-utils/src/comparearrays.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/clone.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/node.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/text.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/textproxy.js","webpack://ClassicEditor/../ckeditor5-utils/src/tomap.js","webpack://ClassicEditor/../ckeditor5-utils/src/objecttomap.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/matcher.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isSymbol.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_isKey.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/memoize.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_memoizeCapped.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_stringToPath.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_arrayMap.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseToString.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/toString.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_castPath.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/last.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_toKey.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseGet.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseSlice.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_parent.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseUnset.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/unset.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/get.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_assignMergeValue.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_createBaseFor.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseFor.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isArrayLikeObject.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_safeGet.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/toPlainObject.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseMergeDeep.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseMerge.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/identity.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_apply.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_overRest.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/constant.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseSetToString.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_shortOut.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_setToString.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseRest.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_isIterateeCall.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_createAssigner.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/merge.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseSet.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/set.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/stylesmap.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/element.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/containerelement.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/assignIn.js","webpack://ClassicEditor/../ckeditor5-utils/src/observablemixin.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/editableelement.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/rooteditableelement.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/treewalker.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/position.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/range.js","webpack://ClassicEditor/../ckeditor5-utils/src/count.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/selection.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/documentselection.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/document.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/attributeelement.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/emptyelement.js","webpack://ClassicEditor/../ckeditor5-utils/src/env.js","webpack://ClassicEditor/../ckeditor5-utils/src/keyboard.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/uielement.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/rawelement.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/documentfragment.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/downcastwriter.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/istext.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/filler.js","webpack://ClassicEditor/../ckeditor5-utils/src/fastdiff.js","webpack://ClassicEditor/../ckeditor5-utils/src/diff.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/insertat.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/remove.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/isnode.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/renderer.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/global.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/indexof.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/getancestors.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/domconverter.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/getcommonancestor.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/iswindow.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/emittermixin.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/observer/observer.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_setCacheAdd.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_setCacheHas.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_SetCache.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_arraySome.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_cacheHas.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_equalArrays.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_mapToArray.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_setToArray.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_equalByTag.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_equalObjects.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseIsEqualDeep.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_baseIsEqual.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isEqualWith.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/observer/mutationobserver.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/observer/domeventdata.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/observer/domeventobserver.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/observer/keyobserver.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/now.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/toNumber.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/debounce.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/observer/fakeselectionobserver.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/observer/selectionobserver.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/observer/focusobserver.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/observer/compositionobserver.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/observer/inputobserver.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/isrange.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/getborderwidths.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/rect.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/scroll.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/view.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/node.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/text.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/textproxy.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/nodelist.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/element.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/treewalker.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/position.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/range.js","webpack://ClassicEditor/../ckeditor5-engine/src/conversion/mapper.js","webpack://ClassicEditor/../ckeditor5-engine/src/conversion/modelconsumable.js","webpack://ClassicEditor/../ckeditor5-engine/src/conversion/downcastdispatcher.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/selection.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/liverange.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/documentselection.js","webpack://ClassicEditor/../ckeditor5-engine/src/conversion/conversionhelpers.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/cloneDeep.js","webpack://ClassicEditor/../ckeditor5-engine/src/conversion/downcasthelpers.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/utils/autoparagraphing.js","webpack://ClassicEditor/../ckeditor5-engine/src/conversion/upcasthelpers.js","webpack://ClassicEditor/../ckeditor5-engine/src/controller/editingcontroller.js","webpack://ClassicEditor/../ckeditor5-core/src/commandcollection.js","webpack://ClassicEditor/../ckeditor5-engine/src/conversion/viewconsumable.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/schema.js","webpack://ClassicEditor/../ckeditor5-engine/src/conversion/upcastdispatcher.js","webpack://ClassicEditor/../ckeditor5-engine/src/controller/datacontroller.js","webpack://ClassicEditor/../ckeditor5-engine/src/conversion/conversion.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/batch.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/operation/operation.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/documentfragment.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/operation/utils.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isEqual.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/operation/attributeoperation.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/operation/detachoperation.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/operation/moveoperation.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/operation/insertoperation.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/operation/markeroperation.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/operation/renameoperation.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/operation/rootattributeoperation.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/operation/mergeoperation.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/operation/splitoperation.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/rootelement.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/writer.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/differ.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/history.js","webpack://ClassicEditor/../ckeditor5-utils/src/unicode.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/document.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/markercollection.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/operation/nooperation.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/operation/operationfactory.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/liveposition.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/utils/insertcontent.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/utils/deletecontent.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/utils/modifyselection.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/utils/getselectedcontent.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/utils/selection-post-fixer.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/model.js","webpack://ClassicEditor/../ckeditor5-utils/src/keystrokehandler.js","webpack://ClassicEditor/../ckeditor5-core/src/editingkeystrokehandler.js","webpack://ClassicEditor/../ckeditor5-core/src/editor/editor.js","webpack://ClassicEditor/../ckeditor5-core/src/editor/utils/dataapimixin.js","webpack://ClassicEditor/../ckeditor5-core/src/editor/utils/elementapimixin.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/setdatainelement.js","webpack://ClassicEditor/../ckeditor5-engine/src/dataprocessor/basichtmlwriter.js","webpack://ClassicEditor/../ckeditor5-engine/src/dataprocessor/htmldataprocessor.js","webpack://ClassicEditor/../ckeditor5-ui/src/componentfactory.js","webpack://ClassicEditor/../ckeditor5-utils/src/focustracker.js","webpack://ClassicEditor/../ckeditor5-core/src/editor/editorui.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/placeholder.js","webpack://ClassicEditor/../ckeditor5-utils/src/elementreplacer.js","webpack://ClassicEditor/../ckeditor5-editor-classic/src/classiceditorui.js","webpack://ClassicEditor/../ckeditor5-ui/src/toolbar/normalizetoolbarconfig.js","webpack://ClassicEditor/../ckeditor5-ui/src/toolbar/enabletoolbarkeyboardfocus.js","webpack://ClassicEditor/../ckeditor5-ui/src/viewcollection.js","webpack://ClassicEditor/../ckeditor5-ui/src/template.js","webpack://ClassicEditor/../ckeditor5-ui/src/view.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/isString.js","webpack://ClassicEditor/../ckeditor5-ui/src/editorui/bodycollection.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/createelement.js","webpack://ClassicEditor/../ckeditor5-ui/src/editorui/editoruiview.js","webpack://ClassicEditor/../ckeditor5-ui/src/label/labelview.js","webpack://ClassicEditor/../ckeditor5-ui/src/editorui/boxed/boxededitoruiview.js","webpack://ClassicEditor/../ckeditor5-ui/src/editableui/editableuiview.js","webpack://ClassicEditor/../ckeditor5-ui/src/editableui/inline/inlineeditableuiview.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/tounit.js","webpack://ClassicEditor/../ckeditor5-ui/src/panel/sticky/stickypanelview.js","webpack://ClassicEditor/../ckeditor5-ui/src/focuscycler.js","webpack://ClassicEditor/../ckeditor5-ui/src/toolbar/toolbarseparatorview.js","webpack://ClassicEditor/../ckeditor5-ui/src/toolbar/toolbarlinebreakview.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/resizeobserver.js","webpack://ClassicEditor/../ckeditor5-ui/src/dropdown/dropdownpanelview.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/position.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/getpositionedancestor.js","webpack://ClassicEditor/../ckeditor5-ui/src/dropdown/dropdownview.js","webpack://ClassicEditor/../ckeditor5-ui/src/icon/iconview.js","webpack://ClassicEditor/../ckeditor5-ui/src/tooltip/tooltipview.js","webpack://ClassicEditor/../ckeditor5-ui/src/button/buttonview.js","webpack://ClassicEditor/../ckeditor5-ui/theme/icons/dropdown-arrow.svg","webpack://ClassicEditor/../ckeditor5-ui/src/dropdown/button/dropdownbuttonview.js","webpack://ClassicEditor/../ckeditor5-ui/src/list/listview.js","webpack://ClassicEditor/../ckeditor5-ui/src/list/listitemview.js","webpack://ClassicEditor/../ckeditor5-ui/src/list/listseparatorview.js","webpack://ClassicEditor/../ckeditor5-ui/src/button/switchbuttonview.js","webpack://ClassicEditor/../ckeditor5-ui/src/bindings/clickoutsidehandler.js","webpack://ClassicEditor/../ckeditor5-ui/src/dropdown/utils.js","webpack://ClassicEditor/../ckeditor5-ui/src/toolbar/toolbarview.js","webpack://ClassicEditor/../ckeditor5-ui/src/bindings/preventdefault.js","webpack://ClassicEditor/../ckeditor5-core/theme/icons/three-vertical-dots.svg","webpack://ClassicEditor/../ckeditor5-editor-classic/src/classiceditoruiview.js","webpack://ClassicEditor/../ckeditor5-editor-classic/src/classiceditor.js","webpack://ClassicEditor/../ckeditor5-core/src/editor/utils/attachtoform.js","webpack://ClassicEditor/../ckeditor5-utils/src/dom/getdatafromelement.js","webpack://ClassicEditor/../ckeditor5-core/src/plugin.js","webpack://ClassicEditor/../ckeditor5-clipboard/src/datatransfer.js","webpack://ClassicEditor/../ckeditor5-clipboard/src/clipboardobserver.js","webpack://ClassicEditor/../ckeditor5-clipboard/src/pasteplaintext.js","webpack://ClassicEditor/../ckeditor5-clipboard/src/utils/viewtoplaintext.js","webpack://ClassicEditor/../ckeditor5-clipboard/src/clipboard.js","webpack://ClassicEditor/../ckeditor5-clipboard/src/utils/plaintexttohtml.js","webpack://ClassicEditor/../ckeditor5-clipboard/src/utils/normalizeclipboarddata.js","webpack://ClassicEditor/../ckeditor5-core/src/command.js","webpack://ClassicEditor/../ckeditor5-enter/src/utils.js","webpack://ClassicEditor/../ckeditor5-enter/src/entercommand.js","webpack://ClassicEditor/../ckeditor5-enter/src/enterobserver.js","webpack://ClassicEditor/../ckeditor5-enter/src/enter.js","webpack://ClassicEditor/../ckeditor5-enter/src/shiftentercommand.js","webpack://ClassicEditor/../ckeditor5-enter/src/shiftenter.js","webpack://ClassicEditor/../ckeditor5-select-all/src/selectallcommand.js","webpack://ClassicEditor/../ckeditor5-select-all/src/selectallediting.js","webpack://ClassicEditor/../ckeditor5-select-all/src/selectallui.js","webpack://ClassicEditor/../ckeditor5-select-all/theme/icons/select-all.svg","webpack://ClassicEditor/../ckeditor5-select-all/src/selectall.js","webpack://ClassicEditor/../ckeditor5-typing/src/utils/changebuffer.js","webpack://ClassicEditor/../ckeditor5-typing/src/inputcommand.js","webpack://ClassicEditor/../ckeditor5-typing/src/utils/injectunsafekeystrokeshandling.js","webpack://ClassicEditor/../ckeditor5-typing/src/utils/utils.js","webpack://ClassicEditor/../ckeditor5-utils/src/difftochanges.js","webpack://ClassicEditor/../ckeditor5-typing/src/utils/injecttypingmutationshandling.js","webpack://ClassicEditor/../ckeditor5-typing/src/input.js","webpack://ClassicEditor/../ckeditor5-typing/src/deletecommand.js","webpack://ClassicEditor/../ckeditor5-typing/src/deleteobserver.js","webpack://ClassicEditor/../ckeditor5-typing/src/delete.js","webpack://ClassicEditor/../ckeditor5-typing/src/typing.js","webpack://ClassicEditor/../ckeditor5-engine/src/model/operation/transform.js","webpack://ClassicEditor/../ckeditor5-undo/src/basecommand.js","webpack://ClassicEditor/../ckeditor5-undo/src/undocommand.js","webpack://ClassicEditor/../ckeditor5-undo/src/redocommand.js","webpack://ClassicEditor/../ckeditor5-undo/src/undoediting.js","webpack://ClassicEditor/../ckeditor5-undo/theme/icons/undo.svg","webpack://ClassicEditor/../ckeditor5-undo/theme/icons/redo.svg","webpack://ClassicEditor/../ckeditor5-undo/src/undoui.js","webpack://ClassicEditor/../ckeditor5-undo/src/undo.js","webpack://ClassicEditor/../ckeditor5-core/src/contextplugin.js","webpack://ClassicEditor/../ckeditor5-core/src/pendingactions.js","webpack://ClassicEditor/../ckeditor5-upload/src/filereader.js","webpack://ClassicEditor/../ckeditor5-upload/src/filerepository.js","webpack://ClassicEditor/../ckeditor5-adapter-ckfinder/src/utils.js","webpack://ClassicEditor/../ckeditor5-adapter-ckfinder/src/uploadadapter.js","webpack://ClassicEditor/../ckeditor5-utils/src/first.js","webpack://ClassicEditor/../ckeditor5-autoformat/src/blockautoformatediting.js","webpack://ClassicEditor/../ckeditor5-autoformat/src/inlineautoformatediting.js","webpack://ClassicEditor/../ckeditor5-autoformat/src/autoformat.js","webpack://ClassicEditor/../ckeditor5-basic-styles/src/attributecommand.js","webpack://ClassicEditor/../ckeditor5-basic-styles/src/bold/boldediting.js","webpack://ClassicEditor/../ckeditor5-basic-styles/src/bold/boldui.js","webpack://ClassicEditor/../ckeditor5-basic-styles/theme/icons/bold.svg","webpack://ClassicEditor/../ckeditor5-basic-styles/src/italic/italicediting.js","webpack://ClassicEditor/../ckeditor5-basic-styles/src/italic/italicui.js","webpack://ClassicEditor/../ckeditor5-basic-styles/theme/icons/italic.svg","webpack://ClassicEditor/../ckeditor5-block-quote/src/blockquotecommand.js","webpack://ClassicEditor/../ckeditor5-block-quote/src/blockquoteediting.js","webpack://ClassicEditor/../ckeditor5-block-quote/src/blockquoteui.js","webpack://ClassicEditor/../ckeditor5-core/theme/icons/quote.svg","webpack://ClassicEditor/../ckeditor5-ckfinder/src/ckfinderui.js","webpack://ClassicEditor/../ckeditor5-ckfinder/theme/icons/browse-files.svg","webpack://ClassicEditor/../ckeditor5-image/src/image/imageloadobserver.js","webpack://ClassicEditor/../ckeditor5-widget/src/highlightstack.js","webpack://ClassicEditor/../ckeditor5-ui/src/panel/balloon/balloonpanelview.js","webpack://ClassicEditor/../ckeditor5-widget/src/widgettypearound/utils.js","webpack://ClassicEditor/../ckeditor5-widget/src/utils.js","webpack://ClassicEditor/../ckeditor5-widget/theme/icons/drag-handle.svg","webpack://ClassicEditor/../ckeditor5-image/src/image/utils.js","webpack://ClassicEditor/../ckeditor5-image/src/image/converters.js","webpack://ClassicEditor/../ckeditor5-image/src/image/imageinsertcommand.js","webpack://ClassicEditor/../ckeditor5-image/src/image/imageediting.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/observer/mouseobserver.js","webpack://ClassicEditor/../ckeditor5-typing/src/twostepcaretmovement.js","webpack://ClassicEditor/../ckeditor5-typing/src/utils/findattributerange.js","webpack://ClassicEditor/../ckeditor5-link/src/utils/automaticdecorators.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_castSlice.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_hasUnicode.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_asciiToArray.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_unicodeToArray.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_stringToArray.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/_createCaseFirst.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/upperFirst.js","webpack://ClassicEditor/../ckeditor5-link/src/utils.js","webpack://ClassicEditor/../ckeditor5-link/src/linkcommand.js","webpack://ClassicEditor/../ckeditor5-link/src/unlinkcommand.js","webpack://ClassicEditor/../ckeditor5-link/src/utils/manualdecorator.js","webpack://ClassicEditor/../ckeditor5-link/src/linkediting.js","webpack://ClassicEditor/../ckeditor5-typing/src/utils/inlinehighlight.js","webpack://ClassicEditor/../ckeditor5-ui/src/notification/notification.js","webpack://ClassicEditor/../ckeditor5-ckfinder/src/ckfindercommand.js","webpack://ClassicEditor/../ckeditor5-ckfinder/src/ckfinderediting.js","webpack://ClassicEditor/../ckeditor-cloud-services-core/src/uploadgateway/fileuploader.js","webpack://ClassicEditor/../ckeditor-cloud-services-core/src/token/token.js","webpack://ClassicEditor/../ckeditor5-cloud-services/src/cloudservices.js","webpack://ClassicEditor/../ckeditor5-easy-image/src/cloudservicesuploadadapter.js","webpack://ClassicEditor/../ckeditor-cloud-services-core/src/uploadgateway/uploadgateway.js","webpack://ClassicEditor/../ckeditor5-widget/src/widgettypearound/widgettypearound.js","webpack://ClassicEditor/../ckeditor5-widget/theme/icons/return-arrow.svg","webpack://ClassicEditor/../ckeditor5-widget/src/verticalnavigation.js","webpack://ClassicEditor/../ckeditor5-widget/src/widget.js","webpack://ClassicEditor/../ckeditor5-image/src/imagetextalternative/imagetextalternativecommand.js","webpack://ClassicEditor/../ckeditor5-image/src/imagetextalternative/imagetextalternativeediting.js","webpack://ClassicEditor/../ckeditor5-ui/src/labeledfield/labeledfieldview.js","webpack://ClassicEditor/../ckeditor5-ui/src/inputtext/inputtextview.js","webpack://ClassicEditor/../ckeditor5-ui/src/labeledfield/utils.js","webpack://ClassicEditor/../ckeditor5-ui/src/bindings/injectcsstransitiondisabler.js","webpack://ClassicEditor/../ckeditor5-ui/src/bindings/submithandler.js","webpack://ClassicEditor/../ckeditor5-core/theme/icons/check.svg","webpack://ClassicEditor/../ckeditor5-core/theme/icons/cancel.svg","webpack://ClassicEditor/../ckeditor5-image/src/imagetextalternative/ui/textalternativeformview.js","webpack://ClassicEditor/../ckeditor5-ui/src/panel/balloon/contextualballoon.js","webpack://ClassicEditor/../ckeditor5-ui/theme/icons/previous-arrow.svg","webpack://ClassicEditor/../ckeditor5-ui/theme/icons/next-arrow.svg","webpack://ClassicEditor/../ckeditor5-image/src/image/ui/utils.js","webpack://ClassicEditor/../ckeditor5-image/src/imagetextalternative/imagetextalternativeui.js","webpack://ClassicEditor/../ckeditor5-core/theme/icons/low-vision.svg","webpack://ClassicEditor/../ckeditor5-image/src/imagetextalternative.js","webpack://ClassicEditor/../ckeditor5-image/src/image.js","webpack://ClassicEditor/../ckeditor5-upload/src/ui/filedialogbuttonview.js","webpack://ClassicEditor/../ckeditor5-image/src/imageupload/utils.js","webpack://ClassicEditor/../ckeditor5-image/src/imageupload/imageuploadui.js","webpack://ClassicEditor/../ckeditor5-core/theme/icons/image.svg","webpack://ClassicEditor/../ckeditor5-image/src/imageupload/imageuploadprogress.js","webpack://ClassicEditor/../ckeditor5-image/theme/icons/image_placeholder.svg","webpack://ClassicEditor/../ckeditor5-engine/src/view/upcastwriter.js","webpack://ClassicEditor/../ckeditor5-image/src/imageupload/imageuploadcommand.js","webpack://ClassicEditor/../ckeditor5-image/src/imageupload/imageuploadediting.js","webpack://ClassicEditor/../ckeditor5-image/src/imageupload.js","webpack://ClassicEditor/../ckeditor5-paragraph/src/paragraphcommand.js","webpack://ClassicEditor/../ckeditor5-paragraph/src/insertparagraphcommand.js","webpack://ClassicEditor/../ckeditor5-paragraph/src/paragraph.js","webpack://ClassicEditor/../ckeditor5-heading/src/headingcommand.js","webpack://ClassicEditor/../ckeditor5-heading/src/headingediting.js","webpack://ClassicEditor/../ckeditor5-ui/src/model.js","webpack://ClassicEditor/../ckeditor5-heading/src/headingui.js","webpack://ClassicEditor/../ckeditor5-heading/src/utils.js","webpack://ClassicEditor/../ckeditor5-image/src/imagecaption/utils.js","webpack://ClassicEditor/../ckeditor5-image/src/imagecaption/imagecaptionediting.js","webpack://ClassicEditor/../ckeditor5-image/src/imagestyle/imagestylecommand.js","webpack://ClassicEditor/../ckeditor5-image/src/imagestyle/converters.js","webpack://ClassicEditor/../ckeditor5-core/theme/icons/object-full-width.svg","webpack://ClassicEditor/../ckeditor5-core/theme/icons/object-left.svg","webpack://ClassicEditor/../ckeditor5-core/theme/icons/object-center.svg","webpack://ClassicEditor/../ckeditor5-core/theme/icons/object-right.svg","webpack://ClassicEditor/../ckeditor5-image/src/imagestyle/utils.js","webpack://ClassicEditor/../ckeditor5-image/src/imagestyle/imagestyleediting.js","webpack://ClassicEditor/../ckeditor5-image/src/imagestyle/imagestyleui.js","webpack://ClassicEditor/../ckeditor5-widget/src/widgettoolbarrepository.js","webpack://ClassicEditor/../ckeditor5-core/src/multicommand.js","webpack://ClassicEditor/../ckeditor5-indent/src/indentediting.js","webpack://ClassicEditor/../ckeditor5-indent/theme/icons/indent.svg","webpack://ClassicEditor/../ckeditor5-indent/theme/icons/outdent.svg","webpack://ClassicEditor/../ckeditor5-indent/src/indentui.js","webpack://ClassicEditor/../ckeditor5-engine/src/view/observer/clickobserver.js","webpack://ClassicEditor/../ckeditor5-link/src/ui/linkformview.js","webpack://ClassicEditor/../ckeditor5-link/src/ui/linkactionsview.js","webpack://ClassicEditor/../ckeditor5-link/theme/icons/unlink.svg","webpack://ClassicEditor/../ckeditor5-core/theme/icons/pencil.svg","webpack://ClassicEditor/../ckeditor5-link/src/linkui.js","webpack://ClassicEditor/../ckeditor5-link/theme/icons/link.svg","webpack://ClassicEditor/../ckeditor5-typing/src/utils/getlasttextline.js","webpack://ClassicEditor/../ckeditor5-typing/src/textwatcher.js","webpack://ClassicEditor/../ckeditor5-link/src/autolink.js","webpack://ClassicEditor/../ckeditor5-list/src/listcommand.js","webpack://ClassicEditor/../ckeditor5-list/src/indentcommand.js","webpack://ClassicEditor/../ckeditor5-list/src/utils.js","webpack://ClassicEditor/../ckeditor5-list/src/converters.js","webpack://ClassicEditor/../ckeditor5-list/src/listediting.js","webpack://ClassicEditor/../ckeditor5-list/src/listui.js","webpack://ClassicEditor/../ckeditor5-list/theme/icons/numberedlist.svg","webpack://ClassicEditor/../ckeditor5-list/theme/icons/bulletedlist.svg","webpack://ClassicEditor/../ckeditor5-media-embed/src/converters.js","webpack://ClassicEditor/../ckeditor5-media-embed/src/utils.js","webpack://ClassicEditor/../ckeditor5-media-embed/src/mediaembedcommand.js","webpack://ClassicEditor/../ckeditor5-media-embed/src/mediaregistry.js","webpack://ClassicEditor/../ckeditor5-media-embed/theme/icons/media-placeholder.svg","webpack://ClassicEditor/../ckeditor5-media-embed/src/mediaembedediting.js","webpack://ClassicEditor/../ckeditor5-media-embed/src/automediaembed.js","webpack://ClassicEditor/../ckeditor5-media-embed/src/ui/mediaformview.js","webpack://ClassicEditor/../ckeditor5-media-embed/src/mediaembedui.js","webpack://ClassicEditor/../ckeditor5-media-embed/theme/icons/media.svg","webpack://ClassicEditor/../ckeditor5-paste-from-office/src/filters/list.js","webpack://ClassicEditor/../ckeditor5-paste-from-office/src/normalizers/googledocsnormalizer.js","webpack://ClassicEditor/../ckeditor5-paste-from-office/src/filters/removeboldwrapper.js","webpack://ClassicEditor/../ckeditor5-paste-from-office/src/filters/space.js","webpack://ClassicEditor/../ckeditor5-paste-from-office/src/filters/parse.js","webpack://ClassicEditor/../ckeditor5-paste-from-office/src/filters/image.js","webpack://ClassicEditor/../ckeditor5-paste-from-office/src/normalizers/mswordnormalizer.js","webpack://ClassicEditor/../ckeditor5-table/src/utils/common.js","webpack://ClassicEditor/../ckeditor5-table/src/converters/upcasttable.js","webpack://ClassicEditor/../ckeditor5-table/src/tablewalker.js","webpack://ClassicEditor/../ckeditor5-table/src/converters/downcast.js","webpack://ClassicEditor/../ckeditor5-table/src/commands/inserttablecommand.js","webpack://ClassicEditor/../ckeditor5-table/src/utils/selection.js","webpack://ClassicEditor/../ckeditor5-table/src/commands/insertrowcommand.js","webpack://ClassicEditor/../ckeditor5-table/src/commands/insertcolumncommand.js","webpack://ClassicEditor/../ckeditor5-table/src/commands/splitcellcommand.js","webpack://ClassicEditor/../ckeditor5-table/src/utils/structure.js","webpack://ClassicEditor/../ckeditor5-table/src/commands/mergecellcommand.js","webpack://ClassicEditor/../ckeditor5-table/src/commands/removerowcommand.js","webpack://ClassicEditor/../ckeditor5-table/src/commands/removecolumncommand.js","webpack://ClassicEditor/../ckeditor5-table/src/commands/setheaderrowcommand.js","webpack://ClassicEditor/../ckeditor5-table/src/commands/setheadercolumncommand.js","webpack://ClassicEditor/../ckeditor5-table/src/tableutils.js","webpack://ClassicEditor/../ckeditor5-table/src/commands/mergecellscommand.js","webpack://ClassicEditor/../ckeditor5-table/src/commands/selectrowcommand.js","webpack://ClassicEditor/../ckeditor5-table/src/commands/selectcolumncommand.js","webpack://ClassicEditor/../ckeditor5-table/src/converters/table-layout-post-fixer.js","webpack://ClassicEditor/../ckeditor5-table/src/converters/table-cell-paragraph-post-fixer.js","webpack://ClassicEditor/../ckeditor5-table/src/converters/table-cell-refresh-post-fixer.js","webpack://ClassicEditor/../ckeditor5-table/src/converters/table-heading-rows-refresh-post-fixer.js","webpack://ClassicEditor/../ckeditor5-table/src/tableediting.js","webpack://ClassicEditor/../ckeditor5-ui/src/dropdown/button/splitbuttonview.js","webpack://ClassicEditor/../ckeditor5-table/src/ui/inserttableview.js","webpack://ClassicEditor/../ckeditor5-table/src/tableui.js","webpack://ClassicEditor/../ckeditor5-table/theme/icons/table.svg","webpack://ClassicEditor/../ckeditor5-table/theme/icons/table-column.svg","webpack://ClassicEditor/../ckeditor5-table/theme/icons/table-row.svg","webpack://ClassicEditor/../ckeditor5-table/theme/icons/table-merge-cell.svg","webpack://ClassicEditor/../ckeditor5-table/src/tableselection.js","webpack://ClassicEditor/../ckeditor5-table/src/tableclipboard.js","webpack://ClassicEditor/../ckeditor5-table/src/tablekeyboard.js","webpack://ClassicEditor/../ckeditor5-table/src/tablemouse/mouseeventsobserver.js","webpack://ClassicEditor/../ckeditor5-table/src/tablemouse.js","webpack://ClassicEditor/../ckeditor5-table/src/utils/ui/widget.js","webpack://ClassicEditor//Users/pomek/Projects/ckeditor/ckeditor5/node_modules/lodash-es/escapeRegExp.js","webpack://ClassicEditor/../ckeditor5-typing/src/texttransformation.js","webpack://ClassicEditor/./src/ckeditor.js","webpack://ClassicEditor/../ckeditor5-essentials/src/essentials.js","webpack://ClassicEditor/../ckeditor5-basic-styles/src/bold.js","webpack://ClassicEditor/../ckeditor5-basic-styles/src/italic.js","webpack://ClassicEditor/../ckeditor5-block-quote/src/blockquote.js","webpack://ClassicEditor/../ckeditor5-ckfinder/src/ckfinder.js","webpack://ClassicEditor/../ckeditor5-easy-image/src/easyimage.js","webpack://ClassicEditor/../ckeditor5-heading/src/heading.js","webpack://ClassicEditor/../ckeditor5-image/src/imagecaption.js","webpack://ClassicEditor/../ckeditor5-image/src/imagestyle.js","webpack://ClassicEditor/../ckeditor5-image/src/imagetoolbar.js","webpack://ClassicEditor/../ckeditor5-indent/src/indent.js","webpack://ClassicEditor/../ckeditor5-link/src/link.js","webpack://ClassicEditor/../ckeditor5-list/src/list.js","webpack://ClassicEditor/../ckeditor5-media-embed/src/mediaembed.js","webpack://ClassicEditor/../ckeditor5-paste-from-office/src/pastefromoffice.js","webpack://ClassicEditor/../ckeditor5-table/src/table.js","webpack://ClassicEditor/../ckeditor5-table/src/tabletoolbar.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","CKEditorError","Error","errorName","context","data","super","JSON","stringify","getLinkToDocumentationMessage","this","type","err","is","error","message","stack","logWarning","console","warn","formatConsoleArguments","logError","documentationMessage","memo","isOldIE","Boolean","document","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","length","modulesToDom","list","options","idCountMap","identifiers","item","id","base","count","concat","index","obj","css","media","sourceMap","references","updater","push","addStyle","insertStyleElement","style","createElement","attributes","nonce","keys","forEach","setAttribute","insert","appendChild","textStore","replaceText","replacement","filter","join","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","btoa","unescape","encodeURIComponent","firstChild","singleton","singletonCounter","update","styleIndex","parentNode","removeStyleElement","newObj","lastIdentifiers","newList","toString","newLastIdentifiers","_i","_index","splice","freeSelf","self","Function","freeExports","nodeType","freeModule","Buffer","undefined","isBuffer","freeProcess","process","nodeUtil","types","require","binding","windowOrGlobal","global","CKEDITOR_VERSION","api","content","default","locals","freeGlobal","allocUnsafe","buffer","isDeep","slice","constructor","copy","originalModule","webpackPolyfill","children","g","objectProto","nativeObjectToString","symToStringTag","isOwn","tag","unmasked","func","transform","arg","getPrototypeOf","funcProto","funcToString","objectCtorString","proto","Ctor","__data__","size","other","array","Array","pop","ListCache","entries","clear","entry","set","has","uid","maskSrcKey","exec","IE_PROTO","reIsHostCtor","reIsNative","RegExp","replace","test","Hash","map","MapCache","pairs","LARGE_ARRAY_SIZE","Stack","iteratee","objValue","source","props","customizer","isNew","newValue","propertyIsEnumerable","arguments","isArray","reIsUint","typedArrayTags","nodeIsTypedArray","isTypedArray","inherited","isArr","isArg","isBuff","isType","skipIndexes","String","isProto","predicate","resIndex","nativeGetSymbols","getOwnPropertySymbols","symbol","values","offset","keysFunc","symbolsFunc","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ArrayBuffer","resolve","ctorString","input","Uint8Array","arrayBuffer","byteLength","dataView","byteOffset","reFlags","regexp","lastIndex","symbolProto","symbolValueOf","valueOf","typedArray","objectCreate","nodeIsMap","isMap","nodeIsSet","isSet","cloneableTags","baseClone","bitmask","isFlat","isFull","isFunc","stacked","subValue","add","keysIn","configurations","defaultConfigurations","_config","cloneConfig","_setObjectToTarget","_setToTarget","_getFromSource","isDefine","parts","split","part","configuration","leaveDOMReferences","spy","called","path","stop","off","HEX_NUMBERS","fill","val","r1","Math","random","r2","r3","r4","priority","normal","highest","high","low","lowest","_listeningTo","_emitterId","event","callback","listenTo","wasFired","args","stopListening","emitter","emitterInfo","eventCallbacks","emitters","_getEmitterId","_setEmitterId","emitterId","callbacks","eventName","events","getEvents","childEventName","newEventNodes","childEvents","substr","lastIndexOf","node","createEventNamespace","lists","getCallbacksListsForNamespace","callbackDefinition","added","removeCallback","indexOf","eventOrInfo","eventInfo","getCallbacksForEvent","_events","callbackArgs","from","apply","_delegations","destinations","passAllDestinations","fireDelegatedEvents","return","rethrowUnexpectedError","to","nameOrFunction","Map","delete","eventNode","callbacksLists","childCallbacksLists","fireArgs","delegatedInfo","fire","isIterable","iterator","mix","baseClass","mixins","mixin","getOwnPropertyNames","sourceDescriptor","getOwnPropertyDescriptor","initialItemsOrOptions","hasInitialItems","_items","_itemMap","_idProperty","idProperty","_bindToExternalToInternalMap","WeakMap","_bindToInternalToExternalMap","_skippedIndexesFromExternal","_getItemIdBeforeAdding","addMany","items","itemId","currentItemIndex","removed","idOrIndex","itemOrId","subject","_remove","ctx","find","_bindToCollection","removedItems","externalCollection","as","Class","_setUpBindToBinding","using","callbackOrProperty","addItem","evt","externalItem","isExternalBoundToThis","externalItemBound","finalIndex","skipped","getIndex","reduce","itemDoesNotExist","availablePlugins","contextPlugins","_context","_plugins","_availablePlugins","PluginConstructor","pluginName","_contextPlugins","pluginInstance","plugin","plugins","removePlugins","that","loading","Set","loaded","pluginConstructors","mapToAvailableConstructors","removePluginConstructors","missingPlugins","pluginNameOrConstructor","getPluginConstructor","getMissingPluginNames","errorId","Promise","reject","loadPlugin","then","initPlugins","includes","requires","RequiredPluginConstructorOrName","RequiredPluginConstructor","isContextPlugin","requiredBy","_add","instantiatePlugin","catch","loadedPlugins","method","promise","PluginConstructorOrName","promises","destroy","plugin1","plugin2","toArray","_translate","language","quantity","numberOfLanguages","CKEDITOR_TRANSLATIONS","messageId","string","dictionary","hasTranslation","plural","getPluralForm","pluralFormIndex","Number","RTL_LANGUAGE_CODES","uiLanguage","contentLanguage","uiLanguageDirection","getLanguageDirection","contentLanguageDirection","_t","match","interpolateString","languageCode","config","defaultConfig","builtinPlugins","languageConfig","locale","ui","editors","_contextOwner","Plugin","init","editor","isContextOwner","names","compareArrays","a","b","minLen","min","parent","pos","getChildIndex","getChild","unshift","includeSelf","parentFirst","ancestors","ancestorsA","getAncestors","ancestorsB","thisPath","getPath","nodePath","isBefore","_removeChildren","_fireChange","json","_textData","otherNode","textNode","offsetInText","substring","toMap","objectToMap","Matcher","pattern","_patterns","classes","element","singleElement","isElementMatching","results","matchName","patterns","hasAttribute","attribute","getAttribute","matchAttributes","getClassNames","hasClass","matchClasses","styles","hasStyle","getStyle","matchStyles","reIsDeepProp","reIsPlainProp","memoize","resolver","TypeError","memoized","cache","Cache","rePropName","reEscapeChar","charCodeAt","number","quote","subString","symbolToString","baseToString","start","end","defaultValue","fromRight","iterable","srcIndex","mergeFunc","srcValue","isCommon","isTyped","baseMerge","thisArg","nativeMax","max","otherArgs","nativeNow","Date","now","lastCalled","stamp","remaining","assigner","sources","guard","nested","styleProcessor","_styles","_styleProcessor","isEmpty","getStyleNames","inlineStyle","parsedStyles","stylesString","quoteType","propertyNameStart","propertyValueStart","propertyName","stylesMap","charAt","char","propertyValue","trim","parseInlineStyles","toNormalizedForm","propertyDescriptor","getReducedForm","nameOrObject","valueOrObject","toPath","_cleanEmptyObjectsOnPath","getNormalized","_getStylesEntries","arr","sort","parsed","pathParts","parentPath","parentObject","_normalizers","_extractors","_reducers","_consumables","appendStyleValue","normalizer","extractor","normalizedValue","reducer","callbackOrPath","shorthandName","styleNames","_mapStyleNames","alsoName","stylesObject","nameOrPath","valueToSet","attrs","_attrs","parseAttributes","_children","_insertChild","_classes","classString","parseClasses","stylesProcessor","setTo","_customProperties","otherElement","className","getAsString","matcher","deep","childrenClone","child","getChildren","_clone","cloned","getFillerOffset","childCount","nodes","normalize","howMany","classesSet","classesString","classArray","lastChild","observablePropertiesSymbol","boundObservablesSymbol","boundPropertiesSymbol","ObservableMixin","initObservable","properties","configurable","oldValue","bindProperties","isStringArray","boundProperties","bindings","bindTo","toMany","bindToMany","_observable","_bindProperties","_to","_bindings","unbindProperties","boundObservables","toObservable","toProperty","toProperties","toPropertyBindings","boundObservable","methodName","originalMethod","on","observable","parsedArgs","lastObservable","parseBindToArgs","bindingsKeys","numberOfBindings","updateBoundObservableProperty","chain","toPropertyName","bindingsToObservable","updateBoundObservables","updateBindToBound","observables","observableAndAttributePairs","getBindingTargets","every","isFocused","selection","editableElement","rootNameSymbol","rootName","getCustomProperty","_setCustomProperty","boundaries","startPosition","direction","position","_createAt","singleCharacters","shallow","ignoreElementEnd","_boundaryStartParent","_boundaryEndParent","skip","done","prevPosition","next","_next","_previous","clone","previousPosition","isAtEnd","_createAfter","_formatReturnValue","charactersCount","textLength","textProxy","isAtStart","_createBefore","startOffset","nextPosition","isEqual","endOffset","editable","shift","shifted","treeWalker","otherPosition","compareWith","otherPath","itemOrPosition","getLastMatchingPosition","enlargeTrimSkip","isAfter","nodeAfterStart","nodeAfter","nodeBeforeEnd","nodeBefore","otherRange","loose","isCollapsed","containsStart","containsPosition","containsEnd","ranges","isIntersecting","commonRangeStart","commonRangeEnd","getCommonAncestor","nextSibling","previousSibling","startElement","endElement","getShiftedBy","_createFromParentsAndOffsets","offsetSize","_createFromPositionAndShift","_","selectable","placeOrOffset","_ranges","_lastRangeBackward","_isFake","_fakeSelectionLabel","range","rangeCount","anchor","first","last","firstRange","getFirstRange","lastRange","getLastRange","otherSelection","isFake","fakeSelectionLabel","focus","thisRange","found","isBackward","numOfRangesA","getRanges","rangeA","getTrimmed","rangeB","getContainedElement","_setRanges","_setFakeOptions","fake","label","backward","_createIn","_createOn","newFocus","_addRange","newRanges","isLastBackward","_pushRange","storedRange","addedRange","intersectingRange","_selection","delegate","getFirstPosition","getLastPosition","getSelectedElement","isSimilar","setFocus","roots","_postFixers","postFixer","writer","wasFixed","_priority","_id","_clonesGroup","nonUiChildrenCount","DEFAULT_PRIORITY","userAgent","navigator","toLowerCase","isMac","isGecko","isSafari","isAndroid","isBlink","features","isRegExpUnicodePropertySupported","isSupported","search","macGlyphsToModifiers","modifiersToMacGlyphs","keyCodes","arrowleft","arrowup","arrowright","arrowdown","backspace","enter","space","esc","tab","ctrl","cmd","alt","code","letter","fromCharCode","generateKnownKeyCodes","getCode","keyCode","altKey","ctrlKey","shiftKey","parseKeystroke","keystroke","splitKeystrokeText","sum","getEnvKeystrokeText","isArrowKeyCode","getLocalizedArrowKeyCodeDirection","isLtrContent","isForwardArrowKeyCode","localizedKeyCodeDirection","domDocument","toDomElement","domElement","getAttributeKeys","injectUiElementHandling","view","domConverter","domSelection","domTarget","ownerDocument","defaultView","getSelection","domSelectionCollapsed","getRangeAt","collapsed","domParent","focusNode","domOffset","focusOffset","viewPosition","domPositionToView","jumpedOverAnyUiElement","nextViewPosition","newDomPosition","viewPositionToDom","collapse","extend","jumpOverUiElement","_cloneGroups","_setTo","_setFocus","attributeElement","_document","renderFunction","uiElement","render","rawElement","_setAttribute","_removeAttribute","_addClass","_removeClass","_setStyle","_removeStyle","_removeCustomProperty","positionOrRange","_breakAttributes","_breakAttributesRange","newElement","sourceRange","targetPosition","move","positionOffset","positionParent","_removeFromClonedElementsGroup","mergeAttributes","mergeTextNodes","_appendChild","prev","newPosition","validateNodesToInsert","errorContext","validNodesToInsert","some","validNode","container","getParentContainer","insertionPosition","_addToClonedElementsGroup","endPosition","rangeOrItem","validateRangeContainer","breakStart","breakEnd","parentContainer","mergePosition","walker","getWalker","current","rangeToRemove","parentElement","ancestor","countBefore","_wrapPosition","viewSelection","setSelection","_wrapRange","newRange","_unwrapChildren","newName","viewElement","getAttributes","groupName","wrapElement","wrapPositions","isText","isAttribute","isUI","isRaw","_wrapAttributeElement","shouldABeOutsideB","newAttribute","_wrapChildren","offsetChange","unwrapElement","unwrapPositions","unwrapped","_unwrapAttributeElement","movePositionToTextNode","breakTextNode","fakePosition","createAttributeElement","POSITIVE_INFINITY","wrapRange","wrap","wrapper","toWrap","canBeJoined","setStyle","addClass","toUnwrap","removeClass","removeStyle","forceSplitText","rangeStart","rangeEnd","isContainerOrFragment","offsetAfter","clonedNode","nodesToMove","group","getIdentity","textToMove","_data","t1","t2","nodeBeforeLength","startContainer","endContainer","NBSP_FILLER","BR_FILLER","fillerBr","dataset","ckeFiller","INLINE_FILLER","inlineFiller","startsWithFiller","domNode","isInlineFiller","domText","getDataWithoutFiller","jumpOverInlineFiller","fastDiff","cmp","atomicChanges","changeIndexes","arr1","arr2","firstIndex","findFirstDifferenceIndex","lastIndexOld","lastIndexNew","oldArrayReversed","cutAndReverse","newArrayReversed","findChangeBoundaryIndexes","newLength","changeIndexesToAtomicChanges","newArray","changeIndexesToChanges","reverse","aLength","bLength","_insert","_delete","tmp","delta","es","fp","snake","k","y1","y2","dir","y","x","nodeToInsert","isNode","Document","Node","domDocuments","markedAttributes","markedChildren","markedTexts","_inlineFiller","_fakeSelectionContainer","mapViewToDom","inlineFillerPosition","_updateChildrenMappings","_isSelectionInInlineFiller","_removeInlineFiller","_getInlineFillerPosition","_needsInlineFillerAtSelection","_updateAttrs","_updateChildren","_updateText","fillerDomPosition","addInlineFiller","_updateSelection","_updateFocus","actualDomChildren","expectedDomChildren","viewChildrenToDom","withChildren","diff","_diffNodeLists","actions","_findReplaceActions","counter","equal","action","insertIndex","deleteIndex","viewChild","_updateElementMappings","unbindDomElement","bindElements","firstPos","selectionPosition","domFillerNode","selectionParent","selectionOffset","findAncestor","isEditable","viewText","findCorrespondingDomText","newDomText","viewToDom","actualText","expectedText","filler","insertData","deleteData","domAttrKeys","attr","viewAttrKeys","nodesToUnbind","_markDescendantTextToSync","domToView","domChildList","fakeSelectionContainer","childList","filterOutFakeSelectionContainer","actualDom","expectedDom","newActions","actualSlice","expectedSlice","areSimilar","viewNode","_removeDomSelection","_removeFakeSelection","domRoot","_updateFakeSelection","_updateDomSelection","assign","top","left","width","textContent","createFakeSelectionContainer","bindFakeSelection","_fakeSelectionNeedsUpdate","domRange","createRange","removeAllRanges","selectNodeContents","addRange","_domSelectionNeedsUpdate","ELEMENT_NODE","childAtOffset","tagName","fixGeckoSelectionAfterBr","isDomSelectionCorrect","oldViewSelection","domSelectionToView","anchorNode","contains","doc","activeDomElement","activeElement","mapDomToView","domParentOrArray","nodeAfterFiller","fillerNode","node1","node2","COMMENT_NODE","actualDomChild","expectedDomChild","isBlockFiller","DOCUMENT_NODE","BR_FILLER_REF","blockFillerMode","preElements","blockElements","_blockFiller","_domToViewMapping","_viewToDomMapping","_fakeSelectionMapping","_rawContentElementMatcher","_encounteredRawContentDomNodes","WeakSet","viewDocumentSelection","domFragment","viewFragment","textData","_processDataFromViewText","createDocumentFragment","bindDocumentFragments","createElementNS","fillerPositionOffset","childView","viewRange","domStart","domEnd","setStart","setEnd","viewParent","domBefore","domAfter","hostElement","getHostViewElement","_processDataFromDomText","isComment","isDocumentFragment","viewName","keepOriginalCase","innerHTML","domChildrenToView","domChild","fakeSelectionToView","isDomSelectionBackward","viewRanges","domRangeToView","viewStart","viewEnd","findCorrespondingViewText","viewBefore","domElementOrDocumentFragment","isElement","documentFragmentOrElement","viewEditable","domEditable","scrollX","scrollY","scrollPositions","forEachDomNodeAncestor","scrollLeft","scrollTop","scrollTo","DOCUMENT_FRAGMENT_NODE","isEqualNode","hasBlockParent","isNbspBlockFiller","anchorOffset","detach","_isDomSelectionPositionCorrect","prevNode","_getTouchingViewTextNode","_nodeEndsWithSpace","nextNode","_hasDomParentOfType","_getTouchingInlineDomNode","shouldLeftTrim","_checkShouldLeftTrimDomText","shouldRightTrim","_checkShouldRightTrimDomText","Text","getNext","topmostParent","createTreeWalker","NodeFilter","SHOW_TEXT","SHOW_ELEMENT","acceptNode","FILTER_ACCEPT","FILTER_SKIP","currentNode","touchingNode","lca","nodeA","nodeB","boundaryParent","parents","isWindow","stringifiedObject","rest","proxy","_getProxyEmitter","attach","listeningEmitter","listenedToEmitterId","getNodeUID","_domNode","_domListeners","listenerOptions","capture","useCapture","passive","usePassive","domListener","_createDomListener","addEventListener","removeListener","domEvt","removeEventListener","Observer","isEnabled","disable","matches","SetCache","equalFunc","isPartial","arrLength","othLength","seen","arrValue","othValue","compared","othIndex","convert","objProps","objLength","skipCtor","objCtor","othCtor","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","baseIsEqual","characterData","characterDataOldValue","subtree","renderer","_renderer","_domElements","_mutationObserver","MutationObserver","_onMutations","takeRecords","observe","enable","disconnect","domMutations","mutatedTexts","mutatedElements","mutation","_isBogusBrMutation","text","oldText","newText","viewMutations","mutatedText","markToSync","viewChildren","newViewChildren","sameNodes","oldChildren","newChildren","viewSelectionAnchor","viewSelectionFocus","child1","child2","forceRender","addedNode","removedNodes","addedNodes","domEvent","additionalData","preventDefault","stopPropagation","domEventType","checkShouldIgnoreEventFromTarget","onDomEvent","eventType","metaKey","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","isBinary","nativeMin","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","clearTimeout","cancel","flush","_fireSelectionChangeDoneDebounced","_handleSelectionMove","newSelection","oldSelection","mutationObserver","getObserver","_documents","_clearInfiniteLoopInterval","setInterval","_clearInfiniteLoop","_loopbackCounter","_handleSelectionChange","clearInterval","newViewSelection","hasDomSelection","_renderTimeoutId","selectedEditable","isComposing","isRange","getBorderWidths","getComputedStyle","borderTopWidth","right","borderRightWidth","bottom","borderBottomWidth","borderLeftWidth","rectProperties","isSourceRange","_source","writable","rangeRects","getDomRangeRects","copyRectProperties","getBoundingRect","getBoundingClientRect","innerWidth","innerHeight","height","anotherRect","rect","getIntersection","getArea","visibleRect","isBody","commonAncestorContainer","parentRect","intersectionRect","prop","intersectRect","scrollBarWidth","scrollBarHeight","documentElement","clientWidth","clientHeight","borderWidths","offsetWidth","offsetHeight","rects","clientRects","getClientRects","boundingRectData","NEGATIVE_INFINITY","rectangleCount","elementOrRange","body","scrollViewportToShowTarget","viewportOffset","targetWindow","getWindow","currentWindow","currentFrame","firstAncestorToScroll","getParentElement","scrollAncestorsToShowRect","getRectRelativeToWindow","targetRect","scrollWindowToShowRect","frameElement","targetShiftedDownRect","moveBy","targetShiftedUpRect","viewportRect","excludeScrollbarsAndBorders","isAbove","isBelow","isLeftOf","isRightOf","getRect","parentWindow","firstRect","secondRect","relativeWindow","frame","frameRect","scrollAncestorsToShowTarget","domRoots","_initialDomRootAttributes","_observers","_ongoingChange","_postFixersInProgress","_renderingDisabled","_hasChangedSinceTheLastRendering","_writer","addObserver","_render","viewRoot","getRoot","_name","initialDomRootAttributes","updateContenteditableAttribute","isReadOnly","change","observer","viewRangeToDom","isRenderingInProgress","callbackResult","_callPostFixers","flag","disableObservers","enableObservers","getChildStartOffset","toJSON","_nodes","_insertNodes","getNodeIndex","maxOffset","getNodeStartOffset","totalOffset","nodeList","indexStart","getNode","offsetToIndex","relativePath","parentName","_removeNodes","fromJSON","stickiness","_visitedParent","prevVisitedParent","textNodeAtPosition","getTextNodeAtPosition","getNodeAfterPosition","formatReturnValue","offsetInTextNode","getNodeBeforePosition","newOffset","diffAt","leftParent","getParentPath","operation","_getTransformedByInsertOperation","_getTransformedByMoveOperation","_getTransformedBySplitOperation","_getTransformedByMergeOperation","_getTransformedByInsertion","_getTransformedByMove","sourcePosition","movedRange","_getCombined","splitPosition","moveTargetPosition","graveyardPosition","_getTransformedByDeletion","deletionPosition","deletePosition","transformed","insertPosition","combined","graveyard","shouldJoin","isTouching","getCommonPath","posParent","operations","getTransformedByOperation","j","containsRange","spread","newPos","moveRange","differenceSet","getDifference","difference","common","transformedCommon","newStart","newEnd","ref","refIndex","_modelToViewMapping","_viewToModelMapping","_viewToModelLengthCallbacks","_markerNameToElements","_elementToMarkerNames","_unboundMarkerNames","viewContainer","modelPosition","findPositionIn","viewBlock","findMappedViewAncestor","modelParent","modelOffset","_toModelOffset","modelElement","toModelElement","markerName","toViewElement","elements","nameToElements","elementToNames","markerNames","toModelPosition","modelRange","toViewPosition","mapper","isPhantom","boundElements","getElementsWithSameId","viewElementName","lengthCallback","viewOffset","getModelLength","len","expectedOffset","lastLength","_moveViewPositionToTextNode","_consumable","_textProxyRegistry","_normalizeConsumableType","_getSymbolForTextProxy","itemConsumables","startMap","endMap","_addSymbolForTextProxy","conversionApi","dispatcher","_reconversionEventsMapping","differ","markers","getMarkersToRemove","convertMarkerRemove","changes","_mapChangesWithAutomaticReconversion","convertInsert","convertRemove","reconvertElement","convertAttribute","attributeKey","attributeOldValue","attributeNewValue","flushUnboundMarkerNames","markerRange","getRange","convertMarkerAdd","getMarkersToAdd","consumable","_createInsertConsumable","walkerValueToEventData","_convertInsertWithAttributes","_clearConversionApi","_createConsumableForRange","_testAndFire","elementRange","currentView","convertedViewElement","elementOrTextProxyToView","createRangeOn","unbindViewElement","markersAtSelection","getMarkersAtPosition","_createSelectionConsumable","marker","shouldMarkerChangeBeConverted","getItems","modelName","getEventName","itemsToReconvert","updated","getChanges","_isReconvertTriggerEvent","elementName","containsItem","anyNewRange","oldRange","_removeAllRanges","directChange","_popRange","attributeKeys","visited","startBlock","getParentBlock","isTopBlockInRange","block","isUnvisitedTopBlock","endBlock","limitStartPosition","limitEndPosition","_checkRange","isUnvisitedBlock","model","schema","isBlock","hasParentLimit","isLimit","parentBlock","findAncestorBlock","bindWithDocument","isDocumentOperation","_createFromRanges","boundariesChanged","contentChanged","doesOperationChangeRangeContent","toRange","hasOwnRange","isGravityOverridden","getSelectedBlocks","containsEntireContent","_updateMarkers","_updateAttributes","prefixOrName","observeMarkers","_getStoredAttributes","overrideGravity","restoreGravity","startsWith","_model","_attributePriority","_selectionRestorePosition","_hasChangedRange","_overriddenGravityRegister","_observedMarkers","_fixGraveyardSelection","_validateSelectionRange","_updateMarker","batch","changeParent","enqueueChange","storedAttributes","clearAttributesStoredInElement","_getDefaultRange","optionsOrPlaceOrOffset","overrideUid","liveRange","_prepareRange","fromRange","changed","markerGroup","selectionRange","oldMarkers","hasMarker","contained","clearAll","newAttributes","_getSurroundingAttributes","oldAttributes","_setAttributesTo","newKey","oldKey","realKey","getAttrsIfCharacter","isInline","isObject","getNearestSelectionRange","ConversionHelpers","dispatchers","_dispatchers","conversionHelper","normalizeToElementConfig","elementCreator","consume","converterPriority","triggerBy","_mapReconversionTriggerEvent","childName","downcastElementToElement","modelValue","getFromAttributeCreator","oldViewElement","newViewElement","viewWriter","toViewRange","unwrap","downcastAttributeToElement","normalizeToAttributeConfig","attributeCreator","oldAttribute","downcastAttributeToAttribute","isOpening","viewStartElement","viewEndElement","bindElementToMarker","markerNameToElements","unbindElementFromMarkerName","clearClonedElementsGroup","downcastMarkerToElement","highlightDescriptor","descriptor","prepareDescriptor","createViewElementFromHighlightDescriptor","rangeAfterWrap","highlightElement","viewHighlightElement","removeHighlight","downcastMarkerToHighlight","viewCreator","viewMarkerData","handleMarkerBoundary","viewData","removeMarkerFromAttribute","attributeName","removeMarkerData","downcastMarkerToData","isStart","checkChild","createUIElement","insertMarkerAsElement","insertMarkerAsAttribute","viewElementType","modelData","viewElementDefinition","createContainerElement","createViewElementFromDefinition","modelAttributeValue","autoParagraphEmptyRoots","getRootNames","insertElement","isParagraphable","nodeOrType","createContext","wrapInParagraph","paragraph","createPositionAt","upcastElementToElement","normalizeModelAttributeConfig","converter","prepareToAttributeConverter","getViewElementNameFromConfig","upcastElementToAttribute","viewKey","normalized","normalizeViewAttributeKeyValueConfig","upcastAttributeToAttribute","oldModel","normalizeElementToMarkerConfig","upcastElementToMarker","converterStart","prepareToElementConverter","normalizeDataToMarkerConfig","converterEnd","basePriority","maxPriority","priorityFactor","attrName","addMarkerElements","markerViewNames","markerViewName","modelCursor","convertChildren","viewItem","upcastAttributeToMarker","upcastDataToMarker","viewConfig","matcherResult","getModelElement","safeInsert","updateConversionResult","viewAttributeKeyToCopy","defaultModelValue","modelKey","configToTest","onlyViewNameIsDefined","modelAttribute","checkAttribute","setAttributeOn","configForElements","downcastDispatcher","_disableRendering","convertChanges","convertSelection","toModelRange","modelSelection","createSelection","convertSelectionChange","createText","modelEnd","createRangeIn","isAttached","brokenPosition","breakAttributes","_commands","commandName","command","execute","commands","ViewConsumable","consumables","elementConsumables","revert","instance","consumablesFromElement","createFrom","_canConsumeName","_test","_consume","_revert","getRelatedStyles","consumableName","toConsume","_sourceDefinitions","_attributeProperties","decorate","SchemaContext","getDefinition","itemName","definition","_clearCache","_compiledDefinitions","_compile","getDefinitions","def","isSelectable","isContent","_checkContextMatch","allowAttributes","positionOrBaseElement","elementToMerge","checkMerge","childDef","retValue","getAttributeProperties","selectionOrRangeOrPosition","rangeCommonAncestor","getMinimalFlatRanges","convertToMinimalFlatRanges","_getValidRangesForRange","backwardWalker","forwardWalker","limitElement","forward","step","combineWalkers","removeDisallowedAttributeFromNode","positionsInRange","getPositions","compiledDefinitions","sourceRules","itemNames","compileBaseItemRule","compileAllowContentOf","compileAllowWhere","compileAllowAttributesOf","compileInheritPropertiesFrom","cleanUpAllowIn","cleanUpAllowAttributes","contextItemIndex","contextItem","getItem","allowIn","parentRule","mapContextItem","query","getNames","endsWith","sourceItemRules","itemRule","allowContentOf","allowWhere","allowAttributesOf","inheritTypesFrom","sourceItemRule","typeNames","copyTypes","copyProperty","inheritFrom","inheritAllFrom","makeInheritAllWork","allowContentOfItemName","getAllowedChildren","allowedItem","allowWhereItemName","allowedIn","allowAttributeOfItem","inheritAttributes","inheritPropertiesOfItem","existingItems","itemToCheck","ctxItem","_splitParts","_cursorParents","_modelCursor","convertItem","_convertItem","_convertChildren","_safeInsert","_updateConversionResult","splitToAllowedParent","_splitToAllowedParent","getSplitParts","_getSplitParts","contextDefinition","append","createContextTree","store","documentFragment","_removeEmptyElements","modelItem","markerElements","markerElement","currentPosition","createPositionBefore","extractMarkersFromModelFragment","elementOrModelCursor","nextModelCursor","splitResult","createPositionAfter","savedCursorParent","allowedParent","findAllowedParent","treeWalkerValue","originalPart","splitPart","_registerSplitPair","cursorParent","anyRemoved","processor","upcastDispatcher","viewDocument","_viewWriter","_checkIfRootsExists","hasContent","ignoreWhitespaces","modelElementOrFragment","viewDocumentFragment","toView","toData","clearBindings","intersection","_getMarkersRelativeToElement","version","initialData","main","modelRoot","parse","newData","removeSelectionAttribute","toModel","viewElementOrFragment","rootNames","downcastDispatchers","upcastDispatchers","_helpers","_downcast","_createConversionHelpers","isDowncast","_upcast","alias","for","elementToElement","_getAllUpcastDefinitions","attributeToElement","elementToAttribute","attributeToAttribute","helpers","upcastAlso","_getUpcastDefinition","upcastAlsoItem","Batch","op","baseVersion","Operation","__className","_normalizeNodes","_splitNodeAtPosition","_mergeNodesAtIndex","_move","_haveSameAttributes","mergedNode","offsetDiff","firstPart","secondPart","iteratorA","iteratorB","newTargetPosition","getMovedRangeStart","sourceElement","targetElement","sourceOffset","targetOffset","shouldReceiveAttributes","gyPosition","originalNodes","affectsData","_markers","oldName","mergedElement","getInsertionPosition","splitElement","_assertWriterUsedCorrectly","isSameTree","addOperation","applyOperation","rangeRootPosition","usingOperation","updateMarker","addMarker","itemOrRange","setAttributeOnRange","setAttributeOnItem","removeAttributesFromItem","_addOperationForAffectedMarkers","flat","applyRemoveOperation","_merge","_mergeDetached","createPositionFromPath","merge","renameOperation","firstSplitElement","firstCopyElement","elementOrString","shiftedRange","applyMarkerOperation","_set","markerOrName","currentMarker","_refresh","hasUsingOperationDefined","affectsDataDefined","currentRange","updatedRange","managedUsingOperations","keyOrObjectOrIterable","_setSelectionAttribute","keyOrIterableOfKeys","_removeSelectionAttribute","_overrideGravity","_restoreGravity","storeKey","_getStoreAttributeKey","_currentWriter","isAffected","elementBefore","elementAfter","affectedInLeftElement","affectedInRightElement","affectedAfterLeftElement","affectedBeforeRightElement","valueBefore","valueAfter","lastSplitPosition","previousValue","rootA","rootB","markerCollection","_markerCollection","_changesInElement","_elementSnapshots","_changedMarkers","_changeCount","_cachedChanges","_cachedChangesWithGraveyard","_isInInsertedElement","_markRemove","_markInsert","getMarkersIntersectingRange","bufferMarkerChange","_markAttribute","sourceParentInserted","targetParentInserted","graveyardParent","mergedIntoElement","buffered","includeChangesInGraveyard","diffSet","snapshotChildren","elementChildren","_getChildrenSnapshot","_generateActionsFromChanges","_getInsertDiff","_getRemoveDiff","elementAttributes","snapshotAttributes","_getAttributesDiff","changeCount","prevDiff","thisDiff","isConsecutiveTextRemove","isConsecutiveTextAdd","isConsecutiveAttributeChange","_changesInGraveyardFilter","changeItem","_markChange","_removeAllNestedChanges","_makeSnapshot","_getChangesForElement","_handleChange","inc","nodesToHandle","old","incEnd","oldEnd","intersectionLength","howManyAfter","attributePart","diffs","snapshot","oldChildrenLength","oldChildrenHandled","repeat","posInGy","rangeInGy","History","_operations","_undoPairs","_undoneOperations","undoneOperation","undoingOperation","isInsideSurrogatePair","character","isLowSurrogateHalf","isInsideCombinedSymbol","history","_hasSelectionChangedFromTheLastChangeBlock","createRoot","bufferOperation","_hasDocumentChangedFromTheLastChangeBlock","refresh","hasDataChanges","reset","defaultRoot","_getDefaultRoot","validateTextNodePosition","rangeBoundary","oldMarker","hasChanged","_attachLiveRange","_managedUsingOperations","_affectsData","_destroyMarker","prefix","_detachLiveRange","_liveRange","stopDelegating","oldPosition","toPosition","canMergeWith","_filterAttributesOf","_affectedStart","_affectedEnd","parentContext","_handleNode","isFirst","isLast","removeDisallowedAttributes","nodeToSelect","_handleObject","_checkAndSplitToAllowedPosition","_mergeSiblingsOf","_handleDisallowedNode","_tryAutoparagraphing","handleNodes","livePos","fromPosition","_setAffectedBoundaries","mergeLeft","_canMergeLeft","mergeRight","_canMergeRight","mergePosLeft","mergePosRight","livePosition","_getAllowedIn","tempPos","deleteContent","selRange","doNotResetEntireContent","getLimitElement","shouldEntireContentBeReplacedWithParagraph","insertParagraph","replaceEntireContentWithParagraph","ignoreMarkers","modifySelection","getLivePositionsForSelectedBlocks","leaveUnmerged","checkShouldMerge","startAncestor","endAncestor","positionA","positionB","getAncestorsJustBelowCommonAncestor","mergeBranchesRight","commonAncestor","parentToRemove","rename","clearAttributes","setAttributes","fromEntries","mergeBranchesLeft","mergeBranches","collapseSelectionAt","doNotAutoparagraph","isTextAllowed","isParagraphAllowed","shouldAutoparagraph","leftPos","rightPos","rangeToCheck","isCrossingLimitElement","tryExtendingTo","isForward","unit","isAtWordBoundary","isAtNodeBoundary","boundaryChar","getCorrectWordBreakPosition","getCorrectPosition","getSearchRange","searchEnd","offsetToCheck","removeRangeContent","parentsToCheck","itemRange","parentToCheck","removeRange","injectSelectionPostFixer","registerPostFixer","correctedRange","tryFixingRange","nonIntersectingRanges","previousRange","merged","mergeIntersectingRanges","selectionPostFixer","originalPosition","nearestSelectionRange","fixedPosition","tryFixingCollapsedRange","isTextAllowedOnStart","isTextAllowedOnEnd","startLimitElement","endLimitElement","startIsOnBlock","endIsOnBlock","checkSelectionOnNonLimitElements","fixedStart","fixedEnd","isStartInLimit","isEndInLimit","bothInSameParent","expandStart","expandEnd","findOutermostLimitAncestor","tryFixingNonCollapsedRage","startingNode","isLimitNode","_pendingChanges","_validate","register","addChildCheck","childDefinition","_runPendingChanges","batchOrType","_execute","insertion","nodesToInsert","getSelectionRange","affectedRange","getAffectedRange","insertContent","setSelectionFocus","frag","commonPath","commonParent","getNodeByPath","flatSubtreeRange","appendText","cloneElement","leftExcessRange","getSelectedContent","rangeOrElement","intersectingMarker","ret","currentBatch","callbackReturnValue","_handleChangeBlock","_listener","keyEvtData","evtData","_addEditor","_getEditorConfig","once","state","editing","conversion","addAlias","keystrokes","extraPlugins","readyPromise","_removeEditor","el","HTMLTextAreaElement","BasicHtmlWriter","fragment","implementation","createHTMLDocument","_domParser","DOMParser","_domConverter","_htmlWriter","getHtml","_toDom","registerRawContentMatcher","parseFromString","_components","originalName","_elements","_nextEventLoopTimeout","_focus","_blur","focusedElement","componentFactory","focusTracker","_editableElementsMap","ckeditorInstance","editorUI","documentPlaceholders","enablePlaceholder","isDirectHost","updateDocumentPlaceholders","hidePlaceholder","placeholders","wasViewModified","updatePlaceholder","getChildPlaceholderHostSubstitute","isEmptyish","selectionAnchor","needsPlaceholder","showPlaceholder","ElementReplacer","_replacedElements","display","_toolbarConfig","_elementReplacer","replacementElement","editingView","editingRoot","setEditableElement","attachDomRoot","_initPlaceholder","_initToolbar","restore","detachDomRoot","stickyPanel","limiterElement","viewportTopOffset","toolbar","fillFromConfig","origin","originKeystrokeHandler","originFocusTracker","beforeFocus","afterBlur","enableToolbarKeyboardFocus","placeholderText","initialItems","_renderViewIntoCollectionParent","_parentElement","elementOrDocFragment","dest","evtName","isRendered","_isRendered","_revertData","_renderNode","intoFragment","isApplying","revertData","_revertTemplateFromNode","isView","isTemplate","eventNameOrFunctionOrAttribute","TemplateToBinding","eventNameOrFunction","if","valueIfTrue","TemplateIfBinding","template","extendTemplate","extendObjectValueArray","eventListeners","childIndex","isInvalid","_renderText","_renderElement","_renderAttributes","_renderElementChildren","_setUpListeners","hasTemplateBinding","_bindToObservable","getTextUpdater","attrValue","domAttrValue","attrNs","valueToBind","shouldExtend","getAttributeUpdater","_renderStyleAttribute","arrayValueReducer","isFalsy","setAttributeNS","styleName","styleValue","getStyleUpdater","isViewCollection","setParent","childRevertData","revertBindings","schemaItem","domEvtName","domSelector","activateDomEventListener","syncValueSchemaValue","templateBinding","activateAttributeListener","revertBinding","TemplateBinding","getValue","getValueSchemaValue","removeAttributeNS","normalizePlainTextDefinition","normalizeTextDefinition","listeners","arrayify","normalizeListeners","normalizeAttributes","cur","ext","_viewCollections","_unboundChildren","createCollection","collection","_bindTemplate","views","registerChild","getViews","_bodyCollectionContainer","class","namespace","xmlns","childElementCount","attachToDom","detachFromDom","bindTemplate","setTemplate","_voiceLabelView","_createVoiceLabel","role","lang","voiceLabel","_editableElement","_hasExternalElement","_editingView","_updateIsFocusedClasses","updateAfterRender","toUnit","toPx","_contentPanelPlaceholder","isSticky","_panelRect","_contentPanel","_hasViewportTopOffset","_isStickyToTheLimiter","limiterBottomOffset","marginLeft","_checkIfShouldBeSticky","panelRect","limiterRect","_limiterRect","isActive","_marginLeft","FocusCycler","keystrokeHandler","focusables","isFocusable","_getFocusableItem","viewIndex","focused","previous","collectionLength","_observerInstance","_createObserver","_element","_callback","_addElementCallback","_deleteElementCallback","_elementCallbacks","_getElementCallbacks","unobserve","ObserverConstructor","ResizeObserver","_previousRects","_periodicCheckTimeout","_checkElementRectsAndExecuteCallback","_startPeriodicCheck","_stopPeriodicCheck","periodicCheck","_hasRectChanged","contentRect","currentRect","previousRect","selectstart","focusLast","getOptimalPosition","positions","limiter","fitInViewport","positionedElementAncestor","offsetParent","getPositionedAncestor","elementRect","bestPositionRect","bestPositionName","bestPosition","elementRectArea","processedPositions","positionData","getPositionNameAndRect","positionName","positionRect","limiterIntersectArea","viewportIntersectArea","limiterViewportIntersectRect","getIntersectionArea","processedPosition","processPositionsToAreas","bestPositionData","getBestOfProcessedPositions","getBestPositionNameAndRect","getVisible","absoluteRectCoordinates","getAbsoluteRectCoordinates","ancestorPosition","ancestorBorderWidths","shiftRectCoordinatesDueToPositionedAncestor","moveTo","maxFitFactor","fitFactor","buttonView","panelView","isOpen","panelPosition","_getOptimalPosition","_panelPositions","closeDropdown","southEast","southWest","northEast","northWest","defaultPanelPositions","buttonRect","viewBox","_updateXMLContent","_colorFillPaths","svg","fillColor","querySelectorAll","ariaLabelUid","tooltipView","_createTooltipView","labelView","_createLabelView","iconView","keystrokeView","_createKeystrokeView","_getTooltipString","tabindex","isToggleable","mousedown","click","icon","withKeystroke","tooltip","arrowView","_createArrowView","_focusCycler","focusPrevious","focusNext","focusFirst","toggleSwitchView","_createToggleView","clickOutsideHandler","activator","contextElements","composedPath","contextElement","createDropdown","ButtonClass","dropdownView","closeDropdownOnBlur","closeDropdownOnExecute","focusDropdownContentsOnArrows","addDefaultBehavior","addListToDropdown","listView","listItemView","itemsView","shouldGroupWhenFull","isFloating","maxWidth","_behavior","StaticLayout","viewFocusables","viewItemsView","viewFocusTracker","viewLocale","ungroupedItems","groupedItems","groupedItemsDropdown","_createGroupedItemsDropdown","resizeObserver","cachedPadding","shouldUpdateGroupingOnNextResize","_updateFocusCycleableItems","changeData","removedItem","currentIndex","addedItem","_updateGrouping","_enableGroupingOnResize","_enableGroupingOnMaxWidthChange","initialGroupedItemsCount","wereItemsGrouped","_areItemsOverflowing","_groupLastItem","_ungroupFirstItem","lastChildRect","toolbarRect","computedStyle","paddingProperty","previousWidth","dropdown","buttons","toolbarView","addToolbarToDropdown","shouldToolbarGroupWhenFull","sourceElementOrData","updateSourceElement","form","originalSubmit","onSubmit","submit","attachToForm","getInitialData","_disableStack","forceDisable","DataTransfer","nativeDataTransfer","files","kind","getAsFile","getFiles","_native","getData","setData","handleInput","targetRanges","dropRange","dataTransfer","clipboardData","domDoc","clientX","clientY","caretRangeFromPoint","rangeParent","rangeOffset","getDropViewRange","shiftPressed","asPlainText","smallPaddingElements","modelDocument","onCopyCut","_htmlDataProcessor","fullMatch","spaces","scrollToTheSelection","dataController","modelFragment","isPlainTextFragment","textAttributes","isFormatting","viewToPlainText","childText","Command","forceDisabled","clearForceDisabled","getCopyOnEnterAttributes","allAttributes","copyOnEnter","isSelectionEmpty","attributesToCopy","splitBlock","setSelectionAttribute","isContainedWithinOneElement","enterBlock","splitPos","isSoft","insertBreak","softBreakAction","anchorPos","isInsideLimitElement","breakLineElement","createEmptyElement","scopeElement","isSelectAllScope","SELECT_ALL_KEYSTROKE","domEventData","ChangeBuffer","limit","isLocked","_changeCallback","_batch","_reset","_selectionChangeCallback","createBatch","ignoreLock","undoStepSize","_buffer","_batches","textInsertions","resultRange","lock","unlock","safeKeycodes","isNonTypingKeystroke","keyData","getSingleTextNodeChange","output","lastOperation","pushLast","isContinuationOf","expected","diffToChanges","compareChildNodes","oldChild","newChild","mutations","containerChildrenMutated","_handleContainerChildrenMutations","_handleTextMutation","_handleTextNodeInsertion","mutationsCommonAncestor","getMutationsContainer","domMutationCommonAncestor","freshDomConverter","modelFromCurrentDom","currentModel","modelFromDomChildren","currentModelChildren","lastDomChild","lastCurrentChild","isLastDomChildSoftBreak","isLastCurrentChildSoftBreak","isSafeForTextMutation","diffResult","firstChangeAt","insertions","deletions","calculateChanges","modelSelectionRange","insertText","viewPos","modelPos","insertedText","lastChangeAt","inputCommand","latestCompositionSelection","handleUnsafeKeystroke","isSelectionUnchanged","deleteSelectionContent","isFlatSelection","injectUnsafeKeystrokesHandling","handle","injectTypingMutationsHandling","_shouldEntireContentBeReplacedWithParagraph","sequence","_replaceEntireContentWithParagraph","limitElementFirstChild","fireViewDeleteEvent","originalEvent","hasWordModifier","inputType","selectionToRemove","deleteCommandParams","domSelectionAfterDeletion","transformations","setTransformation","OperationA","OperationB","transformationFunction","aGroup","noUpdateTransformation","getTransformation","transformSets","operationsA","operationsB","contextFactory","useRelations","forceWeakRemove","setOriginalOperations","originalOperations","nextTransformIndex","nextBaseVersionA","nextBaseVersionB","originalOperationsACount","originalOperationsBCount","opA","indexB","opB","newOpsA","getContext","newOpsB","updateRelation","newOpA","padWithNoOps","brokenOperationsACount","brokenOperationsBCount","updateBaseVersions","_history","_useRelations","_forceWeakRemove","_relations","takeFrom","originalOperation","_setRelation","affectedLeft","affectedRight","side","wasInLeftElement","wasStartBeforeMergedElement","wasEndBeforeMergedElement","wasInRightElement","aIsStrong","aWasUndone","_wasUndone","bWasUndone","abRelation","_getRelation","baRelation","originalOp","wasUndone","isUndoneOperation","origB","undoneB","getUndoneOperation","origA","relationsA","relation","_getComplementaryAttributeOperations","insertOperation","insertValue","_moveTargetIntoMovedRange","_makeMoveOperationsFromRanges","hasSameParentAs","moveOp","_breakRangeByMoveOperation","aNewRange","aToGraveyard","bToGraveyard","aIsWeak","removedRange","mergeInside","mergeSplittingElement","getReversed","aCompB","shouldSpread","rightRange","movesGraveyardElement","gyMoveSource","splitNodesMoveSource","gyMoveTarget","gyMove","splitNodesMoveTargetPath","splitNodesMoveTarget","splitNodesMove","extraRename","splitPath","additionalSplit","rangeToMove","gyElementMoved","newParentPosition","newTargetPath","howManyRemoved","aInGraveyard","bInGraveyard","newPositionPath","_stack","_createdBatches","clearStack","docSelection","selectionRanges","transformedRangeGroups","getTransformedByOperations","allRanges","rangeGroup","isRangeContainedByAnyOtherRange","normalizeRanges","batchToUndo","undoingBatch","operationsToUndo","operationToUndo","nextBaseVersion","historyOperations","getOperations","reversedOperations","setOperationAsUndone","joinedRange","getJoined","batchIndex","findIndex","_undo","_restoreSelection","redoingBatch","_batchRegistry","_undoCommand","_redoCommand","isRedoBatch","isUndoBatch","addBatch","undoneBatch","localizedUndoIcon","undo","redo","localizedRedoIcon","_addButton","Icon","ContextPlugin","_actions","hasAny","FileReader","reader","_reader","onprogress","file","total","onload","onerror","onabort","readAsDataURL","abort","loaders","_updatePendingAction","_loadersMap","_pendingAction","uploaded","fileOrPromise","createUploadAdapter","loader","aggregatedUploaded","aggregatedTotal","uploadTotal","fileOrPromiseOrLoader","getLoader","_destroy","pendingActions","getMessage","uploadedPercent","filePromise","uploadAdapterCreator","_filePromiseWrapper","_createFilePromiseWrapper","_adapter","status","read","upload","uploadResponse","isFulfilled","rejecter","getCsrfToken","token","cookie","pair","decodeURIComponent","getCookie","randValues","crypto","getRandomValues","toUpperCase","generateToken","url","_initRequest","_initListeners","_sendRequest","xhr","XMLHttpRequest","open","responseType","genericError","response","lengthComputable","FormData","send","iteratorItem","blockAutoformatEditing","callbackOrCommand","blockToFormat","firstNode","firstNodeRange","inlineAutoformatEditing","testRegexpOrCallback","formatCallback","regExp","testCallback","format","leftDel","rightDel","delStart","delEnd","rangeText","getTextAfterCode","testOutput","rangesToFormat","testOutputToRanges","rangesToRemove","arrays","getCallbackFunctionForInlineAutoformat","validRanges","getValidRanges","_getValueFromFirstAllowedNode","checkAttributeInSelection","forceValue","setAttributeProperties","fontWeight","_getValue","_checkEnabled","blocks","blocksToQuote","findQuote","checkCanBeQuoted","_applyQuote","_removeQuote","firstBlock","getRangesOfBlockGroups","groupRange","positionBefore","positionAfter","quotesToMerge","currentQuote","nextQuote","elementOrPosition","nextBlock","isBQAllowed","isBlockAllowedInBQ","button","_fireEvents","HighlightStack","oldTop","_insertDescriptor","newTop","compareDescriptors","oldDescriptor","newDescriptor","_removeDescriptor","shouldABeBeforeB","classesToString","defaultLimiterElement","isVisible","show","defaultPositions","positionOptions","southArrowNorth","southArrowNorthMiddleWest","southArrowNorthMiddleEast","southArrowNorthWest","southArrowNorthEast","northArrowSouth","northArrowSouthMiddleWest","northArrowSouthMiddleEast","northArrowSouthWest","northArrowSouthEast","optimalPosition","unpin","_pinWhenIsVisibleCallback","_startPinning","_stopPinning","hide","attachTo","getDomElement","scrollTarget","isWithinScrollTarget","isLimiterWithinScrollTarget","getNorthTop","balloonRect","arrowVerticalOffset","getSouthTop","arrowHorizontalOffset","northWestArrowSouthWest","northWestArrowSouthMiddleWest","northWestArrowSouth","northWestArrowSouthMiddleEast","northWestArrowSouthEast","northEastArrowSouthWest","northEastArrowSouthMiddleWest","northEastArrowSouth","northEastArrowSouthMiddleEast","northEastArrowSouthEast","southWestArrowNorthWest","southWestArrowNorthMiddleWest","southWestArrowNorth","southWestArrowNorthMiddleEast","southWestArrowNorthEast","southEastArrowNorthWest","southEastArrowNorthMiddleWest","southEastArrowNorth","southEastArrowNorthMiddleEast","southEastArrowNorthEast","isTypeAroundWidget","isWidget","getTypeAroundFakeCaretPosition","toWidget","setCustomProperty","labelOrCreator","setLabel","hasSelectionHandle","widgetElement","selectionHandle","addSelectionHandle","setHighlightHandling","getLabel","labelCreator","toWidgetEditable","findOptimalInsertionPosition","selectedElement","typeAroundFakeCaretPosition","centeredBalloonPositionForLongWidgets","widgetRect","viewportWidgetInsersectionRect","balloonTotalHeight","getSelectedImageWidget","isImageWidget","insertImage","imageElement","insertAtSelection","isImageAllowed","getInsertImageParent","isImageAllowedInParent","checkSelectionOnObject","isInOtherImage","getViewImgFromWidget","figureView","figureChildren","figureChild","modelToViewAttributeConverter","img","src","createImageViewElement","altText","toImageWidget","srcset","srcsetAttributeConverter","viewImage","modelImage","viewFigureToModel","emptyElement","figure","_overrideUid","arrowRightPressed","arrowLeftPressed","contentDirection","isMovementHandled","_handleForwardMovement","_handleBackwardMovement","_isNextGravityRestorationSkipped","_isGravityOverridden","isBetweenDifferentAttributes","hasAnyAttribute","preventCaretMovement","setSelectionAttributesFromTheNodeBefore","isStepAfterAnyAttributeBoundary","overrideSelectionGravity","restoreSelectionGravity","observedAttribute","attrBefore","findAttributeRange","_findBound","lookBack","lastNode","_definitions","viewFigure","linkInImage","reHasUnicode","rsAstral","rsCombo","rsFitz","rsNonAstral","rsRegional","rsSurrPair","reOptMod","rsSeq","rsSymbol","reUnicode","strSymbols","chr","ATTRIBUTE_WHITESPACES","SAFE_URL","EMAIL_REG_EXP","PROTOCOL_REG_EXP","createLinkElement","href","linkElement","ensureSafeUrl","isSafeUrl","addLinkProtocolIfApplicable","link","defaultProtocol","protocol","isProtocolNeeded","manualDecorators","automaticDecorators","manualDecorator","_getDecoratorStateFromModel","manualDecoratorIds","truthyManualDecorators","falsyManualDecorators","linkRange","allowedRanges","rangesToUpdate","_isRangeToUpdate","decoratorName","allowedRange","linkCommand","rangesToUnlink","ManualDecorator","EXTERNAL_LINKS_REGEXP","addTargetToExternalLinks","linkDecorators","decorators","localizedDecoratorsLabels","decorator","getLocalizedDecorators","retArray","normalizeDecorators","_enableAutomaticDecorators","_enableManualDecorators","registerAttribute","highlightedElements","inlineHighlight","_enableInsertContentSelectionAttributesFixer","_enableClickingAfterLink","_enableTypingOverLink","_handleDeleteContentAfterLink","automaticDecoratorDefinitions","rel","getDispatcher","manualDecoratorDefinitions","manualDecoratorName","removeLinkAttributesFromSelection","clicked","selectionAttributes","deletedContent","isTyping","firstPosition","lastPosition","nodeAtFirstPosition","nodeAtLastPosition","shouldCopyAttributes","shouldPreserveAttributes","hasBackspacePressed","linkHref","isInput","alert","_showNotification","title","imageCommand","openerMethod","chooseFiles","originalOnInit","onInit","finder","links","isImage","images","linkFile","getUrl","imagesUrls","image","request","insertImages","resizedUrl","notification","showWarning","CKFinder","urls","BASE64_HEADER_REG_EXP","fileOrData","apiAddress","_isBase64","base64","sliceSize","contentType","base64Data","byteArrays","byteNumbers","Blob","_base64ToBlob","_token","_apiAddress","_prepareRequest","_attachXHRListeners","setRequestHeader","onError","statusCode","xhrResponse","formData","DEFAULT_OPTIONS","autoRefresh","tokenUrlOrRefreshToken","initValue","_validateTokenValue","defaultRefreshToken","tokenUrl","_options","_registerRefreshTokenTimeout","refreshToken","_tokenRefreshTimeout","tokenValue","isString","isPlainString","isJWTFormat","tokenRefreshTimeoutTime","_getTokenRefreshTimeoutTime","binaryTokenPayload","exp","tokenExpireTime","floor","optionName","_tokens","Token","getTokenFor","cloudServices","uploadUrl","_uploadGateway","_UploadGateway","Adapter","uploadGateway","fileUploader","POSSIBLE_INSERTION_POSITIONS","RETURN_ARROW_ICON_ELEMENT","_currentFakeCaretModelElement","_enableTypeAroundUIInjection","_enableInsertingParagraphsOnButtonClick","_enableInsertingParagraphsOnEnterKeypress","_enableInsertingParagraphsOnTypingKeystroke","_enableTypeAroundFakeCaretActivationUsingKeyboardArrows","_enableDeleteIntegration","_enableInsertContentIntegration","widgetModelElement","selectedModelElement","_insertParagraph","buttonTitles","before","after","widgetViewElement","typeAroundWrapper","wrapperDomElement","buttonTemplate","importNode","injectButtons","caretTemplate","injectFakeCaret","injectUIIntoWidget","positionToWidgetCssClass","_listenToIfEnabled","_handleArrowKeyPress","selectedViewElement","shouldStopAndPreventDefault","_handleArrowKeyPressOnSelectedWidget","_handleArrowKeyPressWhenSelectionNextToAWidget","widgetPlugin","modelElementNextToSelection","_getObjectElementNextToSelection","_setSelectionOverElement","closest","buttonPosition","classList","getTypeAroundButtonPosition","widgetDomElement","getClosestWidgetViewElement","wasHandled","_insertParagraphAccordingToFakeCaretPosition","keyCodesHandledSomewhereElse","selectedModelWidget","isForwardDelete","probe","deepestEmptyRangeAncestor","deepestEmptyAncestor","getDeepestEmptyElementAncestor","documentSelection","verticalNavigationHandler","arrowUpPressed","arrowDownPressed","expandSelection","selectionWillShrink","getNearestNonInlineLimit","lastRangePosition","getNearestTextPosition","firstRangePosition","findTextRangeFromSelection","boundaryVerticalPosition","round","isSingleLineRange","walkerValueType","_previouslySelected","_clearPreviouslySelectedWidgets","lastMarked","isChild","_onMousedown","_handleSelectionChangeOnArrowKeyPress","_preventDefaultOnArrowKeyPress","_handleDelete","isInsideNestedEditable","detail","objectElement","objectElementNextToSelection","previousNode","nodeToRemove","widget","viewUid","statusUid","fieldView","statusView","_createStatusView","errorText","infoText","placeholder","readonly","_updateIsEmpty","_setDomElementValue","select","createLabeledInputText","labeledFieldView","inputView","ariaDescribedById","injectCssTransitionDisabler","disableCssTransitions","_isCssTransitionsDisabled","enableCssTransitions","submitHandler","labeledInput","_createLabeledInputView","saveButtonView","_createButton","check","cancelButtonView","_focusables","v","positionLimiter","_viewToStack","_idToStack","_rotatorView","_createRotatorView","_fakePanelsView","_createFakePanelsView","hasView","stackId","_numberOfStacks","_visibleStack","singleViewMode","showStack","_showView","_singleViewMode","visibleView","_showNextStack","hideView","_getStackId","pin","_getBalloonPosition","updatePosition","visibleStack","stacks","nextIndex","isSingleViewMode","numberOfStacks","buttonNextView","buttonPrevView","_showPrevStack","balloonClassName","withArrow","showView","_createButtonView","balloonPanelView","_balloonPanelView","_addPanels","_removePanels","deregisterChild","numberOfPanels","getBalloonPositionData","_createForm","_form","_showForm","_balloon","_hideForm","_isVisible","balloon","repositionContextualBalloon","_isInBalloon","focusEditable","_fileInputView","accept","multiple","createImageTypeRegExp","regExpSafeNames","imageTypes","imageTypesRegExp","acceptedType","allowMultipleFiles","imagesToUpload","uploadStatusChange","uploadId","fileRepository","_startAppearEffect","_showPlaceholder","_hidePlaceholder","progressBar","_createProgressBar","_showProgressBar","viewImg","_displayLocalImage","completeIcon","_showCompleteIcon","_removeUIElement","_hideProgressBar","_stopAppearEffect","_getUIElement","_createPlaceholder","imageFigure","uniqueProperty","removeChildren","oldElement","insertChild","uploadImage","createLoader","fetchableImages","isLocalImage","imageSrc","fetch","resource","blob","mimeType","getImageMimeType","File","fetchableImage","isInGraveyard","getImagesFromChangeItem","_readAndUpload","domFigure","originalDisplay","_ckHack","uploadStatus","_parseAndSetSrcsetAttributeOnImage","clean","destroyLoader","srcsetAttribute","isNaN","checkCanBecomeParagraph","paragraphLikeElements","modelElements","heading","checkCanBecomeHeading","option","_addDefaultH1Conversion","enterCommand","localizedTitles","Paragraph","getLocalizedOptions","defaultTitle","dropdownTooltip","titles","itemDefinitions","headingCommand","paragraphCommand","withText","commandValue","isOn","areEnabled","para","whichModel","getCaptionFromImage","imageModelElement","matchImageCaption","_insertMissingModelCaptionElement","captionModelToView","createCaptionForEditing","createEditableElement","captionElementCreator","_fixCaptionVisibility","_updateCaptionVisibility","lastCaption","_lastSelectedCaption","viewCaption","modelCaption","getParentCaption","hideCaptionIfEmpty","showCaption","viewModified","nodeFinder","imagesWithoutCaption","nestedItem","appendElement","captionElement","insertViewCaptionAndBind","caption","defaultStyle","isDefault","attributeValue","getStyleByName","defaultStyles","full","alignLeft","alignCenter","alignRight","defaultIcons","center","normalizeImageStyles","configuredStyles","_normalizeStyle","extendedStyle","modelToViewConverter","newStyle","oldStyle","modelToViewStyleAttribute","filteredStyles","viewFigureElement","modelImageElement","viewToModelStyleAttribute","translatedStyles","translateStyles","localizedDefaultStylesTitles","componentName","balloonToolbar","isWidgetSelected","_toolbarDefinitions","_updateToolbarsVisibility","toolbarConfig","toolbarId","ariaLabel","getRelatedElement","maxRelatedElementDepth","deepestRelatedElement","deepestToolbarDefinition","relatedElement","relatedElementDepth","_isToolbarVisible","_hideToolbar","_isToolbarInBalloon","_showToolbar","toolbarDefinition","_childCommands","_getFirstEnabledCommand","localizedIndentIcon","indent","outdent","localizedOutdentIcon","_defineButton","urlInputView","_createUrlInput","_manualDecoratorSwitches","_createManualDecoratorSwitches","_createFormChildren","accumulator","switchButton","switches","decoratorValue","additionalButtonsView","previewButtonView","_createPreviewButton","unlinkButtonView","editButtonView","actionsView","_createActionsView","formView","_createFormView","_createToolbarLinkButton","_enableUserBalloonInteractions","markerToHighlight","markerToElement","unlinkCommand","_addFormView","_hideUI","parsedUrl","getDecoratorSwitchesState","_closeFormView","_showUI","_getSelectedLinkElement","_areActionsVisible","_isUIVisible","_isUIInPanel","_areActionsInPanel","_getBalloonPositionData","_isFormInPanel","restoreManualDecoratorStates","_removeFormView","_hideFakeVisualSelection","forceVisible","_addActionsView","_showFakeVisualSelection","_startUpdatingUI","prevSelectedLink","prevSelectionParent","getSelectionParent","selectedLink","markerViewElements","targetLink","findLinkElementAncestor","startLink","endLink","nextValidRange","getNextValidRange","nextStartPath","nextStartPosition","nextRange","removeMarker","isLinkElement","getLastTextLine","hasMatch","_startListening","_evaluateTextBeforeSelection","suffix","rangeBeforeSelection","testResult","eventData","URL_REG_EXP","_enableTypingHandling","_enableEnterHandling","_enableShiftEnterHandling","watcher","isSingleSpaceAtTheEnd","getUrlAtTextEnd","linkEnd","linkStart","_applyAutoLink","_checkAndApplyAutoLinkOnRange","shiftEnterCommand","isLinkAllowedOnRange","checkCanBecomeListItem","turnOff","currentIndent","newIndent","listIndent","lowestIndent","_fixType","listType","listItem","startingItem","indentDirection","_indentBy","itemsToChange","lastItem","generateLiInUl","getListItemFillerOffset","createViewListItemElement","viewList","injectViewList","injectedItem","injectedList","refItem","getSiblingListItem","sameIndent","smallerIndent","prevItem","breakContainer","mappedViewAncestor","nestedList","findNestedList","positionAfterUiElements","prevView","breakPosition","mergeViewLists","nextViewList","lastSubChild","modelChild","firstList","secondList","mergeContainers","itemIndent","createUIComponent","hasOnlyLists","modelViewInsertion","modelViewChangeType","listName","modelViewMergeAfterChangeType","modelViewSplitOnInsert","removeStart","removeEnd","previousList","mergePos","modelViewMergeAfter","viewItemPrev","viewItemNext","viewModelConverter","getIndent","listItemModel","convertedChild","findNextListItem","viewToModelListItemChildrenConverter","cleanList","isList","cleanListItem","foundList","modelToViewPosition","topmostViewList","modelIndentPasteFixer","indentChange","hoistNestedLists","nextIndent","modelRemoveStartPosition","viewRemoveStartPosition","viewRemovedItem","prevModelItem","foo","prevIndent","prevViewList","itemToListHead","applied","_addListToFix","innerItem","listHead","_fixListIndents","_fixListTypes","maxIndent","fixBy","typesStack","modelChangePostFixer","registerViewToModelLength","getViewListItemLength","modelNode","modelLength","viewListPrev","modelViewChangeIndent","modelViewRemove","getCommandExecuter","registerChildCommand","modelToViewUrlAttributeConverter","registry","mediaContentElement","mediaViewElement","getMediaViewElement","createMediaFigureElement","getSelectedMediaModelWidget","insertMedia","mediaElement","selectedMedia","providers","extraProviders","removedProviders","removeProviders","providerDefinitions","provider","_getMedia","getViewElement","previewRenderer","html","subPattern","_getUrlMatches","rawUrl","_getValidUrl","_match","_previewRenderer","renderForEditingView","renderMediaPreview","mediaHtml","_getPreviewHtml","createRawElement","_getPlaceholderHtml","outerHTML","toMediaWidget","viewMedia","hasMedia","URL_REGEXP","_timeoutId","_positionToInsert","leftLivePosition","rightLivePosition","_embedMediaBetweenPositions","leftPosition","rightPosition","mediaRegistry","urlRange","validators","_validators","resetFormStatus","validator","_urlInputViewInfoDefault","inputField","_urlInputViewInfoTip","mediaURLInputValue","mediaForm","getFormValidators","_setUpDropdown","_setUpForm","closeUI","isValid","transformListItemLikeElementsIntoLists","itemLikeElements","itemLikeElementsMatcher","itemData","getListItemData","order","findAllItemLikeElements","currentList","currentIndentation","itemLikeElement","isDifferentList","previousItem","currentItem","isNewListNeeded","previousItemLikeElement","indentationDifference","listStyle","listLikeItem","listStyleRegexp","listStyleTypeRegex","listStyleMatch","listStyleType","listStyleTypeMatch","bulletedStyle","listMarkerElement","textNodeOrElement","findListMarkerNode","listMarker","findBulletedListStyle","mapListStyleDefinition","detectListStyle","lastListItem","lastListItemChild","insertNewEmptyList","differentIndentation","listElement","parentList","levelChange","findParentListAtLevel","bulletMatcher","removeBulletElement","transformElementIntoListItem","idMatch","orderMatch","indentMatch","googleDocsMatch","htmlString","removeBoldWrapper","unwrapParagraphInListItem","normalizeSafariSpaceSpans","parseHtml","domParser","normalizedHtml","normalizeSpacing","cleanContentAfterBody","htmlDocument","innerTextLength","innerText","normalizeSpacerunSpans","bodyString","bodyView","documentToView","styleTags","getElementsByTagName","sheet","cssRules","extractStyles","replaceImagesSourceWithBase64","rtfData","upcastWriter","shapesIds","imageElementsMatcher","imgs","shapes","shape","removeAllImgElementsRepresentingShapes","shapeElementsMatcher","prevSiblingName","findAllShapesIds","removeAllShapeElements","findAllImageElementsWithLocalSource","imageElements","imagesHexSources","newSrc","hexString","hex","replaceImagesFileSourceWithInlineRepresentation","regexPictureHeader","regexPicture","imageType","extractImageDataFromRtf","msWordMatch1","msWordMatch2","updateNumericAttribute","createEmptyTableCell","tableCell","isHeadingColumnCell","tableUtils","table","headingColumns","column","getCellLocation","upcastTable","viewTable","rows","headingRows","tableMeta","headRows","bodyRows","firstTheadElement","tableChild","trs","tr","headingCols","scanRowForHeadingColumns","scanTable","row","th","TableWalker","_table","_startRow","startRow","_endRow","endRow","_startColumn","startColumn","_endColumn","endColumn","_includeAllSlots","includeAllSlots","_skipRows","_row","_column","_cellIndex","_spannedCells","_nextCellAtColumn","_isOverEndRow","_isOverEndColumn","_advanceToNextRow","outValue","spanData","_getSpanned","_shouldSkipSlot","_formatOutValue","cell","colspan","rowspan","_recordSpans","anchorRow","anchorColumn","TableSlot","rowIsMarkedAsSkipped","rowIsBeforeStartRow","columnIsBeforeStartColumn","columnIsAfterEndColumn","rowMap","rowToUpdate","columnToUpdate","_markSpannedCell","tableWalker","cellAnchorRow","cellAnchorColumn","downcastInsertTable","asWidget","figureElement","tableElement","tableWidget","tableAttributes","viewRows","tableSlot","tableRow","trElement","createTr","createViewTableCellElement","rowIndex","convertParagraphInTableCell","isSingleParagraphWithoutAttributes","renameViewTableCellIfRequired","desiredCellElementName","getCellElementName","viewCell","renamedCell","renameViewTableCell","cellElementName","cellElement","isSingleParagraph","innerParagraph","tableSection","sectionName","viewTableSection","getExistingTableSectionElement","tableChildElement","createTableSection","getOrCreateTableSection","getSectionName","removeTableSectionIfEmpty","validParent","getInsertTableParent","createTable","getSelectedTableCells","cells","sortRanges","getTableCellsContainingSelection","cellWithSelection","getSelectionAffectedTableCells","selectedCells","getRowIndexes","tableCells","getFirstLastIndexesObject","getColumnIndexes","isSelectionRectangular","selectedTableCells","rowIndexes","areIndexesInSameSection","areCellInTheSameTableSection","columns","areaOfSelectedCells","rowsIndexes","columnIndexes","lastRow","firstRow","lastColumn","firstColumn","getBiggestRectangleArea","compareRangeOrder","indexes","allIndexesSorted","indexA","posA","posB","headingSectionSize","tableParent","insertAbove","affectedTableCells","insertRows","at","copyStructureFromAbove","insertColumns","isHorizontal","splitCellHorizontally","splitCellVertically","cropTableToDimensions","sourceTable","cropDimensions","croppedTable","cropHeight","tableMap","sourceRow","sourceColumn","isAnchor","rowInCroppedTable","tableCellCopy","trimTableCellIfNeeded","addHeadingsToCroppedTable","getVerticallyOverlappingCells","overlapRow","slotInfo","cellHeight","cellEndRow","splitHorizontally","splitRow","newRowspan","newCellAttributes","newCellRowSpan","columnIndex","newCell","getPositionBefore","getHorizontallyOverlappingCells","overlapColumn","cellsToSplit","cellWidth","cellEndColumn","splitVertically","splitColumn","newColspan","newCellColSpan","cellRow","cellColumn","limitRow","limitColumn","removeEmptyColumns","getColumns","columnsMap","emptyColumns","cellsCount","emptyColumn","removeColumns","removeEmptyRows","emptyRows","emptyRow","removeRows","removeEmptyRowsColumns","adjustLastRowIndex","dimensions","lastRowMap","rowspanAdjustment","adjustLastColumnIndex","lastColumnMap","colspanAdjustment","cellToMerge","_getMergeableCell","isMergeNext","cellToExpand","cellToRemove","removedTableCellRow","mergeTableCells","spanAttribute","cellSpan","cellToMergeSpan","horizontalCell","hasHeadingColumns","cellOnLeft","cellOnRight","leftCellColumn","rightCellColumn","leftCellSpan","isCellOnLeftInHeadingColumn","isCellOnRightInHeadingColumn","getHorizontalCell","isMergeWithBodyCell","isMergeWithHeadCell","currentCellRowSpan","rowOfCellToMerge","mergeColumn","cellToMergeData","getVerticalCell","span","firstCell","lastRowIndex","getRows","selectedRowIndexes","areAllRowsSelected","referenceCells","removedRowIndexes","columnIndexToFocus","rowsToRemove","cellToFocus","removedRowIndex","columnToFocus","getCellToFocus","tableColumnCount","lastCell","returnValue","getBoundaryCells","removedColumnIndexes","columnsToRemove","isInTable","_isInHeading","headingRowsToSet","currentHeadingRows","overlappingCells","headingColumnsToSet","createEmptyRows","insertAt","rowsToInsert","isCopyStructure","copyStructureFrom","walkerEndRow","tableIterator","rowColSpansMap","lastCellRow","isReferenceRow","cellIndex","abs","columnsToInsert","tableColumns","createCells","skipRow","cellsToMove","cellsToTrim","lastRowOfCell","rowSpanToSet","getCellsToMoveAndTrimOnRemoveRow","targetRowIndex","tableRowMap","previousCell","cellToMove","moveCellsToRow","updateHeadingRows","headingsRemoved","adjustHeadingColumns","removedColumnIndex","numberOfCells","newCellsSpan","updatedSpan","breakSpanEvenly","newCellsAttributes","cellsToInsert","splitCellColumn","cellsToUpdate","splitCellRow","isOnSameColumn","isInEvenlySplitRow","rowspanToSet","tableCellToInsert","firstTableCell","mergeWidth","mergeHeight","maxWidthOffset","maxHeightOffset","getMaxOffset","firstCellRow","firstCellColumn","getMergeDimensions","cellBeingMerged","targetCell","currentMaxOffset","which","dimensionValue","rangesToSelect","startLocation","endLocation","cellInfo","injectTableLayoutPostFixer","analyzedTables","isTableAttributeEntry","fixTableCellsRowspan","fixTableRowsSizes","tableLayoutPostFixer","maxRows","rowLimit","findCellsToTrim","rowsLengths","lengths","getRowsLengths","tableSize","maxColumns","isAttributeType","injectTableCellParagraphPostFixer","fixTable","fixTableRow","fixTableCellContent","checkTableCellChange","tableCellContentsPostFixer","textNodes","injectTableCellRefreshPostFixer","cellsToCheck","shouldRefresh","refreshItem","tableCellRefreshPostFixer","injectTableHeadingRowsRefreshPostFixer","tablesToRefresh","tableHeadingRowsRefreshPostFixer","getViewTable","oldColumns","newColumns","lastColumnToCheck","actionView","_createActionView","_createGridCollection","_highlightGridBoxes","boxView","boxes","isContentLtr","insertTableView","bindIsOn","_prepareDropdown","_prepareMergeSplitButtonDropdown","_fillDropdownWithListOptions","addListOption","_handleDeleteContent","_defineSelectionConverter","_enablePluginDisabling","adjustedLastRow","adjustedLastColumn","anchorCell","cellsToSelect","_getCellsToSelect","highlighted","previouslyHighlighted","clearHighlightedTableCells","lastViewCell","tableCellToSelect","rangeToSelect","selectionMap","walkerOptions","flipVertically","flipHorizontally","_onCopyCut","_onInsertContent","tableSelection","getSelectionAsFragment","pastedTable","contentRange","rangeBefore","rangeAfter","getTableIfOnlyTableInContent","pastedDimensions","selectedTable","shouldExpandSelection","expectedHeight","expectedWidth","tableWidth","tableHeight","expandTableSize","doVerticalSplit","doHorizontalSplit","splitCellsToRectangularSelection","prepareTableForPasting","selectionHeight","selectionWidth","_replaceSelectedCellsWithPasted","pastedWidth","pastedHeight","pastedTableLocationMap","createLocationMap","selectedTableMap","pastedRow","pastedColumn","pastedCell","cellToInsert","newTableCell","_replaceTableSlotCell","areHeadingRowsIntersectingSelection","areHeadingColumnsIntersectingSelection","newCells","limitColumns","isAffectedBySelection","limitRows","endIndex","_handleTabOnSelectedTable","_getTabHandler","_onKeydown","getFocusCell","currentRowIndex","currentCellIndex","isFirstCellInRow","isLastCellInRow","isLastRow","nextRow","previousRow","_handleArrowKeys","focusCell","_navigateFromCellInDirection","_isSelectionAtCellEdge","currentCellInfo","cellToSelect","getAnchorCell","setCellSelection","positionToSelect","_enableShiftClickSelection","_enableMouseDragSelection","blockSelectionChange","_getModelTableCellFromDomEvent","haveSameTableParent","beganCellSelection","newTargetCell","viewTargetElement","cellA","cellB","getSelectedTableWidget","isTableWidget","getTableWidgetAncestor","parentTable","positionOrElement","reHasRegExpChar","TRANSFORMATIONS","copyright","registeredTrademark","trademark","oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight","horizontalEllipsis","enDash","emDash","quotesPrimary","buildQuotesRegExp","quotesSecondary","quotesPrimaryEnGb","quotesSecondaryEnGb","quotesPrimaryPl","quotesSecondaryPl","TRANSFORMATION_GROUPS","symbols","mathematical","typography","quotes","DEFAULT_TRANSFORMATIONS","normalizeFrom","normalizeTo","getTextAttributesAfterPosition","quoteCharacter","_addListAutoformats","_addBasicStylesAutoformats","_addHeadingAutoformats","_addBlockQuoteAutoformats","_addCodeBlockAutoformats","boldCallback","italicCallback","codeCallback","strikethroughCallback","level","normalizers","isTransformedWithPasteFromOffice","activeNormalizer","widgetToolbarRepository","tableContentToolbarItems","tableToolbarItems","include","_enableTransformationWatchers","normalizedTransformations","extra","isNotRemoved","transformation","definitions","definedTransformations","transformationOrGroup","expandGroupsAndRemoveDuplicates","normalizeTransformations","normalizedTransformation","replaces","matchedRange","changeIndex","replaceWith","replacePosition","replaceRange","contentToolbar"],"mappings":"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","file":"ckeditor.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ClassicEditor\"] = factory();\n\telse\n\t\troot[\"ClassicEditor\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 98);\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/ckeditorerror\n */\n\n/* globals console */\n\n/**\n * URL to the documentation with error codes.\n */\nexport const DOCUMENTATION_URL =\n\t'https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html';\n\n/**\n * The CKEditor error class.\n *\n * You should throw `CKEditorError` when:\n *\n * * An unexpected situation occurred and the editor (most probably) will not work properly. Such exception will be handled\n * by the {@link module:watchdog/watchdog~Watchdog watchdog} (if it is integrated),\n * * If the editor is incorrectly integrated or the editor API is used in the wrong way. This way you will give\n * feedback to the developer as soon as possible. Keep in mind that for common integration issues which should not\n * stop editor initialization (like missing upload adapter, wrong name of a toolbar component) we use\n * {@link module:utils/ckeditorerror~logWarning `logWarning()`} and\n * {@link module:utils/ckeditorerror~logError `logError()`}\n * to improve developers experience and let them see the a working editor as soon as possible.\n *\n *\t\t/**\n *\t\t * Error thrown when a plugin cannot be loaded due to JavaScript errors, lack of plugins with a given name, etc.\n *\t\t *\n *\t\t * @error plugin-load\n *\t\t * @param pluginName The name of the plugin that could not be loaded.\n *\t\t * @param moduleName The name of the module which tried to load this plugin.\n *\t\t * /\n *\t\tthrow new CKEditorError( 'plugin-load', {\n *\t\t\tpluginName: 'foo',\n *\t\t\tmoduleName: 'bar'\n *\t\t} );\n *\n * @extends Error\n */\nexport default class CKEditorError extends Error {\n\t/**\n\t * Creates an instance of the CKEditorError class.\n\t *\n\t * @param {String} errorName The error id in an `error-name` format. A link to this error documentation page will be added\n\t * to the thrown error's `message`.\n\t * @param {Object|null} context A context of the error by which the {@link module:watchdog/watchdog~Watchdog watchdog}\n\t * is able to determine which editor crashed. It should be an editor instance or a property connected to it. It can be also\n\t * a `null` value if the editor should not be restarted in case of the error (e.g. during the editor initialization).\n\t * The error context should be checked using the `areConnectedThroughProperties( editor, context )` utility\n\t * to check if the object works as the context.\n\t * @param {Object} [data] Additional data describing the error. A stringified version of this object\n\t * will be appended to the error message, so the data are quickly visible in the console. The original\n\t * data object will also be later available under the {@link #data} property.\n\t */\n\tconstructor( errorName, context, data ) {\n\t\tconst message = `${ errorName }${ ( data ? ` ${ JSON.stringify( data ) }` : '' ) }${ getLinkToDocumentationMessage( errorName ) }`;\n\n\t\tsuper( message );\n\n\t\t/**\n\t\t * @type {String}\n\t\t */\n\t\tthis.name = 'CKEditorError';\n\n\t\t/**\n\t\t * A context of the error by which the Watchdog is able to determine which editor crashed.\n\t\t *\n\t\t * @type {Object|null}\n\t\t */\n\t\tthis.context = context;\n\n\t\t/**\n\t\t * The additional error data passed to the constructor. Undefined if none was passed.\n\t\t *\n\t\t * @type {Object|undefined}\n\t\t */\n\t\tthis.data = data;\n\t}\n\n\t/**\n\t * Checks if the error is of the `CKEditorError` type.\n\t */\n\tis( type ) {\n\t\treturn type === 'CKEditorError';\n\t}\n\n\t/**\n\t * A utility that ensures that the thrown error is a {@link module:utils/ckeditorerror~CKEditorError} one.\n\t * It is useful when combined with the {@link module:watchdog/watchdog~Watchdog} feature, which can restart the editor in case\n\t * of a {@link module:utils/ckeditorerror~CKEditorError} error.\n\t *\n\t * @static\n\t * @param {Error} err The error to rethrow.\n\t * @param {Object} context An object connected through properties with the editor instance. This context will be used\n\t * by the watchdog to verify which editor should be restarted.\n\t */\n\tstatic rethrowUnexpectedError( err, context ) {\n\t\tif ( err.is && err.is( 'CKEditorError' ) ) {\n\t\t\tthrow err;\n\t\t}\n\n\t\t/**\n\t\t * An unexpected error occurred inside the CKEditor 5 codebase. This error will look like the original one\n\t\t * to make the debugging easier.\n\t\t *\n\t\t * This error is only useful when the editor is initialized using the {@link module:watchdog/watchdog~Watchdog} feature.\n\t\t * In case of such error (or any {@link module:utils/ckeditorerror~CKEditorError} error) the watchdog should restart the editor.\n\t\t *\n\t\t * @error unexpected-error\n\t\t */\n\t\tconst error = new CKEditorError( err.message, context );\n\n\t\t// Restore the original stack trace to make the error look like the original one.\n\t\t// See https://github.com/ckeditor/ckeditor5/issues/5595 for more details.\n\t\terror.stack = err.stack;\n\n\t\tthrow error;\n\t}\n}\n\n/**\n * Logs a warning to the console with a properly formatted message and adds a link to the documentation.\n * Use whenever you want to log a warning to the console.\n *\n *\t\t/**\n *\t\t * There was a problem processing the configuration of the toolbar. The item with the given\n *\t\t * name does not exist, so it was omitted when rendering the toolbar.\n *\t\t *\n *\t\t * @error toolbarview-item-unavailable\n *\t\t * @param {String} name The name of the component.\n *\t\t * /\n *\t\tlogWarning( 'toolbarview-item-unavailable', { name } );\n *\n * See also {@link module:utils/ckeditorerror~CKEditorError} for an explanation when to throw an error and when to log\n * a warning or an error to the console.\n *\n * @param {String} errorName The error name to be logged.\n * @param {Object} [data] Additional data to be logged.\n * @returns {String}\n */\nexport function logWarning( errorName, data ) {\n\tconsole.warn( ...formatConsoleArguments( errorName, data ) );\n}\n\n/**\n * Logs an error to the console with a properly formatted message and adds a link to the documentation.\n * Use whenever you want to log an error to the console.\n *\n *\t\t/**\n *\t\t * There was a problem processing the configuration of the toolbar. The item with the given\n *\t\t * name does not exist, so it was omitted when rendering the toolbar.\n *\t\t *\n *\t\t * @error toolbarview-item-unavailable\n *\t\t * @param {String} name The name of the component.\n *\t\t * /\n *\t\t logError( 'toolbarview-item-unavailable', { name } );\n *\n * **Note**: In most cases logging a warning using {@link module:utils/ckeditorerror~logWarning} is enough.\n *\n * See also {@link module:utils/ckeditorerror~CKEditorError} for an explanation when to use each method.\n *\n * @param {String} errorName The error name to be logged.\n * @param {Object} [data] Additional data to be logged.\n * @returns {String}\n */\nexport function logError( errorName, data ) {\n\tconsole.error( ...formatConsoleArguments( errorName, data ) );\n}\n\nfunction getLinkToDocumentationMessage( errorName ) {\n\treturn `\\nRead more: ${ DOCUMENTATION_URL }#error-${ errorName }`;\n}\n\nfunction formatConsoleArguments( errorName, data ) {\n\tconst documentationMessage = getLinkToDocumentationMessage( errorName );\n\n\treturn data ? [ errorName, data, documentationMessage ] : [ errorName, documentationMessage ];\n}\n","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/version\n */\n\n/* globals window, global */\n\nimport CKEditorError from './ckeditorerror';\n\nconst version = '24.0.0';\n\n/* istanbul ignore next */\nconst windowOrGlobal = typeof window === 'object' ? window : global;\n\n/* istanbul ignore next */\nif ( windowOrGlobal.CKEDITOR_VERSION ) {\n\t/**\n\t * This error is thrown when due to a mistake in how CKEditor 5 was installed or initialized, some\n\t * of its modules were duplicated (evaluated and executed twice). Module duplication leads to inevitable runtime\n\t * errors.\n\t *\n\t * There are many situations in which some modules can be loaded twice. In the worst case scenario,\n\t * you may need to check your project for each of these issues and fix them all.\n\t *\n\t * # Trying to add a plugin to an existing build\n\t *\n\t * If you import an existing CKEditor 5 build and a plugin like this:\n\t *\n\t *\t\timport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\n\t *\t\timport Highlight from '@ckeditor/ckeditor5-highlight/src/highlight';\n\t *\n\t * Then your project loads some CKEditor 5 packages twice. How does it happen?\n\t *\n\t * The build package contains a file which is already compiled with webpack. This means\n\t * that it contains all the necessary code from e.g. `@ckeditor/ckeditor5-engine` and `@ckeditor/ckeditor5-utils`.\n\t *\n\t * However, the `Highlight` plugin imports some of the modules from these packages, too. If you ask webpack to\n\t * build such a project, you will end up with the modules being included (and run) twice &mdash; first, because they are\n\t * included inside the build package, and second, because they are required by the `Highlight` plugin.\n\t *\n\t * Therefore, **you must never add plugins to an existing build** unless your plugin has no dependencies.\n\t *\n\t * Adding plugins to a build is done by taking the source version of this build (so, before it was built with webpack)\n\t * and adding plugins there. In this situation, webpack will know that it only needs to load each plugin once.\n\t *\n\t * Read more in the {@glink builds/guides/integration/installing-plugins \"Installing plugins\"} guide.\n\t *\n\t * # Confused an editor build with an editor implementation\n\t *\n\t * This scenario is very similar to the previous one, but has a different origin.\n\t *\n\t * Let's assume that you wanted to use CKEditor 5 from source, as explained in the\n\t * {@glink builds/guides/integration/advanced-setup#scenario-2-building-from-source \"Building from source\"} section\n\t * or in the {@glink framework/guides/quick-start \"Quick start\"} guide of CKEditor 5 Framework.\n\t *\n\t * The correct way to do so is to import an editor and plugins and run them together like this:\n\t *\n\t *\t\timport ClassicEditor from '@ckeditor/ckeditor5-editor-classic/src/classiceditor';\n\t *\t\timport Essentials from '@ckeditor/ckeditor5-essentials/src/essentials';\n\t *\t\timport Paragraph from '@ckeditor/ckeditor5-paragraph/src/paragraph';\n\t *\t\timport Bold from '@ckeditor/ckeditor5-basic-styles/src/bold';\n\t *\t\timport Italic from '@ckeditor/ckeditor5-basic-styles/src/italic';\n\t *\n\t *\t\tClassicEditor\n\t *\t\t\t.create( document.querySelector( '#editor' ), {\n\t *\t\t\t\tplugins: [ Essentials, Paragraph, Bold, Italic ],\n\t *\t\t\t\ttoolbar: [ 'bold', 'italic' ]\n\t *\t\t\t} )\n\t *\t\t\t.then( editor => {\n\t *\t\t\t\tconsole.log( 'Editor was initialized', editor );\n\t *\t\t\t} )\n\t *\t\t\t.catch( error => {\n\t *\t\t\t\tconsole.error( error.stack );\n\t *\t\t\t} );\n\t *\n\t * However, you might have mistakenly imported a build instead of the source `ClassicEditor`. In this case\n\t * your imports will look like this:\n\t *\n\t *\t\timport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\n\t *\t\timport Essentials from '@ckeditor/ckeditor5-essentials/src/essentials';\n\t *\t\timport Paragraph from '@ckeditor/ckeditor5-paragraph/src/paragraph';\n\t *\t\timport Bold from '@ckeditor/ckeditor5-basic-styles/src/bold';\n\t *\t\timport Italic from '@ckeditor/ckeditor5-basic-styles/src/italic';\n\t *\n\t * This creates the same situation as in the previous section because you use a build together with source plugins.\n\t *\n\t * Remember: `@ckeditor/ckeditor5-build-*` packages contain editor builds and `@ckeditor/ckeditor5-editor-*` contain source editors.\n\t *\n\t * # Loading two or more builds on one page\n\t *\n\t * If you use CKEditor 5 builds, you might have loaded two (or more) `ckeditor.js` files on one web page.\n\t * Check your web page for duplicated `<script>` elements or make sure your page builder/bundler includes CKEditor only once.\n\t *\n\t * If you want to use two different types of editors at once, see the\n\t * {@glink builds/guides/integration/advanced-setup#scenario-3-using-two-different-editors \"Using two different editors\"}\n\t * section.\n\t *\n\t * # Using outdated packages\n\t *\n\t * Building CKEditor 5 from source requires using multiple npm packages. These packages have their dependencies\n\t * to other packages. If you use the latest version of, for example, `@ckeditor/ckeditor5-editor-classic` with\n\t * an outdated version of `@ckeditor/ckeditor5-image`, npm or yarn will need to install two different versions of\n\t * `@ckeditor/ckeditor5-core` because `@ckeditor/ckeditor5-editor-classic` and `@ckeditor/ckeditor5-image` may require\n\t * different versions of the core package.\n\t *\n\t * The solution to this issue is to update all packages to their latest version. We recommend\n\t * using tools like [`npm-check-updates`](https://www.npmjs.com/package/npm-check-updates) which simplify this process.\n\t *\n\t * # Conflicting version of dependencies\n\t *\n\t * This is a special case of the previous scenario. If you use CKEditor 5 with some third-party plugins,\n\t * it may happen that even if you use the latest versions of the official packages and the latest version of\n\t * these third-party packages, there will be a conflict between some of their dependencies.\n\t *\n\t * Such a problem can be resolved by either downgrading CKEditor 5 packages (which we do not recommend) or\n\t * asking the author of the third-party package to upgrade its depdendencies (or forking their project and doing this yourself).\n\t *\n\t * **Note:** All official CKEditor 5 packages (excluding integrations and `ckeditor5-dev-*` packages) are released in the\n\t * same major version. This is &mdash; in the `x.y.z`, the `x` is the same for all packages. This is the simplest way to check\n\t * whether you use packages coming from the same CKEditor 5 version. You can read more about versioning in the\n\t * {@glink framework/guides/support/versioning-policy Versioning policy} guide.\n\t *\n\t * # Packages were duplicated in `node_modules`\n\t *\n\t * In some situations, especially when calling `npm install` multiple times, it may happen\n\t * that npm will not correctly \"deduplicate\" packages.\n\t *\n\t * Normally, npm deduplicates all packages so, for example, `@ckeditor/ckeditor5-core` is installed only once in `node_modules/`.\n\t * However, it is known to fail to do so from time to time.\n\t *\n\t * We recommend checking if any of the steps listed below help:\n\t *\n\t * * `rm -rf node_modules && npm install` to make sure you have a clean `node_modules/` directory. This step\n\t * is known to help in most cases.\n\t * * If you use `yarn.lock` or `package-lock.json`, remove it before `npm install`.\n\t * * Check whether all CKEditor 5 packages are up to date and reinstall them\n\t * if you changed anything (`rm -rf node_modules && npm install`).\n\t *\n\t * If all packages are correct and compatible with each other, the steps above are known to help. If not, you may\n\t * try to check with `npm ls` how many times packages like `@ckeditor/ckeditor5-core`, `@ckeditor/ckeditor5-engine` and\n\t *`@ckeditor/ckeditor5-utils` are installed. If more than once, verify which package causes that.\n\t *\n\t * @error ckeditor-duplicated-modules\n\t */\n\tthrow new CKEditorError(\n\t\t'ckeditor-duplicated-modules',\n\t\tnull\n\t);\n} else {\n\twindowOrGlobal.CKEDITOR_VERSION = version;\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./responsiveform.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./heading.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./placeholder.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-placeholder:before,.ck .ck-placeholder:before{content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text;color:var(--ck-color-engine-placeholder-text)}\"","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./globals.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999)}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:208,79%,51%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#bcdefb;--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#757575;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-color-link-fake-selection:rgba(31,177,255,0.3);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./editorui.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \":root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./label.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./stickypanel.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-modal);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./dropdown.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-modal) + 1)}:root{--ck-dropdown-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./icon.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./tooltip.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:\\\"\\\";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0;transition:opacity .2s ease-in-out .2s}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s;border-style:solid;left:50%}.ck.ck-tooltip.ck-tooltip_s,.ck.ck-tooltip.ck-tooltip_se,.ck.ck-tooltip.ck-tooltip_sw{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{top:calc(var(--ck-tooltip-arrow-size)*-1 + 1px);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_sw{right:50%;left:auto}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text{left:auto;right:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{left:auto;right:0}.ck.ck-tooltip.ck-tooltip_se{left:50%;right:auto}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text{right:auto;left:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after{right:auto;left:0;transform:translateX(50%)}.ck.ck-tooltip.ck-tooltip_n{top:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_e{left:calc(100% + var(--ck-tooltip-arrow-size));top:50%}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text:after{left:calc(var(--ck-tooltip-arrow-size)*-1);top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:transparent;border-bottom-color:transparent;border-right-color:var(--ck-color-tooltip-background);border-top-color:transparent;border-left-width:0;border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_w{right:calc(100% + var(--ck-tooltip-arrow-size));left:auto;top:50%}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text:after{left:100%;top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:var(--ck-color-tooltip-background);border-bottom-color:transparent;border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:0;border-top-width:var(--ck-tooltip-arrow-size)}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./button.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(var(--ck-spacing-small)*-1);margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./list.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;padding:calc(var(--ck-line-height-base)*0.2*var(--ck-font-size-base)) calc(var(--ck-line-height-base)*0.4*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(var(--ck-line-height-base)*1.2*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./switchbutton.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - var(--ck-switch-button-toggle-spacing)*2)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(var(--ck-spacing-large)*2)}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(var(--ck-spacing-large)*2)}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(var(--ck-border-radius)*0.5)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(var(--ck-switch-button-translation)*-1))}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./toolbardropdown.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \":root{--ck-toolbar-dropdown-max-width:60vw}.ck.ck-toolbar-dropdown .ck-dropdown__panel{width:max-content;max-width:var(--ck-toolbar-dropdown-max-width)}.ck.ck-toolbar-dropdown .ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./listdropdown.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./toolbar.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;width:1px;min-width:1px;background:var(--ck-color-toolbar-border);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-right:var(--ck-spacing-small)}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./classiceditor.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./blockquote.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:5px solid #ccc}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./balloonpanel.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \":root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:\\\"\\\";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px;--ck-balloon-arrow-drop-shadow:0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border);filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow))}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./link.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{height:100%;border-right:1px solid var(--ck-color-base-text);margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./widgettypearound.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck .ck-widget .ck-widget__type-around__button{display:block;position:absolute;overflow:hidden;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{position:absolute;top:50%;left:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{top:calc(var(--ck-widget-outline-thickness)*-0.5);left:min(10%,30px);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(var(--ck-widget-outline-thickness)*-0.5);right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:\\\"\\\";display:block;position:absolute;top:1px;left:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;position:absolute;left:0;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(var(--ck-widget-outline-thickness)*-1);right:calc(var(--ck-widget-outline-thickness)*-1)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{top:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{width:var(--ck-widget-type-around-button-size);height:var(--ck-widget-type-around-button-size);background:var(--ck-color-widget-type-around-button);border-radius:100px;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);opacity:0;pointer-events:none}.ck .ck-widget .ck-widget__type-around__button svg{width:10px;height:8px;transform:translate(-50%,-50%);transition:transform .5s ease;margin-top:1px}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{width:calc(var(--ck-widget-type-around-button-size) - 2px);height:calc(var(--ck-widget-type-around-button-size) - 2px);border-radius:100px;background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3))}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{pointer-events:none;height:1px;animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;outline:1px solid hsla(0,0%,100%,.5);background:var(--ck-color-base-text)}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./widget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-resizer-size:10px;--ck-resizer-border-width:1px;--ck-resizer-border-radius:2px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-tooltip-offset:10px;--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness))}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle .ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./labeledfieldview.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}:root{--ck-labeled-field-view-transition:.1s cubic-bezier(0,0,0.24,0.95);--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-spacing-medium);--ck-color-labeled-field-label-background:var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{top:0}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{pointer-events:none;transform-origin:0 0;transform:translate(var(--ck-spacing-medium),-6px) scale(.75);background:var(--ck-color-labeled-field-label-background);padding:0 calc(var(--ck-font-size-tiny)*0.5);line-height:normal;font-weight:400;text-overflow:ellipsis;overflow:hidden;max-width:100%;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label,.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-spacing-medium),calc(var(--ck-font-size-base)*0.6)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(var(--ck-spacing-medium)*-1),calc(var(--ck-font-size-base)*0.6)) scale(1)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));background:transparent;padding:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./inputtext.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \":root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./textalternativeform.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-field-view{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}\"","module.exports = \".ck-vertical-form .ck-button:after{content:\\\"\\\";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{content:\\\"\\\";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-text-width)*0.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-large);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after,[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./balloonrotator.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./fakepanel.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./image.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck-content .image{display:table;clear:both;text-align:center;margin:1em auto}.ck-content .image img{display:block;margin:0 auto;max-width:100%;min-width:50px}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./imageuploadprogress.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-editor__editable .image{position:relative}.ck.ck-editor__editable .image .ck-progress-bar{position:absolute;top:0;left:0}.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./imageuploadicon.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck-image-upload-complete-icon{display:block;position:absolute;top:10px;right:10px;border-radius:50%}.ck-image-upload-complete-icon:after{content:\\\"\\\";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20px;--ck-image-upload-icon-width:2px}.ck-image-upload-complete-icon{width:var(--ck-image-upload-icon-size);height:var(--ck-image-upload-icon-size);opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:var(--ck-image-upload-icon-size);animation-delay:0ms,3s}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./imageuploadloader.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:\\\"\\\";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}\"","module.exports = \".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./imagecaption.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:#333;background-color:#f7f7f7;padding:.6em;font-size:.75em;outline-offset:-1px}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./imagestyle.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \":root{--ck-image-style-spacing:1.5em}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./linkform.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form_layout-vertical .ck-button.ck-button-cancel,.ck.ck-link-form_layout-vertical .ck-button.ck-button-save{margin-top:var(--ck-spacing-medium)}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-text-width)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical .ck-button{padding:var(--ck-spacing-standard);margin:0;border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border);width:50%}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button,[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin:var(--ck-spacing-standard) var(--ck-spacing-large)}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{border:0;padding:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./linkactions.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview),[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./mediaembedediting.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck-media__wrapper .ck-media__placeholder{display:flex;flex-direction:column;align-items:center}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:block}@media (hover:none){.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:none}}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url:hover .ck-tooltip{visibility:visible;opacity:1}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{overflow:hidden;display:block}.ck-media__wrapper[data-oembed-url*=\\\"facebook.com\\\"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*=\\\"google.com/maps\\\"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*=\\\"instagram.com\\\"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*=\\\"twitter.com\\\"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{padding:calc(var(--ck-spacing-standard)*3);background:var(--ck-color-base-foreground)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{min-width:var(--ck-media-embed-placeholder-icon-size);height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);background-position:50%;background-size:cover}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{width:100%;height:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);white-space:nowrap;text-align:center;font-style:italic;text-overflow:ellipsis}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*=\\\"open.spotify.com\\\"]{max-width:300px;max-height:380px}.ck-media__wrapper[data-oembed-url*=\\\"google.com/maps\\\"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMDAzLjc4IDEuNjFoNDkuNjIxYzEuNjk0IDAgMy4xOS0uNzk4IDQuMTQ2LTIuMDM3eiIgZmlsbD0iIzVjODhjNSIvPjxwYXRoIGQ9Ik0yMjYuNzQyIDIyMi45ODhjLTkuMjY2IDAtMTYuNzc3IDcuMTctMTYuNzc3IDE2LjAxNC4wMDcgMi43NjIuNjYzIDUuNDc0IDIuMDkzIDcuODc1LjQzLjcwMy44MyAxLjQwOCAxLjE5IDIuMTA3LjMzMy41MDIuNjUgMS4wMDUuOTUgMS41MDguMzQzLjQ3Ny42NzMuOTU3Ljk4OCAxLjQ0IDEuMzEgMS43NjkgMi41IDMuNTAyIDMuNjM3IDUuMTY4Ljc5MyAxLjI3NSAxLjY4MyAyLjY0IDIuNDY2IDMuOTkgMi4zNjMgNC4wOTQgNC4wMDcgOC4wOTIgNC42IDEzLjkxNHYuMDEyYy4xODIuNDEyLjUxNi42NjYuODc5LjY2Ny40MDMtLjAwMS43NjgtLjMxNC45My0uNzk5LjYwMy01Ljc1NiAyLjIzOC05LjcyOSA0LjU4NS0xMy43OTQuNzgyLTEuMzUgMS42NzMtMi43MTUgMi40NjUtMy45OSAxLjEzNy0xLjY2NiAyLjMyOC0zLjQgMy42MzgtNS4xNjkuMzE1LS40ODIuNjQ1LS45NjIuOTg4LTEuNDM5LjMtLjUwMy42MTctMS4wMDYuOTUtMS41MDguMzU5LS43Ljc2LTEuNDA0IDEuMTktMi4xMDcgMS40MjYtMi40MDIgMi01LjExNCAyLjAwNC03Ljg3NSAwLTguODQ0LTcuNTExLTE2LjAxNC0xNi43NzYtMTYuMDE0eiIgZmlsbD0iI2RkNGIzZSIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48ZWxsaXBzZSByeT0iNS41NjQiIHJ4PSI1LjgyOCIgY3k9IjIzOS4wMDIiIGN4PSIyMjYuNzQyIiBmaWxsPSIjODAyZDI3IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0xOTAuMzAxIDIzNy4yODNjLTQuNjcgMC04LjQ1NyAzLjg1My04LjQ1NyA4LjYwNnMzLjc4NiA4LjYwNyA4LjQ1NyA4LjYwN2MzLjA0MyAwIDQuODA2LS45NTggNi4zMzctMi41MTYgMS41My0xLjU1NyAyLjA4Ny0zLjkxMyAyLjA4Ny02LjI5IDAtLjM2Mi0uMDIzLS43MjItLjA2NC0xLjA3OWgtOC4yNTd2My4wNDNoNC44NWMtLjE5Ny43NTktLjUzMSAxLjQ1LTEuMDU4IDEuOTg2LS45NDIuOTU4LTIuMDI4IDEuNTQ4LTMuOTAxIDEuNTQ4LTIuODc2IDAtNS4yMDgtMi4zNzItNS4yMDgtNS4yOTkgMC0yLjkyNiAyLjMzMi01LjI5OSA1LjIwOC01LjI5OSAxLjM5OSAwIDIuNjE4LjQwNyAzLjU4NCAxLjI5M2wyLjM4MS0yLjM4YzAtLjAwMi0uMDAzLS4wMDQtLjAwNC0uMDA1LTEuNTg4LTEuNTI0LTMuNjItMi4yMTUtNS45NTUtMi4yMTV6bTQuNDMgNS42NmwuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxNS4xODQgMjUxLjkyOWwtNy45OCA3Ljk3OSAyOC40NzcgMjguNDc1YTUuMjMzIDUuMjMzIDAgMDAuNDQ5LTIuMTIzdi0zMS4xNjVjLS40NjkuNjc1LS45MzQgMS4zNDktMS4zODIgMi4wMDUtLjc5MiAxLjI3NS0xLjY4MiAyLjY0LTIuNDY1IDMuOTktMi4zNDcgNC4wNjUtMy45ODIgOC4wMzgtNC41ODUgMTMuNzk0LS4xNjIuNDg1LS41MjcuNzk4LS45My43OTktLjM2My0uMDAxLS42OTctLjI1NS0uODc5LS42Njd2LS4wMTJjLS41OTMtNS44MjItMi4yMzctOS44Mi00LjYtMTMuOTE0LS43ODMtMS4zNS0xLjY3My0yLjcxNS0yLjQ2Ni0zLjk5LTEuMTM3LTEuNjY2LTIuMzI3LTMuNC0zLjYzNy01LjE2OWwtLjAwMi0uMDAzeiIgZmlsbD0iI2MzYzNjMyIvPjxwYXRoIGQ9Ik0yMTIuOTgzIDI0OC40OTVsLTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAwNS4yMzggNS4yMzhoMS4wMTVsMzUuNjY2LTM1LjY2NmExMzYuMjc1IDEzNi4yNzUgMCAwMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAwLS45ODktMS40NCAzNS4xMjcgMzUuMTI3IDAgMDAtLjk1LTEuNTA4Yy0uMDgzLS4xNjItLjE3Ni0uMzI2LS4yNjQtLjQ4OXoiIGZpbGw9IiNmZGRjNGYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxMS45OTggMjYxLjA4M2wtNi4xNTIgNi4xNTEgMjQuMjY0IDI0LjI2NGguNzgxYTUuMjI3IDUuMjI3IDAgMDA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*=\\\"facebook.com\\\"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*=\\\"facebook.com\\\"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*=\\\"facebook.com\\\"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*=\\\"facebook.com\\\"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*=\\\"instagram.com\\\"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*=\\\"instagram.com\\\"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OXptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OXoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzN6bTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1ek00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*=\\\"instagram.com\\\"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*=\\\"instagram.com\\\"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*=\\\"twitter.com\\\"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*=\\\"twitter.com\\\"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIGZpbGw9IiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*=\\\"twitter.com\\\"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*=\\\"twitter.com\\\"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./mediaform.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-media-form{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-field-view{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./mediaembed.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck-content .media{clear:both;margin:1em 0;display:block;min-width:15em}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./tableediting.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \":root{--ck-color-table-focused-cell-background:rgba(158,207,250,0.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}\"","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/postcss-loader/src/index.js??ref--5-1!./splitbutton.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button .ck-tooltip{display:none}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__action{border-top-right-radius:unset;border-bottom-right-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__action{border-top-left-radius:unset;border-bottom-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-radius:0}.ck-rounded-corners [dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow,[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:unset;border-bottom-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-right-radius:unset;border-bottom-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled){border-left-color:var(--ck-color-split-button-hover-border)}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled){border-right-color:var(--ck-color-split-button-hover-border)}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./inserttable.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{width:var(--ck-insert-table-dropdown-box-width);height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-color-base-border);border-radius:1px}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-color-focus-border);background:var(--ck-color-focus-outer-shadow)}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./tableselection.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \":root{--ck-table-selected-cell-background:rgba(158,207,250,0.3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{position:relative;caret-color:transparent;outline:unset;box-shadow:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{content:\\\"\\\";pointer-events:none;background-color:var(--ck-table-selected-cell-background);position:absolute;top:0;left:0;right:0;bottom:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget_selected{outline:unset}\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/postcss-loader/src/index.js??ref--5-1!./table.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","module.exports = \".ck-content .table{margin:1em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;width:100%;height:100%;border:1px double #b3b3b3}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border:1px solid #bfbfbf}.ck-content .table table th{font-weight:700;background:hsla(0,0%,0%,5%)}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}\"","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n","import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n","import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n","import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n","import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n","import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n","import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.cloneWith` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @param {Function} [customizer] The function to customize cloning.\n * @returns {*} Returns the deep cloned value.\n * @see _.cloneWith\n * @example\n *\n * function customizer(value) {\n *   if (_.isElement(value)) {\n *     return value.cloneNode(true);\n *   }\n * }\n *\n * var el = _.cloneDeepWith(document.body, customizer);\n *\n * console.log(el === document.body);\n * // => false\n * console.log(el.nodeName);\n * // => 'BODY'\n * console.log(el.childNodes.length);\n * // => 20\n */\nfunction cloneDeepWith(value, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);\n}\n\nexport default cloneDeepWith;\n","import isObjectLike from './isObjectLike.js';\nimport isPlainObject from './isPlainObject.js';\n\n/**\n * Checks if `value` is likely a DOM element.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n * @example\n *\n * _.isElement(document.body);\n * // => true\n *\n * _.isElement('<body>');\n * // => false\n */\nfunction isElement(value) {\n  return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n}\n\nexport default isElement;\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/config\n */\n\nimport { isPlainObject, isElement, cloneDeepWith } from 'lodash-es';\n\n/**\n * Handles a configuration dictionary.\n */\nexport default class Config {\n\t/**\n\t * Creates an instance of the {@link ~Config} class.\n\t *\n\t * @param {Object} [configurations] The initial configurations to be set. Usually, provided by the user.\n\t * @param {Object} [defaultConfigurations] The default configurations. Usually, provided by the system.\n\t */\n\tconstructor( configurations, defaultConfigurations ) {\n\t\t/**\n\t\t * Store for the whole configuration.\n\t\t *\n\t\t * @private\n\t\t * @member {Object}\n\t\t */\n\t\tthis._config = {};\n\n\t\t// Set default configuration.\n\t\tif ( defaultConfigurations ) {\n\t\t\t// Clone the configuration to make sure that the properties will not be shared\n\t\t\t// between editors and make the watchdog feature work correctly.\n\t\t\tthis.define( cloneConfig( defaultConfigurations ) );\n\t\t}\n\n\t\t// Set initial configuration.\n\t\tif ( configurations ) {\n\t\t\tthis._setObjectToTarget( this._config, configurations );\n\t\t}\n\t}\n\n\t/**\n\t * Set configuration values.\n\t *\n\t * It accepts both a name/value pair or an object, which properties and values will be used to set\n\t * configurations.\n\t *\n\t * It also accepts setting a \"deep configuration\" by using dots in the name. For example, `'resize.width'` sets\n\t * the value for the `width` configuration in the `resize` subset.\n\t *\n\t *\t\tconfig.set( 'width', 500 );\n\t *\t\tconfig.set( 'toolbar.collapsed', true );\n\t *\n\t *\t\t// Equivalent to:\n\t *\t\tconfig.set( {\n\t *\t\t\twidth: 500\n\t *\t\t\ttoolbar: {\n\t *\t\t\t\tcollapsed: true\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * Passing an object as the value will amend the configuration, not replace it.\n\t *\n\t *\t\tconfig.set( 'toolbar', {\n\t *\t\t\tcollapsed: true,\n\t *\t\t} );\n\t *\n\t *\t\tconfig.set( 'toolbar', {\n\t *\t\t\tcolor: 'red',\n\t *\t\t} );\n\t *\n\t *\t\tconfig.get( 'toolbar.collapsed' ); // true\n\t *\t\tconfig.get( 'toolbar.color' ); // 'red'\n\t *\n\t * @param {String|Object} name The configuration name or an object from which take properties as\n\t * configuration entries. Configuration names are case-sensitive.\n\t * @param {*} value The configuration value. Used if a name is passed.\n\t */\n\tset( name, value ) {\n\t\tthis._setToTarget( this._config, name, value );\n\t}\n\n\t/**\n\t * Does exactly the same as {@link #set} with one exception  passed configuration extends\n\t * existing one, but does not overwrite already defined values.\n\t *\n\t * This method is supposed to be called by plugin developers to setup plugin's configurations. It would be\n\t * rarely used for other needs.\n\t *\n\t * @param {String|Object} name The configuration name or an object from which take properties as\n\t * configuration entries. Configuration names are case-sensitive.\n\t * @param {*} value The configuration value. Used if a name is passed.\n\t */\n\tdefine( name, value ) {\n\t\tconst isDefine = true;\n\n\t\tthis._setToTarget( this._config, name, value, isDefine );\n\t}\n\n\t/**\n\t * Gets the value for a configuration entry.\n\t *\n\t *\t\tconfig.get( 'name' );\n\t *\n\t * Deep configurations can be retrieved by separating each part with a dot.\n\t *\n\t *\t\tconfig.get( 'toolbar.collapsed' );\n\t *\n\t * @param {String} name The configuration name. Configuration names are case-sensitive.\n\t * @returns {*} The configuration value or `undefined` if the configuration entry was not found.\n\t */\n\tget( name ) {\n\t\treturn this._getFromSource( this._config, name );\n\t}\n\n\t/**\n\t * Iterates over all top level configuration names.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\t* names() {\n\t\tfor ( const name of Object.keys( this._config ) ) {\n\t\t\tyield name;\n\t\t}\n\t}\n\n\t/**\n\t * Saves passed configuration to the specified target (nested object).\n\t *\n\t * @private\n\t * @param {Object} target Nested config object.\n\t * @param {String|Object} name The configuration name or an object from which take properties as\n\t * configuration entries. Configuration names are case-sensitive.\n\t * @param {*} value The configuration value. Used if a name is passed.\n\t * @param {Boolean} [isDefine=false] Define if passed configuration should overwrite existing one.\n\t */\n\t_setToTarget( target, name, value, isDefine = false ) {\n\t\t// In case of an object, iterate through it and call `_setToTarget` again for each property.\n\t\tif ( isPlainObject( name ) ) {\n\t\t\tthis._setObjectToTarget( target, name, isDefine );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// The configuration name should be split into parts if it has dots. E.g. `resize.width` -> [`resize`, `width`].\n\t\tconst parts = name.split( '.' );\n\n\t\t// Take the name of the configuration out of the parts. E.g. `resize.width` -> `width`.\n\t\tname = parts.pop();\n\n\t\t// Iterate over parts to check if currently stored configuration has proper structure.\n\t\tfor ( const part of parts ) {\n\t\t\t// If there is no object for specified part then create one.\n\t\t\tif ( !isPlainObject( target[ part ] ) ) {\n\t\t\t\ttarget[ part ] = {};\n\t\t\t}\n\n\t\t\t// Nested object becomes a target.\n\t\t\ttarget = target[ part ];\n\t\t}\n\n\t\t// In case of value is an object.\n\t\tif ( isPlainObject( value ) ) {\n\t\t\t// We take care of proper config structure.\n\t\t\tif ( !isPlainObject( target[ name ] ) ) {\n\t\t\t\ttarget[ name ] = {};\n\t\t\t}\n\n\t\t\ttarget = target[ name ];\n\n\t\t\t// And iterate through this object calling `_setToTarget` again for each property.\n\t\t\tthis._setObjectToTarget( target, value, isDefine );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Do nothing if we are defining configuration for non empty name.\n\t\tif ( isDefine && typeof target[ name ] != 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttarget[ name ] = value;\n\t}\n\n\t/**\n\t * Get specified configuration from specified source (nested object).\n\t *\n\t * @private\n\t * @param {Object} source level of nested object.\n\t * @param {String} name The configuration name. Configuration names are case-sensitive.\n\t * @returns {*} The configuration value or `undefined` if the configuration entry was not found.\n\t */\n\t_getFromSource( source, name ) {\n\t\t// The configuration name should be split into parts if it has dots. E.g. `resize.width` -> [`resize`, `width`].\n\t\tconst parts = name.split( '.' );\n\n\t\t// Take the name of the configuration out of the parts. E.g. `resize.width` -> `width`.\n\t\tname = parts.pop();\n\n\t\t// Iterate over parts to check if currently stored configuration has proper structure.\n\t\tfor ( const part of parts ) {\n\t\t\tif ( !isPlainObject( source[ part ] ) ) {\n\t\t\t\tsource = null;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Nested object becomes a source.\n\t\t\tsource = source[ part ];\n\t\t}\n\n\t\t// Always returns undefined for non existing configuration.\n\t\treturn source ? cloneConfig( source[ name ] ) : undefined;\n\t}\n\n\t/**\n\t * Iterates through passed object and calls {@link #_setToTarget} method with object key and value for each property.\n\t *\n\t * @private\n\t * @param {Object} target Nested config object.\n\t * @param {Object} configuration Configuration data set\n\t * @param {Boolean} [isDefine] Defines if passed configuration is default configuration or not.\n\t */\n\t_setObjectToTarget( target, configuration, isDefine ) {\n\t\tObject.keys( configuration ).forEach( key => {\n\t\t\tthis._setToTarget( target, key, configuration[ key ], isDefine );\n\t\t} );\n\t}\n}\n\n// Clones configuration object or value.\n// @param {*} source Source configuration\n// @returns {*} Cloned configuration value.\nfunction cloneConfig( source ) {\n\treturn cloneDeepWith( source, leaveDOMReferences );\n}\n\n// A customized function for cloneDeepWith.\n// It will leave references to DOM Elements instead of cloning them.\n//\n// @param {*} value\n// @returns {Element|undefined}\nfunction leaveDOMReferences( value ) {\n\treturn isElement( value ) ? value : undefined;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/spy\n */\n\n/**\n * Creates a spy function (ala Sinon.js) that can be used to inspect call to it.\n *\n * The following are the present features:\n *\n * * spy.called: property set to `true` if the function has been called at least once.\n *\n * @returns {Function} The spy function.\n */\nfunction spy() {\n\treturn function spy() {\n\t\tspy.called = true;\n\t};\n}\n\nexport default spy;\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/eventinfo\n */\n\nimport spy from './spy';\n\n/**\n * The event object passed to event callbacks. It is used to provide information about the event as well as a tool to\n * manipulate it.\n */\nexport default class EventInfo {\n\t/**\n\t * @param {Object} source The emitter.\n\t * @param {String} name The event name.\n\t */\n\tconstructor( source, name ) {\n\t\t/**\n\t\t * The object that fired the event.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Object}\n\t\t */\n\t\tthis.source = source;\n\n\t\t/**\n\t\t * The event name.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * Path this event has followed. See {@link module:utils/emittermixin~EmitterMixin#delegate}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Array.<Object>}\n\t\t */\n\t\tthis.path = [];\n\n\t\t// The following methods are defined in the constructor because they must be re-created per instance.\n\n\t\t/**\n\t\t * Stops the event emitter to call further callbacks for this event interaction.\n\t\t *\n\t\t * @method #stop\n\t\t */\n\t\tthis.stop = spy();\n\n\t\t/**\n\t\t * Removes the current callback from future interactions of this event.\n\t\t *\n\t\t * @method #off\n\t\t */\n\t\tthis.off = spy();\n\n\t\t/**\n\t\t * The value which will be returned by {@link module:utils/emittermixin~EmitterMixin#fire}.\n\t\t *\n\t\t * It's `undefined` by default and can be changed by an event listener:\n\t\t *\n\t\t *\t\tdataController.fire( 'getSelectedContent', ( evt ) => {\n\t\t *\t\t\t// This listener will make `dataController.fire( 'getSelectedContent' )`\n\t\t *\t\t\t// always return an empty DocumentFragment.\n\t\t *\t\t\tevt.return = new DocumentFragment();\n\t\t *\n\t\t *\t\t\t// Make sure no other listeners are executed.\n\t\t *\t\t\tevt.stop();\n\t\t *\t\t} );\n\t\t *\n\t\t * @member #return\n\t\t */\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/uid\n */\n\n// A hash table of hex numbers to avoid using toString() in uid() which is costly.\n// [ '00', '01', '02', ..., 'fe', 'ff' ]\nconst HEX_NUMBERS = new Array( 256 ).fill()\n\t.map( ( val, index ) => ( '0' + ( index ).toString( 16 ) ).slice( -2 ) );\n\n/**\n * Returns a unique id. The id starts with an \"e\" character and a randomly generated string of\n * 32 alphanumeric characters.\n *\n * **Note**: The characters the unique id is built from correspond to the hex number notation\n * (from \"0\" to \"9\", from \"a\" to \"f\"). In other words, each id corresponds to an \"e\" followed\n * by 16 8-bit numbers next to each other.\n *\n * @returns {String} An unique id string.\n */\nexport default function uid() {\n\t// Let's create some positive random 32bit integers first.\n\t//\n\t// 1. Math.random() is a float between 0 and 1.\n\t// 2. 0x100000000 is 2^32 = 4294967296.\n\t// 3. >>> 0 enforces integer (in JS all numbers are floating point).\n\t//\n\t// For instance:\n\t//\t\tMath.random() * 0x100000000 = 3366450031.853859\n\t// but\n\t//\t\tMath.random() * 0x100000000 >>> 0 = 3366450031.\n\tconst r1 = Math.random() * 0x100000000 >>> 0;\n\tconst r2 = Math.random() * 0x100000000 >>> 0;\n\tconst r3 = Math.random() * 0x100000000 >>> 0;\n\tconst r4 = Math.random() * 0x100000000 >>> 0;\n\n\t// Make sure that id does not start with number.\n\treturn 'e' +\n\t\tHEX_NUMBERS[ r1 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r1 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r1 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r1 >> 24 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 24 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 24 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 24 & 0xFF ];\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/priorities\n */\n\n/**\n * String representing a priority value.\n *\n * @typedef {'highest'|'high'|'normal'|'low'|'lowest'} module:utils/priorities~PriorityString\n */\n\n/**\n * Provides group of constants to use instead of hardcoding numeric priority values.\n *\n * @namespace\n */\nconst priorities = {\n\t/**\n\t * Converts a string with priority name to it's numeric value. If `Number` is given, it just returns it.\n\t *\n\t * @static\n\t * @param {module:utils/priorities~PriorityString|Number} priority Priority to convert.\n\t * @returns {Number} Converted priority.\n\t */\n\tget( priority ) {\n\t\tif ( typeof priority != 'number' ) {\n\t\t\treturn this[ priority ] || this.normal;\n\t\t} else {\n\t\t\treturn priority;\n\t\t}\n\t},\n\n\thighest: 100000,\n\thigh: 1000,\n\tnormal: 0,\n\tlow: -1000,\n\tlowest: -100000\n};\n\nexport default priorities;\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/emittermixin\n */\n\nimport EventInfo from './eventinfo';\nimport uid from './uid';\nimport priorities from './priorities';\n\n// To check if component is loaded more than once.\nimport './version';\nimport CKEditorError from './ckeditorerror';\n\nconst _listeningTo = Symbol( 'listeningTo' );\nconst _emitterId = Symbol( 'emitterId' );\n\n/**\n * Mixin that injects the {@link ~Emitter events API} into its host.\n *\n * @mixin EmitterMixin\n * @implements module:utils/emittermixin~Emitter\n */\nconst EmitterMixin = {\n\t/**\n\t * @inheritDoc\n\t */\n\ton( event, callback, options = {} ) {\n\t\tthis.listenTo( this, event, callback, options );\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tonce( event, callback, options ) {\n\t\tlet wasFired = false;\n\n\t\tconst onceCallback = function( event, ...args ) {\n\t\t\t// Ensure the callback is called only once even if the callback itself leads to re-firing the event\n\t\t\t// (which would call the callback again).\n\t\t\tif ( !wasFired ) {\n\t\t\t\twasFired = true;\n\n\t\t\t\t// Go off() at the first call.\n\t\t\t\tevent.off();\n\n\t\t\t\t// Go with the original callback.\n\t\t\t\tcallback.call( this, event, ...args );\n\t\t\t}\n\t\t};\n\n\t\t// Make a similar on() call, simply replacing the callback.\n\t\tthis.listenTo( this, event, onceCallback, options );\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\toff( event, callback ) {\n\t\tthis.stopListening( this, event, callback );\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tlistenTo( emitter, event, callback, options = {} ) {\n\t\tlet emitterInfo, eventCallbacks;\n\n\t\t// _listeningTo contains a list of emitters that this object is listening to.\n\t\t// This list has the following format:\n\t\t//\n\t\t// _listeningTo: {\n\t\t//     emitterId: {\n\t\t//         emitter: emitter,\n\t\t//         callbacks: {\n\t\t//             event1: [ callback1, callback2, ... ]\n\t\t//             ....\n\t\t//         }\n\t\t//     },\n\t\t//     ...\n\t\t// }\n\n\t\tif ( !this[ _listeningTo ] ) {\n\t\t\tthis[ _listeningTo ] = {};\n\t\t}\n\n\t\tconst emitters = this[ _listeningTo ];\n\n\t\tif ( !_getEmitterId( emitter ) ) {\n\t\t\t_setEmitterId( emitter );\n\t\t}\n\n\t\tconst emitterId = _getEmitterId( emitter );\n\n\t\tif ( !( emitterInfo = emitters[ emitterId ] ) ) {\n\t\t\temitterInfo = emitters[ emitterId ] = {\n\t\t\t\temitter,\n\t\t\t\tcallbacks: {}\n\t\t\t};\n\t\t}\n\n\t\tif ( !( eventCallbacks = emitterInfo.callbacks[ event ] ) ) {\n\t\t\teventCallbacks = emitterInfo.callbacks[ event ] = [];\n\t\t}\n\n\t\teventCallbacks.push( callback );\n\n\t\t// Finally register the callback to the event.\n\t\tcreateEventNamespace( emitter, event );\n\t\tconst lists = getCallbacksListsForNamespace( emitter, event );\n\t\tconst priority = priorities.get( options.priority );\n\n\t\tconst callbackDefinition = {\n\t\t\tcallback,\n\t\t\tpriority\n\t\t};\n\n\t\t// Add the callback to all callbacks list.\n\t\tfor ( const callbacks of lists ) {\n\t\t\t// Add the callback to the list in the right priority position.\n\t\t\tlet added = false;\n\n\t\t\tfor ( let i = 0; i < callbacks.length; i++ ) {\n\t\t\t\tif ( callbacks[ i ].priority < priority ) {\n\t\t\t\t\tcallbacks.splice( i, 0, callbackDefinition );\n\t\t\t\t\tadded = true;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add at the end, if right place was not found.\n\t\t\tif ( !added ) {\n\t\t\t\tcallbacks.push( callbackDefinition );\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstopListening( emitter, event, callback ) {\n\t\tconst emitters = this[ _listeningTo ];\n\t\tlet emitterId = emitter && _getEmitterId( emitter );\n\t\tconst emitterInfo = emitters && emitterId && emitters[ emitterId ];\n\t\tconst eventCallbacks = emitterInfo && event && emitterInfo.callbacks[ event ];\n\n\t\t// Stop if nothing has been listened.\n\t\tif ( !emitters || ( emitter && !emitterInfo ) || ( event && !eventCallbacks ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// All params provided. off() that single callback.\n\t\tif ( callback ) {\n\t\t\tremoveCallback( emitter, event, callback );\n\n\t\t\t// We must remove callbacks as well in order to prevent memory leaks.\n\t\t\t// See https://github.com/ckeditor/ckeditor5/pull/8480\n\t\t\tconst index = eventCallbacks.indexOf( callback );\n\n\t\t\tif ( index !== -1 ) {\n\t\t\t\tif ( eventCallbacks.length === 1 ) {\n\t\t\t\t\tdelete emitterInfo.callbacks[ event ];\n\t\t\t\t} else {\n\t\t\t\t\tremoveCallback( emitter, event, callback );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Only `emitter` and `event` provided. off() all callbacks for that event.\n\t\telse if ( eventCallbacks ) {\n\t\t\twhile ( ( callback = eventCallbacks.pop() ) ) {\n\t\t\t\tremoveCallback( emitter, event, callback );\n\t\t\t}\n\n\t\t\tdelete emitterInfo.callbacks[ event ];\n\t\t}\n\t\t// Only `emitter` provided. off() all events for that emitter.\n\t\telse if ( emitterInfo ) {\n\t\t\tfor ( event in emitterInfo.callbacks ) {\n\t\t\t\tthis.stopListening( emitter, event );\n\t\t\t}\n\t\t\tdelete emitters[ emitterId ];\n\t\t}\n\t\t// No params provided. off() all emitters.\n\t\telse {\n\t\t\tfor ( emitterId in emitters ) {\n\t\t\t\tthis.stopListening( emitters[ emitterId ].emitter );\n\t\t\t}\n\t\t\tdelete this[ _listeningTo ];\n\t\t}\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tfire( eventOrInfo, ...args ) {\n\t\ttry {\n\t\t\tconst eventInfo = eventOrInfo instanceof EventInfo ? eventOrInfo : new EventInfo( this, eventOrInfo );\n\t\t\tconst event = eventInfo.name;\n\t\t\tlet callbacks = getCallbacksForEvent( this, event );\n\n\t\t\t// Record that the event passed this emitter on its path.\n\t\t\teventInfo.path.push( this );\n\n\t\t\t// Handle event listener callbacks first.\n\t\t\tif ( callbacks ) {\n\t\t\t\t// Arguments passed to each callback.\n\t\t\t\tconst callbackArgs = [ eventInfo, ...args ];\n\n\t\t\t\t// Copying callbacks array is the easiest and most secure way of preventing infinite loops, when event callbacks\n\t\t\t\t// are added while processing other callbacks. Previous solution involved adding counters (unique ids) but\n\t\t\t\t// failed if callbacks were added to the queue before currently processed callback.\n\t\t\t\t// If this proves to be too inefficient, another method is to change `.on()` so callbacks are stored if same\n\t\t\t\t// event is currently processed. Then, `.fire()` at the end, would have to add all stored events.\n\t\t\t\tcallbacks = Array.from( callbacks );\n\n\t\t\t\tfor ( let i = 0; i < callbacks.length; i++ ) {\n\t\t\t\t\tcallbacks[ i ].callback.apply( this, callbackArgs );\n\n\t\t\t\t\t// Remove the callback from future requests if off() has been called.\n\t\t\t\t\tif ( eventInfo.off.called ) {\n\t\t\t\t\t\t// Remove the called mark for the next calls.\n\t\t\t\t\t\tdelete eventInfo.off.called;\n\n\t\t\t\t\t\tremoveCallback( this, event, callbacks[ i ].callback );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Do not execute next callbacks if stop() was called.\n\t\t\t\t\tif ( eventInfo.stop.called ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Delegate event to other emitters if needed.\n\t\t\tif ( this._delegations ) {\n\t\t\t\tconst destinations = this._delegations.get( event );\n\t\t\t\tconst passAllDestinations = this._delegations.get( '*' );\n\n\t\t\t\tif ( destinations ) {\n\t\t\t\t\tfireDelegatedEvents( destinations, eventInfo, args );\n\t\t\t\t}\n\n\t\t\t\tif ( passAllDestinations ) {\n\t\t\t\t\tfireDelegatedEvents( passAllDestinations, eventInfo, args );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn eventInfo.return;\n\t\t} catch ( err ) {\n\t\t\t// @if CK_DEBUG // throw err;\n\t\t\t/* istanbul ignore next */\n\t\t\tCKEditorError.rethrowUnexpectedError( err, this );\n\t\t}\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdelegate( ...events ) {\n\t\treturn {\n\t\t\tto: ( emitter, nameOrFunction ) => {\n\t\t\t\tif ( !this._delegations ) {\n\t\t\t\t\tthis._delegations = new Map();\n\t\t\t\t}\n\n\t\t\t\t// Originally there was a for..of loop which unfortunately caused an error in Babel that didn't allow\n\t\t\t\t// build an application. See: https://github.com/ckeditor/ckeditor5-react/issues/40.\n\t\t\t\tevents.forEach( eventName => {\n\t\t\t\t\tconst destinations = this._delegations.get( eventName );\n\n\t\t\t\t\tif ( !destinations ) {\n\t\t\t\t\t\tthis._delegations.set( eventName, new Map( [ [ emitter, nameOrFunction ] ] ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdestinations.set( emitter, nameOrFunction );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstopDelegating( event, emitter ) {\n\t\tif ( !this._delegations ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !event ) {\n\t\t\tthis._delegations.clear();\n\t\t} else if ( !emitter ) {\n\t\t\tthis._delegations.delete( event );\n\t\t} else {\n\t\t\tconst destinations = this._delegations.get( event );\n\n\t\t\tif ( destinations ) {\n\t\t\t\tdestinations.delete( emitter );\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport default EmitterMixin;\n\n/**\n * Emitter/listener interface.\n *\n * Can be easily implemented by a class by mixing the {@link module:utils/emittermixin~EmitterMixin} mixin.\n *\n * @interface Emitter\n */\n\n/**\n * Registers a callback function to be executed when an event is fired.\n *\n * Shorthand for {@link #listenTo `this.listenTo( this, event, callback, options )`} (it makes the emitter\n * listen on itself).\n *\n * @method #on\n * @param {String} event The name of the event.\n * @param {Function} callback The function to be called on event.\n * @param {Object} [options={}] Additional options.\n * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of this event callback. The higher\n * the priority value the sooner the callback will be fired. Events having the same priority are called in the\n * order they were added.\n */\n\n/**\n * Registers a callback function to be executed on the next time the event is fired only. This is similar to\n * calling {@link #on} followed by {@link #off} in the callback.\n *\n * @method #once\n * @param {String} event The name of the event.\n * @param {Function} callback The function to be called on event.\n * @param {Object} [options={}] Additional options.\n * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of this event callback. The higher\n * the priority value the sooner the callback will be fired. Events having the same priority are called in the\n * order they were added.\n */\n\n/**\n * Stops executing the callback on the given event.\n * Shorthand for {@link #stopListening `this.stopListening( this, event, callback )`}.\n *\n * @method #off\n * @param {String} event The name of the event.\n * @param {Function} callback The function to stop being called.\n */\n\n/**\n * Registers a callback function to be executed when an event is fired in a specific (emitter) object.\n *\n * Events can be grouped in namespaces using `:`.\n * When namespaced event is fired, it additionally fires all callbacks for that namespace.\n *\n *\t\t// myEmitter.on( ... ) is a shorthand for myEmitter.listenTo( myEmitter, ... ).\n *\t\tmyEmitter.on( 'myGroup', genericCallback );\n *\t\tmyEmitter.on( 'myGroup:myEvent', specificCallback );\n *\n *\t\t// genericCallback is fired.\n *\t\tmyEmitter.fire( 'myGroup' );\n *\t\t// both genericCallback and specificCallback are fired.\n *\t\tmyEmitter.fire( 'myGroup:myEvent' );\n *\t\t// genericCallback is fired even though there are no callbacks for \"foo\".\n *\t\tmyEmitter.fire( 'myGroup:foo' );\n *\n * An event callback can {@link module:utils/eventinfo~EventInfo#stop stop the event} and\n * set the {@link module:utils/eventinfo~EventInfo#return return value} of the {@link #fire} method.\n *\n * @method #listenTo\n * @param {module:utils/emittermixin~Emitter} emitter The object that fires the event.\n * @param {String} event The name of the event.\n * @param {Function} callback The function to be called on event.\n * @param {Object} [options={}] Additional options.\n * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of this event callback. The higher\n * the priority value the sooner the callback will be fired. Events having the same priority are called in the\n * order they were added.\n */\n\n/**\n * Stops listening for events. It can be used at different levels:\n *\n * * To stop listening to a specific callback.\n * * To stop listening to a specific event.\n * * To stop listening to all events fired by a specific object.\n * * To stop listening to all events fired by all objects.\n *\n * @method #stopListening\n * @param {module:utils/emittermixin~Emitter} [emitter] The object to stop listening to. If omitted, stops it for all objects.\n * @param {String} [event] (Requires the `emitter`) The name of the event to stop listening to. If omitted, stops it\n * for all events from `emitter`.\n * @param {Function} [callback] (Requires the `event`) The function to be removed from the call list for the given\n * `event`.\n */\n\n/**\n * Fires an event, executing all callbacks registered for it.\n *\n * The first parameter passed to callbacks is an {@link module:utils/eventinfo~EventInfo} object,\n * followed by the optional `args` provided in the `fire()` method call.\n *\n * @method #fire\n * @param {String|module:utils/eventinfo~EventInfo} eventOrInfo The name of the event or `EventInfo` object if event is delegated.\n * @param {...*} [args] Additional arguments to be passed to the callbacks.\n * @returns {*} By default the method returns `undefined`. However, the return value can be changed by listeners\n * through modification of the {@link module:utils/eventinfo~EventInfo#return `evt.return`}'s property (the event info\n * is the first param of every callback).\n */\n\n/**\n * Delegates selected events to another {@link module:utils/emittermixin~Emitter}. For instance:\n *\n *\t\temitterA.delegate( 'eventX' ).to( emitterB );\n *\t\temitterA.delegate( 'eventX', 'eventY' ).to( emitterC );\n *\n * then `eventX` is delegated (fired by) `emitterB` and `emitterC` along with `data`:\n *\n *\t\temitterA.fire( 'eventX', data );\n *\n * and `eventY` is delegated (fired by) `emitterC` along with `data`:\n *\n *\t\temitterA.fire( 'eventY', data );\n *\n * @method #delegate\n * @param {...String} events Event names that will be delegated to another emitter.\n * @returns {module:utils/emittermixin~EmitterMixinDelegateChain}\n */\n\n/**\n * Stops delegating events. It can be used at different levels:\n *\n * * To stop delegating all events.\n * * To stop delegating a specific event to all emitters.\n * * To stop delegating a specific event to a specific emitter.\n *\n * @method #stopDelegating\n * @param {String} [event] The name of the event to stop delegating. If omitted, stops it all delegations.\n * @param {module:utils/emittermixin~Emitter} [emitter] (requires `event`) The object to stop delegating a particular event to.\n * If omitted, stops delegation of `event` to all emitters.\n */\n\n/**\n * Checks if `listeningEmitter` listens to an emitter with given `listenedToEmitterId` and if so, returns that emitter.\n * If not, returns `null`.\n *\n * @protected\n * @param {module:utils/emittermixin~Emitter} listeningEmitter An emitter that listens.\n * @param {String} listenedToEmitterId Unique emitter id of emitter listened to.\n * @returns {module:utils/emittermixin~Emitter|null}\n */\nexport function _getEmitterListenedTo( listeningEmitter, listenedToEmitterId ) {\n\tif ( listeningEmitter[ _listeningTo ] && listeningEmitter[ _listeningTo ][ listenedToEmitterId ] ) {\n\t\treturn listeningEmitter[ _listeningTo ][ listenedToEmitterId ].emitter;\n\t}\n\n\treturn null;\n}\n\n/**\n * Sets emitter's unique id.\n *\n * **Note:** `_emitterId` can be set only once.\n *\n * @protected\n * @param {module:utils/emittermixin~Emitter} emitter An emitter for which id will be set.\n * @param {String} [id] Unique id to set. If not passed, random unique id will be set.\n */\nexport function _setEmitterId( emitter, id ) {\n\tif ( !emitter[ _emitterId ] ) {\n\t\temitter[ _emitterId ] = id || uid();\n\t}\n}\n\n/**\n * Returns emitter's unique id.\n *\n * @protected\n * @param {module:utils/emittermixin~Emitter} emitter An emitter which id will be returned.\n */\nexport function _getEmitterId( emitter ) {\n\treturn emitter[ _emitterId ];\n}\n\n// Gets the internal `_events` property of the given object.\n// `_events` property store all lists with callbacks for registered event names.\n// If there were no events registered on the object, empty `_events` object is created.\nfunction getEvents( source ) {\n\tif ( !source._events ) {\n\t\tObject.defineProperty( source, '_events', {\n\t\t\tvalue: {}\n\t\t} );\n\t}\n\n\treturn source._events;\n}\n\n// Creates event node for generic-specific events relation architecture.\nfunction makeEventNode() {\n\treturn {\n\t\tcallbacks: [],\n\t\tchildEvents: []\n\t};\n}\n\n// Creates an architecture for generic-specific events relation.\n// If needed, creates all events for given eventName, i.e. if the first registered event\n// is foo:bar:abc, it will create foo:bar:abc, foo:bar and foo event and tie them together.\n// It also copies callbacks from more generic events to more specific events when\n// specific events are created.\nfunction createEventNamespace( source, eventName ) {\n\tconst events = getEvents( source );\n\n\t// First, check if the event we want to add to the structure already exists.\n\tif ( events[ eventName ] ) {\n\t\t// If it exists, we don't have to do anything.\n\t\treturn;\n\t}\n\n\t// In other case, we have to create the structure for the event.\n\t// Note, that we might need to create intermediate events too.\n\t// I.e. if foo:bar:abc is being registered and we only have foo in the structure,\n\t// we need to also register foo:bar.\n\n\t// Currently processed event name.\n\tlet name = eventName;\n\t// Name of the event that is a child event for currently processed event.\n\tlet childEventName = null;\n\n\t// Array containing all newly created specific events.\n\tconst newEventNodes = [];\n\n\t// While loop can't check for ':' index because we have to handle generic events too.\n\t// In each loop, we truncate event name, going from the most specific name to the generic one.\n\t// I.e. foo:bar:abc -> foo:bar -> foo.\n\twhile ( name !== '' ) {\n\t\tif ( events[ name ] ) {\n\t\t\t// If the currently processed event name is already registered, we can be sure\n\t\t\t// that it already has all the structure created, so we can break the loop here\n\t\t\t// as no more events need to be registered.\n\t\t\tbreak;\n\t\t}\n\n\t\t// If this event is not yet registered, create a new object for it.\n\t\tevents[ name ] = makeEventNode();\n\t\t// Add it to the array with newly created events.\n\t\tnewEventNodes.push( events[ name ] );\n\n\t\t// Add previously processed event name as a child of this event.\n\t\tif ( childEventName ) {\n\t\t\tevents[ name ].childEvents.push( childEventName );\n\t\t}\n\n\t\tchildEventName = name;\n\t\t// If `.lastIndexOf()` returns -1, `.substr()` will return '' which will break the loop.\n\t\tname = name.substr( 0, name.lastIndexOf( ':' ) );\n\t}\n\n\tif ( name !== '' ) {\n\t\t// If name is not empty, we found an already registered event that was a parent of the\n\t\t// event we wanted to register.\n\n\t\t// Copy that event's callbacks to newly registered events.\n\t\tfor ( const node of newEventNodes ) {\n\t\t\tnode.callbacks = events[ name ].callbacks.slice();\n\t\t}\n\n\t\t// Add last newly created event to the already registered event.\n\t\tevents[ name ].childEvents.push( childEventName );\n\t}\n}\n\n// Gets an array containing callbacks list for a given event and it's more specific events.\n// I.e. if given event is foo:bar and there is also foo:bar:abc event registered, this will\n// return callback list of foo:bar and foo:bar:abc (but not foo).\nfunction getCallbacksListsForNamespace( source, eventName ) {\n\tconst eventNode = getEvents( source )[ eventName ];\n\n\tif ( !eventNode ) {\n\t\treturn [];\n\t}\n\n\tlet callbacksLists = [ eventNode.callbacks ];\n\n\tfor ( let i = 0; i < eventNode.childEvents.length; i++ ) {\n\t\tconst childCallbacksLists = getCallbacksListsForNamespace( source, eventNode.childEvents[ i ] );\n\n\t\tcallbacksLists = callbacksLists.concat( childCallbacksLists );\n\t}\n\n\treturn callbacksLists;\n}\n\n// Get the list of callbacks for a given event, but only if there any callbacks have been registered.\n// If there are no callbacks registered for given event, it checks if this is a specific event and looks\n// for callbacks for it's more generic version.\nfunction getCallbacksForEvent( source, eventName ) {\n\tlet event;\n\n\tif ( !source._events || !( event = source._events[ eventName ] ) || !event.callbacks.length ) {\n\t\t// There are no callbacks registered for specified eventName.\n\t\t// But this could be a specific-type event that is in a namespace.\n\t\tif ( eventName.indexOf( ':' ) > -1 ) {\n\t\t\t// If the eventName is specific, try to find callback lists for more generic event.\n\t\t\treturn getCallbacksForEvent( source, eventName.substr( 0, eventName.lastIndexOf( ':' ) ) );\n\t\t} else {\n\t\t\t// If this is a top-level generic event, return null;\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn event.callbacks;\n}\n\n// Fires delegated events for given map of destinations.\n//\n// @private\n// * @param {Map.<utils.Emitter>} destinations A map containing\n// `[ {@link module:utils/emittermixin~Emitter}, \"event name\" ]` pair destinations.\n// * @param {utils.EventInfo} eventInfo The original event info object.\n// * @param {Array.<*>} fireArgs Arguments the original event was fired with.\nfunction fireDelegatedEvents( destinations, eventInfo, fireArgs ) {\n\tfor ( let [ emitter, name ] of destinations ) {\n\t\tif ( !name ) {\n\t\t\tname = eventInfo.name;\n\t\t} else if ( typeof name == 'function' ) {\n\t\t\tname = name( eventInfo.name );\n\t\t}\n\n\t\tconst delegatedInfo = new EventInfo( eventInfo.source, name );\n\n\t\tdelegatedInfo.path = [ ...eventInfo.path ];\n\n\t\temitter.fire( delegatedInfo, ...fireArgs );\n\t}\n}\n\n// Removes callback from emitter for given event.\n//\n// @param {module:utils/emittermixin~Emitter} emitter\n// @param {String} event\n// @param {Function} callback\nfunction removeCallback( emitter, event, callback ) {\n\tconst lists = getCallbacksListsForNamespace( emitter, event );\n\n\tfor ( const callbacks of lists ) {\n\t\tfor ( let i = 0; i < callbacks.length; i++ ) {\n\t\t\tif ( callbacks[ i ].callback == callback ) {\n\t\t\t\t// Remove the callback from the list (fixing the next index).\n\t\t\t\tcallbacks.splice( i, 1 );\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * The return value of {@link ~EmitterMixin#delegate}.\n *\n * @interface module:utils/emittermixin~EmitterMixinDelegateChain\n */\n\n/**\n * Selects destination for {@link module:utils/emittermixin~EmitterMixin#delegate} events.\n *\n * @method #to\n * @param {module:utils/emittermixin~Emitter} emitter An `EmitterMixin` instance which is the destination for delegated events.\n * @param {String|Function} [nameOrFunction] A custom event name or function which converts the original name string.\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/isiterable\n */\n\n/**\n * Checks if value implements iterator interface.\n *\n * @param {*} value The value to check.\n * @returns {Boolean} True if value implements iterator interface.\n */\nexport default function isIterable( value ) {\n\treturn !!( value && value[ Symbol.iterator ] );\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/mix\n */\n\n/**\n * Copies enumerable properties and symbols from the objects given as 2nd+ parameters to the\n * prototype of first object (a constructor).\n *\n *\t\tclass Editor {\n *\t\t\t...\n *\t\t}\n *\n *\t\tconst SomeMixin = {\n *\t\t\ta() {\n *\t\t\t\treturn 'a';\n *\t\t\t}\n *\t\t};\n *\n *\t\tmix( Editor, SomeMixin, ... );\n *\n *\t\tnew Editor().a(); // -> 'a'\n *\n * Note: Properties which already exist in the base class will not be overriden.\n *\n * @param {Function} [baseClass] Class which prototype will be extended.\n * @param {Object} [...mixins] Objects from which to get properties.\n */\nexport default function mix( baseClass, ...mixins ) {\n\tmixins.forEach( mixin => {\n\t\tObject.getOwnPropertyNames( mixin ).concat( Object.getOwnPropertySymbols( mixin ) )\n\t\t\t.forEach( key => {\n\t\t\t\tif ( key in baseClass.prototype ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst sourceDescriptor = Object.getOwnPropertyDescriptor( mixin, key );\n\t\t\t\tsourceDescriptor.enumerable = false;\n\n\t\t\t\tObject.defineProperty( baseClass.prototype, key, sourceDescriptor );\n\t\t\t} );\n\t} );\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/collection\n */\n\nimport EmitterMixin from './emittermixin';\nimport CKEditorError from './ckeditorerror';\nimport uid from './uid';\nimport isIterable from './isiterable';\nimport mix from './mix';\n\n/**\n * Collections are ordered sets of objects. Items in the collection can be retrieved by their indexes\n * in the collection (like in an array) or by their ids.\n *\n * If an object without an `id` property is being added to the collection, the `id` property will be generated\n * automatically. Note that the automatically generated id is unique only within this single collection instance.\n *\n * By default an item in the collection is identified by its `id` property. The name of the identifier can be\n * configured through the constructor of the collection.\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class Collection {\n\t/**\n\t * Creates a new Collection instance.\n\t *\n\t * You can provide an iterable of initial items the collection will be created with:\n\t *\n\t *\t\tconst collection = new Collection( [ { id: 'John' }, { id: 'Mike' } ] );\n\t *\n\t *\t\tconsole.log( collection.get( 0 ) ); // -> { id: 'John' }\n\t *\t\tconsole.log( collection.get( 1 ) ); // -> { id: 'Mike' }\n\t *\t\tconsole.log( collection.get( 'Mike' ) ); // -> { id: 'Mike' }\n\t *\n\t * Or you can first create a collection and then add new items using the {@link #add} method:\n\t *\n\t *\t\tconst collection = new Collection();\n\t *\n\t *\t\tcollection.add( { id: 'John' } );\n\t *\t\tconsole.log( collection.get( 0 ) ); // -> { id: 'John' }\n\t *\n\t * Whatever option you choose, you can always pass a configuration object as the last argument\n\t * of the constructor:\n\t *\n\t *\t\tconst emptyCollection = new Collection( { idProperty: 'name' } );\n\t *\t\temptyCollection.add( { name: 'John' } );\n\t *\t\tconsole.log( collection.get( 'John' ) ); // -> { name: 'John' }\n\t *\n\t *\t\tconst nonEmptyCollection = new Collection( [ { name: 'John' } ], { idProperty: 'name' } );\n\t *\t\tnonEmptyCollection.add( { name: 'George' } );\n\t *\t\tconsole.log( collection.get( 'George' ) ); // -> { name: 'George' }\n\t *\t\tconsole.log( collection.get( 'John' ) ); // -> { name: 'John' }\n\t *\n\t * @param {Iterable.<Object>|Object} initialItemsOrOptions The initial items of the collection or\n\t * the options object.\n\t * @param {Object} [options={}] The options object, when the first argument is an array of initial items.\n\t * @param {String} [options.idProperty='id'] The name of the property which is used to identify an item.\n\t * Items that do not have such a property will be assigned one when added to the collection.\n\t */\n\tconstructor( initialItemsOrOptions = {}, options = {} ) {\n\t\tconst hasInitialItems = isIterable( initialItemsOrOptions );\n\n\t\tif ( !hasInitialItems ) {\n\t\t\toptions = initialItemsOrOptions;\n\t\t}\n\n\t\t/**\n\t\t * The internal list of items in the collection.\n\t\t *\n\t\t * @private\n\t\t * @member {Object[]}\n\t\t */\n\t\tthis._items = [];\n\n\t\t/**\n\t\t * The internal map of items in the collection.\n\t\t *\n\t\t * @private\n\t\t * @member {Map}\n\t\t */\n\t\tthis._itemMap = new Map();\n\n\t\t/**\n\t\t * The name of the property which is considered to identify an item.\n\t\t *\n\t\t * @private\n\t\t * @member {String}\n\t\t */\n\t\tthis._idProperty = options.idProperty || 'id';\n\n\t\t/**\n\t\t * A helper mapping external items of a bound collection ({@link #bindTo})\n\t\t * and actual items of this collection. It provides information\n\t\t * necessary to properly remove items bound to another collection.\n\t\t *\n\t\t * See {@link #_bindToInternalToExternalMap}.\n\t\t *\n\t\t * @protected\n\t\t * @member {WeakMap}\n\t\t */\n\t\tthis._bindToExternalToInternalMap = new WeakMap();\n\n\t\t/**\n\t\t * A helper mapping items of this collection to external items of a bound collection\n\t\t * ({@link #bindTo}). It provides information necessary to manage the bindings, e.g.\n\t\t * to avoid loops in twoway bindings.\n\t\t *\n\t\t * See {@link #_bindToExternalToInternalMap}.\n\t\t *\n\t\t * @protected\n\t\t * @member {WeakMap}\n\t\t */\n\t\tthis._bindToInternalToExternalMap = new WeakMap();\n\n\t\t/**\n\t\t * Stores indexes of skipped items from bound external collection.\n\t\t *\n\t\t * @private\n\t\t * @member {Array}\n\t\t */\n\t\tthis._skippedIndexesFromExternal = [];\n\n\t\t// Set the initial content of the collection (if provided in the constructor).\n\t\tif ( hasInitialItems ) {\n\t\t\tfor ( const item of initialItemsOrOptions ) {\n\t\t\t\tthis._items.push( item );\n\t\t\t\tthis._itemMap.set( this._getItemIdBeforeAdding( item ), item );\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * A collection instance this collection is bound to as a result\n\t\t * of calling {@link #bindTo} method.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:utils/collection~Collection} #_bindToCollection\n\t\t */\n\t}\n\n\t/**\n\t * The number of items available in the collection.\n\t *\n\t * @member {Number} #length\n\t */\n\tget length() {\n\t\treturn this._items.length;\n\t}\n\n\t/**\n\t * Returns the first item from the collection or null when collection is empty.\n\t *\n\t * @returns {Object|null} The first item or `null` if collection is empty.\n\t */\n\tget first() {\n\t\treturn this._items[ 0 ] || null;\n\t}\n\n\t/**\n\t * Returns the last item from the collection or null when collection is empty.\n\t *\n\t * @returns {Object|null} The last item or `null` if collection is empty.\n\t */\n\tget last() {\n\t\treturn this._items[ this.length - 1 ] || null;\n\t}\n\n\t/**\n\t * Adds an item into the collection.\n\t *\n\t * If the item does not have an id, then it will be automatically generated and set on the item.\n\t *\n\t * @chainable\n\t * @param {Object} item\n\t * @param {Number} [index] The position of the item in the collection. The item\n\t * is pushed to the collection when `index` not specified.\n\t * @fires add\n\t * @fires change\n\t */\n\tadd( item, index ) {\n\t\treturn this.addMany( [ item ], index );\n\t}\n\n\t/**\n\t * Adds multiple items into the collection.\n\t *\n\t * Any item not containing an id will get an automatically generated one.\n\t *\n\t * @chainable\n\t * @param {Iterable.<Object>} item\n\t * @param {Number} [index] The position of the insertion. Items will be appended if no `index` is specified.\n\t * @fires add\n\t * @fires change\n\t */\n\taddMany( items, index ) {\n\t\tif ( index === undefined ) {\n\t\t\tindex = this._items.length;\n\t\t} else if ( index > this._items.length || index < 0 ) {\n\t\t\t/**\n\t\t\t * The `index` passed to {@link module:utils/collection~Collection#addMany `Collection#addMany()`}\n\t\t\t * is invalid. It must be a number between 0 and the collection's length.\n\t\t\t *\n\t\t\t * @error collection-add-item-invalid-index\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'collection-add-item-invalid-index', this );\n\t\t}\n\n\t\tfor ( let offset = 0; offset < items.length; offset++ ) {\n\t\t\tconst item = items[ offset ];\n\t\t\tconst itemId = this._getItemIdBeforeAdding( item );\n\t\t\tconst currentItemIndex = index + offset;\n\n\t\t\tthis._items.splice( currentItemIndex, 0, item );\n\t\t\tthis._itemMap.set( itemId, item );\n\n\t\t\tthis.fire( 'add', item, currentItemIndex );\n\t\t}\n\n\t\tthis.fire( 'change', {\n\t\t\tadded: items,\n\t\t\tremoved: [],\n\t\t\tindex\n\t\t} );\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Gets an item by its ID or index.\n\t *\n\t * @param {String|Number} idOrIndex The item ID or index in the collection.\n\t * @returns {Object|null} The requested item or `null` if such item does not exist.\n\t */\n\tget( idOrIndex ) {\n\t\tlet item;\n\n\t\tif ( typeof idOrIndex == 'string' ) {\n\t\t\titem = this._itemMap.get( idOrIndex );\n\t\t} else if ( typeof idOrIndex == 'number' ) {\n\t\t\titem = this._items[ idOrIndex ];\n\t\t} else {\n\t\t\t/**\n\t\t\t * An index or ID must be given.\n\t\t\t *\n\t\t\t * @error collection-get-invalid-arg\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'collection-get-invalid-arg', this );\n\t\t}\n\n\t\treturn item || null;\n\t}\n\n\t/**\n\t * Returns a Boolean indicating whether the collection contains an item.\n\t *\n\t * @param {Object|String} itemOrId The item or its ID in the collection.\n\t * @returns {Boolean} `true` if the collection contains the item, `false` otherwise.\n\t */\n\thas( itemOrId ) {\n\t\tif ( typeof itemOrId == 'string' ) {\n\t\t\treturn this._itemMap.has( itemOrId );\n\t\t} else { // Object\n\t\t\tconst idProperty = this._idProperty;\n\t\t\tconst id = itemOrId[ idProperty ];\n\n\t\t\treturn this._itemMap.has( id );\n\t\t}\n\t}\n\n\t/**\n\t * Gets an index of an item in the collection.\n\t * When an item is not defined in the collection, the index will equal -1.\n\t *\n\t * @param {Object|String} itemOrId The item or its ID in the collection.\n\t * @returns {Number} The index of a given item.\n\t */\n\tgetIndex( itemOrId ) {\n\t\tlet item;\n\n\t\tif ( typeof itemOrId == 'string' ) {\n\t\t\titem = this._itemMap.get( itemOrId );\n\t\t} else {\n\t\t\titem = itemOrId;\n\t\t}\n\n\t\treturn this._items.indexOf( item );\n\t}\n\n\t/**\n\t * Removes an item from the collection.\n\t *\n\t * @param {Object|Number|String} subject The item to remove, its ID or index in the collection.\n\t * @returns {Object} The removed item.\n\t * @fires remove\n\t * @fires change\n\t */\n\tremove( subject ) {\n\t\tconst [ item, index ] = this._remove( subject );\n\n\t\tthis.fire( 'change', {\n\t\t\tadded: [],\n\t\t\tremoved: [ item ],\n\t\t\tindex\n\t\t} );\n\n\t\treturn item;\n\t}\n\n\t/**\n\t * Executes the callback for each item in the collection and composes an array or values returned by this callback.\n\t *\n\t * @param {Function} callback\n\t * @param {Object} callback.item\n\t * @param {Number} callback.index\n\t * @param {Object} ctx Context in which the `callback` will be called.\n\t * @returns {Array} The result of mapping.\n\t */\n\tmap( callback, ctx ) {\n\t\treturn this._items.map( callback, ctx );\n\t}\n\n\t/**\n\t * Finds the first item in the collection for which the `callback` returns a true value.\n\t *\n\t * @param {Function} callback\n\t * @param {Object} callback.item\n\t * @param {Number} callback.index\n\t * @param {Object} ctx Context in which the `callback` will be called.\n\t * @returns {Object} The item for which `callback` returned a true value.\n\t */\n\tfind( callback, ctx ) {\n\t\treturn this._items.find( callback, ctx );\n\t}\n\n\t/**\n\t * Returns an array with items for which the `callback` returned a true value.\n\t *\n\t * @param {Function} callback\n\t * @param {Object} callback.item\n\t * @param {Number} callback.index\n\t * @param {Object} ctx Context in which the `callback` will be called.\n\t * @returns {Object[]} The array with matching items.\n\t */\n\tfilter( callback, ctx ) {\n\t\treturn this._items.filter( callback, ctx );\n\t}\n\n\t/**\n\t * Removes all items from the collection and destroys the binding created using\n\t * {@link #bindTo}.\n\t *\n\t * @fires remove\n\t * @fires change\n\t */\n\tclear() {\n\t\tif ( this._bindToCollection ) {\n\t\t\tthis.stopListening( this._bindToCollection );\n\t\t\tthis._bindToCollection = null;\n\t\t}\n\n\t\tconst removedItems = Array.from( this._items );\n\n\t\twhile ( this.length ) {\n\t\t\tthis._remove( 0 );\n\t\t}\n\n\t\tthis.fire( 'change', {\n\t\t\tadded: [],\n\t\t\tremoved: removedItems,\n\t\t\tindex: 0\n\t\t} );\n\t}\n\n\t/**\n\t * Binds and synchronizes the collection with another one.\n\t *\n\t * The binding can be a simple factory:\n\t *\n\t *\t\tclass FactoryClass {\n\t *\t\t\tconstructor( data ) {\n\t *\t\t\t\tthis.label = data.label;\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t *\t\tconst source = new Collection( { idProperty: 'label' } );\n\t *\t\tconst target = new Collection();\n\t *\n\t *\t\ttarget.bindTo( source ).as( FactoryClass );\n\t *\n\t *\t\tsource.add( { label: 'foo' } );\n\t *\t\tsource.add( { label: 'bar' } );\n\t *\n\t *\t\tconsole.log( target.length ); // 2\n\t *\t\tconsole.log( target.get( 1 ).label ); // 'bar'\n\t *\n\t *\t\tsource.remove( 0 );\n\t *\t\tconsole.log( target.length ); // 1\n\t *\t\tconsole.log( target.get( 0 ).label ); // 'bar'\n\t *\n\t * or the factory driven by a custom callback:\n\t *\n\t *\t\tclass FooClass {\n\t *\t\t\tconstructor( data ) {\n\t *\t\t\t\tthis.label = data.label;\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t *\t\tclass BarClass {\n\t *\t\t\tconstructor( data ) {\n\t *\t\t\t\tthis.label = data.label;\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t *\t\tconst source = new Collection( { idProperty: 'label' } );\n\t *\t\tconst target = new Collection();\n\t *\n\t *\t\ttarget.bindTo( source ).using( ( item ) => {\n\t *\t\t\tif ( item.label == 'foo' ) {\n\t *\t\t\t\treturn new FooClass( item );\n\t *\t\t\t} else {\n\t *\t\t\t\treturn new BarClass( item );\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\tsource.add( { label: 'foo' } );\n\t *\t\tsource.add( { label: 'bar' } );\n\t *\n\t *\t\tconsole.log( target.length ); // 2\n\t *\t\tconsole.log( target.get( 0 ) instanceof FooClass ); // true\n\t *\t\tconsole.log( target.get( 1 ) instanceof BarClass ); // true\n\t *\n\t * or the factory out of property name:\n\t *\n\t *\t\tconst source = new Collection( { idProperty: 'label' } );\n\t *\t\tconst target = new Collection();\n\t *\n\t *\t\ttarget.bindTo( source ).using( 'label' );\n\t *\n\t *\t\tsource.add( { label: { value: 'foo' } } );\n\t *\t\tsource.add( { label: { value: 'bar' } } );\n\t *\n\t *\t\tconsole.log( target.length ); // 2\n\t *\t\tconsole.log( target.get( 0 ).value ); // 'foo'\n\t *\t\tconsole.log( target.get( 1 ).value ); // 'bar'\n\t *\n\t * It's possible to skip specified items by returning falsy value:\n\t *\n\t *\t\tconst source = new Collection();\n\t *\t\tconst target = new Collection();\n\t *\n\t *\t\ttarget.bindTo( source ).using( item => {\n\t *\t\t\tif ( item.hidden ) {\n\t *\t\t\t\treturn null;\n\t *\t\t\t}\n\t *\n\t *\t\t\treturn item;\n\t *\t\t} );\n\t *\n\t *\t\tsource.add( { hidden: true } );\n\t *\t\tsource.add( { hidden: false } );\n\t *\n\t *\t\tconsole.log( source.length ); // 2\n\t *\t\tconsole.log( target.length ); // 1\n\t *\n\t * **Note**: {@link #clear} can be used to break the binding.\n\t *\n\t * @param {module:utils/collection~Collection} externalCollection A collection to be bound.\n\t * @returns {Object}\n\t * @returns {module:utils/collection~CollectionBindToChain} The binding chain object.\n\t */\n\tbindTo( externalCollection ) {\n\t\tif ( this._bindToCollection ) {\n\t\t\t/**\n\t\t\t * The collection cannot be bound more than once.\n\t\t\t *\n\t\t\t * @error collection-bind-to-rebind\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'collection-bind-to-rebind', this );\n\t\t}\n\n\t\tthis._bindToCollection = externalCollection;\n\n\t\treturn {\n\t\t\tas: Class => {\n\t\t\t\tthis._setUpBindToBinding( item => new Class( item ) );\n\t\t\t},\n\n\t\t\tusing: callbackOrProperty => {\n\t\t\t\tif ( typeof callbackOrProperty == 'function' ) {\n\t\t\t\t\tthis._setUpBindToBinding( item => callbackOrProperty( item ) );\n\t\t\t\t} else {\n\t\t\t\t\tthis._setUpBindToBinding( item => item[ callbackOrProperty ] );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Finalizes and activates a binding initiated by {#bindTo}.\n\t *\n\t * @protected\n\t * @param {Function} factory A function which produces collection items.\n\t */\n\t_setUpBindToBinding( factory ) {\n\t\tconst externalCollection = this._bindToCollection;\n\n\t\t// Adds the item to the collection once a change has been done to the external collection.\n\t\t//\n\t\t// @private\n\t\tconst addItem = ( evt, externalItem, index ) => {\n\t\t\tconst isExternalBoundToThis = externalCollection._bindToCollection == this;\n\t\t\tconst externalItemBound = externalCollection._bindToInternalToExternalMap.get( externalItem );\n\n\t\t\t// If an external collection is bound to this collection, which makes it a 2way binding,\n\t\t\t// and the particular external collection item is already bound, don't add it here.\n\t\t\t// The external item has been created **out of this collection's item** and (re)adding it will\n\t\t\t// cause a loop.\n\t\t\tif ( isExternalBoundToThis && externalItemBound ) {\n\t\t\t\tthis._bindToExternalToInternalMap.set( externalItem, externalItemBound );\n\t\t\t\tthis._bindToInternalToExternalMap.set( externalItemBound, externalItem );\n\t\t\t} else {\n\t\t\t\tconst item = factory( externalItem );\n\n\t\t\t\t// When there is no item we need to remember skipped index first and then we can skip this item.\n\t\t\t\tif ( !item ) {\n\t\t\t\t\tthis._skippedIndexesFromExternal.push( index );\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Lets try to put item at the same index as index in external collection\n\t\t\t\t// but when there are a skipped items in one or both collections we need to recalculate this index.\n\t\t\t\tlet finalIndex = index;\n\n\t\t\t\t// When we try to insert item after some skipped items from external collection we need\n\t\t\t\t// to include this skipped items and decrease index.\n\t\t\t\t//\n\t\t\t\t// For the following example:\n\t\t\t\t// external -> [ 'A', 'B - skipped for internal', 'C - skipped for internal' ]\n\t\t\t\t// internal -> [ A ]\n\t\t\t\t//\n\t\t\t\t// Another item is been added at the end of external collection:\n\t\t\t\t// external.add( 'D' )\n\t\t\t\t// external -> [ 'A', 'B - skipped for internal', 'C - skipped for internal', 'D' ]\n\t\t\t\t//\n\t\t\t\t// We can't just add 'D' to internal at the same index as index in external because\n\t\t\t\t// this will produce empty indexes what is invalid:\n\t\t\t\t// internal -> [ 'A', empty, empty, 'D' ]\n\t\t\t\t//\n\t\t\t\t// So we need to include skipped items and decrease index\n\t\t\t\t// internal -> [ 'A', 'D' ]\n\t\t\t\tfor ( const skipped of this._skippedIndexesFromExternal ) {\n\t\t\t\t\tif ( index > skipped ) {\n\t\t\t\t\t\tfinalIndex--;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// We need to take into consideration that external collection could skip some items from\n\t\t\t\t// internal collection.\n\t\t\t\t//\n\t\t\t\t// For the following example:\n\t\t\t\t// internal -> [ 'A', 'B - skipped for external', 'C - skipped for external' ]\n\t\t\t\t// external -> [ A ]\n\t\t\t\t//\n\t\t\t\t// Another item is been added at the end of external collection:\n\t\t\t\t// external.add( 'D' )\n\t\t\t\t// external -> [ 'A', 'D' ]\n\t\t\t\t//\n\t\t\t\t// We need to include skipped items and place new item after them:\n\t\t\t\t// internal -> [ 'A', 'B - skipped for external', 'C - skipped for external', 'D' ]\n\t\t\t\tfor ( const skipped of externalCollection._skippedIndexesFromExternal ) {\n\t\t\t\t\tif ( finalIndex >= skipped ) {\n\t\t\t\t\t\tfinalIndex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._bindToExternalToInternalMap.set( externalItem, item );\n\t\t\t\tthis._bindToInternalToExternalMap.set( item, externalItem );\n\t\t\t\tthis.add( item, finalIndex );\n\n\t\t\t\t// After adding new element to internal collection we need update indexes\n\t\t\t\t// of skipped items in external collection.\n\t\t\t\tfor ( let i = 0; i < externalCollection._skippedIndexesFromExternal.length; i++ ) {\n\t\t\t\t\tif ( finalIndex <= externalCollection._skippedIndexesFromExternal[ i ] ) {\n\t\t\t\t\t\texternalCollection._skippedIndexesFromExternal[ i ]++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Load the initial content of the collection.\n\t\tfor ( const externalItem of externalCollection ) {\n\t\t\taddItem( null, externalItem, externalCollection.getIndex( externalItem ) );\n\t\t}\n\n\t\t// Synchronize the with collection as new items are added.\n\t\tthis.listenTo( externalCollection, 'add', addItem );\n\n\t\t// Synchronize the with collection as new items are removed.\n\t\tthis.listenTo( externalCollection, 'remove', ( evt, externalItem, index ) => {\n\t\t\tconst item = this._bindToExternalToInternalMap.get( externalItem );\n\n\t\t\tif ( item ) {\n\t\t\t\tthis.remove( item );\n\t\t\t}\n\n\t\t\t// After removing element from external collection we need update/remove indexes\n\t\t\t// of skipped items in internal collection.\n\t\t\tthis._skippedIndexesFromExternal = this._skippedIndexesFromExternal.reduce( ( result, skipped ) => {\n\t\t\t\tif ( index < skipped ) {\n\t\t\t\t\tresult.push( skipped - 1 );\n\t\t\t\t}\n\n\t\t\t\tif ( index > skipped ) {\n\t\t\t\t\tresult.push( skipped );\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}, [] );\n\t\t} );\n\t}\n\n\t/**\n\t * Returns an unique id property for a given `item`.\n\t *\n\t * The method will generate new id and assign it to the `item` if it doesn't have any.\n\t *\n\t * @private\n\t * @param {Object} item Item to be added.\n\t * @returns {String}\n\t */\n\t_getItemIdBeforeAdding( item ) {\n\t\tconst idProperty = this._idProperty;\n\t\tlet itemId;\n\n\t\tif ( ( idProperty in item ) ) {\n\t\t\titemId = item[ idProperty ];\n\n\t\t\tif ( typeof itemId != 'string' ) {\n\t\t\t\t/**\n\t\t\t\t * This item's ID should be a string.\n\t\t\t\t *\n\t\t\t\t * @error collection-add-invalid-id\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'collection-add-invalid-id', this );\n\t\t\t}\n\n\t\t\tif ( this.get( itemId ) ) {\n\t\t\t\t/**\n\t\t\t\t * This item already exists in the collection.\n\t\t\t\t *\n\t\t\t\t * @error collection-add-item-already-exists\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'collection-add-item-already-exists', this );\n\t\t\t}\n\t\t} else {\n\t\t\titem[ idProperty ] = itemId = uid();\n\t\t}\n\n\t\treturn itemId;\n\t}\n\n\t/**\n\t * Core {@link #remove} method implementation shared in other functions.\n\t *\n\t * In contrast this method **does not** fire the {@link #event:change} event.\n\t *\n\t * @private\n\t * @param {Object} subject The item to remove, its id or index in the collection.\n\t * @returns {Array} Returns an array with the removed item and its index.\n\t * @fires remove\n\t */\n\t_remove( subject ) {\n\t\tlet index, id, item;\n\t\tlet itemDoesNotExist = false;\n\t\tconst idProperty = this._idProperty;\n\n\t\tif ( typeof subject == 'string' ) {\n\t\t\tid = subject;\n\t\t\titem = this._itemMap.get( id );\n\t\t\titemDoesNotExist = !item;\n\n\t\t\tif ( item ) {\n\t\t\t\tindex = this._items.indexOf( item );\n\t\t\t}\n\t\t} else if ( typeof subject == 'number' ) {\n\t\t\tindex = subject;\n\t\t\titem = this._items[ index ];\n\t\t\titemDoesNotExist = !item;\n\n\t\t\tif ( item ) {\n\t\t\t\tid = item[ idProperty ];\n\t\t\t}\n\t\t} else {\n\t\t\titem = subject;\n\t\t\tid = item[ idProperty ];\n\t\t\tindex = this._items.indexOf( item );\n\t\t\titemDoesNotExist = ( index == -1 || !this._itemMap.get( id ) );\n\t\t}\n\n\t\tif ( itemDoesNotExist ) {\n\t\t\t/**\n\t\t\t * Item not found.\n\t\t\t *\n\t\t\t * @error collection-remove-404\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'collection-remove-404', this );\n\t\t}\n\n\t\tthis._items.splice( index, 1 );\n\t\tthis._itemMap.delete( id );\n\n\t\tconst externalItem = this._bindToInternalToExternalMap.get( item );\n\t\tthis._bindToInternalToExternalMap.delete( item );\n\t\tthis._bindToExternalToInternalMap.delete( externalItem );\n\n\t\tthis.fire( 'remove', item, index );\n\n\t\treturn [ item, index ];\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._items[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Fired when an item is added to the collection.\n\t *\n\t * @event add\n\t * @param {Object} item The added item.\n\t */\n\n\t/**\n\t * Fired when the collection was changed due to adding or removing items.\n\t *\n\t * @event change\n\t * @param {Iterable.<Object>} added A list of added items.\n\t * @param {Iterable.<Object>} removed A list of removed items.\n\t * @param {Number} index An index where the addition or removal occurred.\n\t */\n\n\t/**\n\t * Fired when an item is removed from the collection.\n\t *\n\t * @event remove\n\t * @param {Object} item The removed item.\n\t * @param {Number} index Index from which item was removed.\n\t */\n}\n\nmix( Collection, EmitterMixin );\n\n/**\n * An object returned by the {@link module:utils/collection~Collection#bindTo `bindTo()`} method\n * providing functions that specify the type of the binding.\n *\n * See the {@link module:utils/collection~Collection#bindTo `bindTo()`} documentation for examples.\n *\n * @interface module:utils/collection~CollectionBindToChain\n */\n\n/**\n * Creates a callback or a property binding.\n *\n * @method #using\n * @param {Function|String} callbackOrProperty  When the function is passed, it should return\n * the collection items. When the string is provided, the property value is used to create the bound collection items.\n */\n\n/**\n * Creates the class factory binding in which items of the source collection are passed to\n * the constructor of the specified class.\n *\n * @method #as\n * @param {Function} Class The class constructor used to create instances in the factory.\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/plugincollection\n */\n\nimport CKEditorError, { logError } from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * Manages a list of CKEditor plugins, including loading, resolving dependencies and initialization.\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class PluginCollection {\n\t/**\n\t * Creates an instance of the plugin collection class.\n\t * Allows loading and initializing plugins and their dependencies.\n\t * Allows providing a list of already loaded plugins. These plugins will not be destroyed along with this collection.\n\t *\n\t * @param {module:core/editor/editor~Editor|module:core/context~Context} context\n\t * @param {Array.<Function>} [availablePlugins] Plugins (constructors) which the collection will be able to use\n\t * when {@link module:core/plugincollection~PluginCollection#init} is used with the plugin names (strings, instead of constructors).\n\t * Usually, the editor will pass its built-in plugins to the collection so they can later be\n\t * used in `config.plugins` or `config.removePlugins` by names.\n\t * @param {Iterable.<Array>} contextPlugins A list of already initialized plugins represented by a\n\t * `[ PluginConstructor, pluginInstance ]` pair.\n\t */\n\tconstructor( context, availablePlugins = [], contextPlugins = [] ) {\n\t\t/**\n\t\t * @protected\n\t\t * @type {module:core/editor/editor~Editor|module:core/context~Context}\n\t\t */\n\t\tthis._context = context;\n\n\t\t/**\n\t\t * @protected\n\t\t * @type {Map}\n\t\t */\n\t\tthis._plugins = new Map();\n\n\t\t/**\n\t\t * A map of plugin constructors that can be retrieved by their names.\n\t\t *\n\t\t * @protected\n\t\t * @type {Map.<String|Function,Function>}\n\t\t */\n\t\tthis._availablePlugins = new Map();\n\n\t\tfor ( const PluginConstructor of availablePlugins ) {\n\t\t\tif ( PluginConstructor.pluginName ) {\n\t\t\t\tthis._availablePlugins.set( PluginConstructor.pluginName, PluginConstructor );\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Map of {@link module:core/contextplugin~ContextPlugin context plugins} which can be retrieved by their constructors or instances.\n\t\t *\n\t\t * @protected\n\t\t * @type {Map<Function,Function>}\n\t\t */\n\t\tthis._contextPlugins = new Map();\n\n\t\tfor ( const [ PluginConstructor, pluginInstance ] of contextPlugins ) {\n\t\t\tthis._contextPlugins.set( PluginConstructor, pluginInstance );\n\t\t\tthis._contextPlugins.set( pluginInstance, PluginConstructor );\n\n\t\t\t// To make it possible to require a plugin by its name.\n\t\t\tif ( PluginConstructor.pluginName ) {\n\t\t\t\tthis._availablePlugins.set( PluginConstructor.pluginName, PluginConstructor );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Returns `[ PluginConstructor, pluginInstance ]` pairs.\n\t *\n\t * @returns {Iterable.<Array>}\n\t */\n\t* [ Symbol.iterator ]() {\n\t\tfor ( const entry of this._plugins ) {\n\t\t\tif ( typeof entry[ 0 ] == 'function' ) {\n\t\t\t\tyield entry;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Gets the plugin instance by its constructor or name.\n\t *\n\t *\t\t// Check if 'Clipboard' plugin was loaded.\n\t *\t\tif ( editor.plugins.has( 'Clipboard' ) ) {\n\t *\t\t\t// Get clipboard plugin instance\n\t *\t\t\tconst clipboard = editor.plugins.get( 'Clipboard' );\n\t *\n\t *\t\t\tthis.listenTo( clipboard, 'inputTransformation', ( evt, data ) => {\n\t *\t\t\t\t// Do something on clipboard input.\n\t *\t\t\t} );\n\t *\t\t}\n\t *\n\t * **Note**: This method will throw an error if a plugin is not loaded. Use `{@link #has editor.plugins.has()}`\n\t * to check if a plugin is available.\n\t *\n\t * @param {Function|String} key The plugin constructor or {@link module:core/plugin~PluginInterface.pluginName name}.\n\t * @returns {module:core/plugin~PluginInterface}\n\t */\n\tget( key ) {\n\t\tconst plugin = this._plugins.get( key );\n\n\t\tif ( !plugin ) {\n\t\t\tlet pluginName = key;\n\n\t\t\tif ( typeof key == 'function' ) {\n\t\t\t\tpluginName = key.pluginName || key.name;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * The plugin is not loaded and could not be obtained.\n\t\t\t *\n\t\t\t * Plugin classes (constructors) need to be provided to the editor and must be loaded before they can be obtained from\n\t\t\t * the plugin collection.\n\t\t\t * This is usually done in CKEditor 5 builds by setting the {@link module:core/editor/editor~Editor.builtinPlugins}\n\t\t\t * property.\n\t\t\t *\n\t\t\t * **Note**: You can use `{@link module:core/plugincollection~PluginCollection#has editor.plugins.has()}`\n\t\t\t * to check if a plugin was loaded.\n\t\t\t *\n\t\t\t * @error plugincollection-plugin-not-loaded\n\t\t\t * @param {String} plugin The name of the plugin which is not loaded.\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'plugincollection-plugin-not-loaded', this._context, { plugin: pluginName } );\n\t\t}\n\n\t\treturn plugin;\n\t}\n\n\t/**\n\t * Checks if a plugin is loaded.\n\t *\n\t *\t\t// Check if the 'Clipboard' plugin was loaded.\n\t *\t\tif ( editor.plugins.has( 'Clipboard' ) ) {\n\t *\t\t\t// Now use the clipboard plugin instance:\n\t *\t\t\tconst clipboard = editor.plugins.get( 'Clipboard' );\n\t *\n\t *\t\t\t// ...\n\t *\t\t}\n\t *\n\t * @param {Function|String} key The plugin constructor or {@link module:core/plugin~PluginInterface.pluginName name}.\n\t * @returns {Boolean}\n\t */\n\thas( key ) {\n\t\treturn this._plugins.has( key );\n\t}\n\n\t/**\n\t * Initializes a set of plugins and adds them to the collection.\n\t *\n\t * @param {Array.<Function|String>} plugins An array of {@link module:core/plugin~PluginInterface plugin constructors}\n\t * or {@link module:core/plugin~PluginInterface.pluginName plugin names}. The second option (names) works only if\n\t * `availablePlugins` were passed to the {@link #constructor}.\n\t * @param {Array.<String|Function>} [removePlugins] Names of the plugins or plugin constructors\n\t * that should not be loaded (despite being specified in the `plugins` array).\n\t * @returns {Promise.<module:core/plugin~LoadedPlugins>} A promise which gets resolved once all plugins are loaded\n\t * and available in the collection.\n\t */\n\tinit( plugins, removePlugins = [] ) {\n\t\tconst that = this;\n\t\tconst context = this._context;\n\t\tconst loading = new Set();\n\t\tconst loaded = [];\n\n\t\tconst pluginConstructors = mapToAvailableConstructors( plugins );\n\t\tconst removePluginConstructors = mapToAvailableConstructors( removePlugins );\n\t\tconst missingPlugins = getMissingPluginNames( plugins );\n\n\t\tif ( missingPlugins ) {\n\t\t\t/**\n\t\t\t * Some plugins are not available and could not be loaded.\n\t\t\t *\n\t\t\t * Plugin classes (constructors) need to be provided to the editor before they can be loaded by name.\n\t\t\t * This is usually done in CKEditor 5 builds by setting the {@link module:core/editor/editor~Editor.builtinPlugins}\n\t\t\t * property.\n\t\t\t *\n\t\t\t * **If you see this warning when using one of the {@glink builds/index CKEditor 5 Builds}**, it means\n\t\t\t * that you try to enable a plugin which was not included in that build. This may be due to a typo\n\t\t\t * in the plugin name or simply because that plugin is not a part of this build. In the latter scenario,\n\t\t\t * read more about {@glink builds/guides/development/custom-builds custom builds}.\n\t\t\t *\n\t\t\t * **If you see this warning when using one of the editor creators directly** (not a build), then it means\n\t\t\t * that you tried loading plugins by name. However, unlike CKEditor 4, CKEditor 5 does not implement a \"plugin loader\".\n\t\t\t * This means that CKEditor 5 does not know where to load the plugin modules from. Therefore, you need to\n\t\t\t * provide each plugin through a reference (as a constructor function). Check out the examples in\n\t\t\t * {@glink builds/guides/integration/advanced-setup#scenario-2-building-from-source \"Building from source\"}.\n\t\t\t *\n\t\t\t * @error plugincollection-plugin-not-found\n\t\t\t * @param {Array.<String>} plugins The name of the plugins which could not be loaded.\n\t\t\t */\n\t\t\tconst errorId = 'plugincollection-plugin-not-found';\n\n\t\t\t// Log the error, so it's more visible on the console. Hopefully, for a better DX.\n\t\t\tlogError( errorId, { plugins: missingPlugins } );\n\n\t\t\treturn Promise.reject( new CKEditorError( errorId, context, { plugins: missingPlugins } ) );\n\t\t}\n\n\t\treturn Promise.all( pluginConstructors.map( loadPlugin ) )\n\t\t\t.then( () => initPlugins( loaded, 'init' ) )\n\t\t\t.then( () => initPlugins( loaded, 'afterInit' ) )\n\t\t\t.then( () => loaded );\n\n\t\tfunction loadPlugin( PluginConstructor ) {\n\t\t\tif ( removePluginConstructors.includes( PluginConstructor ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// The plugin is already loaded or being loaded - do nothing.\n\t\t\tif ( that._plugins.has( PluginConstructor ) || loading.has( PluginConstructor ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn instantiatePlugin( PluginConstructor )\n\t\t\t\t.catch( err => {\n\t\t\t\t\t/**\n\t\t\t\t\t * It was not possible to load the plugin.\n\t\t\t\t\t *\n\t\t\t\t\t * This is a generic error logged to the console when a JavaScript error is thrown during the initialization\n\t\t\t\t\t * of one of the plugins.\n\t\t\t\t\t *\n\t\t\t\t\t * If you correctly handled the promise returned by the editor's `create()` method (as shown below),\n\t\t\t\t\t * you will find the original error logged to the console, too:\n\t\t\t\t\t *\n\t\t\t\t\t *\t\tClassicEditor.create( document.getElementById( 'editor' ) )\n\t\t\t\t\t *\t\t\t.then( editor => {\n\t\t\t\t\t *\t\t\t\t// ...\n\t\t\t\t\t * \t\t\t} )\n\t\t\t\t\t *\t\t\t.catch( error => {\n\t\t\t\t\t *\t\t\t\tconsole.error( error );\n\t\t\t\t\t *\t\t\t} );\n\t\t\t\t\t *\n\t\t\t\t\t * @error plugincollection-load\n\t\t\t\t\t * @param {String} plugin The name of the plugin that could not be loaded.\n\t\t\t\t\t */\n\t\t\t\t\tlogError( 'plugincollection-load', { plugin: PluginConstructor } );\n\n\t\t\t\t\tthrow err;\n\t\t\t\t} );\n\t\t}\n\n\t\tfunction initPlugins( loadedPlugins, method ) {\n\t\t\treturn loadedPlugins.reduce( ( promise, plugin ) => {\n\t\t\t\tif ( !plugin[ method ] ) {\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\n\t\t\t\tif ( that._contextPlugins.has( plugin ) ) {\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\n\t\t\t\treturn promise.then( plugin[ method ].bind( plugin ) );\n\t\t\t}, Promise.resolve() );\n\t\t}\n\n\t\tfunction instantiatePlugin( PluginConstructor ) {\n\t\t\treturn new Promise( resolve => {\n\t\t\t\tloading.add( PluginConstructor );\n\n\t\t\t\tif ( PluginConstructor.requires ) {\n\t\t\t\t\tPluginConstructor.requires.forEach( RequiredPluginConstructorOrName => {\n\t\t\t\t\t\tconst RequiredPluginConstructor = getPluginConstructor( RequiredPluginConstructorOrName );\n\n\t\t\t\t\t\tif ( PluginConstructor.isContextPlugin && !RequiredPluginConstructor.isContextPlugin ) {\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * If a plugin is a context plugin, all plugins it requires should also be context plugins\n\t\t\t\t\t\t\t * instead of plugins. In other words, if one plugin can be used in the context,\n\t\t\t\t\t\t\t * all its requirements should also be ready to be used in the context. Note that the context\n\t\t\t\t\t\t\t * provides only a part of the API provided by the editor. If one plugin needs a full\n\t\t\t\t\t\t\t * editor API, all plugins which require it are considered as plugins that need a full\n\t\t\t\t\t\t\t * editor API.\n\t\t\t\t\t\t\t *\n\t\t\t\t\t\t\t * @error plugincollection-context-required\n\t\t\t\t\t\t\t * @param {String} plugin The name of the required plugin.\n\t\t\t\t\t\t\t * @param {String} requiredBy The name of the parent plugin.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t\t\t\t'plugincollection-context-required',\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t{ plugin: RequiredPluginConstructor.name, requiredBy: PluginConstructor.name }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( removePlugins.includes( RequiredPluginConstructor ) ) {\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * Cannot load a plugin because one of its dependencies is listed in the `removePlugins` option.\n\t\t\t\t\t\t\t *\n\t\t\t\t\t\t\t * @error plugincollection-required\n\t\t\t\t\t\t\t * @param {String} plugin The name of the required plugin.\n\t\t\t\t\t\t\t * @param {String} requiredBy The name of the parent plugin.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t\t\t\t'plugincollection-required',\n\t\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\t\t{ plugin: RequiredPluginConstructor.name, requiredBy: PluginConstructor.name }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tloadPlugin( RequiredPluginConstructor );\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tconst plugin = that._contextPlugins.get( PluginConstructor ) || new PluginConstructor( context );\n\t\t\t\tthat._add( PluginConstructor, plugin );\n\t\t\t\tloaded.push( plugin );\n\n\t\t\t\tresolve();\n\t\t\t} );\n\t\t}\n\n\t\tfunction getPluginConstructor( PluginConstructorOrName ) {\n\t\t\tif ( typeof PluginConstructorOrName == 'function' ) {\n\t\t\t\treturn PluginConstructorOrName;\n\t\t\t}\n\n\t\t\treturn that._availablePlugins.get( PluginConstructorOrName );\n\t\t}\n\n\t\tfunction getMissingPluginNames( plugins ) {\n\t\t\tconst missingPlugins = [];\n\n\t\t\tfor ( const pluginNameOrConstructor of plugins ) {\n\t\t\t\tif ( !getPluginConstructor( pluginNameOrConstructor ) ) {\n\t\t\t\t\tmissingPlugins.push( pluginNameOrConstructor );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn missingPlugins.length ? missingPlugins : null;\n\t\t}\n\n\t\tfunction mapToAvailableConstructors( plugins ) {\n\t\t\treturn plugins\n\t\t\t\t.map( pluginNameOrConstructor => getPluginConstructor( pluginNameOrConstructor ) )\n\t\t\t\t.filter( PluginConstructor => !!PluginConstructor );\n\t\t}\n\t}\n\n\t/**\n\t * Destroys all loaded plugins.\n\t *\n\t * @returns {Promise}\n\t */\n\tdestroy() {\n\t\tconst promises = [];\n\n\t\tfor ( const [ , pluginInstance ] of this ) {\n\t\t\tif ( typeof pluginInstance.destroy == 'function' && !this._contextPlugins.has( pluginInstance ) ) {\n\t\t\t\tpromises.push( pluginInstance.destroy() );\n\t\t\t}\n\t\t}\n\n\t\treturn Promise.all( promises );\n\t}\n\n\t/**\n\t * Adds the plugin to the collection. Exposed mainly for testing purposes.\n\t *\n\t * @protected\n\t * @param {Function} PluginConstructor The plugin constructor.\n\t * @param {module:core/plugin~PluginInterface} plugin The instance of the plugin.\n\t */\n\t_add( PluginConstructor, plugin ) {\n\t\tthis._plugins.set( PluginConstructor, plugin );\n\n\t\tconst pluginName = PluginConstructor.pluginName;\n\n\t\tif ( !pluginName ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this._plugins.has( pluginName ) ) {\n\t\t\t/**\n\t\t\t * Two plugins with the same {@link module:core/plugin~PluginInterface.pluginName} were loaded.\n\t\t\t * This will lead to runtime conflicts between these plugins.\n\t\t\t *\n\t\t\t * In practice, this warning usually means that new plugins were added to an existing CKEditor 5 build.\n\t\t\t * Plugins should always be added to a source version of the editor (`@ckeditor/ckeditor5-editor-*`),\n\t\t\t * not to an editor imported from one of the `@ckeditor/ckeditor5-build-*` packages.\n\t\t\t *\n\t\t\t * Check your import paths and the list of plugins passed to\n\t\t\t * {@link module:core/editor/editor~Editor.create `Editor.create()`}\n\t\t\t * or specified in {@link module:core/editor/editor~Editor.builtinPlugins `Editor.builtinPlugins`}.\n\t\t\t *\n\t\t\t * The second option is that your `node_modules/` directory contains duplicated versions of the same\n\t\t\t * CKEditor 5 packages. Normally, on clean installations, npm deduplicates packages in `node_modules/`, so\n\t\t\t * it may be enough to call `rm -rf node_modules && npm i`. However, if you installed conflicting versions\n\t\t\t * of some packages, their dependencies may need to be installed in more than one version which may lead to this\n\t\t\t * warning.\n\t\t\t *\n\t\t\t * Technically speaking, this error occurs because after adding a plugin to an existing editor build\n\t\t\t * the dependencies of this plugin are being duplicated.\n\t\t\t * They are already built into that editor build and now get added for the second time as dependencies\n\t\t\t * of the plugin you are installing.\n\t\t\t *\n\t\t\t * Read more about {@glink builds/guides/integration/installing-plugins installing plugins}.\n\t\t\t *\n\t\t\t * @error plugincollection-plugin-name-conflict\n\t\t\t * @param {String} pluginName The duplicated plugin name.\n\t\t\t * @param {Function} plugin1 The first plugin constructor.\n\t\t\t * @param {Function} plugin2 The second plugin constructor.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'plugincollection-plugin-name-conflict',\n\t\t\t\tnull,\n\t\t\t\t{ pluginName, plugin1: this._plugins.get( pluginName ).constructor, plugin2: PluginConstructor }\n\t\t\t);\n\t\t}\n\n\t\tthis._plugins.set( pluginName, plugin );\n\t}\n}\n\nmix( PluginCollection, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/toarray\n */\n\n/**\n * Transforms any value to an array. If the provided value is already an array, it is returned unchanged.\n *\n * @param {*} data Value to transform to an array.\n * @returns {Array} Array created from data.\n */\nexport default function toArray( data ) {\n\treturn Array.isArray( data ) ? data : [ data ];\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals window */\n\n/**\n * @module utils/translation-service\n */\n\nimport CKEditorError from './ckeditorerror';\n\n/* istanbul ignore else */\nif ( !window.CKEDITOR_TRANSLATIONS ) {\n\twindow.CKEDITOR_TRANSLATIONS = {};\n}\n\n/**\n * Adds translations to existing ones or overrides the existing translations. These translations will later\n * be available for the {@link module:utils/locale~Locale#t `t()`} function.\n *\n * The `translations` is an object which consists of `messageId: translation` pairs. Note that the message ID can be\n * either constructed from the message string or from the message ID if it was passed\n * (this happens rarely and mostly for short messages or messages with placeholders).\n * Since the editor displays only the message string, the message ID can be found either in the source code or in the\n * built translations for another language.\n *\n *\t\tadd( 'pl', {\n *\t\t\t'Cancel': 'Anuluj',\n *\t\t\t'IMAGE': 'obraz', // Note that the `IMAGE` comes from the message ID, while the string can be `image`.\n *\t\t} );\n *\n * If the message is supposed to support various plural forms, make sure to provide an array with the singular form and all plural forms:\n *\n *\t\tadd( 'pl', {\n *\t \t\t'Add space': [ 'Dodaj spacj', 'Dodaj %0 spacje', 'Dodaj %0 spacji' ]\n * \t\t} );\n *\n * You should also specify the third argument (the `getPluralForm()` function) that will be used to determine the plural form if no\n * language file was loaded for that language. All language files coming from CKEditor 5 sources will have this option set, so\n * these plural form rules will be reused by other translations added to the registered languages. The `getPluralForm()` function\n * can return either a Boolean or a number.\n *\n * \t\tadd( 'en', {\n *\t \t\t// ... Translations.\n * \t\t}, n => n !== 1 );\n * \t\tadd( 'pl', {\n *\t \t\t// ... Translations.\n * \t\t}, n => n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && ( n % 100 < 10 || n % 100 >= 20 ) ? 1 : 2 );\n *\n * All translations extend the global `window.CKEDITOR_TRANSLATIONS` object. An example of this object can be found below:\n *\n * \t\t{\n * \t\t\tpl: {\n *\t\t\t\tdictionary: {\n *\t\t\t\t\t'Cancel': 'Anuluj',\n *\t\t\t\t\t'Add space': [ 'Dodaj spacj', 'Dodaj %0 spacje', 'Dodaj %0 spacji' ]\n *\t\t\t\t},\n *\t\t\t\t// A function that returns the plural form index.\n *\t\t\t\tgetPluralForm: n => n !==1\n *\t\t\t}\n *\t\t\t// Other languages.\n *\t\t}\n *\n * If you cannot import this function from this module (e.g. because you use a CKEditor 5 build), you can\n * still add translations by extending the global `window.CKEDITOR_TRANSLATIONS` object by using a function like\n * the one below:\n *\n *\t\tfunction addTranslations( language, translations, getPluralForm ) {\n *\t\t\tif ( !window.CKEDITOR_TRANSLATIONS ) {\n *\t\t\t\twindow.CKEDITOR_TRANSLATIONS = {};\n *\t\t\t}\n\n *\t\t\tif ( !window.CKEDITOR_TRANSLATIONS[ language ] ) {\n *\t\t\t\twindow.CKEDITOR_TRANSLATIONS[ language ] = {};\n *\t\t\t}\n *\n *\t\t\tconst languageTranslations = window.CKEDITOR_TRANSLATIONS[ language ];\n *\n * \t\t\tlanguageTranslations.dictionary = languageTranslations.dictionary || {};\n * \t\t\tlanguageTranslations.getPluralForm = getPluralForm || languageTranslations.getPluralForm;\n *\n *\t\t\t// Extend the dictionary for the given language.\n *\t\t\tObject.assign( languageTranslations.dictionary, translations );\n *\t\t}\n *\n * @param {String} language Target language.\n * @param {Object.<String,*>} translations An object with translations which will be added to the dictionary.\n * For each message ID the value should be either a translation or an array of translations if the message\n * should support plural forms.\n * @param {Function} getPluralForm A function that returns the plural form index (a number).\n */\nexport function add( language, translations, getPluralForm ) {\n\tif ( !window.CKEDITOR_TRANSLATIONS[ language ] ) {\n\t\twindow.CKEDITOR_TRANSLATIONS[ language ] = {};\n\t}\n\n\tconst languageTranslations = window.CKEDITOR_TRANSLATIONS[ language ];\n\n\tlanguageTranslations.dictionary = languageTranslations.dictionary || {};\n\tlanguageTranslations.getPluralForm = getPluralForm || languageTranslations.getPluralForm;\n\n\tObject.assign( languageTranslations.dictionary, translations );\n}\n\n/**\n * **Note:** This method is internal, use {@link module:utils/locale~Locale#t the `t()` function} instead to translate\n * the editor UI parts.\n *\n * This function is responsible for translating messages to the specified language. It uses translations added perviously\n * by {@link module:utils/translation-service~add} (a translations dictionary and the `getPluralForm()` function\n * to provide accurate translations of plural forms).\n *\n * When no translation is defined in the dictionary or the dictionary does not exist, this function returns\n * the original message string or the message plural depending on the number of elements.\n *\n *\t\ttranslate( 'pl', { string: 'Cancel' } ); // 'Cancel'\n *\n * The third optional argument is the number of elements, based on which the single form or one of the plural forms\n * should be picked when the message is supposed to support various plural forms.\n *\n * \t\ttranslate( 'en', { string: 'Add a space', plural: 'Add %0 spaces' }, 1 ); // 'Add a space'\n * \t\ttranslate( 'en', { string: 'Add a space', plural: 'Add %0 spaces' }, 3 ); // 'Add %0 spaces'\n *\n * The message should provide an ID using the `id` property when the message strings are not unique and their\n * translations should be different.\n *\n *\t\ttranslate( 'en', { string: 'image', id: 'ADD_IMAGE' } );\n *\t\ttranslate( 'en', { string: 'image', id: 'AN_IMAGE' } );\n *\n * @protected\n * @param {String} language Target language.\n * @param {module:utils/translation-service~Message|String} message A message that will be translated.\n * @param {Number} [quantity] The number of elements for which a plural form should be picked from the target language dictionary.\n * @returns {String} Translated sentence.\n */\nexport function _translate( language, message, quantity = 1 ) {\n\tif ( typeof quantity !== 'number' ) {\n\t\t/**\n\t\t * An incorrect value was passed to the translation function. This was probably caused\n\t\t * by an incorrect message interpolation of a plural form. Note that for messages supporting plural forms\n\t\t * the second argument of the `t()` function should always be a number or an array with a number as the first element.\n\t\t *\n\t\t * @error translation-service-quantity-not-a-number\n\t\t */\n\t\tthrow new CKEditorError( 'translation-service-quantity-not-a-number', null, { quantity } );\n\t}\n\n\tconst numberOfLanguages = getNumberOfLanguages();\n\n\tif ( numberOfLanguages === 1 ) {\n\t\t// Override the language to the only supported one.\n\t\t// This can't be done in the `Locale` class, because the translations comes after the `Locale` class initialization.\n\t\tlanguage = Object.keys( window.CKEDITOR_TRANSLATIONS )[ 0 ];\n\t}\n\n\tconst messageId = message.id || message.string;\n\n\tif ( numberOfLanguages === 0 || !hasTranslation( language, messageId ) ) {\n\t\tif ( quantity !== 1 ) {\n\t\t\t// Return the default plural form that was passed in the `message.plural` parameter.\n\t\t\treturn message.plural;\n\t\t}\n\n\t\treturn message.string;\n\t}\n\n\tconst dictionary = window.CKEDITOR_TRANSLATIONS[ language ].dictionary;\n\tconst getPluralForm = window.CKEDITOR_TRANSLATIONS[ language ].getPluralForm || ( n => n === 1 ? 0 : 1 );\n\n\tif ( typeof dictionary[ messageId ] === 'string' ) {\n\t\treturn dictionary[ messageId ];\n\t}\n\n\tconst pluralFormIndex = Number( getPluralForm( quantity ) );\n\n\t// Note: The `translate` function is not responsible for replacing `%0, %1, ...` with values.\n\treturn dictionary[ messageId ][ pluralFormIndex ];\n}\n\n/**\n * Clears dictionaries for test purposes.\n *\n * @protected\n */\nexport function _clear() {\n\twindow.CKEDITOR_TRANSLATIONS = {};\n}\n\n// Checks whether the dictionary exists and translation in that dictionary exists.\nfunction hasTranslation( language, messageId ) {\n\treturn (\n\t\t!!window.CKEDITOR_TRANSLATIONS[ language ] &&\n\t\t!!window.CKEDITOR_TRANSLATIONS[ language ].dictionary[ messageId ]\n\t);\n}\n\nfunction getNumberOfLanguages() {\n\treturn Object.keys( window.CKEDITOR_TRANSLATIONS ).length;\n}\n\n/**\n * The internationalization message interface. A message that implements this interface can be passed to the `t()` function\n * to be translated to the target UI language.\n *\n * @typedef {Object} module:utils/translation-service~Message\n *\n * @property {String} string The message string to translate. Acts as a default translation if the translation for a given language\n * is not defined. When the message is supposed to support plural forms, the string should be the English singular form of the message.\n * @property {String} [id] The message ID. If passed, the message ID is taken from this property instead of the `message.string`.\n * This property is useful when various messages share the same message string, for example, the `editor` string in `in the editor`\n * and `my editor` sentences.\n * @property {String} [plural] The plural form of the message. This property should be skipped when a message is not supposed\n * to support plural forms. Otherwise it should always be set to a string with the English plural form of the message.\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/locale\n */\n\n/* globals console */\n\nimport toArray from './toarray';\nimport { _translate } from './translation-service';\n\nconst RTL_LANGUAGE_CODES = [ 'ar', 'fa', 'he', 'ku', 'ug' ];\n\n/**\n * Represents the localization services.\n */\nexport default class Locale {\n\t/**\n\t * Creates a new instance of the locale class. Learn more about\n\t * {@glink features/ui-language configuring the language of the editor}.\n\t *\n\t * @param {Object} [options] Locale configuration.\n\t * @param {String} [options.uiLanguage='en'] The editor UI language code in the\n\t * [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format. See {@link #uiLanguage}.\n\t * @param {String} [options.contentLanguage] The editor content language code in the\n\t * [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format. If not specified, the same as `options.language`.\n\t * See {@link #contentLanguage}.\n\t */\n\tconstructor( options = {} ) {\n\t\t/**\n\t\t * The editor UI language code in the [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format.\n\t\t *\n\t\t * If the {@link #contentLanguage content language} was not specified in the `Locale` constructor,\n\t\t * it also defines the language of the content.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.uiLanguage = options.uiLanguage || 'en';\n\n\t\t/**\n\t\t * The editor content language code in the [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format.\n\t\t *\n\t\t * Usually the same as the {@link #uiLanguage editor language}, it can be customized by passing an optional\n\t\t * argument to the `Locale` constructor.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.contentLanguage = options.contentLanguage || this.uiLanguage;\n\n\t\t/**\n\t\t * Text direction of the {@link #uiLanguage editor UI language}. Either `'ltr'` or `'rtl'`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.uiLanguageDirection = getLanguageDirection( this.uiLanguage );\n\n\t\t/**\n\t\t * Text direction of the {@link #contentLanguage editor content language}.\n\t\t *\n\t\t * If the content language was passed directly to the `Locale` constructor, this property represents the\n\t\t * direction of that language.\n\t\t *\n\t\t * If the {@link #contentLanguage editor content language} was derived from the {@link #uiLanguage editor language},\n\t\t * the content language direction is the same as the {@link #uiLanguageDirection UI language direction}.\n\t\t *\n\t\t * The value is either `'ltr'` or `'rtl'`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.contentLanguageDirection = getLanguageDirection( this.contentLanguage );\n\n\t\t/**\n\t\t * Translates the given message to the {@link #uiLanguage}. This method is also available in\n\t\t * {@link module:core/editor/editor~Editor#t `Editor`} and {@link module:ui/view~View#t `View`}.\n\t\t *\n\t\t * This method's context is statically bound to the `Locale` instance and **should always be called as a function**:\n\t\t *\n\t\t *\t\tconst t = locale.t;\n\t\t *\t\tt( 'Label' );\n\t\t *\n\t\t * The message can be either a string or an object implementing the {@link module:utils/translation-service~Message} interface.\n\t\t *\n\t\t * The message may contain placeholders (`%<index>`) for value(s) that are passed as a `values` parameter.\n\t\t * For an array of values, the `%<index>` will be changed to an element of that array at the given index.\n\t\t * For a single value passed as the second argument, only the `%0` placeholders will be changed to the provided value.\n\t\t *\n\t\t *\t\tt( 'Created file \"%0\" in %1ms.', [ fileName, timeTaken ] );\n\t\t * \t\tt( 'Created file \"%0\", fileName );\n\t\t *\n\t\t * The message supports plural forms. To specify the plural form, use the `plural` property. Singular or plural form\n\t\t * will be chosen depending on the first value from the passed `values`. The value of the `plural` property is used\n\t\t * as a default plural translation when the translation for the target language is missing.\n\t\t *\n\t\t *\t\tt( { string: 'Add a space', plural: 'Add %0 spaces' }, 1 ); // 'Add a space' for the English language.\n\t\t *\t\tt( { string: 'Add a space', plural: 'Add %0 spaces' }, 5 ); // 'Add 5 spaces' for the English language.\n\t\t *\t\tt( { string: '%1 a space', plural: '%1 %0 spaces' }, [ 2, 'Add' ] ); // 'Add 2 spaces' for the English language.\n\t\t *\n\t\t * \t\tt( { string: 'Add a space', plural: 'Add %0 spaces' }, 1 ); // 'Dodaj spacj' for the Polish language.\n\t\t *\t\tt( { string: 'Add a space', plural: 'Add %0 spaces' }, 5 ); // 'Dodaj 5 spacji' for the Polish language.\n\t\t *\t\tt( { string: '%1 a space', plural: '%1 %0 spaces' }, [ 2, 'Add' ] ); // 'Dodaj 2 spacje' for the Polish language.\n\t\t *\n\t\t *  * The message should provide an ID using the `id` property when the message strings are not unique and their\n\t\t * translations should be different.\n\t\t *\n\t\t *\t\ttranslate( 'en', { string: 'image', id: 'ADD_IMAGE' } );\n\t\t *\t\ttranslate( 'en', { string: 'image', id: 'AN_IMAGE' } );\n\t\t *\n\t\t * @method #t\n\t\t * @param {String|module:utils/translation-service~Message} message A message that will be localized (translated).\n\t\t * @param {String|Number|Array.<String|Number>} [values] A value or an array of values that will fill message placeholders.\n\t\t * For messages supporting plural forms the first value will determine the plural form.\n\t\t * @returns {String}\n\t\t */\n\t\tthis.t = ( message, values ) => this._t( message, values );\n\t}\n\n\t/**\n\t * The editor UI language code in the [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format.\n\t *\n\t * **Note**: This property was deprecated. Please use {@link #uiLanguage} and {@link #contentLanguage}\n\t * properties instead.\n\t *\n\t * @deprecated\n\t * @member {String}\n\t */\n\tget language() {\n\t\t/**\n\t\t * The {@link module:utils/locale~Locale#language `Locale#language`} property was deprecated and will\n\t\t * be removed in the near future. Please use the {@link #uiLanguage} and {@link #contentLanguage} properties instead.\n\t\t *\n\t\t * @error locale-deprecated-language-property\n\t\t */\n\t\tconsole.warn(\n\t\t\t'locale-deprecated-language-property: ' +\n\t\t\t'The Locale#language property has been deprecated and will be removed in the near future. ' +\n\t\t\t'Please use #uiLanguage and #contentLanguage properties instead.' );\n\n\t\treturn this.uiLanguage;\n\t}\n\n\t/**\n\t * An unbound version of the {@link #t} method.\n\t *\n\t * @private\n\t * @param {String|module:utils/translation-service~Message} message\n\t * @param {Number|String|Array.<Number|String>} [values]\n\t * @returns {String}\n\t */\n\t_t( message, values = [] ) {\n\t\tvalues = toArray( values );\n\n\t\tif ( typeof message === 'string' ) {\n\t\t\tmessage = { string: message };\n\t\t}\n\n\t\tconst hasPluralForm = !!message.plural;\n\t\tconst quantity = hasPluralForm ? values[ 0 ] : 1;\n\n\t\tconst translatedString = _translate( this.uiLanguage, message, quantity );\n\n\t\treturn interpolateString( translatedString, values );\n\t}\n}\n\n// Fills the `%0, %1, ...` string placeholders with values.\nfunction interpolateString( string, values ) {\n\treturn string.replace( /%(\\d+)/g, ( match, index ) => {\n\t\treturn ( index < values.length ) ? values[ index ] : match;\n\t} );\n}\n\n// Helps determine whether a language is LTR or RTL.\n//\n// @param {String} language The ISO 639-1 language code.\n// @returns {String} 'ltr' or 'rtl\nfunction getLanguageDirection( languageCode ) {\n\treturn RTL_LANGUAGE_CODES.includes( languageCode ) ? 'rtl' : 'ltr';\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/context\n */\n\nimport Config from '@ckeditor/ckeditor5-utils/src/config';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\nimport PluginCollection from './plugincollection';\nimport Locale from '@ckeditor/ckeditor5-utils/src/locale';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Provides a common, higher-level environment for solutions that use multiple {@link module:core/editor/editor~Editor editors}\n * or plugins that work outside the editor. Use it instead of {@link module:core/editor/editor~Editor.create `Editor.create()`}\n * in advanced application integrations.\n *\n * All configuration options passed to a context will be used as default options for editor instances initialized in that context.\n *\n * {@link module:core/contextplugin~ContextPlugin Context plugins} passed to a context instance will be shared among all\n * editor instances initialized in this context. These will be the same plugin instances for all the editors.\n *\n * **Note:** The context can only be initialized with {@link module:core/contextplugin~ContextPlugin context plugins}\n * (e.g. [comments](https://ckeditor.com/collaboration/comments/)). Regular {@link module:core/plugin~Plugin plugins} require an\n * editor instance to work and cannot be added to a context.\n *\n * **Note:** You can add a context plugin to an editor instance, though.\n *\n * If you are using multiple editor instances on one page and use any context plugins, create a context to share the configuration and\n * plugins among these editors. Some plugins will use the information about all existing editors to better integrate between them.\n *\n * If you are using plugins that do not require an editor to work (e.g. [comments](https://ckeditor.com/collaboration/comments/)),\n * enable and configure them using the context.\n *\n * If you are using only a single editor on each page, use {@link module:core/editor/editor~Editor.create `Editor.create()`} instead.\n * In such case, a context instance will be created by the editor instance in a transparent way.\n *\n * See {@link module:core/context~Context.create `Context.create()`} for usage examples.\n */\nexport default class Context {\n\t/**\n\t * Creates a context instance with a given configuration.\n\t *\n\t * Usually not to be used directly. See the static {@link module:core/context~Context.create `create()`} method.\n\t *\n\t * @param {Object} [config={}] The context configuration.\n\t */\n\tconstructor( config ) {\n\t\t/**\n\t\t * Stores all the configurations specific to this context instance.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:utils/config~Config}\n\t\t */\n\t\tthis.config = new Config( config, this.constructor.defaultConfig );\n\n\t\tconst availablePlugins = this.constructor.builtinPlugins;\n\n\t\tthis.config.define( 'plugins', availablePlugins );\n\n\t\t/**\n\t\t * The plugins loaded and in use by this context instance.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:core/plugincollection~PluginCollection}\n\t\t */\n\t\tthis.plugins = new PluginCollection( this, availablePlugins );\n\n\t\tconst languageConfig = this.config.get( 'language' ) || {};\n\n\t\t/**\n\t\t * @readonly\n\t\t * @type {module:utils/locale~Locale}\n\t\t */\n\t\tthis.locale = new Locale( {\n\t\t\tuiLanguage: typeof languageConfig === 'string' ? languageConfig : languageConfig.ui,\n\t\t\tcontentLanguage: this.config.get( 'language.content' )\n\t\t} );\n\n\t\t/**\n\t\t * Shorthand for {@link module:utils/locale~Locale#t}.\n\t\t *\n\t\t * @see module:utils/locale~Locale#t\n\t\t * @method #t\n\t\t */\n\t\tthis.t = this.locale.t;\n\n\t\t/**\n\t\t * A list of editors that this context instance is injected to.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:utils/collection~Collection}\n\t\t */\n\t\tthis.editors = new Collection();\n\n\t\t/**\n\t\t * Reference to the editor which created the context.\n\t\t * Null when the context was created outside of the editor.\n\t\t *\n\t\t * It is used to destroy the context when removing the editor that has created the context.\n\t\t *\n\t\t * @private\n\t\t * @type {module:core/editor/editor~Editor|null}\n\t\t */\n\t\tthis._contextOwner = null;\n\t}\n\n\t/**\n\t * Loads and initializes plugins specified in the configuration.\n\t *\n\t * @returns {Promise.<module:core/plugin~LoadedPlugins>} A promise which resolves\n\t * once the initialization is completed, providing an array of loaded plugins.\n\t */\n\tinitPlugins() {\n\t\tconst plugins = this.config.get( 'plugins' ) || [];\n\n\t\tfor ( const Plugin of plugins ) {\n\t\t\tif ( typeof Plugin != 'function' ) {\n\t\t\t\t/**\n\t\t\t\t * Only a constructor function is allowed as a {@link module:core/contextplugin~ContextPlugin context plugin}.\n\t\t\t\t *\n\t\t\t\t * @error context-initplugins-constructor-only\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'context-initplugins-constructor-only',\n\t\t\t\t\tnull,\n\t\t\t\t\t{ Plugin }\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( Plugin.isContextPlugin !== true ) {\n\t\t\t\t/**\n\t\t\t\t * Only a plugin marked as a {@link module:core/contextplugin~ContextPlugin.isContextPlugin context plugin}\n\t\t\t\t * is allowed to be used with a context.\n\t\t\t\t *\n\t\t\t\t * @error context-initplugins-invalid-plugin\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'context-initplugins-invalid-plugin',\n\t\t\t\t\tnull,\n\t\t\t\t\t{ Plugin }\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn this.plugins.init( plugins );\n\t}\n\n\t/**\n\t * Destroys the context instance and all editors used with the context,\n\t * releasing all resources used by the context.\n\t *\n\t * @returns {Promise} A promise that resolves once the context instance is fully destroyed.\n\t */\n\tdestroy() {\n\t\treturn Promise.all( Array.from( this.editors, editor => editor.destroy() ) )\n\t\t\t.then( () => this.plugins.destroy() );\n\t}\n\n\t/**\n\t * Adds a reference to the editor which is used with this context.\n\t *\n\t * When the given editor has created the context, the reference to this editor will be stored\n\t * as a {@link ~Context#_contextOwner}.\n\t *\n\t * This method should only be used by the editor.\n\t *\n\t * @protected\n\t * @param {module:core/editor/editor~Editor} editor\n\t * @param {Boolean} isContextOwner Stores the given editor as a context owner.\n\t */\n\t_addEditor( editor, isContextOwner ) {\n\t\tif ( this._contextOwner ) {\n\t\t\t/**\n\t\t\t * Cannot add multiple editors to the context which is created by the editor.\n\t\t\t *\n\t\t\t * @error context-addeditor-private-context\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'context-addeditor-private-context' );\n\t\t}\n\n\t\tthis.editors.add( editor );\n\n\t\tif ( isContextOwner ) {\n\t\t\tthis._contextOwner = editor;\n\t\t}\n\t}\n\n\t/**\n\t * Removes a reference to the editor which was used with this context.\n\t * When the context was created by the given editor, the context will be destroyed.\n\t *\n\t * This method should only be used by the editor.\n\t *\n\t * @protected\n\t * @param {module:core/editor/editor~Editor} editor\n\t * @return {Promise} A promise that resolves once the editor is removed from the context or when the context was destroyed.\n\t */\n\t_removeEditor( editor ) {\n\t\tif ( this.editors.has( editor ) ) {\n\t\t\tthis.editors.remove( editor );\n\t\t}\n\n\t\tif ( this._contextOwner === editor ) {\n\t\t\treturn this.destroy();\n\t\t}\n\n\t\treturn Promise.resolve();\n\t}\n\n\t/**\n\t * Returns the context configuration which will be copied to the editors created using this context.\n\t *\n\t * The configuration returned by this method has the plugins configuration removed &mdash; plugins are shared with all editors\n\t * through another mechanism.\n\t *\n\t * This method should only be used by the editor.\n\t *\n\t * @protected\n\t * @returns {Object} Configuration as a plain object.\n\t */\n\t_getEditorConfig() {\n\t\tconst result = {};\n\n\t\tfor ( const name of this.config.names() ) {\n\t\t\tif ( ![ 'plugins', 'removePlugins', 'extraPlugins' ].includes( name ) ) {\n\t\t\t\tresult[ name ] = this.config.get( name );\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Creates and initializes a new context instance.\n\t *\n\t *\t\tconst commonConfig = { ... }; // Configuration for all the plugins and editors.\n\t *\t\tconst editorPlugins = [ ... ]; // Regular plugins here.\n\t *\n\t *\t\tContext\n\t *\t\t\t.create( {\n\t *\t\t\t\t// Only context plugins here.\n\t *\t\t\t\tplugins: [ ... ],\n\t *\n\t *\t\t\t\t// Configure the language for all the editors (it cannot be overwritten).\n\t *\t\t\t\tlanguage: { ... },\n\t *\n\t *\t\t\t\t// Configuration for context plugins.\n\t *\t\t\t\tcomments: { ... },\n\t *\t\t\t\t...\n\t *\n\t *\t\t\t\t// Default configuration for editor plugins.\n\t *\t\t\t\ttoolbar: { ... },\n\t *\t\t\t\timage: { ... },\n\t *\t\t\t\t...\n\t *\t\t\t} )\n\t *\t\t\t.then( context => {\n\t *\t\t\t\tconst promises = [];\n\t *\n\t *\t\t\t\tpromises.push( ClassicEditor.create(\n\t *\t\t\t\t\tdocument.getElementById( 'editor1' ),\n\t *\t\t\t\t\t{\n\t *\t\t\t\t\t\teditorPlugins,\n\t *\t\t\t\t\t\tcontext\n\t *\t\t\t\t\t}\n\t *\t\t\t\t) );\n\t *\n\t *\t\t\t\tpromises.push( ClassicEditor.create(\n\t *\t\t\t\t\tdocument.getElementById( 'editor2' ),\n\t *\t\t\t\t\t{\n\t *\t\t\t\t\t\teditorPlugins,\n\t *\t\t\t\t\t\tcontext,\n\t *\t\t\t\t\t\ttoolbar: { ... } // You can overwrite the configuration of the context.\n\t *\t\t\t\t\t}\n\t *\t\t\t\t) );\n\t *\n\t *\t\t\t\treturn Promise.all( promises );\n\t *\t\t\t} );\n\t *\n\t * @param {Object} [config] The context configuration.\n\t * @returns {Promise} A promise resolved once the context is ready. The promise resolves with the created context instance.\n\t */\n\tstatic create( config ) {\n\t\treturn new Promise( resolve => {\n\t\t\tconst context = new this( config );\n\n\t\t\tresolve( context.initPlugins().then( () => context ) );\n\t\t} );\n\t}\n}\n\n/**\n * An array of plugins built into the `Context` class.\n *\n * It is used in CKEditor 5 builds featuring `Context` to provide a list of context plugins which are later automatically initialized\n * during the context initialization.\n *\n * They will be automatically initialized by `Context` unless `config.plugins` is passed.\n *\n *\t\t// Build some context plugins into the Context class first.\n *\t\tContext.builtinPlugins = [ FooPlugin, BarPlugin ];\n *\n *\t\t// Normally, you need to define config.plugins, but since Context.builtinPlugins was\n *\t\t// defined, now you can call create() without any configuration.\n *\t\tContext\n *\t\t\t.create()\n *\t\t\t.then( context => {\n *\t\t\t\tcontext.plugins.get( FooPlugin ); // -> An instance of the Foo plugin.\n *\t\t\t\tcontext.plugins.get( BarPlugin ); // -> An instance of the Bar plugin.\n *\t\t\t} );\n *\n * See also {@link module:core/context~Context.defaultConfig `Context.defaultConfig`}\n * and {@link module:core/editor/editor~Editor.builtinPlugins `Editor.builtinPlugins`}.\n *\n * @static\n * @member {Array.<Function>} module:core/context~Context.builtinPlugins\n */\n\n/**\n * The default configuration which is built into the `Context` class.\n *\n * It is used in CKEditor 5 builds featuring `Context` to provide the default configuration options which are later used during the\n * context initialization.\n *\n *\t\tContext.defaultConfig = {\n *\t\t\tfoo: 1,\n *\t\t\tbar: 2\n *\t\t};\n *\n *\t\tContext\n *\t\t\t.create()\n *\t\t\t.then( context => {\n *\t\t\t\tcontext.config.get( 'foo' ); // -> 1\n *\t\t\t\tcontext.config.get( 'bar' ); // -> 2\n *\t\t\t} );\n *\n *\t\t// The default options can be overridden by the configuration passed to create().\n *\t\tContext\n *\t\t\t.create( { bar: 3 } )\n *\t\t\t.then( context => {\n *\t\t\t\tcontext.config.get( 'foo' ); // -> 1\n *\t\t\t\tcontext.config.get( 'bar' ); // -> 3\n *\t\t\t} );\n *\n * See also {@link module:core/context~Context.builtinPlugins `Context.builtinPlugins`}\n * and {@link module:core/editor/editor~Editor.defaultConfig `Editor.defaultConfig`}.\n *\n * @static\n * @member {Object} module:core/context~Context.defaultConfig\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/comparearrays\n */\n\n/**\n * Compares how given arrays relate to each other. One array can be: same as another array, prefix of another array\n * or completely different. If arrays are different, first index at which they differ is returned. Otherwise,\n * a flag specifying the relation is returned. Flags are negative numbers, so whenever a number >= 0 is returned\n * it means that arrays differ.\n *\n *\t\tcompareArrays( [ 0, 2 ], [ 0, 2 ] );\t\t// 'same'\n *\t\tcompareArrays( [ 0, 2 ], [ 0, 2, 1 ] );\t\t// 'prefix'\n *\t\tcompareArrays( [ 0, 2 ], [ 0 ] );\t\t\t// 'extension'\n *\t\tcompareArrays( [ 0, 2 ], [ 1, 2 ] );\t\t// 0\n *\t\tcompareArrays( [ 0, 2 ], [ 0, 1 ] );\t\t// 1\n *\n * @param {Array} a Array that is compared.\n * @param {Array} b Array to compare with.\n * @returns {module:utils/comparearrays~ArrayRelation} How array `a` is related to `b`.\n */\nexport default function compareArrays( a, b ) {\n\tconst minLen = Math.min( a.length, b.length );\n\n\tfor ( let i = 0; i < minLen; i++ ) {\n\t\tif ( a[ i ] != b[ i ] ) {\n\t\t\t// The arrays are different.\n\t\t\treturn i;\n\t\t}\n\t}\n\n\t// Both arrays were same at all points.\n\tif ( a.length == b.length ) {\n\t\t// If their length is also same, they are the same.\n\t\treturn 'same';\n\t} else if ( a.length < b.length ) {\n\t\t// Compared array is shorter so it is a prefix of the other array.\n\t\treturn 'prefix';\n\t} else {\n\t\t// Compared array is longer so it is an extension of the other array.\n\t\treturn 'extension';\n\t}\n}\n\n/**\n * @typedef {'extension'|'same'|'prefix'} module:utils/comparearrays~ArrayRelation\n */\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nexport default clone;\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/node\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\nimport { clone } from 'lodash-es';\n\n// To check if component is loaded more than once.\nimport '@ckeditor/ckeditor5-utils/src/version';\n\n/**\n * Abstract view node class.\n *\n * This is an abstract class. Its constructor should not be used directly.\n * Use the {@link module:engine/view/downcastwriter~DowncastWriter} or {@link module:engine/view/upcastwriter~UpcastWriter}\n * to create new instances of view nodes.\n *\n * @abstract\n */\nexport default class Node {\n\t/**\n\t * Creates a tree view node.\n\t *\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document instance to which this node belongs.\n\t */\n\tconstructor( document ) {\n\t\t/**\n\t\t * The document instance to which this node belongs.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/document~Document}\n\t\t */\n\t\tthis.document = document;\n\n\t\t/**\n\t\t * Parent element. Null by default. Set by {@link module:engine/view/element~Element#_insertChild}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment|null}\n\t\t */\n\t\tthis.parent = null;\n\t}\n\n\t/**\n\t * Index of the node in the parent element or null if the node has no parent.\n\t *\n\t * Accessing this property throws an error if this node's parent element does not contain it.\n\t * This means that view tree got broken.\n\t *\n\t * @readonly\n\t * @type {Number|null}\n\t */\n\tget index() {\n\t\tlet pos;\n\n\t\tif ( !this.parent ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// No parent or child doesn't exist in parent's children.\n\t\tif ( ( pos = this.parent.getChildIndex( this ) ) == -1 ) {\n\t\t\t/**\n\t\t\t * The node's parent does not contain this node. It means that the document tree is corrupted.\n\t\t\t *\n\t\t\t * @error view-node-not-found-in-parent\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-node-not-found-in-parent', this );\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\t/**\n\t * Node's next sibling, or `null` if it is the last child.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|null}\n\t */\n\tget nextSibling() {\n\t\tconst index = this.index;\n\n\t\treturn ( index !== null && this.parent.getChild( index + 1 ) ) || null;\n\t}\n\n\t/**\n\t * Node's previous sibling, or `null` if it is the first child.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|null}\n\t */\n\tget previousSibling() {\n\t\tconst index = this.index;\n\n\t\treturn ( index !== null && this.parent.getChild( index - 1 ) ) || null;\n\t}\n\n\t/**\n\t * Top-most ancestor of the node. If the node has no parent it is the root itself.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\tlet root = this; // eslint-disable-line consistent-this\n\n\t\twhile ( root.parent ) {\n\t\t\troot = root.parent;\n\t\t}\n\n\t\treturn root;\n\t}\n\n\t/**\n\t * Returns true if the node is in a tree rooted in the document (is a descendant of one of its roots).\n\t *\n\t * @returns {Boolean}\n\t */\n\tisAttached() {\n\t\treturn this.root.is( 'rootElement' );\n\t}\n\n\t/**\n\t * Gets a path to the node. The path is an array containing indices of consecutive ancestors of this node,\n\t * beginning from {@link module:engine/view/node~Node#root root}, down to this node's index.\n\t *\n\t *\t\tconst abc = downcastWriter.createText( 'abc' );\n\t *\t\tconst foo = downcastWriter.createText( 'foo' );\n\t *\t\tconst h1 = downcastWriter.createElement( 'h1', null, downcastWriter.createText( 'header' ) );\n\t *\t\tconst p = downcastWriter.createElement( 'p', null, [ abc, foo ] );\n\t *\t\tconst div = downcastWriter.createElement( 'div', null, [ h1, p ] );\n\t *\t\tfoo.getPath(); // Returns [ 1, 3 ]. `foo` is in `p` which is in `div`. `p` starts at offset 1, while `foo` at 3.\n\t *\t\th1.getPath(); // Returns [ 0 ].\n\t *\t\tdiv.getPath(); // Returns [].\n\t *\n\t * @returns {Array.<Number>} The path.\n\t */\n\tgetPath() {\n\t\tconst path = [];\n\t\tlet node = this; // eslint-disable-line consistent-this\n\n\t\twhile ( node.parent ) {\n\t\t\tpath.unshift( node.index );\n\t\t\tnode = node.parent;\n\t\t}\n\n\t\treturn path;\n\t}\n\n\t/**\n\t * Returns ancestors array of this node.\n\t *\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` this node will be also included in parent's array.\n\t * @param {Boolean} [options.parentFirst=false] When set to `true`, array will be sorted from node's parent to root element,\n\t * otherwise root element will be the first item in the array.\n\t * @returns {Array} Array with ancestors.\n\t */\n\tgetAncestors( options = { includeSelf: false, parentFirst: false } ) {\n\t\tconst ancestors = [];\n\t\tlet parent = options.includeSelf ? this : this.parent;\n\n\t\twhile ( parent ) {\n\t\t\tancestors[ options.parentFirst ? 'push' : 'unshift' ]( parent );\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn ancestors;\n\t}\n\n\t/**\n\t * Returns a {@link module:engine/view/element~Element} or {@link module:engine/view/documentfragment~DocumentFragment}\n\t * which is a common ancestor of both nodes.\n\t *\n\t * @param {module:engine/view/node~Node} node The second node.\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` both nodes will be considered \"ancestors\" too.\n\t * Which means that if e.g. node A is inside B, then their common ancestor will be B.\n\t * @returns {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor( node, options = {} ) {\n\t\tconst ancestorsA = this.getAncestors( options );\n\t\tconst ancestorsB = node.getAncestors( options );\n\n\t\tlet i = 0;\n\n\t\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n\t}\n\n\t/**\n\t * Returns whether this node is before given node. `false` is returned if nodes are in different trees (for example,\n\t * in different {@link module:engine/view/documentfragment~DocumentFragment}s).\n\t *\n\t * @param {module:engine/view/node~Node} node Node to compare with.\n\t * @returns {Boolean}\n\t */\n\tisBefore( node ) {\n\t\t// Given node is not before this node if they are same.\n\t\tif ( this == node ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Return `false` if it is impossible to compare nodes.\n\t\tif ( this.root !== node.root ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst thisPath = this.getPath();\n\t\tconst nodePath = node.getPath();\n\n\t\tconst result = compareArrays( thisPath, nodePath );\n\n\t\tswitch ( result ) {\n\t\t\tcase 'prefix':\n\t\t\t\treturn true;\n\n\t\t\tcase 'extension':\n\t\t\t\treturn false;\n\n\t\t\tdefault:\n\t\t\t\treturn thisPath[ result ] < nodePath[ result ];\n\t\t}\n\t}\n\n\t/**\n\t * Returns whether this node is after given node. `false` is returned if nodes are in different trees (for example,\n\t * in different {@link module:engine/view/documentfragment~DocumentFragment}s).\n\t *\n\t * @param {module:engine/view/node~Node} node Node to compare with.\n\t * @returns {Boolean}\n\t */\n\tisAfter( node ) {\n\t\t// Given node is not before this node if they are same.\n\t\tif ( this == node ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Return `false` if it is impossible to compare nodes.\n\t\tif ( this.root !== node.root ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// In other cases, just check if the `node` is before, and return the opposite.\n\t\treturn !this.isBefore( node );\n\t}\n\n\t/**\n\t * Removes node from parent.\n\t *\n\t * @protected\n\t */\n\t_remove() {\n\t\tthis.parent._removeChildren( this.index );\n\t}\n\n\t/**\n\t * @protected\n\t * @param {module:engine/view/document~ChangeType} type Type of the change.\n\t * @param {module:engine/view/node~Node} node Changed node.\n\t * @fires change\n\t */\n\t_fireChange( type, node ) {\n\t\tthis.fire( 'change:' + type, node );\n\n\t\tif ( this.parent ) {\n\t\t\tthis.parent._fireChange( type, node );\n\t\t}\n\t}\n\n\t/**\n\t * Custom toJSON method to solve child-parent circular dependencies.\n\t *\n\t * @returns {Object} Clone of this object with the parent property removed.\n\t */\n\ttoJSON() {\n\t\tconst json = clone( this );\n\n\t\t// Due to circular references we need to remove parent reference.\n\t\tdelete json.parent;\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t * This method is useful when processing view objects that are of unknown type. For example, a function\n\t * may return a {@link module:engine/view/documentfragment~DocumentFragment} or a {@link module:engine/view/node~Node}\n\t * that can be either a text node or an element. This method can be used to check what kind of object is returned.\n\t *\n\t *\t\tsomeObject.is( 'element' ); // -> true if this is an element\n\t *\t\tsomeObject.is( 'node' ); // -> true if this is a node (a text node or an element)\n\t *\t\tsomeObject.is( 'documentFragment' ); // -> true if this is a document fragment\n\t *\n\t * Since this method is also available on a range of model objects, you can prefix the type of the object with\n\t * `model:` or `view:` to check, for example, if this is the model's or view's element:\n\t *\n\t *\t\tviewElement.is( 'view:element' ); // -> true\n\t *\t\tviewElement.is( 'model:element' ); // -> false\n\t *\n\t * By using this method it is also possible to check a name of an element:\n\t *\n\t *\t\timgElement.is( 'element', 'img' ); // -> true\n\t *\t\timgElement.is( 'view:element', 'img' ); // -> same as above, but more precise\n\t *\n\t * The list of view objects which implement the `is()` method:\n\t *\n\t * * {@link module:engine/view/attributeelement~AttributeElement#is `AttributeElement#is()`}\n\t * * {@link module:engine/view/containerelement~ContainerElement#is `ContainerElement#is()`}\n\t * * {@link module:engine/view/documentfragment~DocumentFragment#is `DocumentFragment#is()`}\n\t * * {@link module:engine/view/documentselection~DocumentSelection#is `DocumentSelection#is()`}\n\t * * {@link module:engine/view/editableelement~EditableElement#is `EditableElement#is()`}\n\t * * {@link module:engine/view/element~Element#is `Element#is()`}\n\t * * {@link module:engine/view/emptyelement~EmptyElement#is `EmptyElement#is()`}\n\t * * {@link module:engine/view/node~Node#is `Node#is()`}\n\t * * {@link module:engine/view/position~Position#is `Position#is()`}\n\t * * {@link module:engine/view/range~Range#is `Range#is()`}\n\t * * {@link module:engine/view/rooteditableelement~RootEditableElement#is `RootEditableElement#is()`}\n\t * * {@link module:engine/view/selection~Selection#is `Selection#is()`}\n\t * * {@link module:engine/view/text~Text#is `Text#is()`}\n\t * * {@link module:engine/view/textproxy~TextProxy#is `TextProxy#is()`}\n\t * * {@link module:engine/view/uielement~UIElement#is `UIElement#is()`}\n\t *\n\t * @method #is\n\t * @param {String} type Type to check.\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'node' || type === 'view:node';\n\t}\n\n\t/**\n\t * Clones this node.\n\t *\n\t * @protected\n\t * @method #_clone\n\t * @returns {module:engine/view/node~Node} Clone of this node.\n\t */\n\n\t/**\n\t * Checks if provided node is similar to this node.\n\t *\n\t * @method #isSimilar\n\t * @returns {Boolean} True if nodes are similar.\n\t */\n}\n\n/**\n * Fired when list of {@link module:engine/view/element~Element elements} children changes.\n *\n * Change event is bubbled  it is fired on all ancestors.\n *\n * @event change:children\n * @param {module:engine/view/node~Node} changedNode\n */\n\n/**\n * Fired when list of {@link module:engine/view/element~Element elements} attributes changes.\n *\n * Change event is bubbled  it is fired on all ancestors.\n *\n * @event change:attributes\n * @param {module:engine/view/node~Node} changedNode\n */\n\n/**\n * Fired when {@link module:engine/view/text~Text text nodes} data changes.\n *\n * Change event is bubbled  it is fired on all ancestors.\n *\n * @event change:text\n * @param {module:engine/view/node~Node} changedNode\n */\n\n/**\n * @event change\n */\n\nmix( Node, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/text\n */\n\nimport Node from './node';\n\n/**\n * Tree view text node.\n *\n * The constructor of this class should not be used directly. To create a new text node instance\n * use the {@link module:engine/view/downcastwriter~DowncastWriter#createText `DowncastWriter#createText()`}\n * method when working on data downcasted from the model or the\n * {@link module:engine/view/upcastwriter~UpcastWriter#createText `UpcastWriter#createText()`}\n * method when working on non-semantic views.\n *\n * @extends module:engine/view/node~Node\n */\nexport default class Text extends Node {\n\t/**\n\t * Creates a tree view text node.\n\t *\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document instance to which this text node belongs.\n\t * @param {String} data The text's data.\n\t */\n\tconstructor( document, data ) {\n\t\tsuper( document );\n\n\t\t/**\n\t\t * The text content.\n\t\t *\n\t\t * Setting the data fires the {@link module:engine/view/node~Node#event:change:text change event}.\n\t\t *\n\t\t * @protected\n\t\t * @member {String} module:engine/view/text~Text#_textData\n\t\t */\n\t\tthis._textData = data;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\ttext.is( '$text' ); // -> true\n\t *\t\ttext.is( 'node' ); // -> true\n\t *\t\ttext.is( 'view:$text' ); // -> true\n\t *\t\ttext.is( 'view:node' ); // -> true\n\t *\n\t *\t\ttext.is( 'model:$text' ); // -> false\n\t *\t\ttext.is( 'element' ); // -> false\n\t *\t\ttext.is( 'range' ); // -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * **Note:** Until version 20.0.0 this method wasn't accepting `'$text'` type. The legacy `'text'` type is still\n\t * accepted for backward compatibility.\n\t *\n\t * @param {String} type Type to check.\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === '$text' || type === 'view:$text' ||\n\t\t\t// This are legacy values kept for backward compatibility.\n\t\t\ttype === 'text' || type === 'view:text' ||\n\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\ttype === 'node' || type === 'view:node';\n\t}\n\n\t/**\n\t * The text content.\n\t *\n\t * @readonly\n\t * @type {String}\n\t */\n\tget data() {\n\t\treturn this._textData;\n\t}\n\n\t/**\n\t * The `_data` property is controlled by a getter and a setter.\n\t *\n\t * The getter is required when using the addition assignment operator on protected property:\n\t *\n\t *\t\tconst foo = downcastWriter.createText( 'foo' );\n\t *\t\tconst bar = downcastWriter.createText( 'bar' );\n\t *\n\t *\t\tfoo._data += bar.data;   // executes: `foo._data = foo._data + bar.data`\n\t *\t\tconsole.log( foo.data ); // prints: 'foobar'\n\t *\n\t * If the protected getter didn't exist, `foo._data` will return `undefined` and result of the merge will be invalid.\n\t *\n\t * The setter sets data and fires the {@link module:engine/view/node~Node#event:change:text change event}.\n\t *\n\t * @protected\n\t * @type {String}\n\t */\n\tget _data() {\n\t\treturn this.data;\n\t}\n\n\tset _data( data ) {\n\t\tthis._fireChange( 'text', this );\n\n\t\tthis._textData = data;\n\t}\n\n\t/**\n\t * Checks if this text node is similar to other text node.\n\t * Both nodes should have the same data to be considered as similar.\n\t *\n\t * @param {module:engine/view/text~Text} otherNode Node to check if it is same as this node.\n\t * @returns {Boolean}\n\t */\n\tisSimilar( otherNode ) {\n\t\tif ( !( otherNode instanceof Text ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this === otherNode || this.data === otherNode.data;\n\t}\n\n\t/**\n\t * Clones this node.\n\t *\n\t * @protected\n\t * @returns {module:engine/view/text~Text} Text node that is a clone of this node.\n\t */\n\t_clone() {\n\t\treturn new Text( this.document, this.data );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `#${ this.data }`;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ViewText: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logExtended() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ViewText: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/textproxy\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * TextProxy is a wrapper for substring of {@link module:engine/view/text~Text}. Instance of this class is created by\n * {@link module:engine/view/treewalker~TreeWalker} when only a part of {@link module:engine/view/text~Text} needs to be returned.\n *\n * `TextProxy` has an API similar to {@link module:engine/view/text~Text Text} and allows to do most of the common tasks performed\n * on view nodes.\n *\n * **Note:** Some `TextProxy` instances may represent whole text node, not just a part of it.\n * See {@link module:engine/view/textproxy~TextProxy#isPartial}.\n *\n * **Note:** `TextProxy` is a readonly interface.\n *\n * **Note:** `TextProxy` instances are created on the fly basing on the current state of parent {@link module:engine/view/text~Text}.\n * Because of this it is highly unrecommended to store references to `TextProxy instances because they might get\n * invalidated due to operations on Document. Also TextProxy is not a {@link module:engine/view/node~Node} so it can not be\n * inserted as a child of {@link module:engine/view/element~Element}.\n *\n * `TextProxy` instances are created by {@link module:engine/view/treewalker~TreeWalker view tree walker}. You should not need to create\n * an instance of this class by your own.\n */\nexport default class TextProxy {\n\t/**\n\t * Creates a text proxy.\n\t *\n\t * @protected\n\t * @param {module:engine/view/text~Text} textNode Text node which part is represented by this text proxy.\n\t * @param {Number} offsetInText Offset in {@link module:engine/view/textproxy~TextProxy#textNode text node}\n\t * from which the text proxy starts.\n\t * @param {Number} length Text proxy length, that is how many text node's characters, starting from `offsetInText` it represents.\n\t * @constructor\n\t */\n\tconstructor( textNode, offsetInText, length ) {\n\t\t/**\n\t\t * Reference to the {@link module:engine/view/text~Text} element which TextProxy is a substring.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/text~Text} module:engine/view/textproxy~TextProxy#textNode\n\t\t */\n\t\tthis.textNode = textNode;\n\n\t\tif ( offsetInText < 0 || offsetInText > textNode.data.length ) {\n\t\t\t/**\n\t\t\t * Given offsetInText value is incorrect.\n\t\t\t *\n\t\t\t * @error view-textproxy-wrong-offsetintext\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-textproxy-wrong-offsetintext', this );\n\t\t}\n\n\t\tif ( length < 0 || offsetInText + length > textNode.data.length ) {\n\t\t\t/**\n\t\t\t * Given length value is incorrect.\n\t\t\t *\n\t\t\t * @error view-textproxy-wrong-length\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-textproxy-wrong-length', this );\n\t\t}\n\n\t\t/**\n\t\t * Text data represented by this text proxy.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String} module:engine/view/textproxy~TextProxy#data\n\t\t */\n\t\tthis.data = textNode.data.substring( offsetInText, offsetInText + length );\n\n\t\t/**\n\t\t * Offset in the `textNode` where this `TextProxy` instance starts.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} module:engine/view/textproxy~TextProxy#offsetInText\n\t\t */\n\t\tthis.offsetInText = offsetInText;\n\t}\n\n\t/**\n\t * Offset size of this node.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget offsetSize() {\n\t\treturn this.data.length;\n\t}\n\n\t/**\n\t * Flag indicating whether `TextProxy` instance covers only part of the original {@link module:engine/view/text~Text text node}\n\t * (`true`) or the whole text node (`false`).\n\t *\n\t * This is `false` when text proxy starts at the very beginning of {@link module:engine/view/textproxy~TextProxy#textNode textNode}\n\t * ({@link module:engine/view/textproxy~TextProxy#offsetInText offsetInText} equals `0`) and text proxy sizes is equal to\n\t * text node size.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isPartial() {\n\t\treturn this.data.length !== this.textNode.data.length;\n\t}\n\n\t/**\n\t * Parent of this text proxy, which is same as parent of text node represented by this text proxy.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment|null}\n\t */\n\tget parent() {\n\t\treturn this.textNode.parent;\n\t}\n\n\t/**\n\t * Root of this text proxy, which is same as root of text node represented by this text proxy.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this.textNode.root;\n\t}\n\n\t/**\n\t * {@link module:engine/view/document~Document View document} that owns this text proxy, or `null` if the text proxy is inside\n\t * {@link module:engine/view/documentfragment~DocumentFragment document fragment}.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/document~Document|null}\n\t */\n\tget document() {\n\t\treturn this.textNode.document;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\ttextProxy.is( '$textProxy' ); // -> true\n\t *\t\ttextProxy.is( 'view:$textProxy' ); // -> true\n\t *\n\t *\t\ttextProxy.is( 'model:$textProxy' ); // -> false\n\t *\t\ttextProxy.is( 'element' ); // -> false\n\t *\t\ttextProxy.is( 'range' ); // -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * **Note:** Until version 20.0.0 this method wasn't accepting `'$textProxy'` type. The legacy `'textProxy'` type is still\n\t * accepted for backward compatibility.\n\t *\n\t * @param {String} type Type to check.\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === '$textProxy' || type === 'view:$textProxy' ||\n\t\t\t// This are legacy values kept for backward compatibility.\n\t\t\ttype === 'textProxy' || type === 'view:textProxy';\n\t}\n\n\t/**\n\t * Returns ancestors array of this text proxy.\n\t *\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` {#textNode} will be also included in parent's array.\n\t * @param {Boolean} [options.parentFirst=false] When set to `true`, array will be sorted from text proxy parent to\n\t * root element, otherwise root element will be the first item in the array.\n\t * @returns {Array} Array with ancestors.\n\t */\n\tgetAncestors( options = { includeSelf: false, parentFirst: false } ) {\n\t\tconst ancestors = [];\n\t\tlet parent = options.includeSelf ? this.textNode : this.parent;\n\n\t\twhile ( parent !== null ) {\n\t\t\tancestors[ options.parentFirst ? 'push' : 'unshift' ]( parent );\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn ancestors;\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `#${ this.data }`;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ViewTextProxy: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logExtended() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ViewTextProxy: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/tomap\n */\n\nimport objectToMap from './objecttomap';\nimport isIterable from './isiterable';\n\n/**\n * Transforms object or iterable to map. Iterable needs to be in the format acceptable by the `Map` constructor.\n *\n *\t\tmap = toMap( { 'foo': 1, 'bar': 2 } );\n *\t\tmap = toMap( [ [ 'foo', 1 ], [ 'bar', 2 ] ] );\n *\t\tmap = toMap( anotherMap );\n *\n * @param {Object|Iterable} data Object or iterable to transform.\n * @returns {Map} Map created from data.\n */\nexport default function toMap( data ) {\n\tif ( isIterable( data ) ) {\n\t\treturn new Map( data );\n\t} else {\n\t\treturn objectToMap( data );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/objecttomap\n */\n\n/**\n * Transforms object to map.\n *\n *\t\tconst map = objectToMap( { 'foo': 1, 'bar': 2 } );\n *\t\tmap.get( 'foo' ); // 1\n *\n * **Note**: For mixed data (`Object` or `Iterable`) there's a dedicated {@link module:utils/tomap~toMap} function.\n *\n * @param {Object} obj Object to transform.\n * @returns {Map} Map created from object.\n */\nexport default function objectToMap( obj ) {\n\tconst map = new Map();\n\n\tfor ( const key in obj ) {\n\t\tmap.set( key, obj[ key ] );\n\t}\n\n\treturn map;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/matcher\n */\n\n/**\n * View matcher class.\n * Instance of this class can be used to find {@link module:engine/view/element~Element elements} that match given pattern.\n */\nexport default class Matcher {\n\t/**\n\t * Creates new instance of Matcher.\n\t *\n\t * @param {String|RegExp|Object} [pattern] Match patterns. See {@link module:engine/view/matcher~Matcher#add add method} for\n\t * more information.\n\t */\n\tconstructor( ...pattern ) {\n\t\t/**\n\t\t * @private\n\t\t * @type {Array<String|RegExp|Object>}\n\t\t */\n\t\tthis._patterns = [];\n\n\t\tthis.add( ...pattern );\n\t}\n\n\t/**\n\t * Adds pattern or patterns to matcher instance.\n\t *\n\t *\t\t// String.\n\t *\t\tmatcher.add( 'div' );\n\t *\n\t *\t\t// Regular expression.\n\t *\t\tmatcher.add( /^\\w/ );\n\t *\n\t *\t\t// Single class.\n\t *\t\tmatcher.add( {\n\t *\t\t\tclasses: 'foobar'\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/view/matcher~MatcherPattern} for more examples.\n\t *\n\t * Multiple patterns can be added in one call:\n\t *\n\t * \t\tmatcher.add( 'div', { classes: 'foobar' } );\n\t *\n\t * @param {Object|String|RegExp|Function} pattern Object describing pattern details. If string or regular expression\n\t * is provided it will be used to match element's name. Pattern can be also provided in a form\n\t * of a function - then this function will be called with each {@link module:engine/view/element~Element element} as a parameter.\n\t * Function's return value will be stored under `match` key of the object returned from\n\t * {@link module:engine/view/matcher~Matcher#match match} or {@link module:engine/view/matcher~Matcher#matchAll matchAll} methods.\n\t * @param {String|RegExp} [pattern.name] Name or regular expression to match element's name.\n\t * @param {Object} [pattern.attributes] Object with key-value pairs representing attributes to match. Each object key\n\t * represents attribute name. Value under that key can be either:\n\t * * `true` - then attribute is just required (can be empty),\n\t * * a string - then attribute has to be equal, or\n\t * * a regular expression - then attribute has to match the expression.\n\t * @param {String|RegExp|Array} [pattern.classes] Class name or array of class names to match. Each name can be\n\t * provided in a form of string or regular expression.\n\t * @param {Object} [pattern.styles] Object with key-value pairs representing styles to match. Each object key\n\t * represents style name. Value under that key can be either a string or a regular expression and it will be used\n\t * to match style value.\n\t */\n\tadd( ...pattern ) {\n\t\tfor ( let item of pattern ) {\n\t\t\t// String or RegExp pattern is used as element's name.\n\t\t\tif ( typeof item == 'string' || item instanceof RegExp ) {\n\t\t\t\titem = { name: item };\n\t\t\t}\n\n\t\t\t// Single class name/RegExp can be provided.\n\t\t\tif ( item.classes && ( typeof item.classes == 'string' || item.classes instanceof RegExp ) ) {\n\t\t\t\titem.classes = [ item.classes ];\n\t\t\t}\n\n\t\t\tthis._patterns.push( item );\n\t\t}\n\t}\n\n\t/**\n\t * Matches elements for currently stored patterns. Returns match information about first found\n\t * {@link module:engine/view/element~Element element}, otherwise returns `null`.\n\t *\n\t * Example of returned object:\n\t *\n\t *\t\t{\n\t *\t\t\telement: <instance of found element>,\n\t *\t\t\tpattern: <pattern used to match found element>,\n\t *\t\t\tmatch: {\n\t *\t\t\t\tname: true,\n\t *\t\t\t\tattributes: [ 'title', 'href' ],\n\t *\t\t\t\tclasses: [ 'foo' ],\n\t *\t\t\t\tstyles: [ 'color', 'position' ]\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t * @see module:engine/view/matcher~Matcher#add\n\t * @see module:engine/view/matcher~Matcher#matchAll\n\t * @param {...module:engine/view/element~Element} element View element to match against stored patterns.\n\t * @returns {Object|null} result\n\t * @returns {module:engine/view/element~Element} result.element Matched view element.\n\t * @returns {Object|String|RegExp|Function} result.pattern Pattern that was used to find matched element.\n\t * @returns {Object} result.match Object representing matched element parts.\n\t * @returns {Boolean} [result.match.name] True if name of the element was matched.\n\t * @returns {Array} [result.match.attributes] Array with matched attribute names.\n\t * @returns {Array} [result.match.classes] Array with matched class names.\n\t * @returns {Array} [result.match.styles] Array with matched style names.\n\t */\n\tmatch( ...element ) {\n\t\tfor ( const singleElement of element ) {\n\t\t\tfor ( const pattern of this._patterns ) {\n\t\t\t\tconst match = isElementMatching( singleElement, pattern );\n\n\t\t\t\tif ( match ) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\telement: singleElement,\n\t\t\t\t\t\tpattern,\n\t\t\t\t\t\tmatch\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Matches elements for currently stored patterns. Returns array of match information with all found\n\t * {@link module:engine/view/element~Element elements}. If no element is found - returns `null`.\n\t *\n\t * @see module:engine/view/matcher~Matcher#add\n\t * @see module:engine/view/matcher~Matcher#match\n\t * @param {...module:engine/view/element~Element} element View element to match against stored patterns.\n\t * @returns {Array.<Object>|null} Array with match information about found elements or `null`. For more information\n\t * see {@link module:engine/view/matcher~Matcher#match match method} description.\n\t */\n\tmatchAll( ...element ) {\n\t\tconst results = [];\n\n\t\tfor ( const singleElement of element ) {\n\t\t\tfor ( const pattern of this._patterns ) {\n\t\t\t\tconst match = isElementMatching( singleElement, pattern );\n\n\t\t\t\tif ( match ) {\n\t\t\t\t\tresults.push( {\n\t\t\t\t\t\telement: singleElement,\n\t\t\t\t\t\tpattern,\n\t\t\t\t\t\tmatch\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn results.length > 0 ? results : null;\n\t}\n\n\t/**\n\t * Returns the name of the element to match if there is exactly one pattern added to the matcher instance\n\t * and it matches element name defined by `string` (not `RegExp`). Otherwise, returns `null`.\n\t *\n\t * @returns {String|null} Element name trying to match.\n\t */\n\tgetElementName() {\n\t\tif ( this._patterns.length !== 1 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst pattern = this._patterns[ 0 ];\n\t\tconst name = pattern.name;\n\n\t\treturn ( typeof pattern != 'function' && name && !( name instanceof RegExp ) ) ? name : null;\n\t}\n}\n\n// Returns match information if {@link module:engine/view/element~Element element} is matching provided pattern.\n// If element cannot be matched to provided pattern - returns `null`.\n//\n// @param {module:engine/view/element~Element} element\n// @param {Object|String|RegExp|Function} pattern\n// @returns {Object|null} Returns object with match information or null if element is not matching.\nfunction isElementMatching( element, pattern ) {\n\t// If pattern is provided as function - return result of that function;\n\tif ( typeof pattern == 'function' ) {\n\t\treturn pattern( element );\n\t}\n\n\tconst match = {};\n\t// Check element's name.\n\tif ( pattern.name ) {\n\t\tmatch.name = matchName( pattern.name, element.name );\n\n\t\tif ( !match.name ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// Check element's attributes.\n\tif ( pattern.attributes ) {\n\t\tmatch.attributes = matchAttributes( pattern.attributes, element );\n\n\t\tif ( !match.attributes ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// Check element's classes.\n\tif ( pattern.classes ) {\n\t\tmatch.classes = matchClasses( pattern.classes, element );\n\n\t\tif ( !match.classes ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t// Check element's styles.\n\tif ( pattern.styles ) {\n\t\tmatch.styles = matchStyles( pattern.styles, element );\n\n\t\tif ( !match.styles ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn match;\n}\n\n// Checks if name can be matched by provided pattern.\n//\n// @param {String|RegExp} pattern\n// @param {String} name\n// @returns {Boolean} Returns `true` if name can be matched, `false` otherwise.\nfunction matchName( pattern, name ) {\n\t// If pattern is provided as RegExp - test against this regexp.\n\tif ( pattern instanceof RegExp ) {\n\t\treturn pattern.test( name );\n\t}\n\n\treturn pattern === name;\n}\n\n// Checks if attributes of provided element can be matched against provided patterns.\n//\n// @param {Object} patterns Object with information about attributes to match. Each key of the object will be\n// used as attribute name. Value of each key can be a string or regular expression to match against attribute value.\n// @param {module:engine/view/element~Element} element Element which attributes will be tested.\n// @returns {Array|null} Returns array with matched attribute names or `null` if no attributes were matched.\nfunction matchAttributes( patterns, element ) {\n\tconst match = [];\n\n\tfor ( const name in patterns ) {\n\t\tconst pattern = patterns[ name ];\n\n\t\tif ( element.hasAttribute( name ) ) {\n\t\t\tconst attribute = element.getAttribute( name );\n\n\t\t\tif ( pattern === true ) {\n\t\t\t\tmatch.push( name );\n\t\t\t} else if ( pattern instanceof RegExp ) {\n\t\t\t\tif ( pattern.test( attribute ) ) {\n\t\t\t\t\tmatch.push( name );\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else if ( attribute === pattern ) {\n\t\t\t\tmatch.push( name );\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn match;\n}\n\n// Checks if classes of provided element can be matched against provided patterns.\n//\n// @param {Array.<String|RegExp>} patterns Array of strings or regular expressions to match against element's classes.\n// @param {module:engine/view/element~Element} element Element which classes will be tested.\n// @returns {Array|null} Returns array with matched class names or `null` if no classes were matched.\nfunction matchClasses( patterns, element ) {\n\tconst match = [];\n\n\tfor ( const pattern of patterns ) {\n\t\tif ( pattern instanceof RegExp ) {\n\t\t\tconst classes = element.getClassNames();\n\n\t\t\tfor ( const name of classes ) {\n\t\t\t\tif ( pattern.test( name ) ) {\n\t\t\t\t\tmatch.push( name );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( match.length === 0 ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else if ( element.hasClass( pattern ) ) {\n\t\t\tmatch.push( pattern );\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn match;\n}\n\n// Checks if styles of provided element can be matched against provided patterns.\n//\n// @param {Object} patterns Object with information about styles to match. Each key of the object will be\n// used as style name. Value of each key can be a string or regular expression to match against style value.\n// @param {module:engine/view/element~Element} element Element which styles will be tested.\n// @returns {Array|null} Returns array with matched style names or `null` if no styles were matched.\nfunction matchStyles( patterns, element ) {\n\tconst match = [];\n\n\tfor ( const name in patterns ) {\n\t\tconst pattern = patterns[ name ];\n\n\t\tif ( element.hasStyle( name ) ) {\n\t\t\tconst style = element.getStyle( name );\n\n\t\t\tif ( pattern instanceof RegExp ) {\n\t\t\t\tif ( pattern.test( style ) ) {\n\t\t\t\t\tmatch.push( name );\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else if ( style === pattern ) {\n\t\t\t\tmatch.push( name );\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn match;\n}\n\n/**\n * An entity that is a valid pattern recognized by a matcher. `MatcherPattern` is used by {@link ~Matcher} to recognize\n * if a view element fits in a group of view elements described by the pattern.\n *\n * `MatcherPattern` can be given as a `String`, a `RegExp`, an `Object` or a `Function`.\n *\n * If `MatcherPattern` is given as a `String` or `RegExp`, it will match any view element that has a matching name:\n *\n *\t\t// Match any element with name equal to 'div'.\n *\t\tconst pattern = 'div';\n *\n *\t\t// Match any element which name starts on 'p'.\n *\t\tconst pattern = /^p/;\n *\n * If `MatcherPattern` is given as an `Object`, all the object's properties will be matched with view element properties.\n *\n *\t\t// Match view element's name.\n *\t\tconst pattern = { name: /^p/ };\n *\n *\t\t// Match view element which has matching attributes.\n *\t\tconst pattern = {\n *\t\t\tattributes: {\n *\t\t\t\ttitle: 'foobar',\t// Attribute title should equal 'foobar'.\n *\t\t\t\tfoo: /^\\w+/,\t\t// Attribute foo should match /^\\w+/ regexp.\n *\t\t\t\tbar: true\t\t\t// Attribute bar should be set (can be empty).\n *\t\t\t}\n *\t\t};\n *\n *\t\t// Match view element which has given class.\n *\t\tconst pattern = {\n *\t\t\tclasses: 'foobar'\n *\t\t};\n *\n *\t\t// Match view element class using regular expression.\n *\t\tconst pattern = {\n *\t\t\tclasses: /foo.../\n *\t\t};\n *\n *\t\t// Multiple classes to match.\n *\t\tconst pattern = {\n *\t\t\tclasses: [ 'baz', 'bar', /foo.../ ]\n *\t\t};\n *\n *\t\t// Match view element which has given styles.\n *\t\tconst pattern = {\n *\t\t\tstyles: {\n *\t\t\t\tposition: 'absolute',\n *\t\t\t\tcolor: /^\\w*blue$/\n *\t\t\t}\n *\t\t};\n *\n *\t\t// Pattern with multiple properties.\n *\t\tconst pattern = {\n *\t\t\tname: 'span',\n *\t\t\tstyles: {\n *\t\t\t\t'font-weight': 'bold'\n *\t\t\t},\n *\t\t\tclasses: 'highlighted'\n *\t\t};\n *\n * If `MatcherPattern` is given as a `Function`, the function takes a view element as a first and only parameter and\n * the function should decide whether that element matches. If so, it should return what part of the view element has been matched.\n * Otherwise, the function should return `null`. The returned result will be included in `match` property of the object\n * returned by {@link ~Matcher#match} call.\n *\n *\t\t// Match an empty <div> element.\n *\t\tconst pattern = element => {\n *\t\t\tif ( element.name == 'div' && element.childCount > 0 ) {\n *\t\t\t\t// Return which part of the element was matched.\n *\t\t\t\treturn { name: true };\n *\t\t\t}\n *\n *\t\t\treturn null;\n *\t\t};\n *\n *\t\t// Match a <p> element with big font (\"heading-like\" element).\n *\t\tconst pattern = element => {\n *\t\t\tif ( element.name == 'p' ) {\n *\t\t\t\tconst fontSize = element.getStyle( 'font-size' );\n *\t\t\t\tconst size = fontSize.match( /(\\d+)/px );\n *\n *\t\t\t\tif ( size && Number( size[ 1 ] ) > 26 ) {\n *\t\t\t\t\treturn { name: true, attribute: [ 'font-size' ] };\n *\t\t\t\t}\n *\t\t\t}\n *\n *\t\t\treturn null;\n *\t\t};\n *\n * `MatcherPattern` is defined in a way that it is a superset of {@link module:engine/view/elementdefinition~ElementDefinition},\n * that is, every `ElementDefinition` also can be used as a `MatcherPattern`.\n *\n * @typedef {String|RegExp|Object|Function} module:engine/view/matcher~MatcherPattern\n *\n * @property {String|RegExp} [name] View element name to match.\n * @property {String|RegExp|Array.<String|RegExp>} [classes] View element's class name(s) to match.\n * @property {Object} [styles] Object with key-value pairs representing styles to match.\n * Each object key represents style name. Value can be given as `String` or `RegExp`.\n * @property {Object} [attributes] Object with key-value pairs representing attributes to match.\n * Each object key represents attribute name. Value can be given as `String` or `RegExp`.\n */\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nexport default isKey;\n","import MapCache from './_MapCache.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nexport default memoize;\n","import memoize from './memoize.js';\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nexport default memoizeCapped;\n","import memoizeCapped from './_memoizeCapped.js';\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nexport default stringToPath;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import isArray from './isArray.js';\nimport isKey from './_isKey.js';\nimport stringToPath from './_stringToPath.js';\nimport toString from './toString.js';\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nexport default castPath;\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nexport default last;\n","import isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default toKey;\n","import castPath from './_castPath.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nexport default baseGet;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nexport default baseSlice;\n","import baseGet from './_baseGet.js';\nimport baseSlice from './_baseSlice.js';\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n}\n\nexport default parent;\n","import castPath from './_castPath.js';\nimport last from './last.js';\nimport parent from './_parent.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.unset`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The property path to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n */\nfunction baseUnset(object, path) {\n  path = castPath(path, object);\n  object = parent(object, path);\n  return object == null || delete object[toKey(last(path))];\n}\n\nexport default baseUnset;\n","import baseUnset from './_baseUnset.js';\n\n/**\n * Removes the property at `path` of `object`.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n * _.unset(object, 'a[0].b.c');\n * // => true\n *\n * console.log(object);\n * // => { 'a': [{ 'b': {} }] };\n *\n * _.unset(object, ['a', '0', 'b', 'c']);\n * // => true\n *\n * console.log(object);\n * // => { 'a': [{ 'b': {} }] };\n */\nfunction unset(object, path) {\n  return object == null ? true : baseUnset(object, path);\n}\n\nexport default unset;\n","import baseGet from './_baseGet.js';\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nexport default get;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n","import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n","import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n","import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n","import assignValue from './_assignValue.js';\nimport castPath from './_castPath.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nexport default baseSet;\n","import baseSet from './_baseSet.js';\n\n/**\n * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n * it's created. Arrays are created for missing index properties while objects\n * are created for all other missing properties. Use `_.setWith` to customize\n * `path` creation.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.set(object, 'a[0].b.c', 4);\n * console.log(object.a[0].b.c);\n * // => 4\n *\n * _.set(object, ['x', '0', 'y', 'z'], 5);\n * console.log(object.x[0].y.z);\n * // => 5\n */\nfunction set(object, path, value) {\n  return object == null ? object : baseSet(object, path, value);\n}\n\nexport default set;\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/stylesmap\n */\n\nimport { get, isObject, merge, set, unset } from 'lodash-es';\n\n/**\n * Styles map. Allows handling (adding, removing, retrieving) a set of style rules (usually, of an element).\n *\n * The styles map is capable of normalizing style names so e.g. the following operations are possible:\n */\nexport default class StylesMap {\n\t/**\n\t * Creates Styles instance.\n\t *\n\t * @param {module:engine/view/stylesmap~StylesProcessor} styleProcessor\n\t */\n\tconstructor( styleProcessor ) {\n\t\t/**\n\t\t * Keeps an internal representation of styles map. Normalized styles are kept as object tree to allow unified modification and\n\t\t * value access model using lodash's get, set, unset, etc methods.\n\t\t *\n\t\t * When no style processor rules are defined the it acts as simple key-value storage.\n\t\t *\n\t\t * @private\n\t\t * @type {Object}\n\t\t */\n\t\tthis._styles = {};\n\n\t\t/**\n\t\t * An instance of the {@link module:engine/view/stylesmap~StylesProcessor}.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/view/stylesmap~StylesProcessor}\n\t\t */\n\t\tthis._styleProcessor = styleProcessor;\n\t}\n\n\t/**\n\t * Returns true if style map has no styles set.\n\t *\n\t * @returns {Boolean}\n\t */\n\tget isEmpty() {\n\t\tconst entries = Object.entries( this._styles );\n\t\tconst from = Array.from( entries );\n\n\t\treturn !from.length;\n\t}\n\n\t/**\n\t * Number of styles defined.\n\t *\n\t * @type {Number}\n\t */\n\tget size() {\n\t\tif ( this.isEmpty ) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn this.getStyleNames().length;\n\t}\n\n\t/**\n\t * Set styles map to a new value.\n\t *\n\t *\t\tstyles.setTo( 'border:1px solid blue;margin-top:1px;' );\n\t *\n\t * @param {String} inlineStyle\n\t */\n\tsetTo( inlineStyle ) {\n\t\tthis.clear();\n\n\t\tconst parsedStyles = Array.from( parseInlineStyles( inlineStyle ).entries() );\n\n\t\tfor ( const [ key, value ] of parsedStyles ) {\n\t\t\tthis._styleProcessor.toNormalizedForm( key, value, this._styles );\n\t\t}\n\t}\n\n\t/**\n\t * Checks if a given style is set.\n\t *\n\t *\t\tstyles.setTo( 'margin-left:1px;' );\n\t *\n\t *\t\tstyles.has( 'margin-left' );    // -> true\n\t *\t\tstyles.has( 'padding' );        // -> false\n\t *\n\t * **Note**: This check supports normalized style names.\n\t *\n\t *\t\t// Enable 'margin' shorthand processing:\n\t *\t\teditor.data.addStyleProcessorRules( addMarginRules );\n\t *\n\t *\t\tstyles.setTo( 'margin:2px;' );\n\t *\n\t *\t\tstyles.has( 'margin' );         // -> true\n\t *\t\tstyles.has( 'margin-top' );     // -> true\n\t *\t\tstyles.has( 'margin-left' );    // -> true\n\t *\n\t *\t\tstyles.remove( 'margin-top' );\n\t *\n\t *\t\tstyles.has( 'margin' );         // -> false\n\t *\t\tstyles.has( 'margin-top' );     // -> false\n\t *\t\tstyles.has( 'margin-left' );    // -> true\n\t *\n\t * @param {String} name Style name.\n\t * @returns {Boolean}\n\t */\n\thas( name ) {\n\t\tif ( this.isEmpty ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst styles = this._styleProcessor.getReducedForm( name, this._styles );\n\n\t\tconst propertyDescriptor = styles.find( ( [ property ] ) => property === name );\n\n\t\t// Only return a value if it is set;\n\t\treturn Array.isArray( propertyDescriptor );\n\t}\n\n\t/**\n\t * Sets a given style.\n\t *\n\t * Can insert one by one:\n\t *\n\t *\t\tstyles.set( 'color', 'blue' );\n\t *\t\tstyles.set( 'margin-right', '1em' );\n\t *\n\t * or many styles at once:\n\t *\n\t *\t\tstyles.set( {\n\t *\t\t\tcolor: 'blue',\n\t *\t\t\t'margin-right': '1em'\n\t *\t\t} );\n\t *\n\t * ***Note**:* This method uses {@link module:engine/controller/datacontroller~DataController#addStyleProcessorRules\n\t * enabled style processor rules} to normalize passed values.\n\t *\n\t *\t\t// Enable 'margin' shorthand processing:\n\t *\t\teditor.data.addStyleProcessorRules( addMarginRules );\n\t *\n\t *\t\tstyles.set( 'margin', '2px' );\n\t *\n\t * The above code will set margin to:\n\t *\n\t *\t\tstyles.getNormalized( 'margin' );\n\t *\t\t// -> { top: '2px', right: '2px', bottom: '2px', left: '2px' }\n\t *\n\t * Which makes it possible to retrieve a \"sub-value\":\n\t *\n\t *\t\tstyles.get( 'margin-left' );       // -> '2px'\n\t *\n\t * Or modify it:\n\t *\n\t *\t\tstyles.remove( 'margin-left' );\n\t *\n\t *\t\tstyles.getNormalized( 'margin' );  // -> { top: '1px', bottom: '1px', right: '1px' }\n\t *\t\tstyles.toString();                 // -> 'margin-bottom:1px;margin-right:1px;margin-top:1px;'\n\t *\n\t * This method also allows to set normalized values directly (if a particular styles processor rule was enabled):\n\t *\n\t *\t\tstyles.set( 'border-color', { top: 'blue' } );\n\t *\t\tstyles.set( 'margin', { right: '2em' } );\n\t *\n\t *\t\tstyles.toString();                 // -> 'border-color-top:blue;margin-right:2em;'\n\t *\n\t * @param {String|Object} nameOrObject Style property name or object with multiple properties.\n\t * @param {String|Object} valueOrObject Value to set.\n\t */\n\tset( nameOrObject, valueOrObject ) {\n\t\tif ( isObject( nameOrObject ) ) {\n\t\t\tfor ( const [ key, value ] of Object.entries( nameOrObject ) ) {\n\t\t\t\tthis._styleProcessor.toNormalizedForm( key, value, this._styles );\n\t\t\t}\n\t\t} else {\n\t\t\tthis._styleProcessor.toNormalizedForm( nameOrObject, valueOrObject, this._styles );\n\t\t}\n\t}\n\n\t/**\n\t * Removes given style.\n\t *\n\t *\t\tstyles.setTo( 'background:#f00;margin-right:2px;' );\n\t *\n\t *\t\tstyles.remove( 'background' );\n\t *\n\t *\t\tstyles.toString();   // -> 'margin-right:2px;'\n\t *\n\t * ***Note**:* This method uses {@link module:engine/controller/datacontroller~DataController#addStyleProcessorRules\n\t * enabled style processor rules} to normalize passed values.\n\t *\n\t *\t\t// Enable 'margin' shorthand processing:\n\t *\t\teditor.data.addStyleProcessorRules( addMarginRules );\n\t *\n\t *\t\tstyles.setTo( 'margin:1px' );\n\t *\n\t *\t\tstyles.remove( 'margin-top' );\n\t *\t\tstyles.remove( 'margin-right' );\n\t *\n\t *\t\tstyles.toString(); // -> 'margin-bottom:1px;margin-left:1px;'\n\t *\n\t * @param {String} name Style name.\n\t */\n\tremove( name ) {\n\t\tconst path = toPath( name );\n\n\t\tunset( this._styles, path );\n\t\tdelete this._styles[ name ];\n\n\t\tthis._cleanEmptyObjectsOnPath( path );\n\t}\n\n\t/**\n\t * Returns a normalized style object or a single value.\n\t *\n\t *\t\t// Enable 'margin' shorthand processing:\n\t *\t\teditor.data.addStyleProcessorRules( addMarginRules );\n\t *\n\t *\t\tconst styles = new Styles();\n\t *\t\tstyles.setTo( 'margin:1px 2px 3em;' );\n\t *\n\t *\t\tstyles.getNormalized( 'margin' );\n\t *\t\t// will log:\n\t *\t\t// {\n\t *\t\t//     top: '1px',\n\t *\t\t//     right: '2px',\n\t *\t\t//     bottom: '3em',\n\t *\t\t//     left: '2px'     // normalized value from margin shorthand\n\t *\t\t// }\n\t *\n\t *\t\tstyles.getNormalized( 'margin-left' ); // -> '2px'\n\t *\n\t * **Note**: This method will only return normalized styles if a style processor was defined.\n\t *\n\t * @param {String} name Style name.\n\t * @returns {Object|String|undefined}\n\t */\n\tgetNormalized( name ) {\n\t\treturn this._styleProcessor.getNormalized( name, this._styles );\n\t}\n\n\t/**\n\t * Returns a normalized style string. Styles are sorted by name.\n\t *\n\t *\t\tstyles.set( 'margin' , '1px' );\n\t *\t\tstyles.set( 'background', '#f00' );\n\t *\n\t *\t\tstyles.toString(); // -> 'background:#f00;margin:1px;'\n\t *\n\t * **Note**: This method supports normalized styles if defined.\n\t *\n\t *\t\t// Enable 'margin' shorthand processing:\n\t *\t\teditor.data.addStyleProcessorRules( addMarginRules );\n\t *\n\t *\t\tstyles.set( 'margin' , '1px' );\n\t *\t\tstyles.set( 'background', '#f00' );\n\t *\t\tstyles.remove( 'margin-top' );\n\t *\t\tstyles.remove( 'margin-right' );\n\t *\n\t *\t\tstyles.toString(); // -> 'background:#f00;margin-bottom:1px;margin-left:1px;'\n\t *\n\t * @returns {String}\n\t */\n\ttoString() {\n\t\tif ( this.isEmpty ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn this._getStylesEntries()\n\t\t\t.map( arr => arr.join( ':' ) )\n\t\t\t.sort()\n\t\t\t.join( ';' ) + ';';\n\t}\n\n\t/**\n\t * Returns property as a value string or undefined if property is not set.\n\t *\n\t *\t\t// Enable 'margin' shorthand processing:\n\t *\t\teditor.data.addStyleProcessorRules( addMarginRules );\n\t *\n\t *\t\tconst styles = new Styles();\n\t *\t\tstyles.setTo( 'margin:1px;' );\n\t *\t\tstyles.set( 'margin-bottom', '3em' );\n\t *\n\t *\t\tstyles.getAsString( 'margin' ); // -> 'margin: 1px 1px 3em;'\n\t *\n\t * Note, however, that all sub-values must be set for the longhand property name to return a value:\n\t *\n\t *\t\tconst styles = new Styles();\n\t *\t\tstyles.setTo( 'margin:1px;' );\n\t *\t\tstyles.remove( 'margin-bottom' );\n\t *\n\t *\t\tstyles.getAsString( 'margin' ); // -> undefined\n\t *\n\t * In the above scenario, it is not possible to return a `margin` value, so `undefined` is returned.\n\t * Instead, you should use:\n\t *\n\t *\t\tconst styles = new Styles();\n\t *\t\tstyles.setTo( 'margin:1px;' );\n\t *\t\tstyles.remove( 'margin-bottom' );\n\t *\n\t *\t\tfor ( const styleName of styles.getStyleNames() ) {\n\t *\t\t\tconsole.log( styleName, styles.getAsString( styleName ) );\n\t *\t\t}\n\t *\t\t// 'margin-top', '1px'\n\t *\t\t// 'margin-right', '1px'\n\t *\t\t// 'margin-left', '1px'\n\t *\n\t * In general, it is recommend to iterate over style names like in the example above. This way, you will always get all\n\t * the currently set style values. So, if all the 4 margin values would be set\n\t * the for-of loop above would yield only `'margin'`, `'1px'`:\n\t *\n\t *\t\tconst styles = new Styles();\n\t *\t\tstyles.setTo( 'margin:1px;' );\n\t *\n\t *\t\tfor ( const styleName of styles.getStyleNames() ) {\n\t *\t\t\tconsole.log( styleName, styles.getAsString( styleName ) );\n\t *\t\t}\n\t *\t\t// 'margin', '1px'\n\t *\n\t * **Note**: To get a normalized version of a longhand property use the {@link #getNormalized `#getNormalized()`} method.\n\t *\n\t * @param {String} propertyName\n\t * @returns {String|undefined}\n\t */\n\tgetAsString( propertyName ) {\n\t\tif ( this.isEmpty ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this._styles[ propertyName ] && !isObject( this._styles[ propertyName ] ) ) {\n\t\t\t// Try return styles set directly - values that are not parsed.\n\t\t\treturn this._styles[ propertyName ];\n\t\t}\n\n\t\tconst styles = this._styleProcessor.getReducedForm( propertyName, this._styles );\n\n\t\tconst propertyDescriptor = styles.find( ( [ property ] ) => property === propertyName );\n\n\t\t// Only return a value if it is set;\n\t\tif ( Array.isArray( propertyDescriptor ) ) {\n\t\t\treturn propertyDescriptor[ 1 ];\n\t\t}\n\t}\n\n\t/**\n\t * Returns style property names as they would appear when using {@link #toString `#toString()`}.\n\t *\n\t * @returns {Array.<String>}\n\t */\n\tgetStyleNames() {\n\t\tif ( this.isEmpty ) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst entries = this._getStylesEntries();\n\n\t\treturn entries.map( ( [ key ] ) => key );\n\t}\n\n\t/**\n\t * Removes all styles.\n\t */\n\tclear() {\n\t\tthis._styles = {};\n\t}\n\n\t/**\n\t * Returns normalized styles entries for further processing.\n\t *\n\t * @private\n\t * @returns {Array.<module:engine/view/stylesmap~PropertyDescriptor>}\n\t */\n\t_getStylesEntries() {\n\t\tconst parsed = [];\n\n\t\tconst keys = Object.keys( this._styles );\n\n\t\tfor ( const key of keys ) {\n\t\t\tparsed.push( ...this._styleProcessor.getReducedForm( key, this._styles ) );\n\t\t}\n\n\t\treturn parsed;\n\t}\n\n\t/**\n\t * Removes empty objects upon removing an entry from internal object.\n\t *\n\t * @param {String} path\n\t * @private\n\t */\n\t_cleanEmptyObjectsOnPath( path ) {\n\t\tconst pathParts = path.split( '.' );\n\t\tconst isChildPath = pathParts.length > 1;\n\n\t\tif ( !isChildPath ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst parentPath = pathParts.splice( 0, pathParts.length - 1 ).join( '.' );\n\n\t\tconst parentObject = get( this._styles, parentPath );\n\n\t\tif ( !parentObject ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isParentEmpty = !Array.from( Object.keys( parentObject ) ).length;\n\n\t\tif ( isParentEmpty ) {\n\t\t\tthis.remove( parentPath );\n\t\t}\n\t}\n}\n\n/**\n * Style processor is responsible for writing and reading a normalized styles object.\n */\nexport class StylesProcessor {\n\t/**\n\t * Creates StylesProcessor instance.\n\t *\n\t * @private\n\t */\n\tconstructor() {\n\t\tthis._normalizers = new Map();\n\t\tthis._extractors = new Map();\n\t\tthis._reducers = new Map();\n\t\tthis._consumables = new Map();\n\t}\n\n\t/**\n\t * Parse style string value to a normalized object and appends it to styles object.\n\t *\n\t *\t\tconst styles = {};\n\t *\n\t *\t\tstylesProcessor.toNormalizedForm( 'margin', '1px', styles );\n\t *\n\t *\t\t// styles will consist: { margin: { top: '1px', right: '1px', bottom: '1px', left: '1px; } }\n\t *\n\t * **Note**: To define normalizer callbacks use {@link #setNormalizer}.\n\t *\n\t * @param {String} name Name of style property.\n\t * @param {String} propertyValue Value of style property.\n\t * @param {Object} styles Object holding normalized styles.\n\t */\n\ttoNormalizedForm( name, propertyValue, styles ) {\n\t\tif ( isObject( propertyValue ) ) {\n\t\t\tappendStyleValue( styles, toPath( name ), propertyValue );\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this._normalizers.has( name ) ) {\n\t\t\tconst normalizer = this._normalizers.get( name );\n\n\t\t\tconst { path, value } = normalizer( propertyValue );\n\n\t\t\tappendStyleValue( styles, path, value );\n\t\t} else {\n\t\t\tappendStyleValue( styles, name, propertyValue );\n\t\t}\n\t}\n\n\t/**\n\t * Returns a normalized version of a style property.\n\t *\t\tconst styles = {\n\t *\t\t\tmargin: { top: '1px', right: '1px', bottom: '1px', left: '1px; },\n\t *\t\t\tbackground: { color: '#f00' }\n\t *\t\t};\n\t *\n\t *\t\tstylesProcessor.getNormalized( 'background' );\n\t *\t\t// will return: { color: '#f00' }\n\t *\n\t *\t\tstylesProcessor.getNormalized( 'margin-top' );\n\t *\t\t// will return: '1px'\n\t *\n\t * **Note**: In some cases extracting single value requires defining an extractor callback {@link #setExtractor}.\n\t *\n\t * @param {String} name Name of style property.\n\t * @param {Object} styles Object holding normalized styles.\n\t * @returns {*}\n\t */\n\tgetNormalized( name, styles ) {\n\t\tif ( !name ) {\n\t\t\treturn merge( {}, styles );\n\t\t}\n\n\t\t// Might be empty string.\n\t\tif ( styles[ name ] !== undefined ) {\n\t\t\treturn styles[ name ];\n\t\t}\n\n\t\tif ( this._extractors.has( name ) ) {\n\t\t\tconst extractor = this._extractors.get( name );\n\n\t\t\tif ( typeof extractor === 'string' ) {\n\t\t\t\treturn get( styles, extractor );\n\t\t\t}\n\n\t\t\tconst value = extractor( name, styles );\n\n\t\t\tif ( value ) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\n\t\treturn get( styles, toPath( name ) );\n\t}\n\n\t/**\n\t * Returns a reduced form of style property form normalized object.\n\t *\n\t * For default margin reducer, the below code:\n\t *\n\t *\t\tstylesProcessor.getReducedForm( 'margin', {\n\t *\t\t\tmargin: { top: '1px', right: '1px', bottom: '2px', left: '1px; }\n\t *\t\t} );\n\t *\n\t * will return:\n\t *\n\t *\t\t[\n\t *\t\t\t[ 'margin', '1px 1px 2px' ]\n\t *\t\t]\n\t *\n\t * because it might be represented as a shorthand 'margin' value. However if one of margin long hand values is missing it should return:\n\t *\n\t *\t\t[\n\t *\t\t\t[ 'margin-top', '1px' ],\n\t *\t\t\t[ 'margin-right', '1px' ],\n\t *\t\t\t[ 'margin-bottom', '2px' ]\n\t *\t\t\t// the 'left' value is missing - cannot use 'margin' shorthand.\n\t *\t\t]\n\t *\n\t * **Note**: To define reducer callbacks use {@link #setReducer}.\n\t *\n\t * @param {String} name\n\t * @param {String} name Name of style property.\n\t * @param {Object} styles Object holding normalized styles.\n\t * @returns {Array.<module:engine/view/stylesmap~PropertyDescriptor>}\n\t */\n\tgetReducedForm( name, styles ) {\n\t\tconst normalizedValue = this.getNormalized( name, styles );\n\n\t\t// Might be empty string.\n\t\tif ( normalizedValue === undefined ) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif ( this._reducers.has( name ) ) {\n\t\t\tconst reducer = this._reducers.get( name );\n\n\t\t\treturn reducer( normalizedValue );\n\t\t}\n\n\t\treturn [ [ name, normalizedValue ] ];\n\t}\n\n\t/**\n\t * Returns related style names.\n\t *\n\t *\t\tstylesProcessor.getRelatedStyles( 'margin' );\n\t *\t\t// will return: [ 'margin-top', 'margin-right', 'margin-bottom', 'margin-left' ];\n\t *\n\t *\t\tstylesProcessor.getRelatedStyles( 'margin-top' );\n\t *\t\t// will return: [ 'margin' ];\n\t *\n\t * **Note**: To define new style relations load an existing style processor or use\n\t * {@link module:engine/view/stylesmap~StylesProcessor#setStyleRelation `StylesProcessor.setStyleRelation()`}.\n\t *\n\t * @param {String} name\n\t * @returns {Array.<String>}\n\t */\n\tgetRelatedStyles( name ) {\n\t\treturn this._consumables.get( name ) || [];\n\t}\n\n\t/**\n\t * Adds a normalizer method for a style property.\n\t *\n\t * A normalizer returns describing how the value should be normalized.\n\t *\n\t * For instance 'margin' style is a shorthand for four margin values:\n\t *\n\t * - 'margin-top'\n\t * - 'margin-right'\n\t * - 'margin-bottom'\n\t * - 'margin-left'\n\t *\n\t * and can be written in various ways if some values are equal to others. For instance `'margin: 1px 2em;'` is a shorthand for\n\t * `'margin-top: 1px;margin-right: 2em;margin-bottom: 1px;margin-left: 2em'`.\n\t *\n\t * A normalizer should parse various margin notations as a single object:\n\t *\n\t *\t\tconst styles = {\n\t *\t\t\tmargin: {\n\t *\t\t\t\ttop: '1px',\n\t *\t\t\t\tright: '2em',\n\t *\t\t\t\tbottom: '1px',\n\t *\t\t\t\tleft: '2em'\n\t *\t\t\t}\n\t *\t\t};\n\t *\n\t * Thus a normalizer for 'margin' style should return an object defining style path and value to store:\n\t *\n\t *\t\tconst returnValue = {\n\t *\t\t\tpath: 'margin',\n\t *\t\t\tvalue: {\n\t *\t\t\t\ttop: '1px',\n\t *\t\t\t\tright: '2em',\n\t *\t\t\t\tbottom: '1px',\n\t *\t\t\t\tleft: '2em'\n\t *\t\t\t}\n\t *\t\t};\n\t *\n\t * Additionally to fully support all margin notations there should be also defined 4 normalizers for longhand margin notations. Below\n\t * is an example for 'margin-top' style property normalizer:\n\t *\n\t *\t\tstylesProcessor.setNormalizer( 'margin-top', valueString => {\n\t *\t\t\treturn {\n\t *\t\t\t\tpath: 'margin.top',\n\t *\t\t\t\tvalue: valueString\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * @param {String} name\n\t * @param {Function} callback\n\t */\n\tsetNormalizer( name, callback ) {\n\t\tthis._normalizers.set( name, callback );\n\t}\n\n\t/**\n\t * Adds a extractor callback for a style property.\n\t *\n\t * Most normalized style values are stored as one level objects. It is assumed that `'margin-top'` style will be stored as:\n\t *\n\t *\t\tconst styles = {\n\t *\t\t\tmargin: {\n\t *\t\t\t\ttop: 'value'\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t * However, some styles can have conflicting notations and thus it might be harder to extract a style value from shorthand. For instance\n\t * the 'border-top-style' can be defined using `'border-top:solid'`, `'border-style:solid none none none'` or by `'border:solid'`\n\t * shorthands. The default border styles processors stores styles as:\n\t *\n\t *\t\tconst styles = {\n\t *\t\t\tborder: {\n\t *\t\t\t\tstyle: {\n\t *\t\t\t\t\ttop: 'solid'\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t}\n\t *\n\t * as it is better to modify border style independently from other values. On the other part the output of the border might be\n\t * desired as `border-top`, `border-left`, etc notation.\n\t *\n\t * In the above example a reducer should return a side border value that combines style, color and width:\n\t *\n\t *\t\tstyleProcessor.setExtractor( 'border-top', styles => {\n\t *\t\t\treturn {\n\t *\t\t\t\tcolor: styles.border.color.top,\n\t *\t\t\t\tstyle: styles.border.style.top,\n\t *\t\t\t\twidth: styles.border.width.top\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * @param {String} name\n\t * @param {Function|String} callbackOrPath Callback that return a requested value or path string for single values.\n\t */\n\tsetExtractor( name, callbackOrPath ) {\n\t\tthis._extractors.set( name, callbackOrPath );\n\t}\n\n\t/**\n\t * Adds a reducer callback for a style property.\n\t *\n\t * Reducer returns a minimal notation for given style name. For longhand properties it is not required to write a reducer as\n\t * by default the direct value from style path is taken.\n\t *\n\t * For shorthand styles a reducer should return minimal style notation either by returning single name-value tuple or multiple tuples\n\t * if a shorthand cannot be used. For instance for a margin shorthand a reducer might return:\n\t *\n\t *\t\tconst marginShortHandTuple = [\n\t *\t\t\t[ 'margin', '1px 1px 2px' ]\n\t *\t\t];\n\t *\n\t * or a longhand tuples for defined values:\n\t *\n\t *\t\t// Considering margin.bottom and margin.left are undefined.\n\t *\t\tconst marginLonghandsTuples = [\n\t *\t\t\t[ 'margin-top', '1px' ],\n\t *\t\t\t[ 'margin-right', '1px' ]\n\t *\t\t];\n\t *\n\t * A reducer obtains a normalized style value:\n\t *\n\t *\t\t// Simplified reducer that always outputs 4 values which are always present:\n\t *\t\tstylesProcessor.setReducer( 'margin', margin => {\n\t *\t\t\treturn [\n\t *\t\t\t\t[ 'margin', `${ margin.top } ${ margin.right } ${ margin.bottom } ${ margin.left }` ]\n\t *\t\t\t]\n\t *\t\t} );\n\t *\n\t * @param {String} name\n\t * @param {Function} callback\n\t */\n\tsetReducer( name, callback ) {\n\t\tthis._reducers.set( name, callback );\n\t}\n\n\t/**\n\t * Defines a style shorthand relation to other style notations.\n\t *\n\t *\t\tstylesProcessor.setStyleRelation( 'margin', [\n\t *\t\t\t'margin-top',\n\t *\t\t\t'margin-right',\n\t *\t\t\t'margin-bottom',\n\t *\t\t\t'margin-left'\n\t *\t\t] );\n\t *\n\t * This enables expanding of style names for shorthands. For instance, if defined,\n\t * {@link module:engine/conversion/viewconsumable~ViewConsumable view consumable} items are automatically created\n\t * for long-hand margin style notation alongside the `'margin'` item.\n\t *\n\t * This means that when an element being converted has a style `margin`, a converter for `margin-left` will work just\n\t * fine since the view consumable will contain a consumable `margin-left` item (thanks to the relation) and\n\t * `element.getStyle( 'margin-left' )` will work as well assuming that the style processor was correctly configured.\n\t * However, once `margin-left` is consumed, `margin` will not be consumable anymore.\n\t *\n\t * @param {String} shorthandName\n\t * @param {Array.<String>} styleNames\n\t */\n\tsetStyleRelation( shorthandName, styleNames ) {\n\t\tthis._mapStyleNames( shorthandName, styleNames );\n\n\t\tfor ( const alsoName of styleNames ) {\n\t\t\tthis._mapStyleNames( alsoName, [ shorthandName ] );\n\t\t}\n\t}\n\n\t/**\n\t * Set two-way binding of style names.\n\t *\n\t * @param {String} name\n\t * @param {Array.<String>} styleNames\n\t * @private\n\t */\n\t_mapStyleNames( name, styleNames ) {\n\t\tif ( !this._consumables.has( name ) ) {\n\t\t\tthis._consumables.set( name, [] );\n\t\t}\n\n\t\tthis._consumables.get( name ).push( ...styleNames );\n\t}\n}\n\n// Parses inline styles and puts property - value pairs into styles map.\n//\n// @param {String} stylesString Styles to parse.\n// @returns {Map.<String, String>} stylesMap Map of parsed properties and values.\nfunction parseInlineStyles( stylesString ) {\n\t// `null` if no quote was found in input string or last found quote was a closing quote. See below.\n\tlet quoteType = null;\n\tlet propertyNameStart = 0;\n\tlet propertyValueStart = 0;\n\tlet propertyName = null;\n\n\tconst stylesMap = new Map();\n\n\t// Do not set anything if input string is empty.\n\tif ( stylesString === '' ) {\n\t\treturn stylesMap;\n\t}\n\n\t// Fix inline styles that do not end with `;` so they are compatible with algorithm below.\n\tif ( stylesString.charAt( stylesString.length - 1 ) != ';' ) {\n\t\tstylesString = stylesString + ';';\n\t}\n\n\t// Seek the whole string for \"special characters\".\n\tfor ( let i = 0; i < stylesString.length; i++ ) {\n\t\tconst char = stylesString.charAt( i );\n\n\t\tif ( quoteType === null ) {\n\t\t\t// No quote found yet or last found quote was a closing quote.\n\t\t\tswitch ( char ) {\n\t\t\t\tcase ':':\n\t\t\t\t\t// Most of time colon means that property name just ended.\n\t\t\t\t\t// Sometimes however `:` is found inside property value (for example in background image url).\n\t\t\t\t\tif ( !propertyName ) {\n\t\t\t\t\t\t// Treat this as end of property only if property name is not already saved.\n\t\t\t\t\t\t// Save property name.\n\t\t\t\t\t\tpropertyName = stylesString.substr( propertyNameStart, i - propertyNameStart );\n\t\t\t\t\t\t// Save this point as the start of property value.\n\t\t\t\t\t\tpropertyValueStart = i + 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '\"':\n\t\t\t\tcase '\\'':\n\t\t\t\t\t// Opening quote found (this is an opening quote, because `quoteType` is `null`).\n\t\t\t\t\tquoteType = char;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ';': {\n\t\t\t\t\t// Property value just ended.\n\t\t\t\t\t// Use previously stored property value start to obtain property value.\n\t\t\t\t\tconst propertyValue = stylesString.substr( propertyValueStart, i - propertyValueStart );\n\n\t\t\t\t\tif ( propertyName ) {\n\t\t\t\t\t\t// Save parsed part.\n\t\t\t\t\t\tstylesMap.set( propertyName.trim(), propertyValue.trim() );\n\t\t\t\t\t}\n\n\t\t\t\t\tpropertyName = null;\n\n\t\t\t\t\t// Save this point as property name start. Property name starts immediately after previous property value ends.\n\t\t\t\t\tpropertyNameStart = i + 1;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( char === quoteType ) {\n\t\t\t// If a quote char is found and it is a closing quote, mark this fact by `null`-ing `quoteType`.\n\t\t\tquoteType = null;\n\t\t}\n\t}\n\n\treturn stylesMap;\n}\n\n// Return lodash compatible path from style name.\nfunction toPath( name ) {\n\treturn name.replace( '-', '.' );\n}\n\n// Appends style definition to the styles object.\n//\n// @param {String} nameOrPath\n// @param {String|Object} valueOrObject\n// @private\nfunction appendStyleValue( stylesObject, nameOrPath, valueOrObject ) {\n\tlet valueToSet = valueOrObject;\n\n\tif ( isObject( valueOrObject ) ) {\n\t\tvalueToSet = merge( {}, get( stylesObject, nameOrPath ), valueOrObject );\n\t}\n\n\tset( stylesObject, nameOrPath, valueToSet );\n}\n\n/**\n * A CSS style property descriptor that contains tuplet of two strings:\n *\n * - first string describes property name\n * - second string describes property value\n *\n *\t\tconst marginDescriptor = [ 'margin', '2px 3em' ];\n *\t\tconst marginTopDescriptor = [ 'margin-top', '2px' ];\n *\n * @typedef {Array.<String, String>} module:engine/view/stylesmap~PropertyDescriptor\n */\n\n/**\n * An object describing values associated with the sides of a box, for instance margins, paddings,\n * border widths, border colors, etc.\n *\n *\t\tconst margin = {\n *\t\t\ttop: '1px',\n *\t\t\tright: '3px',\n *\t\t\tbottom: '3px',\n *\t\t\tleft: '7px'\n *\t\t};\n *\n *\t\tconst borderColor = {\n *\t\t\ttop: 'red',\n *\t\t\tright: 'blue',\n *\t\t\tbottom: 'blue',\n *\t\t\tleft: 'red'\n *\t\t};\n *\n * @typedef {Object} module:engine/view/stylesmap~BoxSides\n *\n * @property {String} top Top side value.\n * @property {String} right Right side value.\n * @property {String} bottom Bottom side value.\n * @property {String} left Left side value.\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/element\n */\n\nimport Node from './node';\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport toMap from '@ckeditor/ckeditor5-utils/src/tomap';\nimport toArray from '@ckeditor/ckeditor5-utils/src/toarray';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\nimport Matcher from './matcher';\nimport StylesMap from './stylesmap';\n\n// @if CK_DEBUG_ENGINE // const { convertMapToTags } = require( '../dev-utils/utils' );\n\n/**\n * View element.\n *\n * The editing engine does not define a fixed semantics of its elements (it is \"DTD-free\").\n * This is why the type of the {@link module:engine/view/element~Element} need to\n * be defined by the feature developer. When creating an element you should use one of the following methods:\n *\n * * {@link module:engine/view/downcastwriter~DowncastWriter#createContainerElement `downcastWriter#createContainerElement()`}\n * in order to create a {@link module:engine/view/containerelement~ContainerElement},\n * * {@link module:engine/view/downcastwriter~DowncastWriter#createAttributeElement `downcastWriter#createAttributeElement()`}\n * in order to create a {@link module:engine/view/attributeelement~AttributeElement},\n * * {@link module:engine/view/downcastwriter~DowncastWriter#createEmptyElement `downcastWriter#createEmptyElement()`}\n * in order to create a {@link module:engine/view/emptyelement~EmptyElement}.\n * * {@link module:engine/view/downcastwriter~DowncastWriter#createUIElement `downcastWriter#createUIElement()`}\n * in order to create a {@link module:engine/view/uielement~UIElement}.\n * * {@link module:engine/view/downcastwriter~DowncastWriter#createEditableElement `downcastWriter#createEditableElement()`}\n * in order to create a {@link module:engine/view/editableelement~EditableElement}.\n *\n * Note that for view elements which are not created from the model, like elements from mutations, paste or\n * {@link module:engine/controller/datacontroller~DataController#set data.set} it is not possible to define the type of the element.\n * In such cases the {@link module:engine/view/upcastwriter~UpcastWriter#createElement `UpcastWriter#createElement()`} method\n * should be used to create generic view elements.\n *\n * @extends module:engine/view/node~Node\n */\nexport default class Element extends Node {\n\t/**\n\t * Creates a view element.\n\t *\n\t * Attributes can be passed in various formats:\n\t *\n\t *\t\tnew Element( viewDocument, 'div', { class: 'editor', contentEditable: 'true' } ); // object\n\t *\t\tnew Element( viewDocument, 'div', [ [ 'class', 'editor' ], [ 'contentEditable', 'true' ] ] ); // map-like iterator\n\t *\t\tnew Element( viewDocument, 'div', mapOfAttributes ); // map\n\t *\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document instance to which this element belongs.\n\t * @param {String} name Node name.\n\t * @param {Object|Iterable} [attrs] Collection of attributes.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into created element.\n\t */\n\tconstructor( document, name, attrs, children ) {\n\t\tsuper( document );\n\n\t\t/**\n\t\t * Name of the element.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * Map of attributes, where attributes names are keys and attributes values are values.\n\t\t *\n\t\t * @protected\n\t\t * @member {Map} #_attrs\n\t\t */\n\t\tthis._attrs = parseAttributes( attrs );\n\n\t\t/**\n\t\t * Array of child nodes.\n\t\t *\n\t\t * @protected\n\t\t * @member {Array.<module:engine/view/node~Node>}\n\t\t */\n\t\tthis._children = [];\n\n\t\tif ( children ) {\n\t\t\tthis._insertChild( 0, children );\n\t\t}\n\n\t\t/**\n\t\t * Set of classes associated with element instance.\n\t\t *\n\t\t * @protected\n\t\t * @member {Set}\n\t\t */\n\t\tthis._classes = new Set();\n\n\t\tif ( this._attrs.has( 'class' ) ) {\n\t\t\t// Remove class attribute and handle it by class set.\n\t\t\tconst classString = this._attrs.get( 'class' );\n\t\t\tparseClasses( this._classes, classString );\n\t\t\tthis._attrs.delete( 'class' );\n\t\t}\n\n\t\t/**\n\t\t * Normalized styles.\n\t\t *\n\t\t * @protected\n\t\t * @member {module:engine/view/stylesmap~StylesMap} module:engine/view/element~Element#_styles\n\t\t */\n\t\tthis._styles = new StylesMap( this.document.stylesProcessor );\n\n\t\tif ( this._attrs.has( 'style' ) ) {\n\t\t\t// Remove style attribute and handle it by styles map.\n\t\t\tthis._styles.setTo( this._attrs.get( 'style' ) );\n\n\t\t\tthis._attrs.delete( 'style' );\n\t\t}\n\n\t\t/**\n\t\t * Map of custom properties.\n\t\t * Custom properties can be added to element instance, will be cloned but not rendered into DOM.\n\t\t *\n\t\t * @protected\n\t\t * @member {Map}\n\t\t */\n\t\tthis._customProperties = new Map();\n\t}\n\n\t/**\n\t * Number of element's children.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget childCount() {\n\t\treturn this._children.length;\n\t}\n\n\t/**\n\t * Is `true` if there are no nodes inside this element, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isEmpty() {\n\t\treturn this._children.length === 0;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\telement.is( 'element' ); // -> true\n\t *\t\telement.is( 'node' ); // -> true\n\t *\t\telement.is( 'view:element' ); // -> true\n\t *\t\telement.is( 'view:node' ); // -> true\n\t *\n\t *\t\telement.is( 'model:element' ); // -> false\n\t *\t\telement.is( 'documentSelection' ); // -> false\n\t *\n\t * Assuming that the object being checked is an element, you can also check its\n\t * {@link module:engine/view/element~Element#name name}:\n\t *\n\t *\t\telement.is( 'element', 'img' ); // -> true if this is an <img> element\n\t *\t\ttext.is( 'element', 'img' ); -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'element' || type === 'view:element' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'node' || type === 'view:node';\n\t\t} else {\n\t\t\treturn name === this.name && ( type === 'element' || type === 'view:element' );\n\t\t}\n\t}\n\n\t/**\n\t * Gets child at the given index.\n\t *\n\t * @param {Number} index Index of child.\n\t * @returns {module:engine/view/node~Node} Child node.\n\t */\n\tgetChild( index ) {\n\t\treturn this._children[ index ];\n\t}\n\n\t/**\n\t * Gets index of the given child node. Returns `-1` if child node is not found.\n\t *\n\t * @param {module:engine/view/node~Node} node Child node.\n\t * @returns {Number} Index of the child node.\n\t */\n\tgetChildIndex( node ) {\n\t\treturn this._children.indexOf( node );\n\t}\n\n\t/**\n\t * Gets child nodes iterator.\n\t *\n\t * @returns {Iterable.<module:engine/view/node~Node>} Child nodes iterator.\n\t */\n\tgetChildren() {\n\t\treturn this._children[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Returns an iterator that contains the keys for attributes. Order of inserting attributes is not preserved.\n\t *\n\t * @returns {Iterable.<String>} Keys for attributes.\n\t */\n\t* getAttributeKeys() {\n\t\tif ( this._classes.size > 0 ) {\n\t\t\tyield 'class';\n\t\t}\n\n\t\tif ( !this._styles.isEmpty ) {\n\t\t\tyield 'style';\n\t\t}\n\n\t\tyield* this._attrs.keys();\n\t}\n\n\t/**\n\t * Returns iterator that iterates over this element's attributes.\n\t *\n\t * Attributes are returned as arrays containing two items. First one is attribute key and second is attribute value.\n\t * This format is accepted by native `Map` object and also can be passed in `Node` constructor.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\t* getAttributes() {\n\t\tyield* this._attrs.entries();\n\n\t\tif ( this._classes.size > 0 ) {\n\t\t\tyield [ 'class', this.getAttribute( 'class' ) ];\n\t\t}\n\n\t\tif ( !this._styles.isEmpty ) {\n\t\t\tyield [ 'style', this.getAttribute( 'style' ) ];\n\t\t}\n\t}\n\n\t/**\n\t * Gets attribute by key. If attribute is not present - returns undefined.\n\t *\n\t * @param {String} key Attribute key.\n\t * @returns {String|undefined} Attribute value.\n\t */\n\tgetAttribute( key ) {\n\t\tif ( key == 'class' ) {\n\t\t\tif ( this._classes.size > 0 ) {\n\t\t\t\treturn [ ...this._classes ].join( ' ' );\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif ( key == 'style' ) {\n\t\t\tconst inlineStyle = this._styles.toString();\n\n\t\t\treturn inlineStyle == '' ? undefined : inlineStyle;\n\t\t}\n\n\t\treturn this._attrs.get( key );\n\t}\n\n\t/**\n\t * Returns a boolean indicating whether an attribute with the specified key exists in the element.\n\t *\n\t * @param {String} key Attribute key.\n\t * @returns {Boolean} `true` if attribute with the specified key exists in the element, false otherwise.\n\t */\n\thasAttribute( key ) {\n\t\tif ( key == 'class' ) {\n\t\t\treturn this._classes.size > 0;\n\t\t}\n\n\t\tif ( key == 'style' ) {\n\t\t\treturn !this._styles.isEmpty;\n\t\t}\n\n\t\treturn this._attrs.has( key );\n\t}\n\n\t/**\n\t * Checks if this element is similar to other element.\n\t * Both elements should have the same name and attributes to be considered as similar. Two similar elements\n\t * can contain different set of children nodes.\n\t *\n\t * @param {module:engine/view/element~Element} otherElement\n\t * @returns {Boolean}\n\t */\n\tisSimilar( otherElement ) {\n\t\tif ( !( otherElement instanceof Element ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If exactly the same Element is provided - return true immediately.\n\t\tif ( this === otherElement ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check element name.\n\t\tif ( this.name != otherElement.name ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check number of attributes, classes and styles.\n\t\tif ( this._attrs.size !== otherElement._attrs.size || this._classes.size !== otherElement._classes.size ||\n\t\t\tthis._styles.size !== otherElement._styles.size ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if attributes are the same.\n\t\tfor ( const [ key, value ] of this._attrs ) {\n\t\t\tif ( !otherElement._attrs.has( key ) || otherElement._attrs.get( key ) !== value ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Check if classes are the same.\n\t\tfor ( const className of this._classes ) {\n\t\t\tif ( !otherElement._classes.has( className ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Check if styles are the same.\n\t\tfor ( const property of this._styles.getStyleNames() ) {\n\t\t\tif (\n\t\t\t\t!otherElement._styles.has( property ) ||\n\t\t\t\totherElement._styles.getAsString( property ) !== this._styles.getAsString( property )\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns true if class is present.\n\t * If more then one class is provided - returns true only when all classes are present.\n\t *\n\t *\t\telement.hasClass( 'foo' ); // Returns true if 'foo' class is present.\n\t *\t\telement.hasClass( 'foo', 'bar' ); // Returns true if 'foo' and 'bar' classes are both present.\n\t *\n\t * @param {...String} className\n\t */\n\thasClass( ...className ) {\n\t\tfor ( const name of className ) {\n\t\t\tif ( !this._classes.has( name ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns iterator that contains all class names.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetClassNames() {\n\t\treturn this._classes.keys();\n\t}\n\n\t/**\n\t * Returns style value for the given property mae.\n\t * If the style does not exist `undefined` is returned.\n\t *\n\t * **Note**: This method can work with normalized style names if\n\t * {@link module:engine/controller/datacontroller~DataController#addStyleProcessorRules a particular style processor rule is enabled}.\n\t * See {@link module:engine/view/stylesmap~StylesMap#getAsString `StylesMap#getAsString()`} for details.\n\t *\n\t * For an element with style set to `'margin:1px'`:\n\t *\n\t *\t\t// Enable 'margin' shorthand processing:\n\t *\t\teditor.data.addStyleProcessorRules( addMarginRules );\n\t *\n\t *\t\tconst element = view.change( writer => {\n\t *\t\t\tconst element = writer.createElement();\n\t *\t\t\twriter.setStyle( 'margin', '1px' );\n\t *\t\t\twriter.setStyle( 'margin-bottom', '3em' );\n\t *\n\t *\t\t\treturn element;\n\t *\t\t} );\n\t *\n\t *\t\telement.getStyle( 'margin' ); // -> 'margin: 1px 1px 3em;'\n\t *\n\t * @param {String} property\n\t * @returns {String|undefined}\n\t */\n\tgetStyle( property ) {\n\t\treturn this._styles.getAsString( property );\n\t}\n\n\t/**\n\t * Returns a normalized style object or single style value.\n\t *\n\t * For an element with style set to: margin:1px 2px 3em;\n\t *\n\t *\t\telement.getNormalizedStyle( 'margin' ) );\n\t *\n\t * will return:\n\t *\n\t *\t\t{\n\t *\t\t\ttop: '1px',\n\t *\t\t\tright: '2px',\n\t *\t\t\tbottom: '3em',\n\t *\t\t\tleft: '2px'    // a normalized value from margin shorthand\n\t *\t\t}\n\t *\n\t * and reading for single style value:\n\t *\n\t *\t\tstyles.getNormalizedStyle( 'margin-left' );\n\t *\n\t * Will return a `2px` string.\n\t *\n\t * **Note**: This method will return normalized values only if\n\t * {@link module:engine/controller/datacontroller~DataController#addStyleProcessorRules a particular style processor rule is enabled}.\n\t * See {@link module:engine/view/stylesmap~StylesMap#getNormalized `StylesMap#getNormalized()`} for details.\n\t *\n\t *\n\t * @param {String} property Name of CSS property\n\t * @returns {Object|String|undefined}\n\t */\n\tgetNormalizedStyle( property ) {\n\t\treturn this._styles.getNormalized( property );\n\t}\n\n\t/**\n\t * Returns iterator that contains all style names.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetStyleNames() {\n\t\treturn this._styles.getStyleNames();\n\t}\n\n\t/**\n\t * Returns true if style keys are present.\n\t * If more then one style property is provided - returns true only when all properties are present.\n\t *\n\t *\t\telement.hasStyle( 'color' ); // Returns true if 'border-top' style is present.\n\t *\t\telement.hasStyle( 'color', 'border-top' ); // Returns true if 'color' and 'border-top' styles are both present.\n\t *\n\t * @param {...String} property\n\t */\n\thasStyle( ...property ) {\n\t\tfor ( const name of property ) {\n\t\t\tif ( !this._styles.has( name ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns ancestor element that match specified pattern.\n\t * Provided patterns should be compatible with {@link module:engine/view/matcher~Matcher Matcher} as it is used internally.\n\t *\n\t * @see module:engine/view/matcher~Matcher\n\t * @param {Object|String|RegExp|Function} patterns Patterns used to match correct ancestor.\n\t * See {@link module:engine/view/matcher~Matcher}.\n\t * @returns {module:engine/view/element~Element|null} Found element or `null` if no matching ancestor was found.\n\t */\n\tfindAncestor( ...patterns ) {\n\t\tconst matcher = new Matcher( ...patterns );\n\t\tlet parent = this.parent;\n\n\t\twhile ( parent ) {\n\t\t\tif ( matcher.match( parent ) ) {\n\t\t\t\treturn parent;\n\t\t\t}\n\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Returns the custom property value for the given key.\n\t *\n\t * @param {String|Symbol} key\n\t * @returns {*}\n\t */\n\tgetCustomProperty( key ) {\n\t\treturn this._customProperties.get( key );\n\t}\n\n\t/**\n\t * Returns an iterator which iterates over this element's custom properties.\n\t * Iterator provides `[ key, value ]` pairs for each stored property.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\t* getCustomProperties() {\n\t\tyield* this._customProperties.entries();\n\t}\n\n\t/**\n\t * Returns identity string based on element's name, styles, classes and other attributes.\n\t * Two elements that {@link #isSimilar are similar} will have same identity string.\n\t * It has the following format:\n\t *\n\t *\t\t'name class=\"class1,class2\" style=\"style1:value1;style2:value2\" attr1=\"val1\" attr2=\"val2\"'\n \t *\n\t * For example:\n\t *\n\t *\t\tconst element = writer.createContainerElement( 'foo', {\n\t *\t\t\tbanana: '10',\n\t *\t\t\tapple: '20',\n\t *\t\t\tstyle: 'color: red; border-color: white;',\n\t *\t\t\tclass: 'baz'\n\t *\t\t} );\n\t *\n\t *\t\t// returns 'foo class=\"baz\" style=\"border-color:white;color:red\" apple=\"20\" banana=\"10\"'\n\t *\t\telement.getIdentity();\n\t *\n\t * **Note**: Classes, styles and other attributes are sorted alphabetically.\n\t *\n\t * @returns {String}\n\t */\n\tgetIdentity() {\n\t\tconst classes = Array.from( this._classes ).sort().join( ',' );\n\t\tconst styles = this._styles.toString();\n\t\tconst attributes = Array.from( this._attrs ).map( i => `${ i[ 0 ] }=\"${ i[ 1 ] }\"` ).sort().join( ' ' );\n\n\t\treturn this.name +\n\t\t\t( classes == '' ? '' : ` class=\"${ classes }\"` ) +\n\t\t\t( !styles ? '' : ` style=\"${ styles }\"` ) +\n\t\t\t( attributes == '' ? '' : ` ${ attributes }` );\n\t}\n\n\t/**\n\t * Clones provided element.\n\t *\n\t * @protected\n\t * @param {Boolean} [deep=false] If set to `true` clones element and all its children recursively. When set to `false`,\n\t * element will be cloned without any children.\n\t * @returns {module:engine/view/element~Element} Clone of this element.\n\t */\n\t_clone( deep = false ) {\n\t\tconst childrenClone = [];\n\n\t\tif ( deep ) {\n\t\t\tfor ( const child of this.getChildren() ) {\n\t\t\t\tchildrenClone.push( child._clone( deep ) );\n\t\t\t}\n\t\t}\n\n\t\t// ContainerElement and AttributeElement should be also cloned properly.\n\t\tconst cloned = new this.constructor( this.document, this.name, this._attrs, childrenClone );\n\n\t\t// Classes and styles are cloned separately - this solution is faster than adding them back to attributes and\n\t\t// parse once again in constructor.\n\t\tcloned._classes = new Set( this._classes );\n\t\tcloned._styles.set( this._styles.getNormalized() );\n\n\t\t// Clone custom properties.\n\t\tcloned._customProperties = new Map( this._customProperties );\n\n\t\t// Clone filler offset method.\n\t\t// We can't define this method in a prototype because it's behavior which\n\t\t// is changed by e.g. toWidget() function from ckeditor5-widget. Perhaps this should be one of custom props.\n\t\tcloned.getFillerOffset = this.getFillerOffset;\n\n\t\treturn cloned;\n\t}\n\n\t/**\n\t * {@link module:engine/view/element~Element#_insertChild Insert} a child node or a list of child nodes at the end of this node\n\t * and sets the parent of these nodes to this element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#insert\n\t * @protected\n\t * @param {module:engine/view/item~Item|Iterable.<module:engine/view/item~Item>} items Items to be inserted.\n\t * @fires module:engine/view/node~Node#change\n\t * @returns {Number} Number of appended nodes.\n\t */\n\t_appendChild( items ) {\n\t\treturn this._insertChild( this.childCount, items );\n\t}\n\n\t/**\n\t * Inserts a child node or a list of child nodes on the given index and sets the parent of these nodes to\n\t * this element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#insert\n\t * @protected\n\t * @param {Number} index Position where nodes should be inserted.\n\t * @param {module:engine/view/item~Item|Iterable.<module:engine/view/item~Item>} items Items to be inserted.\n\t * @fires module:engine/view/node~Node#change\n\t * @returns {Number} Number of inserted nodes.\n\t */\n\t_insertChild( index, items ) {\n\t\tthis._fireChange( 'children', this );\n\t\tlet count = 0;\n\n\t\tconst nodes = normalize( this.document, items );\n\n\t\tfor ( const node of nodes ) {\n\t\t\t// If node that is being added to this element is already inside another element, first remove it from the old parent.\n\t\t\tif ( node.parent !== null ) {\n\t\t\t\tnode._remove();\n\t\t\t}\n\n\t\t\tnode.parent = this;\n\t\t\tnode.document = this.document;\n\n\t\t\tthis._children.splice( index, 0, node );\n\t\t\tindex++;\n\t\t\tcount++;\n\t\t}\n\n\t\treturn count;\n\t}\n\n\t/**\n\t * Removes number of child nodes starting at the given index and set the parent of these nodes to `null`.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#remove\n\t * @protected\n\t * @param {Number} index Number of the first node to remove.\n\t * @param {Number} [howMany=1] Number of nodes to remove.\n\t * @fires module:engine/view/node~Node#change\n\t * @returns {Array.<module:engine/view/node~Node>} The array of removed nodes.\n\t */\n\t_removeChildren( index, howMany = 1 ) {\n\t\tthis._fireChange( 'children', this );\n\n\t\tfor ( let i = index; i < index + howMany; i++ ) {\n\t\t\tthis._children[ i ].parent = null;\n\t\t}\n\n\t\treturn this._children.splice( index, howMany );\n\t}\n\n\t/**\n\t * Adds or overwrite attribute with a specified key and value.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#setAttribute\n\t * @protected\n\t * @param {String} key Attribute key.\n\t * @param {String} value Attribute value.\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_setAttribute( key, value ) {\n\t\tvalue = String( value );\n\n\t\tthis._fireChange( 'attributes', this );\n\n\t\tif ( key == 'class' ) {\n\t\t\tparseClasses( this._classes, value );\n\t\t} else if ( key == 'style' ) {\n\t\t\tthis._styles.setTo( value );\n\t\t} else {\n\t\t\tthis._attrs.set( key, value );\n\t\t}\n\t}\n\n\t/**\n\t * Removes attribute from the element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#removeAttribute\n\t * @protected\n\t * @param {String} key Attribute key.\n\t * @returns {Boolean} Returns true if an attribute existed and has been removed.\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_removeAttribute( key ) {\n\t\tthis._fireChange( 'attributes', this );\n\n\t\t// Remove class attribute.\n\t\tif ( key == 'class' ) {\n\t\t\tif ( this._classes.size > 0 ) {\n\t\t\t\tthis._classes.clear();\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\t// Remove style attribute.\n\t\tif ( key == 'style' ) {\n\t\t\tif ( !this._styles.isEmpty ) {\n\t\t\t\tthis._styles.clear();\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\t// Remove other attributes.\n\t\treturn this._attrs.delete( key );\n\t}\n\n\t/**\n\t * Adds specified class.\n\t *\n\t *\t\telement._addClass( 'foo' ); // Adds 'foo' class.\n\t *\t\telement._addClass( [ 'foo', 'bar' ] ); // Adds 'foo' and 'bar' classes.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#addClass\n\t * @protected\n\t * @param {Array.<String>|String} className\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_addClass( className ) {\n\t\tthis._fireChange( 'attributes', this );\n\n\t\tfor ( const name of toArray( className ) ) {\n\t\t\tthis._classes.add( name );\n\t\t}\n\t}\n\n\t/**\n\t * Removes specified class.\n\t *\n\t *\t\telement._removeClass( 'foo' );  // Removes 'foo' class.\n\t *\t\telement._removeClass( [ 'foo', 'bar' ] ); // Removes both 'foo' and 'bar' classes.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#removeClass\n\t * @protected\n\t * @param {Array.<String>|String} className\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_removeClass( className ) {\n\t\tthis._fireChange( 'attributes', this );\n\n\t\tfor ( const name of toArray( className ) ) {\n\t\t\tthis._classes.delete( name );\n\t\t}\n\t}\n\n\t/**\n\t * Adds style to the element.\n\t *\n\t *\t\telement._setStyle( 'color', 'red' );\n\t *\t\telement._setStyle( {\n\t *\t\t\tcolor: 'red',\n\t *\t\t\tposition: 'fixed'\n\t *\t\t} );\n\t *\n\t * **Note**: This method can work with normalized style names if\n\t * {@link module:engine/controller/datacontroller~DataController#addStyleProcessorRules a particular style processor rule is enabled}.\n\t * See {@link module:engine/view/stylesmap~StylesMap#set `StylesMap#set()`} for details.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#setStyle\n\t * @protected\n\t * @param {String|Object} property Property name or object with key - value pairs.\n\t * @param {String} [value] Value to set. This parameter is ignored if object is provided as the first parameter.\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_setStyle( property, value ) {\n\t\tthis._fireChange( 'attributes', this );\n\n\t\tthis._styles.set( property, value );\n\t}\n\n\t/**\n\t * Removes specified style.\n\t *\n\t *\t\telement._removeStyle( 'color' );  // Removes 'color' style.\n\t *\t\telement._removeStyle( [ 'color', 'border-top' ] ); // Removes both 'color' and 'border-top' styles.\n\t *\n\t * **Note**: This method can work with normalized style names if\n\t * {@link module:engine/controller/datacontroller~DataController#addStyleProcessorRules a particular style processor rule is enabled}.\n\t * See {@link module:engine/view/stylesmap~StylesMap#remove `StylesMap#remove()`} for details.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#removeStyle\n\t * @protected\n\t * @param {Array.<String>|String} property\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_removeStyle( property ) {\n\t\tthis._fireChange( 'attributes', this );\n\n\t\tfor ( const name of toArray( property ) ) {\n\t\t\tthis._styles.remove( name );\n\t\t}\n\t}\n\n\t/**\n\t * Sets a custom property. Unlike attributes, custom properties are not rendered to the DOM,\n\t * so they can be used to add special data to elements.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#setCustomProperty\n\t * @protected\n\t * @param {String|Symbol} key\n\t * @param {*} value\n\t */\n\t_setCustomProperty( key, value ) {\n\t\tthis._customProperties.set( key, value );\n\t}\n\n\t/**\n\t * Removes the custom property stored under the given key.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#removeCustomProperty\n\t * @protected\n\t * @param {String|Symbol} key\n\t * @returns {Boolean} Returns true if property was removed.\n\t */\n\t_removeCustomProperty( key ) {\n\t\treturn this._customProperties.delete( key );\n\t}\n\n\t/**\n\t * Returns block {@link module:engine/view/filler filler} offset or `null` if block filler is not needed.\n\t *\n\t * @abstract\n\t * @method module:engine/view/element~Element#getFillerOffset\n\t */\n\n\t// @if CK_DEBUG_ENGINE // printTree( level = 0) {\n\t// @if CK_DEBUG_ENGINE // \tlet string = '';\n\n\t// @if CK_DEBUG_ENGINE //\tstring += '\\t'.repeat( level ) + `<${ this.name }${ convertMapToTags( this.getAttributes() ) }>`;\n\n\t// @if CK_DEBUG_ENGINE //\tfor ( const child of this.getChildren() ) {\n\t// @if CK_DEBUG_ENGINE //\t\tif ( child.is( '$text' ) ) {\n\t// @if CK_DEBUG_ENGINE //\t\t\tstring += '\\n' + '\\t'.repeat( level + 1 ) + child.data;\n\t// @if CK_DEBUG_ENGINE //\t\t} else {\n\t// @if CK_DEBUG_ENGINE //\t\t\tstring += '\\n' + child.printTree( level + 1 );\n\t// @if CK_DEBUG_ENGINE //\t\t}\n\t// @if CK_DEBUG_ENGINE //\t}\n\n\t// @if CK_DEBUG_ENGINE //\tif ( this.childCount ) {\n\t// @if CK_DEBUG_ENGINE //\t\tstring += '\\n' + '\\t'.repeat( level );\n\t// @if CK_DEBUG_ENGINE //\t}\n\n\t// @if CK_DEBUG_ENGINE //\tstring += `</${ this.name }>`;\n\n\t// @if CK_DEBUG_ENGINE //\treturn string;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logTree() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( this.printTree() );\n\t// @if CK_DEBUG_ENGINE // }\n}\n\n// Parses attributes provided to the element constructor before they are applied to an element. If attributes are passed\n// as an object (instead of `Iterable`), the object is transformed to the map. Attributes with `null` value are removed.\n// Attributes with non-`String` value are converted to `String`.\n//\n// @param {Object|Iterable} attrs Attributes to parse.\n// @returns {Map} Parsed attributes.\nfunction parseAttributes( attrs ) {\n\tattrs = toMap( attrs );\n\n\tfor ( const [ key, value ] of attrs ) {\n\t\tif ( value === null ) {\n\t\t\tattrs.delete( key );\n\t\t} else if ( typeof value != 'string' ) {\n\t\t\tattrs.set( key, String( value ) );\n\t\t}\n\t}\n\n\treturn attrs;\n}\n\n// Parses class attribute and puts all classes into classes set.\n// Classes set s cleared before insertion.\n//\n// @param {Set.<String>} classesSet Set to insert parsed classes.\n// @param {String} classesString String with classes to parse.\nfunction parseClasses( classesSet, classesString ) {\n\tconst classArray = classesString.split( /\\s+/ );\n\tclassesSet.clear();\n\tclassArray.forEach( name => classesSet.add( name ) );\n}\n\n// Converts strings to Text and non-iterables to arrays.\n//\n// @param {String|module:engine/view/item~Item|Iterable.<String|module:engine/view/item~Item>}\n// @returns {Iterable.<module:engine/view/node~Node>}\nfunction normalize( document, nodes ) {\n\t// Separate condition because string is iterable.\n\tif ( typeof nodes == 'string' ) {\n\t\treturn [ new Text( document, nodes ) ];\n\t}\n\n\tif ( !isIterable( nodes ) ) {\n\t\tnodes = [ nodes ];\n\t}\n\n\t// Array.from to enable .map() on non-arrays.\n\treturn Array.from( nodes )\n\t\t.map( node => {\n\t\t\tif ( typeof node == 'string' ) {\n\t\t\t\treturn new Text( document, node );\n\t\t\t}\n\n\t\t\tif ( node instanceof TextProxy ) {\n\t\t\t\treturn new Text( document, node.data );\n\t\t\t}\n\n\t\t\treturn node;\n\t\t} );\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/containerelement\n */\n\nimport Element from './element';\n\n/**\n * Containers are elements which define document structure. They define boundaries for\n * {@link module:engine/view/attributeelement~AttributeElement attributes}. They are mostly used for block elements like `<p>` or `<div>`.\n *\n * Editing engine does not define a fixed HTML DTD. This is why a feature developer needs to choose between various\n * types (container element, {@link module:engine/view/attributeelement~AttributeElement attribute element},\n * {@link module:engine/view/emptyelement~EmptyElement empty element}, etc) when developing a feature.\n *\n * The container element should be your default choice when writing a converter, unless:\n *\n * * this element represents a model text attribute (then use {@link module:engine/view/attributeelement~AttributeElement}),\n * * this is an empty element like `<img>` (then use {@link module:engine/view/emptyelement~EmptyElement}),\n * * this is a root element,\n * * this is a nested editable element (then use  {@link module:engine/view/editableelement~EditableElement}).\n *\n * To create a new container element instance use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createContainerElement `DowncastWriter#createContainerElement()`}\n * method.\n *\n * @extends module:engine/view/element~Element\n */\nexport default class ContainerElement extends Element {\n\t/**\n\t * Creates a container element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createContainerElement\n\t * @see module:engine/view/element~Element\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document instance to which this element belongs.\n\t * @param {String} name Node name.\n\t * @param {Object|Iterable} [attrs] Collection of attributes.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into created element.\n\t */\n\tconstructor( document, name, attrs, children ) {\n\t\tsuper( document, name, attrs, children );\n\n\t\t/**\n\t\t * Returns block {@link module:engine/view/filler filler} offset or `null` if block filler is not needed.\n\t\t *\n\t\t * @method #getFillerOffset\n\t\t * @returns {Number|null} Block filler offset or `null` if block filler is not needed.\n\t\t */\n\t\tthis.getFillerOffset = getFillerOffset;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\tcontainerElement.is( 'containerElement' ); // -> true\n\t *\t\tcontainerElement.is( 'element' ); // -> true\n\t *\t\tcontainerElement.is( 'node' ); // -> true\n\t *\t\tcontainerElement.is( 'view:containerElement' ); // -> true\n\t *\t\tcontainerElement.is( 'view:element' ); // -> true\n\t *\t\tcontainerElement.is( 'view:node' ); // -> true\n\t *\n\t *\t\tcontainerElement.is( 'model:element' ); // -> false\n\t *\t\tcontainerElement.is( 'documentFragment' ); // -> false\n\t *\n\t * Assuming that the object being checked is a container element, you can also check its\n\t * {@link module:engine/view/containerelement~ContainerElement#name name}:\n\t *\n\t *\t\tcontainerElement.is( 'element', 'div' ); // -> true if this is a div container element\n\t *\t\tcontainerElement.is( 'contaienrElement', 'div' ); // -> same as above\n\t *\t\ttext.is( 'element', 'div' ); -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'containerElement' || type === 'view:containerElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'element' || type === 'view:element' ||\n\t\t\t\ttype === 'node' || type === 'view:node';\n\t\t} else {\n\t\t\treturn name === this.name && (\n\t\t\t\ttype === 'containerElement' || type === 'view:containerElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'element' || type === 'view:element'\n\t\t\t);\n\t\t}\n\t}\n}\n\n/**\n * Returns block {@link module:engine/view/filler filler} offset or `null` if block filler is not needed.\n *\n * @returns {Number|null} Block filler offset or `null` if block filler is not needed.\n */\nexport function getFillerOffset() {\n\tconst children = [ ...this.getChildren() ];\n\tconst lastChild = children[ this.childCount - 1 ];\n\n\t// Block filler is required after a `<br>` if it's the last element in its container. See #1422.\n\tif ( lastChild && lastChild.is( 'element', 'br' ) ) {\n\t\treturn this.childCount;\n\t}\n\n\tfor ( const child of children ) {\n\t\t// If there's any non-UI element  don't render the bogus.\n\t\tif ( !child.is( 'uiElement' ) ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// If there are only UI elements  render the bogus at the end of the element.\n\treturn this.childCount;\n}\n","import copyObject from './_copyObject.js';\nimport createAssigner from './_createAssigner.js';\nimport keysIn from './keysIn.js';\n\n/**\n * This method is like `_.assign` except that it iterates over own and\n * inherited source properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @alias extend\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assign\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n */\nvar assignIn = createAssigner(function(object, source) {\n  copyObject(source, keysIn(source), object);\n});\n\nexport default assignIn;\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/observablemixin\n */\n\nimport EmitterMixin from './emittermixin';\nimport CKEditorError from './ckeditorerror';\nimport { extend, isObject } from 'lodash-es';\n\nconst observablePropertiesSymbol = Symbol( 'observableProperties' );\nconst boundObservablesSymbol = Symbol( 'boundObservables' );\nconst boundPropertiesSymbol = Symbol( 'boundProperties' );\n\n/**\n * A mixin that injects the \"observable properties\" and data binding functionality described in the\n * {@link ~Observable} interface.\n *\n * Read more about the concept of observables in the:\n * * {@glink framework/guides/architecture/core-editor-architecture#event-system-and-observables \"Event system and observables\"}\n * section of the {@glink framework/guides/architecture/core-editor-architecture \"Core editor architecture\"} guide,\n * * {@glink framework/guides/deep-dive/observables \"Observables\" deep dive} guide.\n *\n * @mixin ObservableMixin\n * @mixes module:utils/emittermixin~EmitterMixin\n * @implements module:utils/observablemixin~Observable\n */\nconst ObservableMixin = {\n\t/**\n\t * @inheritDoc\n\t */\n\tset( name, value ) {\n\t\t// If the first parameter is an Object, iterate over its properties.\n\t\tif ( isObject( name ) ) {\n\t\t\tObject.keys( name ).forEach( property => {\n\t\t\t\tthis.set( property, name[ property ] );\n\t\t\t}, this );\n\n\t\t\treturn;\n\t\t}\n\n\t\tinitObservable( this );\n\n\t\tconst properties = this[ observablePropertiesSymbol ];\n\n\t\tif ( ( name in this ) && !properties.has( name ) ) {\n\t\t\t/**\n\t\t\t * Cannot override an existing property.\n\t\t\t *\n\t\t\t * This error is thrown when trying to {@link ~Observable#set set} a property with\n\t\t\t * a name of an already existing property. For example:\n\t\t\t *\n\t\t\t *\t\tlet observable = new Model();\n\t\t\t *\t\tobservable.property = 1;\n\t\t\t *\t\tobservable.set( 'property', 2 );\t\t\t// throws\n\t\t\t *\n\t\t\t *\t\tobservable.set( 'property', 1 );\n\t\t\t *\t\tobservable.set( 'property', 2 );\t\t\t// ok, because this is an existing property.\n\t\t\t *\n\t\t\t * @error observable-set-cannot-override\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-set-cannot-override', this );\n\t\t}\n\n\t\tObject.defineProperty( this, name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\n\t\t\tget() {\n\t\t\t\treturn properties.get( name );\n\t\t\t},\n\n\t\t\tset( value ) {\n\t\t\t\tconst oldValue = properties.get( name );\n\n\t\t\t\t// Fire `set` event before the new value will be set to make it possible\n\t\t\t\t// to override observable property without affecting `change` event.\n\t\t\t\t// See https://github.com/ckeditor/ckeditor5-utils/issues/171.\n\t\t\t\tlet newValue = this.fire( 'set:' + name, name, value, oldValue );\n\n\t\t\t\tif ( newValue === undefined ) {\n\t\t\t\t\tnewValue = value;\n\t\t\t\t}\n\n\t\t\t\t// Allow undefined as an initial value like A.define( 'x', undefined ) (#132).\n\t\t\t\t// Note: When properties map has no such own property, then its value is undefined.\n\t\t\t\tif ( oldValue !== newValue || !properties.has( name ) ) {\n\t\t\t\t\tproperties.set( name, newValue );\n\t\t\t\t\tthis.fire( 'change:' + name, name, newValue, oldValue );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\tthis[ name ] = value;\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tbind( ...bindProperties ) {\n\t\tif ( !bindProperties.length || !isStringArray( bindProperties ) ) {\n\t\t\t/**\n\t\t\t * All properties must be strings.\n\t\t\t *\n\t\t\t * @error observable-bind-wrong-properties\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-bind-wrong-properties', this );\n\t\t}\n\n\t\tif ( ( new Set( bindProperties ) ).size !== bindProperties.length ) {\n\t\t\t/**\n\t\t\t * Properties must be unique.\n\t\t\t *\n\t\t\t * @error observable-bind-duplicate-properties\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-bind-duplicate-properties', this );\n\t\t}\n\n\t\tinitObservable( this );\n\n\t\tconst boundProperties = this[ boundPropertiesSymbol ];\n\n\t\tbindProperties.forEach( propertyName => {\n\t\t\tif ( boundProperties.has( propertyName ) ) {\n\t\t\t\t/**\n\t\t\t\t * Cannot bind the same property more than once.\n\t\t\t\t *\n\t\t\t\t * @error observable-bind-rebind\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'observable-bind-rebind', this );\n\t\t\t}\n\t\t} );\n\n\t\tconst bindings = new Map();\n\n\t\t// @typedef {Object} Binding\n\t\t// @property {Array} property Property which is bound.\n\t\t// @property {Array} to Array of observableproperty components of the binding (`{ observable: ..., property: .. }`).\n\t\t// @property {Array} callback A function which processes `to` components.\n\t\tbindProperties.forEach( a => {\n\t\t\tconst binding = { property: a, to: [] };\n\n\t\t\tboundProperties.set( a, binding );\n\t\t\tbindings.set( a, binding );\n\t\t} );\n\n\t\t// @typedef {Object} BindChain\n\t\t// @property {Function} to See {@link ~ObservableMixin#_bindTo}.\n\t\t// @property {Function} toMany See {@link ~ObservableMixin#_bindToMany}.\n\t\t// @property {module:utils/observablemixin~Observable} _observable The observable which initializes the binding.\n\t\t// @property {Array} _bindProperties Array of `_observable` properties to be bound.\n\t\t// @property {Array} _to Array of `to()` observableproperties (`{ observable: toObservable, properties: ...toProperties }`).\n\t\t// @property {Map} _bindings Stores bindings to be kept in\n\t\t// {@link ~ObservableMixin#_boundProperties}/{@link ~ObservableMixin#_boundObservables}\n\t\t// initiated in this binding chain.\n\t\treturn {\n\t\t\tto: bindTo,\n\t\t\ttoMany: bindToMany,\n\n\t\t\t_observable: this,\n\t\t\t_bindProperties: bindProperties,\n\t\t\t_to: [],\n\t\t\t_bindings: bindings\n\t\t};\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tunbind( ...unbindProperties ) {\n\t\t// Nothing to do here if not inited yet.\n\t\tif ( !( this[ observablePropertiesSymbol ] ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst boundProperties = this[ boundPropertiesSymbol ];\n\t\tconst boundObservables = this[ boundObservablesSymbol ];\n\n\t\tif ( unbindProperties.length ) {\n\t\t\tif ( !isStringArray( unbindProperties ) ) {\n\t\t\t\t/**\n\t\t\t\t * Properties must be strings.\n\t\t\t\t *\n\t\t\t\t * @error observable-unbind-wrong-properties\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'observable-unbind-wrong-properties', this );\n\t\t\t}\n\n\t\t\tunbindProperties.forEach( propertyName => {\n\t\t\t\tconst binding = boundProperties.get( propertyName );\n\n\t\t\t\t// Nothing to do if the binding is not defined\n\t\t\t\tif ( !binding ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet toObservable, toProperty, toProperties, toPropertyBindings;\n\n\t\t\t\tbinding.to.forEach( to => {\n\t\t\t\t\t// TODO: ES6 destructuring.\n\t\t\t\t\ttoObservable = to[ 0 ];\n\t\t\t\t\ttoProperty = to[ 1 ];\n\t\t\t\t\ttoProperties = boundObservables.get( toObservable );\n\t\t\t\t\ttoPropertyBindings = toProperties[ toProperty ];\n\n\t\t\t\t\ttoPropertyBindings.delete( binding );\n\n\t\t\t\t\tif ( !toPropertyBindings.size ) {\n\t\t\t\t\t\tdelete toProperties[ toProperty ];\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !Object.keys( toProperties ).length ) {\n\t\t\t\t\t\tboundObservables.delete( toObservable );\n\t\t\t\t\t\tthis.stopListening( toObservable, 'change' );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tboundProperties.delete( propertyName );\n\t\t\t} );\n\t\t} else {\n\t\t\tboundObservables.forEach( ( bindings, boundObservable ) => {\n\t\t\t\tthis.stopListening( boundObservable, 'change' );\n\t\t\t} );\n\n\t\t\tboundObservables.clear();\n\t\t\tboundProperties.clear();\n\t\t}\n\t},\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdecorate( methodName ) {\n\t\tconst originalMethod = this[ methodName ];\n\n\t\tif ( !originalMethod ) {\n\t\t\t/**\n\t\t\t * Cannot decorate an undefined method.\n\t\t\t *\n\t\t\t * @error observablemixin-cannot-decorate-undefined\n\t\t\t * @param {Object} object The object which method should be decorated.\n\t\t\t * @param {String} methodName Name of the method which does not exist.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'observablemixin-cannot-decorate-undefined',\n\t\t\t\tthis,\n\t\t\t\t{ object: this, methodName }\n\t\t\t);\n\t\t}\n\n\t\tthis.on( methodName, ( evt, args ) => {\n\t\t\tevt.return = originalMethod.apply( this, args );\n\t\t} );\n\n\t\tthis[ methodName ] = function( ...args ) {\n\t\t\treturn this.fire( methodName, args );\n\t\t};\n\t}\n};\n\nextend( ObservableMixin, EmitterMixin );\n\nexport default ObservableMixin;\n\n// Init symbol properties needed for the observable mechanism to work.\n//\n// @private\n// @param {module:utils/observablemixin~ObservableMixin} observable\nfunction initObservable( observable ) {\n\t// Do nothing if already inited.\n\tif ( observable[ observablePropertiesSymbol ] ) {\n\t\treturn;\n\t}\n\n\t// The internal hash containing the observable's state.\n\t//\n\t// @private\n\t// @type {Map}\n\tObject.defineProperty( observable, observablePropertiesSymbol, {\n\t\tvalue: new Map()\n\t} );\n\n\t// Map containing bindings to external observables. It shares the binding objects\n\t// (`{ observable: A, property: 'a', to: ... }`) with {@link module:utils/observablemixin~ObservableMixin#_boundProperties} and\n\t// it is used to observe external observables to update own properties accordingly.\n\t// See {@link module:utils/observablemixin~ObservableMixin#bind}.\n\t//\n\t//\t\tA.bind( 'a', 'b', 'c' ).to( B, 'x', 'y', 'x' );\n\t//\t\tconsole.log( A._boundObservables );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\tB: {\n\t//\t\t\t\t\tx: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\t\t\t{ observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n\t//\t\t\t\t\t] ),\n\t//\t\t\t\t\ty: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\t\t] )\n\t//\t\t\t\t}\n\t//\t\t\t} )\n\t//\n\t//\t\tA.bind( 'd' ).to( B, 'z' ).to( C, 'w' ).as( callback );\n\t//\t\tconsole.log( A._boundObservables );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\tB: {\n\t//\t\t\t\t\tx: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\t\t\t{ observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n\t//\t\t\t\t\t] ),\n\t//\t\t\t\t\ty: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\t\t] ),\n\t//\t\t\t\t\tz: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n\t//\t\t\t\t\t] )\n\t//\t\t\t\t},\n\t//\t\t\t\tC: {\n\t//\t\t\t\t\tw: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n\t//\t\t\t\t\t] )\n\t//\t\t\t\t}\n\t//\t\t\t} )\n\t//\n\t// @private\n\t// @type {Map}\n\tObject.defineProperty( observable, boundObservablesSymbol, {\n\t\tvalue: new Map()\n\t} );\n\n\t// Object that stores which properties of this observable are bound and how. It shares\n\t// the binding objects (`{ observable: A, property: 'a', to: ... }`) with\n\t// {@link module:utils/observablemixin~ObservableMixin#_boundObservables}. This data structure is\n\t// a reverse of {@link module:utils/observablemixin~ObservableMixin#_boundObservables} and it is helpful for\n\t// {@link module:utils/observablemixin~ObservableMixin#unbind}.\n\t//\n\t// See {@link module:utils/observablemixin~ObservableMixin#bind}.\n\t//\n\t//\t\tA.bind( 'a', 'b', 'c' ).to( B, 'x', 'y', 'x' );\n\t//\t\tconsole.log( A._boundProperties );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\ta: { observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\tb: { observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\tc: { observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n\t//\t\t\t} )\n\t//\n\t//\t\tA.bind( 'd' ).to( B, 'z' ).to( C, 'w' ).as( callback );\n\t//\t\tconsole.log( A._boundProperties );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\ta: { observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\tb: { observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\tc: { observable: A, property: 'c', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\td: { observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n\t//\t\t\t} )\n\t//\n\t// @private\n\t// @type {Map}\n\tObject.defineProperty( observable, boundPropertiesSymbol, {\n\t\tvalue: new Map()\n\t} );\n}\n\n// A chaining for {@link module:utils/observablemixin~ObservableMixin#bind} providing `.to()` interface.\n//\n// @private\n// @param {...[Observable|String|Function]} args Arguments of the `.to( args )` binding.\nfunction bindTo( ...args ) {\n\tconst parsedArgs = parseBindToArgs( ...args );\n\tconst bindingsKeys = Array.from( this._bindings.keys() );\n\tconst numberOfBindings = bindingsKeys.length;\n\n\t// Eliminate A.bind( 'x' ).to( B, C )\n\tif ( !parsedArgs.callback && parsedArgs.to.length > 1 ) {\n\t\t/**\n\t\t * Binding multiple observables only possible with callback.\n\t\t *\n\t\t * @error observable-bind-to-no-callback\n\t\t */\n\t\tthrow new CKEditorError( 'observable-bind-to-no-callback', this );\n\t}\n\n\t// Eliminate A.bind( 'x', 'y' ).to( B, callback )\n\tif ( numberOfBindings > 1 && parsedArgs.callback ) {\n\t\t/**\n\t\t * Cannot bind multiple properties and use a callback in one binding.\n\t\t *\n\t\t * @error observable-bind-to-extra-callback\n\t\t */\n\t\tthrow new CKEditorError(\n\t\t\t'observable-bind-to-extra-callback',\n\t\t\tthis\n\t\t);\n\t}\n\n\tparsedArgs.to.forEach( to => {\n\t\t// Eliminate A.bind( 'x', 'y' ).to( B, 'a' )\n\t\tif ( to.properties.length && to.properties.length !== numberOfBindings ) {\n\t\t\t/**\n\t\t\t * The number of properties must match.\n\t\t\t *\n\t\t\t * @error observable-bind-to-properties-length\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-bind-to-properties-length', this );\n\t\t}\n\n\t\t// When no to.properties specified, observing source properties instead i.e.\n\t\t// A.bind( 'x', 'y' ).to( B ) -> Observe B.x and B.y\n\t\tif ( !to.properties.length ) {\n\t\t\tto.properties = this._bindProperties;\n\t\t}\n\t} );\n\n\tthis._to = parsedArgs.to;\n\n\t// Fill {@link BindChain#_bindings} with callback. When the callback is set there's only one binding.\n\tif ( parsedArgs.callback ) {\n\t\tthis._bindings.get( bindingsKeys[ 0 ] ).callback = parsedArgs.callback;\n\t}\n\n\tattachBindToListeners( this._observable, this._to );\n\n\t// Update observable._boundProperties and observable._boundObservables.\n\tupdateBindToBound( this );\n\n\t// Set initial values of bound properties.\n\tthis._bindProperties.forEach( propertyName => {\n\t\tupdateBoundObservableProperty( this._observable, propertyName );\n\t} );\n}\n\n// Binds to an attribute in a set of iterable observables.\n//\n// @private\n// @param {Array.<Observable>} observables\n// @param {String} attribute\n// @param {Function} callback\nfunction bindToMany( observables, attribute, callback ) {\n\tif ( this._bindings.size > 1 ) {\n\t\t/**\n\t\t * Binding one attribute to many observables only possible with one attribute.\n\t\t *\n\t\t * @error observable-bind-to-many-not-one-binding\n\t\t */\n\t\tthrow new CKEditorError( 'observable-bind-to-many-not-one-binding', this );\n\t}\n\n\tthis.to(\n\t\t// Bind to #attribute of each observable...\n\t\t...getBindingTargets( observables, attribute ),\n\t\t// ...using given callback to parse attribute values.\n\t\tcallback\n\t);\n}\n\n// Returns an array of binding components for\n// {@link Observable#bind} from a set of iterable observables.\n//\n// @param {Array.<Observable>} observables\n// @param {String} attribute\n// @returns {Array.<String|Observable>}\nfunction getBindingTargets( observables, attribute ) {\n\tconst observableAndAttributePairs = observables.map( observable => [ observable, attribute ] );\n\n\t// Merge pairs to one-dimension array of observables and attributes.\n\treturn Array.prototype.concat.apply( [], observableAndAttributePairs );\n}\n\n// Check if all entries of the array are of `String` type.\n//\n// @private\n// @param {Array} arr An array to be checked.\n// @returns {Boolean}\nfunction isStringArray( arr ) {\n\treturn arr.every( a => typeof a == 'string' );\n}\n\n// Parses and validates {@link Observable#bind}`.to( args )` arguments and returns\n// an object with a parsed structure. For example\n//\n//\t\tA.bind( 'x' ).to( B, 'a', C, 'b', call );\n//\n// becomes\n//\n//\t\t{\n//\t\t\tto: [\n//\t\t\t\t{ observable: B, properties: [ 'a' ] },\n//\t\t\t\t{ observable: C, properties: [ 'b' ] },\n//\t\t\t],\n//\t\t\tcallback: call\n// \t\t}\n//\n// @private\n// @param {...*} args Arguments of {@link Observable#bind}`.to( args )`.\n// @returns {Object}\nfunction parseBindToArgs( ...args ) {\n\t// Eliminate A.bind( 'x' ).to()\n\tif ( !args.length ) {\n\t\t/**\n\t\t * Invalid argument syntax in `to()`.\n\t\t *\n\t\t * @error observable-bind-to-parse-error\n\t\t */\n\t\tthrow new CKEditorError( 'observable-bind-to-parse-error', null );\n\t}\n\n\tconst parsed = { to: [] };\n\tlet lastObservable;\n\n\tif ( typeof args[ args.length - 1 ] == 'function' ) {\n\t\tparsed.callback = args.pop();\n\t}\n\n\targs.forEach( a => {\n\t\tif ( typeof a == 'string' ) {\n\t\t\tlastObservable.properties.push( a );\n\t\t} else if ( typeof a == 'object' ) {\n\t\t\tlastObservable = { observable: a, properties: [] };\n\t\t\tparsed.to.push( lastObservable );\n\t\t} else {\n\t\t\tthrow new CKEditorError( 'observable-bind-to-parse-error', null );\n\t\t}\n\t} );\n\n\treturn parsed;\n}\n\n// Synchronizes {@link module:utils/observablemixin#_boundObservables} with {@link Binding}.\n//\n// @private\n// @param {Binding} binding A binding to store in {@link Observable#_boundObservables}.\n// @param {Observable} toObservable A observable, which is a new component of `binding`.\n// @param {String} toPropertyName A name of `toObservable`'s property, a new component of the `binding`.\nfunction updateBoundObservables( observable, binding, toObservable, toPropertyName ) {\n\tconst boundObservables = observable[ boundObservablesSymbol ];\n\tconst bindingsToObservable = boundObservables.get( toObservable );\n\tconst bindings = bindingsToObservable || {};\n\n\tif ( !bindings[ toPropertyName ] ) {\n\t\tbindings[ toPropertyName ] = new Set();\n\t}\n\n\t// Pass the binding to a corresponding Set in `observable._boundObservables`.\n\tbindings[ toPropertyName ].add( binding );\n\n\tif ( !bindingsToObservable ) {\n\t\tboundObservables.set( toObservable, bindings );\n\t}\n}\n\n// Synchronizes {@link Observable#_boundProperties} and {@link Observable#_boundObservables}\n// with {@link BindChain}.\n//\n// Assuming the following binding being created\n//\n// \t\tA.bind( 'a', 'b' ).to( B, 'x', 'y' );\n//\n// the following bindings were initialized by {@link Observable#bind} in {@link BindChain#_bindings}:\n//\n// \t\t{\n// \t\t\ta: { observable: A, property: 'a', to: [] },\n// \t\t\tb: { observable: A, property: 'b', to: [] },\n// \t\t}\n//\n// Iterate over all bindings in this chain and fill their `to` properties with\n// corresponding to( ... ) arguments (components of the binding), so\n//\n// \t\t{\n// \t\t\ta: { observable: A, property: 'a', to: [ B, 'x' ] },\n// \t\t\tb: { observable: A, property: 'b', to: [ B, 'y' ] },\n// \t\t}\n//\n// Then update the structure of {@link Observable#_boundObservables} with updated\n// binding, so it becomes:\n//\n// \t\tMap( {\n// \t\t\tB: {\n// \t\t\t\tx: Set( [\n// \t\t\t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] }\n// \t\t\t\t] ),\n// \t\t\t\ty: Set( [\n// \t\t\t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n// \t\t\t\t] )\n//\t\t\t}\n// \t\t} )\n//\n// @private\n// @param {BindChain} chain The binding initialized by {@link Observable#bind}.\nfunction updateBindToBound( chain ) {\n\tlet toProperty;\n\n\tchain._bindings.forEach( ( binding, propertyName ) => {\n\t\t// Note: For a binding without a callback, this will run only once\n\t\t// like in A.bind( 'x', 'y' ).to( B, 'a', 'b' )\n\t\t// TODO: ES6 destructuring.\n\t\tchain._to.forEach( to => {\n\t\t\ttoProperty = to.properties[ binding.callback ? 0 : chain._bindProperties.indexOf( propertyName ) ];\n\n\t\t\tbinding.to.push( [ to.observable, toProperty ] );\n\t\t\tupdateBoundObservables( chain._observable, binding, to.observable, toProperty );\n\t\t} );\n\t} );\n}\n\n// Updates an property of a {@link Observable} with a value\n// determined by an entry in {@link Observable#_boundProperties}.\n//\n// @private\n// @param {Observable} observable A observable which property is to be updated.\n// @param {String} propertyName An property to be updated.\nfunction updateBoundObservableProperty( observable, propertyName ) {\n\tconst boundProperties = observable[ boundPropertiesSymbol ];\n\tconst binding = boundProperties.get( propertyName );\n\tlet propertyValue;\n\n\t// When a binding with callback is created like\n\t//\n\t// \t\tA.bind( 'a' ).to( B, 'b', C, 'c', callback );\n\t//\n\t// collect B.b and C.c, then pass them to callback to set A.a.\n\tif ( binding.callback ) {\n\t\tpropertyValue = binding.callback.apply( observable, binding.to.map( to => to[ 0 ][ to[ 1 ] ] ) );\n\t} else {\n\t\tpropertyValue = binding.to[ 0 ];\n\t\tpropertyValue = propertyValue[ 0 ][ propertyValue[ 1 ] ];\n\t}\n\n\tif ( Object.prototype.hasOwnProperty.call( observable, propertyName ) ) {\n\t\tobservable[ propertyName ] = propertyValue;\n\t} else {\n\t\tobservable.set( propertyName, propertyValue );\n\t}\n}\n\n// Starts listening to changes in {@link BindChain._to} observables to update\n// {@link BindChain._observable} {@link BindChain._bindProperties}. Also sets the\n// initial state of {@link BindChain._observable}.\n//\n// @private\n// @param {BindChain} chain The chain initialized by {@link Observable#bind}.\nfunction attachBindToListeners( observable, toBindings ) {\n\ttoBindings.forEach( to => {\n\t\tconst boundObservables = observable[ boundObservablesSymbol ];\n\t\tlet bindings;\n\n\t\t// If there's already a chain between the observables (`observable` listens to\n\t\t// `to.observable`), there's no need to create another `change` event listener.\n\t\tif ( !boundObservables.get( to.observable ) ) {\n\t\t\tobservable.listenTo( to.observable, 'change', ( evt, propertyName ) => {\n\t\t\t\tbindings = boundObservables.get( to.observable )[ propertyName ];\n\n\t\t\t\t// Note: to.observable will fire for any property change, react\n\t\t\t\t// to changes of properties which are bound only.\n\t\t\t\tif ( bindings ) {\n\t\t\t\t\tbindings.forEach( binding => {\n\t\t\t\t\t\tupdateBoundObservableProperty( observable, binding.property );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );\n}\n\n/**\n * An interface which adds \"observable properties\" and data binding functionality.\n *\n * Can be easily implemented by a class by mixing the {@link module:utils/observablemixin~ObservableMixin} mixin.\n *\n * Read more about the usage of this interface in the:\n * * {@glink framework/guides/architecture/core-editor-architecture#event-system-and-observables \"Event system and observables\"}\n * section of the {@glink framework/guides/architecture/core-editor-architecture \"Core editor architecture\"} guide,\n * * {@glink framework/guides/deep-dive/observables \"Observables\" deep dive} guide.\n *\n * @interface Observable\n * @extends module:utils/emittermixin~Emitter\n */\n\n/**\n * Fired when a property changed value.\n *\n *\t\tobservable.set( 'prop', 1 );\n *\n *\t\tobservable.on( 'change:prop', ( evt, propertyName, newValue, oldValue ) => {\n *\t\t\tconsole.log( `${ propertyName } has changed from ${ oldValue } to ${ newValue }` );\n *\t\t} );\n *\n *\t\tobservable.prop = 2; // -> 'prop has changed from 1 to 2'\n *\n * @event change:{property}\n * @param {String} name The property name.\n * @param {*} value The new property value.\n * @param {*} oldValue The previous property value.\n */\n\n/**\n * Fired when a property value is going to be set but is not set yet (before the `change` event is fired).\n *\n * You can control the final value of the property by using\n * the {@link module:utils/eventinfo~EventInfo#return event's `return` property}.\n *\n *\t\tobservable.set( 'prop', 1 );\n *\n *\t\tobservable.on( 'set:prop', ( evt, propertyName, newValue, oldValue ) => {\n *\t\t\tconsole.log( `Value is going to be changed from ${ oldValue } to ${ newValue }` );\n *\t\t\tconsole.log( `Current property value is ${ observable[ propertyName ] }` );\n *\n *\t\t\t// Let's override the value.\n *\t\t\tevt.return = 3;\n *\t\t} );\n *\n *\t\tobservable.on( 'change:prop', ( evt, propertyName, newValue, oldValue ) => {\n *\t\t\tconsole.log( `Value has changed from ${ oldValue } to ${ newValue }` );\n *\t\t} );\n *\n *\t\tobservable.prop = 2; // -> 'Value is going to be changed from 1 to 2'\n *\t\t                     // -> 'Current property value is 1'\n *\t\t                     // -> 'Value has changed from 1 to 3'\n *\n * **Note:** The event is fired even when the new value is the same as the old value.\n *\n * @event set:{property}\n * @param {String} name The property name.\n * @param {*} value The new property value.\n * @param {*} oldValue The previous property value.\n */\n\n/**\n * Creates and sets the value of an observable property of this object. Such a property becomes a part\n * of the state and is observable.\n *\n * It accepts also a single object literal containing key/value pairs with properties to be set.\n *\n * This method throws the `observable-set-cannot-override` error if the observable instance already\n * has a property with the given property name. This prevents from mistakenly overriding existing\n * properties and methods, but means that `foo.set( 'bar', 1 )` may be slightly slower than `foo.bar = 1`.\n *\n * @method #set\n * @param {String|Object} name The property's name or object with `name=>value` pairs.\n * @param {*} [value] The property's value (if `name` was passed in the first parameter).\n */\n\n/**\n * Binds {@link #set observable properties} to other objects implementing the\n * {@link module:utils/observablemixin~Observable} interface.\n *\n * Read more in the {@glink framework/guides/deep-dive/observables#property-bindings dedicated guide}\n * covering the topic of property bindings with some additional examples.\n *\n * Consider two objects: a `button` and an associated `command` (both `Observable`).\n *\n * A simple property binding could be as follows:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command, 'isEnabled' );\n *\n * or even shorter:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command );\n *\n * which works in the following way:\n *\n * * `button.isEnabled` **instantly equals** `command.isEnabled`,\n * * whenever `command.isEnabled` changes, `button.isEnabled` will immediately reflect its value.\n *\n * **Note**: To release the binding, use {@link module:utils/observablemixin~Observable#unbind}.\n *\n * You can also \"rename\" the property in the binding by specifying the new name in the `to()` chain:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command, 'isWorking' );\n *\n * It is possible to bind more than one property at a time to shorten the code:\n *\n *\t\tbutton.bind( 'isEnabled', 'value' ).to( command );\n *\n * which corresponds to:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command );\n *\t\tbutton.bind( 'value' ).to( command );\n *\n * The binding can include more than one observable, combining multiple data sources in a custom callback:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command, 'isEnabled', ui, 'isVisible',\n *\t\t\t( isCommandEnabled, isUIVisible ) => isCommandEnabled && isUIVisible );\n *\n * Using a custom callback allows processing the value before passing it to the target property:\n *\n *\t\tbutton.bind( 'isEnabled' ).to( command, 'value', value => value === 'heading1' );\n *\n * It is also possible to bind to the same property in an array of observables.\n * To bind a `button` to multiple commands (also `Observables`) so that each and every one of them\n * must be enabled for the button to become enabled, use the following code:\n *\n *\t\tbutton.bind( 'isEnabled' ).toMany( [ commandA, commandB, commandC ], 'isEnabled',\n *\t\t\t( isAEnabled, isBEnabled, isCEnabled ) => isAEnabled && isBEnabled && isCEnabled );\n *\n * @method #bind\n * @param {...String} bindProperties Observable properties that will be bound to other observable(s).\n * @returns {Object} The bind chain with the `to()` and `toMany()` methods.\n */\n\n/**\n * Removes the binding created with {@link #bind}.\n *\n *\t\t// Removes the binding for the 'a' property.\n *\t\tA.unbind( 'a' );\n *\n *\t\t// Removes bindings for all properties.\n *\t\tA.unbind();\n *\n * @method #unbind\n * @param {...String} [unbindProperties] Observable properties to be unbound. All the bindings will\n * be released if no properties are provided.\n */\n\n/**\n * Turns the given methods of this object into event-based ones. This means that the new method will fire an event\n * (named after the method) and the original action will be plugged as a listener to that event.\n *\n * Read more in the {@glink framework/guides/deep-dive/observables#decorating-object-methods dedicated guide}\n * covering the topic of decorating methods with some additional examples.\n *\n * Decorating the method does not change its behavior (it only adds an event),\n * but it allows to modify it later on by listening to the method's event.\n *\n * For example, to cancel the method execution the event can be {@link module:utils/eventinfo~EventInfo#stop stopped}:\n *\n *\t\tclass Foo {\n *\t\t\tconstructor() {\n *\t\t\t\tthis.decorate( 'method' );\n *\t\t\t}\n *\n *\t\t\tmethod() {\n *\t\t\t\tconsole.log( 'called!' );\n *\t\t\t}\n *\t\t}\n *\n *\t\tconst foo = new Foo();\n *\t\tfoo.on( 'method', ( evt ) => {\n *\t\t\tevt.stop();\n *\t\t}, { priority: 'high' } );\n *\n *\t\tfoo.method(); // Nothing is logged.\n *\n *\n * **Note**: The high {@link module:utils/priorities~PriorityString priority} listener\n * has been used to execute this particular callback before the one which calls the original method\n * (which uses the \"normal\" priority).\n *\n * It is also possible to change the returned value:\n *\n *\t\tfoo.on( 'method', ( evt ) => {\n *\t\t\tevt.return = 'Foo!';\n *\t\t} );\n *\n *\t\tfoo.method(); // -> 'Foo'\n *\n * Finally, it is possible to access and modify the arguments the method is called with:\n *\n *\t\tmethod( a, b ) {\n *\t\t\tconsole.log( `${ a }, ${ b }`  );\n *\t\t}\n *\n *\t\t// ...\n *\n *\t\tfoo.on( 'method', ( evt, args ) => {\n *\t\t\targs[ 0 ] = 3;\n *\n *\t\t\tconsole.log( args[ 1 ] ); // -> 2\n *\t\t}, { priority: 'high' } );\n *\n *\t\tfoo.method( 1, 2 ); // -> '3, 2'\n *\n * @method #decorate\n * @param {String} methodName Name of the method to decorate.\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/editableelement\n */\n\nimport ContainerElement from './containerelement';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\n\n/**\n * Editable element which can be a {@link module:engine/view/rooteditableelement~RootEditableElement root}\n * or nested editable area in the editor.\n *\n * Editable is automatically read-only when its {@link module:engine/view/document~Document Document} is read-only.\n *\n * The constructor of this class shouldn't be used directly. To create new `EditableElement` use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createEditableElement `downcastWriter#createEditableElement()`} method.\n *\n * @extends module:engine/view/containerelement~ContainerElement\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class EditableElement extends ContainerElement {\n\t/**\n\t * Creates an editable element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createEditableElement\n\t * @protected\n\t */\n\tconstructor( document, name, attrs, children ) {\n\t\tsuper( document, name, attrs, children );\n\n\t\t/**\n\t\t * Whether the editable is in read-write or read-only mode.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} module:engine/view/editableelement~EditableElement#isReadOnly\n\t\t */\n\t\tthis.set( 'isReadOnly', false );\n\n\t\t/**\n\t\t * Whether the editable is focused.\n\t\t *\n\t\t * This property updates when {@link module:engine/view/document~Document#isFocused document.isFocused} or view\n\t\t * selection is changed.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} module:engine/view/editableelement~EditableElement#isFocused\n\t\t */\n\t\tthis.set( 'isFocused', false );\n\n\t\tthis.bind( 'isReadOnly' ).to( document );\n\n\t\tthis.bind( 'isFocused' ).to(\n\t\t\tdocument,\n\t\t\t'isFocused',\n\t\t\tisFocused => isFocused && document.selection.editableElement == this\n\t\t);\n\n\t\t// Update focus state based on selection changes.\n\t\tthis.listenTo( document.selection, 'change', () => {\n\t\t\tthis.isFocused = document.isFocused && document.selection.editableElement == this;\n\t\t} );\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\teditableElement.is( 'editableElement' ); // -> true\n\t *\t\teditableElement.is( 'element' ); // -> true\n\t *\t\teditableElement.is( 'node' ); // -> true\n\t *\t\teditableElement.is( 'view:editableElement' ); // -> true\n\t *\t\teditableElement.is( 'view:element' ); // -> true\n\t *\t\teditableElement.is( 'view:node' ); // -> true\n\t *\n\t *\t\teditableElement.is( 'model:element' ); // -> false\n\t *\t\teditableElement.is( 'documentFragment' ); // -> false\n\t *\n\t * Assuming that the object being checked is an editbale element, you can also check its\n\t * {@link module:engine/view/editableelement~EditableElement#name name}:\n\t *\n\t *\t\teditableElement.is( 'element', 'div' ); // -> true if this is a div element\n\t *\t\teditableElement.is( 'editableElement', 'div' ); // -> same as above\n\t *\t\ttext.is( 'element', 'div' ); -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'editableElement' || type === 'view:editableElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'containerElement' || type === 'view:containerElement' ||\n\t\t\t\ttype === 'element' || type === 'view:element' ||\n\t\t\t\ttype === 'node' || type === 'view:node';\n\t\t} else {\n\t\t\treturn name === this.name && (\n\t\t\t\ttype === 'editableElement' || type === 'view:editableElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'containerElement' || type === 'view:containerElement' ||\n\t\t\t\ttype === 'element' || type === 'view:element'\n\t\t\t);\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis.stopListening();\n\t}\n}\n\nmix( EditableElement, ObservableMixin );\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/rooteditableelement\n */\n\nimport EditableElement from './editableelement';\n\nconst rootNameSymbol = Symbol( 'rootName' );\n\n/**\n * Class representing a single root in the data view. A root can be either {@link ~RootEditableElement#isReadOnly editable or read-only},\n * but in both cases it is called \"an editable\". Roots can contain other {@link module:engine/view/editableelement~EditableElement\n * editable elements} making them \"nested editables\".\n *\n * @extends module:engine/view/editableelement~EditableElement\n */\nexport default class RootEditableElement extends EditableElement {\n\t/**\n\t * Creates root editable element.\n\t *\n\t * @param {module:engine/view/document~Document} document The document instance to which this element belongs.\n\t * @param {String} name Node name.\n\t */\n\tconstructor( document, name ) {\n\t\tsuper( document, name );\n\n\t\t/**\n\t\t * Name of this root inside {@link module:engine/view/document~Document} that is an owner of this root. If no\n\t\t * other name is set, `main` name is used.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.rootName = 'main';\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\trootEditableElement.is( 'rootElement' ); // -> true\n\t *\t\trootEditableElement.is( 'editableElement' ); // -> true\n\t *\t\trootEditableElement.is( 'element' ); // -> true\n\t *\t\trootEditableElement.is( 'node' ); // -> true\n\t *\t\trootEditableElement.is( 'view:editableElement' ); // -> true\n\t *\t\trootEditableElement.is( 'view:element' ); // -> true\n\t *\t\trootEditableElement.is( 'view:node' ); // -> true\n\t *\n\t *\t\trootEditableElement.is( 'model:element' ); // -> false\n\t *\t\trootEditableElement.is( 'documentFragment' ); // -> false\n\t *\n\t * Assuming that the object being checked is a root editable element, you can also check its\n\t * {@link module:engine/view/rooteditableelement~RootEditableElement#name name}:\n\t *\n\t *\t\trootEditableElement.is( 'element', 'div' ); // -> true if this is a div root editable element\n\t *\t\trootEditableElement.is( 'rootElement', 'div' ); // -> same as above\n\t *\t\ttext.is( 'element', 'div' ); -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'rootElement' || type === 'view:rootElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'editableElement' || type === 'view:editableElement' ||\n\t\t\t\ttype === 'containerElement' || type === 'view:containerElement' ||\n\t\t\t\ttype === 'element' || type === 'view:element' ||\n\t\t\t\ttype === 'node' || type === 'view:node';\n\t\t} else {\n\t\t\treturn name === this.name && (\n\t\t\t\ttype === 'rootElement' || type === 'view:rootElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'editableElement' || type === 'view:editableElement' ||\n\t\t\t\ttype === 'containerElement' || type === 'view:containerElement' ||\n\t\t\t\ttype === 'element' || type === 'view:element'\n\t\t\t);\n\t\t}\n\t}\n\n\tget rootName() {\n\t\treturn this.getCustomProperty( rootNameSymbol );\n\t}\n\n\tset rootName( rootName ) {\n\t\tthis._setCustomProperty( rootNameSymbol, rootName );\n\t}\n\n\t/**\n\t * Overrides old element name and sets new one.\n\t * This is needed because view roots are created before they are attached to the DOM.\n\t * The name of the root element is temporary at this stage. It has to be changed when the\n\t * view root element is attached to the DOM element.\n\t *\n\t * @protected\n\t * @param {String} name The new name of element.\n\t */\n\tset _name( name ) {\n\t\tthis.name = name;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/treewalker\n */\n\nimport Element from './element';\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport Position from './position';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Position iterator class. It allows to iterate forward and backward over the document.\n */\nexport default class TreeWalker {\n\t/**\n\t * Creates a range iterator. All parameters are optional, but you have to specify either `boundaries` or `startPosition`.\n\t *\n\t * @constructor\n\t * @param {Object} options Object with configuration.\n\t * @param {module:engine/view/range~Range} [options.boundaries=null] Range to define boundaries of the iterator.\n\t * @param {module:engine/view/position~Position} [options.startPosition] Starting position.\n\t * @param {'forward'|'backward'} [options.direction='forward'] Walking direction.\n\t * @param {Boolean} [options.singleCharacters=false] Flag indicating whether all characters from\n\t * {@link module:engine/view/text~Text} should be returned as one {@link module:engine/view/text~Text} (`false`) ore one by one as\n\t * {@link module:engine/view/textproxy~TextProxy} (`true`).\n\t * @param {Boolean} [options.shallow=false] Flag indicating whether iterator should enter elements or not. If the\n\t * iterator is shallow child nodes of any iterated node will not be returned along with `elementEnd` tag.\n\t * @param {Boolean} [options.ignoreElementEnd=false] Flag indicating whether iterator should ignore `elementEnd`\n\t * tags. If the option is true walker will not return a parent node of start position. If this option is `true`\n\t * each {@link module:engine/view/element~Element} will be returned once, while if the option is `false` they might be returned\n\t * twice: for `'elementStart'` and `'elementEnd'`.\n\t */\n\tconstructor( options = {} ) {\n\t\tif ( !options.boundaries && !options.startPosition ) {\n\t\t\t/**\n\t\t\t * Neither boundaries nor starting position have been defined.\n\t\t\t *\n\t\t\t * @error view-tree-walker-no-start-position\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-tree-walker-no-start-position',\n\t\t\t\tnull\n\t\t\t);\n\t\t}\n\n\t\tif ( options.direction && options.direction != 'forward' && options.direction != 'backward' ) {\n\t\t\t/**\n\t\t\t * Only `backward` and `forward` direction allowed.\n\t\t\t *\n\t\t\t * @error view-tree-walker-unknown-direction\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-tree-walker-unknown-direction', options.startPosition, { direction: options.direction } );\n\t\t}\n\n\t\t/**\n\t\t * Iterator boundaries.\n\t\t *\n\t\t * When the iterator is walking `'forward'` on the end of boundary or is walking `'backward'`\n\t\t * on the start of boundary, then `{ done: true }` is returned.\n\t\t *\n\t\t * If boundaries are not defined they are set before first and after last child of the root node.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/range~Range} module:engine/view/treewalker~TreeWalker#boundaries\n\t\t */\n\t\tthis.boundaries = options.boundaries || null;\n\n\t\t/**\n\t\t * Iterator position. If start position is not defined then position depends on {@link #direction}. If direction is\n\t\t * `'forward'` position starts form the beginning, when direction is `'backward'` position starts from the end.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/position~Position} module:engine/view/treewalker~TreeWalker#position\n\t\t */\n\t\tif ( options.startPosition ) {\n\t\t\tthis.position = Position._createAt( options.startPosition );\n\t\t} else {\n\t\t\tthis.position = Position._createAt( options.boundaries[ options.direction == 'backward' ? 'end' : 'start' ] );\n\t\t}\n\n\t\t/**\n\t\t * Walking direction. Defaults `'forward'`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {'backward'|'forward'} module:engine/view/treewalker~TreeWalker#direction\n\t\t */\n\t\tthis.direction = options.direction || 'forward';\n\n\t\t/**\n\t\t * Flag indicating whether all characters from {@link module:engine/view/text~Text} should be returned as one\n\t\t * {@link module:engine/view/text~Text} or one by one as {@link module:engine/view/textproxy~TextProxy}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/view/treewalker~TreeWalker#singleCharacters\n\t\t */\n\t\tthis.singleCharacters = !!options.singleCharacters;\n\n\t\t/**\n\t\t * Flag indicating whether iterator should enter elements or not. If the iterator is shallow child nodes of any\n\t\t * iterated node will not be returned along with `elementEnd` tag.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/view/treewalker~TreeWalker#shallow\n\t\t */\n\t\tthis.shallow = !!options.shallow;\n\n\t\t/**\n\t\t * Flag indicating whether iterator should ignore `elementEnd` tags. If set to `true`, walker will not\n\t\t * return a parent node of the start position. Each {@link module:engine/view/element~Element} will be returned once.\n\t\t * When set to `false` each element might be returned twice: for `'elementStart'` and `'elementEnd'`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/view/treewalker~TreeWalker#ignoreElementEnd\n\t\t */\n\t\tthis.ignoreElementEnd = !!options.ignoreElementEnd;\n\n\t\t/**\n\t\t * Start boundary parent.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/view/node~Node} module:engine/view/treewalker~TreeWalker#_boundaryStartParent\n\t\t */\n\t\tthis._boundaryStartParent = this.boundaries ? this.boundaries.start.parent : null;\n\n\t\t/**\n\t\t * End boundary parent.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/view/node~Node} module:engine/view/treewalker~TreeWalker#_boundaryEndParent\n\t\t */\n\t\tthis._boundaryEndParent = this.boundaries ? this.boundaries.end.parent : null;\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * @returns {Iterable.<module:engine/view/treewalker~TreeWalkerValue>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this;\n\t}\n\n\t/**\n\t * Moves {@link #position} in the {@link #direction} skipping values as long as the callback function returns `true`.\n\t *\n\t * For example:\n\t *\n\t * \t\twalker.skip( value => value.type == 'text' ); // <p>{}foo</p> -> <p>foo[]</p>\n\t * \t\twalker.skip( value => true ); // Move the position to the end: <p>{}foo</p> -> <p>foo</p>[]\n\t * \t\twalker.skip( value => false ); // Do not move the position.\n\t *\n\t * @param {Function} skip Callback function. Gets {@link module:engine/view/treewalker~TreeWalkerValue} and should\n\t * return `true` if the value should be skipped or `false` if not.\n\t */\n\tskip( skip ) {\n\t\tlet done, value, prevPosition;\n\n\t\tdo {\n\t\t\tprevPosition = this.position;\n\n\t\t\t( { done, value } = this.next() );\n\t\t} while ( !done && skip( value ) );\n\n\t\tif ( !done ) {\n\t\t\tthis.position = prevPosition;\n\t\t}\n\t}\n\n\t/**\n\t * Gets the next tree walker's value.\n\t *\n\t * @returns {module:engine/view/treewalker~TreeWalkerValue} Object implementing iterator interface, returning\n\t * information about taken step.\n\t */\n\tnext() {\n\t\tif ( this.direction == 'forward' ) {\n\t\t\treturn this._next();\n\t\t} else {\n\t\t\treturn this._previous();\n\t\t}\n\t}\n\n\t/**\n\t * Makes a step forward in view. Moves the {@link #position} to the next position and returns the encountered value.\n\t *\n\t * @private\n\t * @returns {Object}\n\t * @returns {Boolean} return.done `true` if iterator is done, `false` otherwise.\n\t * @returns {module:engine/view/treewalker~TreeWalkerValue} return.value Information about taken step.\n\t */\n\t_next() {\n\t\tlet position = this.position.clone();\n\t\tconst previousPosition = this.position;\n\t\tconst parent = position.parent;\n\n\t\t// We are at the end of the root.\n\t\tif ( parent.parent === null && position.offset === parent.childCount ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// We reached the walker boundary.\n\t\tif ( parent === this._boundaryEndParent && position.offset == this.boundaries.end.offset ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// Get node just after current position.\n\t\tlet node;\n\n\t\t// Text is a specific parent because it contains string instead of child nodes.\n\t\tif ( parent instanceof Text ) {\n\t\t\tif ( position.isAtEnd ) {\n\t\t\t\t// Prevent returning \"elementEnd\" for Text node. Skip that value and return the next walker step.\n\t\t\t\tthis.position = Position._createAfter( parent );\n\n\t\t\t\treturn this._next();\n\t\t\t}\n\n\t\t\tnode = parent.data[ position.offset ];\n\t\t} else {\n\t\t\tnode = parent.getChild( position.offset );\n\t\t}\n\n\t\tif ( node instanceof Element ) {\n\t\t\tif ( !this.shallow ) {\n\t\t\t\tposition = new Position( node, 0 );\n\t\t\t} else {\n\t\t\t\tposition.offset++;\n\t\t\t}\n\n\t\t\tthis.position = position;\n\n\t\t\treturn this._formatReturnValue( 'elementStart', node, previousPosition, position, 1 );\n\t\t} else if ( node instanceof Text ) {\n\t\t\tif ( this.singleCharacters ) {\n\t\t\t\tposition = new Position( node, 0 );\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn this._next();\n\t\t\t} else {\n\t\t\t\tlet charactersCount = node.data.length;\n\t\t\t\tlet item;\n\n\t\t\t\t// If text stick out of walker range, we need to cut it and wrap in TextProxy.\n\t\t\t\tif ( node == this._boundaryEndParent ) {\n\t\t\t\t\tcharactersCount = this.boundaries.end.offset;\n\t\t\t\t\titem = new TextProxy( node, 0, charactersCount );\n\t\t\t\t\tposition = Position._createAfter( item );\n\t\t\t\t} else {\n\t\t\t\t\titem = new TextProxy( node, 0, node.data.length );\n\t\t\t\t\t// If not just keep moving forward.\n\t\t\t\t\tposition.offset++;\n\t\t\t\t}\n\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn this._formatReturnValue( 'text', item, previousPosition, position, charactersCount );\n\t\t\t}\n\t\t} else if ( typeof node == 'string' ) {\n\t\t\tlet textLength;\n\n\t\t\tif ( this.singleCharacters ) {\n\t\t\t\ttextLength = 1;\n\t\t\t} else {\n\t\t\t\t// Check if text stick out of walker range.\n\t\t\t\tconst endOffset = parent === this._boundaryEndParent ? this.boundaries.end.offset : parent.data.length;\n\n\t\t\t\ttextLength = endOffset - position.offset;\n\t\t\t}\n\n\t\t\tconst textProxy = new TextProxy( parent, position.offset, textLength );\n\n\t\t\tposition.offset += textLength;\n\t\t\tthis.position = position;\n\n\t\t\treturn this._formatReturnValue( 'text', textProxy, previousPosition, position, textLength );\n\t\t} else {\n\t\t\t// `node` is not set, we reached the end of current `parent`.\n\t\t\tposition = Position._createAfter( parent );\n\t\t\tthis.position = position;\n\n\t\t\tif ( this.ignoreElementEnd ) {\n\t\t\t\treturn this._next();\n\t\t\t} else {\n\t\t\t\treturn this._formatReturnValue( 'elementEnd', parent, previousPosition, position );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Makes a step backward in view. Moves the {@link #position} to the previous position and returns the encountered value.\n\t *\n\t * @private\n\t * @returns {Object}\n\t * @returns {Boolean} return.done True if iterator is done.\n\t * @returns {module:engine/view/treewalker~TreeWalkerValue} return.value Information about taken step.\n\t */\n\t_previous() {\n\t\tlet position = this.position.clone();\n\t\tconst previousPosition = this.position;\n\t\tconst parent = position.parent;\n\n\t\t// We are at the beginning of the root.\n\t\tif ( parent.parent === null && position.offset === 0 ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// We reached the walker boundary.\n\t\tif ( parent == this._boundaryStartParent && position.offset == this.boundaries.start.offset ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// Get node just before current position.\n\t\tlet node;\n\n\t\t// Text {@link module:engine/view/text~Text} element is a specific parent because contains string instead of child nodes.\n\t\tif ( parent instanceof Text ) {\n\t\t\tif ( position.isAtStart ) {\n\t\t\t\t// Prevent returning \"elementStart\" for Text node. Skip that value and return the next walker step.\n\t\t\t\tthis.position = Position._createBefore( parent );\n\n\t\t\t\treturn this._previous();\n\t\t\t}\n\n\t\t\tnode = parent.data[ position.offset - 1 ];\n\t\t} else {\n\t\t\tnode = parent.getChild( position.offset - 1 );\n\t\t}\n\n\t\tif ( node instanceof Element ) {\n\t\t\tif ( !this.shallow ) {\n\t\t\t\tposition = new Position( node, node.childCount );\n\t\t\t\tthis.position = position;\n\n\t\t\t\tif ( this.ignoreElementEnd ) {\n\t\t\t\t\treturn this._previous();\n\t\t\t\t} else {\n\t\t\t\t\treturn this._formatReturnValue( 'elementEnd', node, previousPosition, position );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tposition.offset--;\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn this._formatReturnValue( 'elementStart', node, previousPosition, position, 1 );\n\t\t\t}\n\t\t} else if ( node instanceof Text ) {\n\t\t\tif ( this.singleCharacters ) {\n\t\t\t\tposition = new Position( node, node.data.length );\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn this._previous();\n\t\t\t} else {\n\t\t\t\tlet charactersCount = node.data.length;\n\t\t\t\tlet item;\n\n\t\t\t\t// If text stick out of walker range, we need to cut it and wrap in TextProxy.\n\t\t\t\tif ( node == this._boundaryStartParent ) {\n\t\t\t\t\tconst offset = this.boundaries.start.offset;\n\n\t\t\t\t\titem = new TextProxy( node, offset, node.data.length - offset );\n\t\t\t\t\tcharactersCount = item.data.length;\n\t\t\t\t\tposition = Position._createBefore( item );\n\t\t\t\t} else {\n\t\t\t\t\titem = new TextProxy( node, 0, node.data.length );\n\t\t\t\t\t// If not just keep moving backward.\n\t\t\t\t\tposition.offset--;\n\t\t\t\t}\n\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn this._formatReturnValue( 'text', item, previousPosition, position, charactersCount );\n\t\t\t}\n\t\t} else if ( typeof node == 'string' ) {\n\t\t\tlet textLength;\n\n\t\t\tif ( !this.singleCharacters ) {\n\t\t\t\t// Check if text stick out of walker range.\n\t\t\t\tconst startOffset = parent === this._boundaryStartParent ? this.boundaries.start.offset : 0;\n\n\t\t\t\ttextLength = position.offset - startOffset;\n\t\t\t} else {\n\t\t\t\ttextLength = 1;\n\t\t\t}\n\n\t\t\tposition.offset -= textLength;\n\n\t\t\tconst textProxy = new TextProxy( parent, position.offset, textLength );\n\n\t\t\tthis.position = position;\n\n\t\t\treturn this._formatReturnValue( 'text', textProxy, previousPosition, position, textLength );\n\t\t} else {\n\t\t\t// `node` is not set, we reached the beginning of current `parent`.\n\t\t\tposition = Position._createBefore( parent );\n\t\t\tthis.position = position;\n\n\t\t\treturn this._formatReturnValue( 'elementStart', parent, previousPosition, position, 1 );\n\t\t}\n\t}\n\n\t/**\n\t * Format returned data and adjust `previousPosition` and `nextPosition` if reach the bound of the {@link module:engine/view/text~Text}.\n\t *\n\t * @private\n\t * @param {module:engine/view/treewalker~TreeWalkerValueType} type Type of step.\n\t * @param {module:engine/view/item~Item} item Item between old and new position.\n\t * @param {module:engine/view/position~Position} previousPosition Previous position of iterator.\n\t * @param {module:engine/view/position~Position} nextPosition Next position of iterator.\n\t * @param {Number} [length] Length of the item.\n\t * @returns {module:engine/view/treewalker~TreeWalkerValue}\n\t */\n\t_formatReturnValue( type, item, previousPosition, nextPosition, length ) {\n\t\t// Text is a specific parent, because contains string instead of children.\n\t\t// Walker doesn't enter to the Text except situations when walker is iterating over every single character,\n\t\t// or the bound starts/ends inside the Text. So when the position is at the beginning or at the end of the Text\n\t\t// we move it just before or just after Text.\n\t\tif ( item instanceof TextProxy ) {\n\t\t\t// Position is at the end of Text.\n\t\t\tif ( item.offsetInText + item.data.length == item.textNode.data.length ) {\n\t\t\t\tif ( this.direction == 'forward' && !( this.boundaries && this.boundaries.end.isEqual( this.position ) ) ) {\n\t\t\t\t\tnextPosition = Position._createAfter( item.textNode );\n\t\t\t\t\t// When we change nextPosition of returned value we need also update walker current position.\n\t\t\t\t\tthis.position = nextPosition;\n\t\t\t\t} else {\n\t\t\t\t\tpreviousPosition = Position._createAfter( item.textNode );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Position is at the begining ot the text.\n\t\t\tif ( item.offsetInText === 0 ) {\n\t\t\t\tif ( this.direction == 'backward' && !( this.boundaries && this.boundaries.start.isEqual( this.position ) ) ) {\n\t\t\t\t\tnextPosition = Position._createBefore( item.textNode );\n\t\t\t\t\t// When we change nextPosition of returned value we need also update walker current position.\n\t\t\t\t\tthis.position = nextPosition;\n\t\t\t\t} else {\n\t\t\t\t\tpreviousPosition = Position._createBefore( item.textNode );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tdone: false,\n\t\t\tvalue: {\n\t\t\t\ttype,\n\t\t\t\titem,\n\t\t\t\tpreviousPosition,\n\t\t\t\tnextPosition,\n\t\t\t\tlength\n\t\t\t}\n\t\t};\n\t}\n}\n\n/**\n * Type of the step made by {@link module:engine/view/treewalker~TreeWalker}.\n * Possible values: `'elementStart'` if walker is at the beginning of a node, `'elementEnd'` if walker is at the end\n * of node, or `'text'` if walker traversed over single and multiple characters.\n * For {@link module:engine/view/text~Text} `elementStart` and `elementEnd` is not returned.\n *\n * @typedef {String} module:engine/view/treewalker~TreeWalkerValueType\n */\n\n/**\n * Object returned by {@link module:engine/view/treewalker~TreeWalker} when traversing tree view.\n *\n * @typedef {Object} module:engine/view/treewalker~TreeWalkerValue\n * @property {module:engine/view/treewalker~TreeWalkerValueType} type\n * @property {module:engine/view/item~Item} item Item between the old and the new positions\n * of the tree walker.\n * @property {module:engine/view/position~Position} previousPosition Previous position of the iterator.\n * * Forward iteration: For `'elementEnd'` it is the last position inside the element. For all other types it is the\n * position before the item.\n * * Backward iteration: For `'elementStart'` it is the first position inside the element. For all other types it is\n * the position after item.\n * * If the position is at the beginning or at the end of the {@link module:engine/view/text~Text} it is always moved from the\n * inside of the text to its parent just before or just after that text.\n * @property {module:engine/view/position~Position} nextPosition Next position of the iterator.\n * * Forward iteration: For `'elementStart'` it is the first position inside the element. For all other types it is\n * the position after the item.\n * * Backward iteration: For `'elementEnd'` it is last position inside element. For all other types it is the position\n * before the item.\n * * If the position is at the beginning or at the end of the {@link module:engine/view/text~Text} it is always moved from the\n * inside of the text to its parent just before or just after that text.\n * @property {Number} [length] Length of the item. For `'elementStart'` it is `1`. For `'text'` it is\n * the length of that text. For `'elementEnd'` it is `undefined`.\n */\n\n/**\n * Tree walking directions.\n *\n * @typedef {'forward'|'backward'} module:engine/view/treewalker~TreeWalkerDirection\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/position\n */\n\nimport TreeWalker from './treewalker';\n\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport EditableElement from './editableelement';\n\n// To check if component is loaded more than once.\nimport '@ckeditor/ckeditor5-utils/src/version';\n\n/**\n * Position in the view tree. Position is represented by its parent node and an offset in this parent.\n *\n * In order to create a new position instance use the `createPosition*()` factory methods available in:\n *\n * * {@link module:engine/view/view~View}\n * * {@link module:engine/view/downcastwriter~DowncastWriter}\n * * {@link module:engine/view/upcastwriter~UpcastWriter}\n */\nexport default class Position {\n\t/**\n\t * Creates a position.\n\t *\n\t * @param {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment} parent Position parent.\n\t * @param {Number} offset Position offset.\n\t */\n\tconstructor( parent, offset ) {\n\t\t/**\n\t\t * Position parent.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}\n\t\t * module:engine/view/position~Position#parent\n\t\t */\n\t\tthis.parent = parent;\n\n\t\t/**\n\t\t * Position offset.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} module:engine/view/position~Position#offset\n\t\t */\n\t\tthis.offset = offset;\n\t}\n\n\t/**\n\t * Node directly after the position. Equals `null` when there is no node after position or position is located\n\t * inside text node.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|null}\n\t */\n\tget nodeAfter() {\n\t\tif ( this.parent.is( '$text' ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.parent.getChild( this.offset ) || null;\n\t}\n\n\t/**\n\t * Node directly before the position. Equals `null` when there is no node before position or position is located\n\t * inside text node.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|null}\n\t */\n\tget nodeBefore() {\n\t\tif ( this.parent.is( '$text' ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.parent.getChild( this.offset - 1 ) || null;\n\t}\n\n\t/**\n\t * Is `true` if position is at the beginning of its {@link module:engine/view/position~Position#parent parent}, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isAtStart() {\n\t\treturn this.offset === 0;\n\t}\n\n\t/**\n\t * Is `true` if position is at the end of its {@link module:engine/view/position~Position#parent parent}, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isAtEnd() {\n\t\tconst endOffset = this.parent.is( '$text' ) ? this.parent.data.length : this.parent.childCount;\n\n\t\treturn this.offset === endOffset;\n\t}\n\n\t/**\n\t * Position's root, that is the root of the position's parent element.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this.parent.root;\n\t}\n\n\t/**\n\t * {@link module:engine/view/editableelement~EditableElement EditableElement} instance that contains this position, or `null` if\n\t * position is not inside an editable element.\n\t *\n\t * @type {module:engine/view/editableelement~EditableElement|null}\n\t */\n\tget editableElement() {\n\t\tlet editable = this.parent;\n\n\t\twhile ( !( editable instanceof EditableElement ) ) {\n\t\t\tif ( editable.parent ) {\n\t\t\t\teditable = editable.parent;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\treturn editable;\n\t}\n\n\t/**\n\t * Returns a new instance of Position with offset incremented by `shift` value.\n\t *\n\t * @param {Number} shift How position offset should get changed. Accepts negative values.\n\t * @returns {module:engine/view/position~Position} Shifted position.\n\t */\n\tgetShiftedBy( shift ) {\n\t\tconst shifted = Position._createAt( this );\n\n\t\tconst offset = shifted.offset + shift;\n\t\tshifted.offset = offset < 0 ? 0 : offset;\n\n\t\treturn shifted;\n\t}\n\n\t/**\n\t * Gets the farthest position which matches the callback using\n\t * {@link module:engine/view/treewalker~TreeWalker TreeWalker}.\n\t *\n\t * For example:\n\t *\n\t * \t\tgetLastMatchingPosition( value => value.type == 'text' ); // <p>{}foo</p> -> <p>foo[]</p>\n\t * \t\tgetLastMatchingPosition( value => value.type == 'text', { direction: 'backward' } ); // <p>foo[]</p> -> <p>{}foo</p>\n\t * \t\tgetLastMatchingPosition( value => false ); // Do not move the position.\n\t *\n\t * @param {Function} skip Callback function. Gets {@link module:engine/view/treewalker~TreeWalkerValue} and should\n\t * return `true` if the value should be skipped or `false` if not.\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}.\n\t *\n\t * @returns {module:engine/view/position~Position} The position after the last item which matches the `skip` callback test.\n\t */\n\tgetLastMatchingPosition( skip, options = {} ) {\n\t\toptions.startPosition = this;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\t\ttreeWalker.skip( skip );\n\n\t\treturn treeWalker.position;\n\t}\n\n\t/**\n\t * Returns ancestors array of this position, that is this position's parent and it's ancestors.\n\t *\n\t * @returns {Array} Array with ancestors.\n\t */\n\tgetAncestors() {\n\t\tif ( this.parent.is( 'documentFragment' ) ) {\n\t\t\treturn [ this.parent ];\n\t\t} else {\n\t\t\treturn this.parent.getAncestors( { includeSelf: true } );\n\t\t}\n\t}\n\n\t/**\n\t * Returns a {@link module:engine/view/node~Node} or {@link module:engine/view/documentfragment~DocumentFragment}\n\t * which is a common ancestor of both positions.\n\t *\n\t * @param {module:engine/view/position~Position} position\n\t * @returns {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor( position ) {\n\t\tconst ancestorsA = this.getAncestors();\n\t\tconst ancestorsB = position.getAncestors();\n\n\t\tlet i = 0;\n\n\t\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\tposition.is( 'position' ); // -> true\n\t *\t\tposition.is( 'view:position' ); // -> true\n\t *\n\t *\t\tposition.is( 'model:position' ); // -> false\n\t *\t\tposition.is( 'element' ); // -> false\n\t *\t\tposition.is( 'range' ); // -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'position' || type === 'view:position';\n\t}\n\n\t/**\n\t * Checks whether this position equals given position.\n\t *\n\t * @param {module:engine/view/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} True if positions are same.\n\t */\n\tisEqual( otherPosition ) {\n\t\treturn ( this.parent == otherPosition.parent && this.offset == otherPosition.offset );\n\t}\n\n\t/**\n\t * Checks whether this position is located before given position. When method returns `false` it does not mean that\n\t * this position is after give one. Two positions may be located inside separate roots and in that situation this\n\t * method will still return `false`.\n\t *\n\t * @see module:engine/view/position~Position#isAfter\n\t * @see module:engine/view/position~Position#compareWith\n\t * @param {module:engine/view/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} Returns `true` if this position is before given position.\n\t */\n\tisBefore( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'before';\n\t}\n\n\t/**\n\t * Checks whether this position is located after given position. When method returns `false` it does not mean that\n\t * this position is before give one. Two positions may be located inside separate roots and in that situation this\n\t * method will still return `false`.\n\t *\n\t * @see module:engine/view/position~Position#isBefore\n\t * @see module:engine/view/position~Position#compareWith\n\t * @param {module:engine/view/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} Returns `true` if this position is after given position.\n\t */\n\tisAfter( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'after';\n\t}\n\n\t/**\n\t * Checks whether this position is before, after or in same position that other position. Two positions may be also\n\t * different when they are located in separate roots.\n\t *\n\t * @param {module:engine/view/position~Position} otherPosition Position to compare with.\n\t * @returns {module:engine/view/position~PositionRelation}\n\t */\n\tcompareWith( otherPosition ) {\n\t\tif ( this.root !== otherPosition.root ) {\n\t\t\treturn 'different';\n\t\t}\n\n\t\tif ( this.isEqual( otherPosition ) ) {\n\t\t\treturn 'same';\n\t\t}\n\n\t\t// Get path from root to position's parent element.\n\t\tconst thisPath = this.parent.is( 'node' ) ? this.parent.getPath() : [];\n\t\tconst otherPath = otherPosition.parent.is( 'node' ) ? otherPosition.parent.getPath() : [];\n\n\t\t// Add the positions' offsets to the parents offsets.\n\t\tthisPath.push( this.offset );\n\t\totherPath.push( otherPosition.offset );\n\n\t\t// Compare both path arrays to find common ancestor.\n\t\tconst result = compareArrays( thisPath, otherPath );\n\n\t\tswitch ( result ) {\n\t\t\tcase 'prefix':\n\t\t\t\treturn 'before';\n\n\t\t\tcase 'extension':\n\t\t\t\treturn 'after';\n\n\t\t\tdefault:\n\t\t\t\treturn thisPath[ result ] < otherPath[ result ] ? 'before' : 'after';\n\t\t}\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/view/treewalker~TreeWalker TreeWalker} instance with this positions as a start position.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}\n\t * @param {module:engine/view/range~Range} [options.boundaries=null] Range to define boundaries of the iterator.\n\t * @param {Boolean} [options.singleCharacters=false]\n\t * @param {Boolean} [options.shallow=false]\n\t * @param {Boolean} [options.ignoreElementEnd=false]\n\t */\n\tgetWalker( options = {} ) {\n\t\toptions.startPosition = this;\n\n\t\treturn new TreeWalker( options );\n\t}\n\n\tclone() {\n\t\treturn new Position( this.parent, this.offset );\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/view/position~Position position},\n\t * * parent element and offset (offset defaults to `0`),\n\t * * parent element and `'end'` (sets position at the end of that element),\n\t * * {@link module:engine/view/item~Item view item} and `'before'` or `'after'` (sets position before or after given view item).\n\t *\n\t * This method is a shortcut to other constructors such as:\n\t *\n\t * * {@link module:engine/view/position~Position._createBefore},\n\t * * {@link module:engine/view/position~Position._createAfter}.\n\t *\n\t * @protected\n\t * @param {module:engine/view/item~Item|module:engine/view/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tstatic _createAt( itemOrPosition, offset ) {\n\t\tif ( itemOrPosition instanceof Position ) {\n\t\t\treturn new this( itemOrPosition.parent, itemOrPosition.offset );\n\t\t} else {\n\t\t\tconst node = itemOrPosition;\n\n\t\t\tif ( offset == 'end' ) {\n\t\t\t\toffset = node.is( '$text' ) ? node.data.length : node.childCount;\n\t\t\t} else if ( offset == 'before' ) {\n\t\t\t\treturn this._createBefore( node );\n\t\t\t} else if ( offset == 'after' ) {\n\t\t\t\treturn this._createAfter( node );\n\t\t\t} else if ( offset !== 0 && !offset ) {\n\t\t\t\t/**\n\t\t\t\t * {@link module:engine/view/view~View#createPositionAt `View#createPositionAt()`}\n\t\t\t\t * requires the offset to be specified when the first parameter is a view item.\n\t\t\t\t *\n\t\t\t\t * @error view-createpositionat-offset-required\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'view-createpositionat-offset-required', node );\n\t\t\t}\n\n\t\t\treturn new Position( node, offset );\n\t\t}\n\t}\n\n\t/**\n\t * Creates a new position after given view item.\n\t *\n\t * @protected\n\t * @param {module:engine/view/item~Item} item View item after which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tstatic _createAfter( item ) {\n\t\t// TextProxy is not a instance of Node so we need do handle it in specific way.\n\t\tif ( item.is( '$textProxy' ) ) {\n\t\t\treturn new Position( item.textNode, item.offsetInText + item.data.length );\n\t\t}\n\n\t\tif ( !item.parent ) {\n\t\t\t/**\n\t\t\t * You can not make a position after a root.\n\t\t\t *\n\t\t\t * @error view-position-after-root\n\t\t\t * @param {module:engine/view/node~Node} root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-position-after-root', item, { root: item } );\n\t\t}\n\n\t\treturn new Position( item.parent, item.index + 1 );\n\t}\n\n\t/**\n\t * Creates a new position before given view item.\n\t *\n\t * @protected\n\t * @param {module:engine/view/item~Item} item View item before which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tstatic _createBefore( item ) {\n\t\t// TextProxy is not a instance of Node so we need do handle it in specific way.\n\t\tif ( item.is( '$textProxy' ) ) {\n\t\t\treturn new Position( item.textNode, item.offsetInText );\n\t\t}\n\n\t\tif ( !item.parent ) {\n\t\t\t/**\n\t\t\t * You cannot make a position before a root.\n\t\t\t *\n\t\t\t * @error view-position-before-root\n\t\t\t * @param {module:engine/view/node~Node} root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-position-before-root', item, { root: item } );\n\t\t}\n\n\t\treturn new Position( item.parent, item.index );\n\t}\n}\n\n/**\n * A flag indicating whether this position is `'before'` or `'after'` or `'same'` as given position.\n * If positions are in different roots `'different'` flag is returned.\n *\n * @typedef {String} module:engine/view/position~PositionRelation\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/range\n */\n\nimport Position from './position';\nimport TreeWalker from './treewalker';\n\n/**\n * Range in the view tree. A range is represented by its start and end {@link module:engine/view/position~Position positions}.\n *\n * In order to create a new position instance use the `createPosition*()` factory methods available in:\n *\n * * {@link module:engine/view/view~View}\n * * {@link module:engine/view/downcastwriter~DowncastWriter}\n * * {@link module:engine/view/upcastwriter~UpcastWriter}\n */\nexport default class Range {\n\t/**\n\t * Creates a range spanning from `start` position to `end` position.\n\t *\n\t * **Note:** Constructor creates it's own {@link module:engine/view/position~Position} instances basing on passed values.\n\t *\n\t * @param {module:engine/view/position~Position} start Start position.\n\t * @param {module:engine/view/position~Position} [end] End position. If not set, range will be collapsed at the `start` position.\n\t */\n\tconstructor( start, end = null ) {\n\t\t/**\n\t\t * Start position.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/position~Position}\n\t\t */\n\t\tthis.start = start.clone();\n\n\t\t/**\n\t\t * End position.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/position~Position}\n\t\t */\n\t\tthis.end = end ? end.clone() : start.clone();\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over all {@link module:engine/view/item~Item view items} that are in this range and returns\n\t * them together with additional information like length or {@link module:engine/view/position~Position positions},\n\t * grouped as {@link module:engine/view/treewalker~TreeWalkerValue}.\n\t *\n\t * This iterator uses {@link module:engine/view/treewalker~TreeWalker TreeWalker} with `boundaries` set to this range and\n\t * `ignoreElementEnd` option\n\t * set to `true`.\n\t *\n\t * @returns {Iterable.<module:engine/view/treewalker~TreeWalkerValue>}\n\t */\n\t* [ Symbol.iterator ]() {\n\t\tyield* new TreeWalker( { boundaries: this, ignoreElementEnd: true } );\n\t}\n\n\t/**\n\t * Returns whether the range is collapsed, that is it start and end positions are equal.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\treturn this.start.isEqual( this.end );\n\t}\n\n\t/**\n\t * Returns whether this range is flat, that is if {@link module:engine/view/range~Range#start start} position and\n\t * {@link module:engine/view/range~Range#end end} position are in the same {@link module:engine/view/position~Position#parent parent}.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isFlat() {\n\t\treturn this.start.parent === this.end.parent;\n\t}\n\n\t/**\n\t * Range root element.\n\t *\n\t * @type {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this.start.root;\n\t}\n\n\t/**\n\t * Creates a maximal range that has the same content as this range but is expanded in both ways (at the beginning\n\t * and at the end).\n\t *\n\t * For example:\n\t *\n\t *\t\t<p>Foo</p><p><b>{Bar}</b></p> -> <p>Foo</p>[<p><b>Bar</b>]</p>\n\t *\t\t<p><b>foo</b>{bar}<span></span></p> -> <p><b>foo[</b>bar<span></span>]</p>\n\t *\n\t * Note that in the sample above:\n\t *\n\t * - `<p>` have type of {@link module:engine/view/containerelement~ContainerElement},\n\t * - `<b>` have type of {@link module:engine/view/attributeelement~AttributeElement},\n\t * - `<span>` have type of {@link module:engine/view/uielement~UIElement}.\n\t *\n\t * @returns {module:engine/view/range~Range} Enlarged range.\n\t */\n\tgetEnlarged() {\n\t\tlet start = this.start.getLastMatchingPosition( enlargeTrimSkip, { direction: 'backward' } );\n\t\tlet end = this.end.getLastMatchingPosition( enlargeTrimSkip );\n\n\t\t// Fix positions, in case if they are in Text node.\n\t\tif ( start.parent.is( '$text' ) && start.isAtStart ) {\n\t\t\tstart = Position._createBefore( start.parent );\n\t\t}\n\n\t\tif ( end.parent.is( '$text' ) && end.isAtEnd ) {\n\t\t\tend = Position._createAfter( end.parent );\n\t\t}\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Creates a minimum range that has the same content as this range but is trimmed in both ways (at the beginning\n\t * and at the end).\n\t *\n\t * For example:\n\t *\n\t *\t\t<p>Foo</p>[<p><b>Bar</b>]</p> -> <p>Foo</p><p><b>{Bar}</b></p>\n\t *\t\t<p><b>foo[</b>bar<span></span>]</p> -> <p><b>foo</b>{bar}<span></span></p>\n\t *\n\t * Note that in the sample above:\n\t *\n\t * - `<p>` have type of {@link module:engine/view/containerelement~ContainerElement},\n\t * - `<b>` have type of {@link module:engine/view/attributeelement~AttributeElement},\n\t * - `<span>` have type of {@link module:engine/view/uielement~UIElement}.\n\t *\n\t * @returns {module:engine/view/range~Range} Shrink range.\n\t */\n\tgetTrimmed() {\n\t\tlet start = this.start.getLastMatchingPosition( enlargeTrimSkip );\n\n\t\tif ( start.isAfter( this.end ) || start.isEqual( this.end ) ) {\n\t\t\treturn new Range( start, start );\n\t\t}\n\n\t\tlet end = this.end.getLastMatchingPosition( enlargeTrimSkip, { direction: 'backward' } );\n\t\tconst nodeAfterStart = start.nodeAfter;\n\t\tconst nodeBeforeEnd = end.nodeBefore;\n\n\t\t// Because TreeWalker prefers positions next to text node, we need to move them manually into these text nodes.\n\t\tif ( nodeAfterStart && nodeAfterStart.is( '$text' ) ) {\n\t\t\tstart = new Position( nodeAfterStart, 0 );\n\t\t}\n\n\t\tif ( nodeBeforeEnd && nodeBeforeEnd.is( '$text' ) ) {\n\t\t\tend = new Position( nodeBeforeEnd, nodeBeforeEnd.data.length );\n\t\t}\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Two ranges are equal if their start and end positions are equal.\n\t *\n\t * @param {module:engine/view/range~Range} otherRange Range to compare with.\n\t * @returns {Boolean} `true` if ranges are equal, `false` otherwise\n\t */\n\tisEqual( otherRange ) {\n\t\treturn this == otherRange || ( this.start.isEqual( otherRange.start ) && this.end.isEqual( otherRange.end ) );\n\t}\n\n\t/**\n\t * Checks whether this range contains given {@link module:engine/view/position~Position position}.\n\t *\n\t * @param {module:engine/view/position~Position} position Position to check.\n\t * @returns {Boolean} `true` if given {@link module:engine/view/position~Position position} is contained in this range,\n\t * `false` otherwise.\n\t */\n\tcontainsPosition( position ) {\n\t\treturn position.isAfter( this.start ) && position.isBefore( this.end );\n\t}\n\n\t/**\n\t * Checks whether this range contains given {@link module:engine/view/range~Range range}.\n\t *\n\t * @param {module:engine/view/range~Range} otherRange Range to check.\n\t * @param {Boolean} [loose=false] Whether the check is loose or strict. If the check is strict (`false`), compared range cannot\n\t * start or end at the same position as this range boundaries. If the check is loose (`true`), compared range can start, end or\n\t * even be equal to this range. Note that collapsed ranges are always compared in strict mode.\n\t * @returns {Boolean} `true` if given {@link module:engine/view/range~Range range} boundaries are contained by this range, `false`\n\t * otherwise.\n\t */\n\tcontainsRange( otherRange, loose = false ) {\n\t\tif ( otherRange.isCollapsed ) {\n\t\t\tloose = false;\n\t\t}\n\n\t\tconst containsStart = this.containsPosition( otherRange.start ) || ( loose && this.start.isEqual( otherRange.start ) );\n\t\tconst containsEnd = this.containsPosition( otherRange.end ) || ( loose && this.end.isEqual( otherRange.end ) );\n\n\t\treturn containsStart && containsEnd;\n\t}\n\n\t/**\n\t * Computes which part(s) of this {@link module:engine/view/range~Range range} is not a part of given\n\t * {@link module:engine/view/range~Range range}.\n\t * Returned array contains zero, one or two {@link module:engine/view/range~Range ranges}.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet foo = downcastWriter.createText( 'foo' );\n\t *\t\tlet img = downcastWriter.createContainerElement( 'img' );\n\t *\t\tlet bar = downcastWriter.createText( 'bar' );\n\t *\t\tlet p = downcastWriter.createContainerElement( 'p', null, [ foo, img, bar ] );\n\t *\n\t *\t\tlet range = view.createRange( view.createPositionAt( foo, 2 ), view.createPositionAt( bar, 1 ); // \"o\", img, \"b\" are in range.\n\t *\t\tlet otherRange = view.createRange( // \"oo\", img, \"ba\" are in range.\n\t *\t\t\tview.createPositionAt( foo, 1 ),\n\t *\t\t\tview.createPositionAt( bar, 2 )\n\t *\t\t);\n\t *\t\tlet transformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has no ranges because `otherRange` contains `range`\n\t *\n\t *\t\totherRange = view.createRange( view.createPositionAt( foo, 1 ), view.createPositionAt( p, 2 ); // \"oo\", img are in range.\n\t *\t\ttransformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has one range: from ( p, 2 ) to ( bar, 1 )\n\t *\n\t *\t\totherRange = view.createRange( view.createPositionAt( p, 1 ), view.createPositionAt( p, 2 ) ); // img is in range.\n\t *\t\ttransformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has two ranges: from ( foo, 1 ) to ( p, 1 ) and from ( p, 2 ) to ( bar, 1 )\n\t *\n\t * @param {module:engine/view/range~Range} otherRange Range to differentiate against.\n\t * @returns {Array.<module:engine/view/range~Range>} The difference between ranges.\n\t */\n\tgetDifference( otherRange ) {\n\t\tconst ranges = [];\n\n\t\tif ( this.isIntersecting( otherRange ) ) {\n\t\t\t// Ranges intersect.\n\n\t\t\tif ( this.containsPosition( otherRange.start ) ) {\n\t\t\t\t// Given range start is inside this range. This means that we have to\n\t\t\t\t// add shrunken range - from the start to the middle of this range.\n\t\t\t\tranges.push( new Range( this.start, otherRange.start ) );\n\t\t\t}\n\n\t\t\tif ( this.containsPosition( otherRange.end ) ) {\n\t\t\t\t// Given range end is inside this range. This means that we have to\n\t\t\t\t// add shrunken range - from the middle of this range to the end.\n\t\t\t\tranges.push( new Range( otherRange.end, this.end ) );\n\t\t\t}\n\t\t} else {\n\t\t\t// Ranges do not intersect, return the original range.\n\t\t\tranges.push( this.clone() );\n\t\t}\n\n\t\treturn ranges;\n\t}\n\n\t/**\n\t * Returns an intersection of this {@link module:engine/view/range~Range range} and given {@link module:engine/view/range~Range range}.\n\t * Intersection is a common part of both of those ranges. If ranges has no common part, returns `null`.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet foo = downcastWriter.createText( 'foo' );\n\t *\t\tlet img = downcastWriter.createContainerElement( 'img' );\n\t *\t\tlet bar = downcastWriter.createText( 'bar' );\n\t *\t\tlet p = downcastWriter.createContainerElement( 'p', null, [ foo, img, bar ] );\n\t *\n\t *\t\tlet range = view.createRange( view.createPositionAt( foo, 2 ), view.createPositionAt( bar, 1 ); // \"o\", img, \"b\" are in range.\n\t *\t\tlet otherRange = view.createRange( view.createPositionAt( foo, 1 ), view.createPositionAt( p, 2 ); // \"oo\", img are in range.\n\t *\t\tlet transformed = range.getIntersection( otherRange ); // range from ( foo, 1 ) to ( p, 2 ).\n\t *\n\t *\t\totherRange = view.createRange( view.createPositionAt( bar, 1 ), view.createPositionAt( bar, 3 ); \"ar\" is in range.\n\t *\t\ttransformed = range.getIntersection( otherRange ); // null - no common part.\n\t *\n\t * @param {module:engine/view/range~Range} otherRange Range to check for intersection.\n\t * @returns {module:engine/view/range~Range|null} A common part of given ranges or `null` if ranges have no common part.\n\t */\n\tgetIntersection( otherRange ) {\n\t\tif ( this.isIntersecting( otherRange ) ) {\n\t\t\t// Ranges intersect, so a common range will be returned.\n\t\t\t// At most, it will be same as this range.\n\t\t\tlet commonRangeStart = this.start;\n\t\t\tlet commonRangeEnd = this.end;\n\n\t\t\tif ( this.containsPosition( otherRange.start ) ) {\n\t\t\t\t// Given range start is inside this range. This means thaNt we have to\n\t\t\t\t// shrink common range to the given range start.\n\t\t\t\tcommonRangeStart = otherRange.start;\n\t\t\t}\n\n\t\t\tif ( this.containsPosition( otherRange.end ) ) {\n\t\t\t\t// Given range end is inside this range. This means that we have to\n\t\t\t\t// shrink common range to the given range end.\n\t\t\t\tcommonRangeEnd = otherRange.end;\n\t\t\t}\n\n\t\t\treturn new Range( commonRangeStart, commonRangeEnd );\n\t\t}\n\n\t\t// Ranges do not intersect, so they do not have common part.\n\t\treturn null;\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/view/treewalker~TreeWalker TreeWalker} instance with this range as a boundary.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}.\n\t * @param {module:engine/view/position~Position} [options.startPosition]\n\t * @param {Boolean} [options.singleCharacters=false]\n\t * @param {Boolean} [options.shallow=false]\n\t * @param {Boolean} [options.ignoreElementEnd=false]\n\t * @returns {module:engine/view/treewalker~TreeWalker}\n\t */\n\tgetWalker( options = {} ) {\n\t\toptions.boundaries = this;\n\n\t\treturn new TreeWalker( options );\n\t}\n\n\t/**\n\t * Returns a {@link module:engine/view/node~Node} or {@link module:engine/view/documentfragment~DocumentFragment}\n\t * which is a common ancestor of range's both ends (in which the entire range is contained).\n\t *\n\t * @returns {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor() {\n\t\treturn this.start.getCommonAncestor( this.end );\n\t}\n\n\t/**\n\t * Returns an {@link module:engine/view/element~Element Element} contained by the range.\n\t * The element will be returned when it is the **only** node within the range and **fullycontained**\n\t * at the same time.\n\t *\n\t * @returns {module:engine/view/element~Element|null}\n\t */\n\tgetContainedElement() {\n\t\tif ( this.isCollapsed ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet nodeAfterStart = this.start.nodeAfter;\n\t\tlet nodeBeforeEnd = this.end.nodeBefore;\n\n\t\t// Handle the situation when the range position is at the beginning / at the end of a text node.\n\t\t// In such situation `.nodeAfter` and `.nodeBefore` are `null` but the range still might be spanning\n\t\t// over one element.\n\t\t//\n\t\t// <p>Foo{<span class=\"widget\"></span>}bar</p> vs <p>Foo[<span class=\"widget\"></span>]bar</p>\n\t\t//\n\t\t// These are basically the same range, only the difference is if the range position is at\n\t\t// at the end/at the beginning of a text node or just before/just after the text node.\n\t\t//\n\t\tif ( this.start.parent.is( '$text' ) && this.start.isAtEnd && this.start.parent.nextSibling ) {\n\t\t\tnodeAfterStart = this.start.parent.nextSibling;\n\t\t}\n\n\t\tif ( this.end.parent.is( '$text' ) && this.end.isAtStart && this.end.parent.previousSibling ) {\n\t\t\tnodeBeforeEnd = this.end.parent.previousSibling;\n\t\t}\n\n\t\tif ( nodeAfterStart && nodeAfterStart.is( 'element' ) && nodeAfterStart === nodeBeforeEnd ) {\n\t\t\treturn nodeAfterStart;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Clones this range.\n\t *\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tclone() {\n\t\treturn new Range( this.start, this.end );\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all {@link module:engine/view/item~Item view items} that are in this range and returns\n\t * them.\n\t *\n\t * This method uses {@link module:engine/view/treewalker~TreeWalker} with `boundaries` set to this range and `ignoreElementEnd` option\n\t * set to `true`. However it returns only {@link module:engine/view/item~Item items},\n\t * not {@link module:engine/view/treewalker~TreeWalkerValue}.\n\t *\n\t * You may specify additional options for the tree walker. See {@link module:engine/view/treewalker~TreeWalker} for\n\t * a full list of available options.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}.\n\t * @returns {Iterable.<module:engine/view/item~Item>}\n\t */\n\t* getItems( options = {} ) {\n\t\toptions.boundaries = this;\n\t\toptions.ignoreElementEnd = true;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\n\t\tfor ( const value of treeWalker ) {\n\t\t\tyield value.item;\n\t\t}\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all {@link module:engine/view/position~Position positions} that are boundaries or\n\t * contained in this range.\n\t *\n\t * This method uses {@link module:engine/view/treewalker~TreeWalker} with `boundaries` set to this range. However it returns only\n\t * {@link module:engine/view/position~Position positions}, not {@link module:engine/view/treewalker~TreeWalkerValue}.\n\t *\n\t * You may specify additional options for the tree walker. See {@link module:engine/view/treewalker~TreeWalker} for\n\t * a full list of available options.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}.\n\t * @returns {Iterable.<module:engine/view/position~Position>}\n\t */\n\t* getPositions( options = {} ) {\n\t\toptions.boundaries = this;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\n\t\tyield treeWalker.position;\n\n\t\tfor ( const value of treeWalker ) {\n\t\t\tyield value.nextPosition;\n\t\t}\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\trange.is( 'range' ); // -> true\n\t *\t\trange.is( 'view:range' ); // -> true\n\t *\n\t *\t\trange.is( 'model:range' ); // -> false\n\t *\t\trange.is( 'element' ); // -> false\n\t *\t\trange.is( 'selection' ); // -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'range' || type === 'view:range';\n\t}\n\n\t/**\n\t * Checks and returns whether this range intersects with the given range.\n\t *\n\t * @param {module:engine/view/range~Range} otherRange Range to compare with.\n\t * @returns {Boolean} True if ranges intersect.\n\t */\n\tisIntersecting( otherRange ) {\n\t\treturn this.start.isBefore( otherRange.end ) && this.end.isAfter( otherRange.start );\n\t}\n\n\t/**\n\t * Creates a range from the given parents and offsets.\n\t *\n\t * @protected\n\t * @param {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment} startElement Start position\n\t * parent element.\n\t * @param {Number} startOffset Start position offset.\n\t * @param {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment} endElement End position\n\t * parent element.\n\t * @param {Number} endOffset End position offset.\n\t * @returns {module:engine/view/range~Range} Created range.\n\t */\n\tstatic _createFromParentsAndOffsets( startElement, startOffset, endElement, endOffset ) {\n\t\treturn new this(\n\t\t\tnew Position( startElement, startOffset ),\n\t\t\tnew Position( endElement, endOffset )\n\t\t);\n\t}\n\n\t/**\n\t * Creates a new range, spreading from specified {@link module:engine/view/position~Position position} to a position moved by\n\t * given `shift`. If `shift` is a negative value, shifted position is treated as the beginning of the range.\n\t *\n\t * @protected\n\t * @param {module:engine/view/position~Position} position Beginning of the range.\n\t * @param {Number} shift How long the range should be.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tstatic _createFromPositionAndShift( position, shift ) {\n\t\tconst start = position;\n\t\tconst end = position.getShiftedBy( shift );\n\n\t\treturn shift > 0 ? new this( start, end ) : new this( end, start );\n\t}\n\n\t/**\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * @protected\n\t * @param {module:engine/view/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tstatic _createIn( element ) {\n\t\treturn this._createFromParentsAndOffsets( element, 0, element, element.childCount );\n\t}\n\n\t/**\n\t * Creates a range that starts before given {@link module:engine/view/item~Item view item} and ends after it.\n\t *\n\t * @protected\n\t * @param {module:engine/view/item~Item} item\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tstatic _createOn( item ) {\n\t\tconst size = item.is( '$textProxy' ) ? item.offsetSize : 1;\n\n\t\treturn this._createFromPositionAndShift( Position._createBefore( item ), size );\n\t}\n}\n\n// Function used by getEnlarged and getTrimmed methods.\nfunction enlargeTrimSkip( value ) {\n\tif ( value.item.is( 'attributeElement' ) || value.item.is( 'uiElement' ) ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/count\n */\n\n/**\n * Returns the number of items return by the iterator.\n *\n *\t\tcount( [ 1, 2, 3, 4, 5 ] ); // 5;\n *\n * @param {Iterable.<*>} iterator Any iterator.\n * @returns {Number} Number of items returned by that iterator.\n */\nexport default function count( iterator ) {\n\tlet count = 0;\n\n\tfor ( const _ of iterator ) { // eslint-disable-line no-unused-vars\n\t\tcount++;\n\t}\n\n\treturn count;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/selection\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Range from './range';\nimport Position from './position';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport Node from './node';\nimport count from '@ckeditor/ckeditor5-utils/src/count';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\nimport DocumentSelection from './documentselection';\n\n/**\n * Class representing an arbirtary selection in the view.\n * See also {@link module:engine/view/documentselection~DocumentSelection}.\n *\n * New selection instances can be created via the constructor or one these methods:\n *\n * * {@link module:engine/view/view~View#createSelection `View#createSelection()`},\n * * {@link module:engine/view/upcastwriter~UpcastWriter#createSelection `UpcastWriter#createSelection()`}.\n *\n * A selection can consist of {@link module:engine/view/range~Range ranges} that can be set by using\n * the {@link module:engine/view/selection~Selection#setTo `Selection#setTo()`} method.\n */\nexport default class Selection {\n\t/**\n\t * Creates new selection instance.\n\t *\n\t * **Note**: The selection constructor is available as a factory method:\n\t *\n\t * * {@link module:engine/view/view~View#createSelection `View#createSelection()`},\n\t * * {@link module:engine/view/upcastwriter~UpcastWriter#createSelection `UpcastWriter#createSelection()`}.\n\t *\n\t * \t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = writer.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tconst selection = writer.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tconst selection = writer.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tconst selection = writer.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the document selection.\n\t *\t\tconst selection = writer.createSelection( editor.editing.view.document.selection );\n\t *\n\t * \t\t// Creates selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\tconst selection = writer.createSelection( position );\n\t *\n\t *\t\t// Creates collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = writer.createContainerElement( 'paragraph' );\n\t *\t\tconst selection = writer.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/view/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'on' );\n\t *\n\t * `Selection`'s constructor allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = writer.createSelection( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tconst selection = writer.createSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} [selectable=null]\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Offset or place when selectable is an `Item`.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t */\n\tconstructor( selectable = null, placeOrOffset, options ) {\n\t\t/**\n\t\t * Stores all ranges that are selected.\n\t\t *\n\t\t * @protected\n\t\t * @member {Array.<module:engine/view/range~Range>}\n\t\t */\n\t\tthis._ranges = [];\n\n\t\t/**\n\t\t * Specifies whether the last added range was added as a backward or forward range.\n\t\t *\n\t\t * @protected\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis._lastRangeBackward = false;\n\n\t\t/**\n\t\t * Specifies whether selection instance is fake.\n\t\t *\n\t\t * @private\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis._isFake = false;\n\n\t\t/**\n\t\t * Fake selection's label.\n\t\t *\n\t\t * @private\n\t\t * @member {String}\n\t\t */\n\t\tthis._fakeSelectionLabel = '';\n\n\t\tthis.setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Returns true if selection instance is marked as `fake`.\n\t *\n\t * @see #setTo\n\t * @returns {Boolean}\n\t */\n\tget isFake() {\n\t\treturn this._isFake;\n\t}\n\n\t/**\n\t * Returns fake selection label.\n\t *\n\t * @see #setTo\n\t * @returns {String}\n\t */\n\tget fakeSelectionLabel() {\n\t\treturn this._fakeSelectionLabel;\n\t}\n\n\t/**\n\t * Selection anchor. Anchor may be described as a position where the selection starts. Together with\n\t * {@link #focus focus} they define the direction of selection, which is important\n\t * when expanding/shrinking selection. Anchor is always the start or end of the most recent added range.\n\t * It may be a bit unintuitive when there are multiple ranges in selection.\n\t *\n\t * @see #focus\n\t * @type {module:engine/view/position~Position}\n\t */\n\tget anchor() {\n\t\tif ( !this._ranges.length ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst range = this._ranges[ this._ranges.length - 1 ];\n\t\tconst anchor = this._lastRangeBackward ? range.end : range.start;\n\n\t\treturn anchor.clone();\n\t}\n\n\t/**\n\t * Selection focus. Focus is a position where the selection ends.\n\t *\n\t * @see #anchor\n\t * @type {module:engine/view/position~Position}\n\t */\n\tget focus() {\n\t\tif ( !this._ranges.length ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst range = this._ranges[ this._ranges.length - 1 ];\n\t\tconst focus = this._lastRangeBackward ? range.start : range.end;\n\n\t\treturn focus.clone();\n\t}\n\n\t/**\n\t * Returns whether the selection is collapsed. Selection is collapsed when there is exactly one range which is\n\t * collapsed.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\treturn this.rangeCount === 1 && this._ranges[ 0 ].isCollapsed;\n\t}\n\n\t/**\n\t * Returns number of ranges in selection.\n\t *\n\t * @type {Number}\n\t */\n\tget rangeCount() {\n\t\treturn this._ranges.length;\n\t}\n\n\t/**\n\t * Specifies whether the {@link #focus} precedes {@link #anchor}.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isBackward() {\n\t\treturn !this.isCollapsed && this._lastRangeBackward;\n\t}\n\n\t/**\n\t * {@link module:engine/view/editableelement~EditableElement EditableElement} instance that contains this selection, or `null`\n\t * if the selection is not inside an editable element.\n\t *\n\t * @type {module:engine/view/editableelement~EditableElement|null}\n\t */\n\tget editableElement() {\n\t\tif ( this.anchor ) {\n\t\t\treturn this.anchor.editableElement;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Returns an iterable that contains copies of all ranges added to the selection.\n\t *\n\t * @returns {Iterable.<module:engine/view/range~Range>}\n\t */\n\t* getRanges() {\n\t\tfor ( const range of this._ranges ) {\n\t\t\tyield range.clone();\n\t\t}\n\t}\n\n\t/**\n\t * Returns copy of the first range in the selection. First range is the one which\n\t * {@link module:engine/view/range~Range#start start} position {@link module:engine/view/position~Position#isBefore is before} start\n\t * position of all other ranges (not to confuse with the first range added to the selection).\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/range~Range|null}\n\t */\n\tgetFirstRange() {\n\t\tlet first = null;\n\n\t\tfor ( const range of this._ranges ) {\n\t\t\tif ( !first || range.start.isBefore( first.start ) ) {\n\t\t\t\tfirst = range;\n\t\t\t}\n\t\t}\n\n\t\treturn first ? first.clone() : null;\n\t}\n\n\t/**\n\t * Returns copy of the last range in the selection. Last range is the one which {@link module:engine/view/range~Range#end end}\n\t * position {@link module:engine/view/position~Position#isAfter is after} end position of all other ranges (not to confuse\n\t * with the last range added to the selection). Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/range~Range|null}\n\t */\n\tgetLastRange() {\n\t\tlet last = null;\n\n\t\tfor ( const range of this._ranges ) {\n\t\t\tif ( !last || range.end.isAfter( last.end ) ) {\n\t\t\t\tlast = range;\n\t\t\t}\n\t\t}\n\n\t\treturn last ? last.clone() : null;\n\t}\n\n\t/**\n\t * Returns copy of the first position in the selection. First position is the position that\n\t * {@link module:engine/view/position~Position#isBefore is before} any other position in the selection ranges.\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/position~Position|null}\n\t */\n\tgetFirstPosition() {\n\t\tconst firstRange = this.getFirstRange();\n\n\t\treturn firstRange ? firstRange.start.clone() : null;\n\t}\n\n\t/**\n\t * Returns copy of the last position in the selection. Last position is the position that\n\t * {@link module:engine/view/position~Position#isAfter is after} any other position in the selection ranges.\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/position~Position|null}\n\t */\n\tgetLastPosition() {\n\t\tconst lastRange = this.getLastRange();\n\n\t\treturn lastRange ? lastRange.end.clone() : null;\n\t}\n\n\t/**\n\t * Checks whether, this selection is equal to given selection. Selections are equal if they have same directions,\n\t * same number of ranges and all ranges from one selection equal to a range from other selection.\n\t *\n\t * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} otherSelection\n\t * Selection to compare with.\n\t * @returns {Boolean} `true` if selections are equal, `false` otherwise.\n\t */\n\tisEqual( otherSelection ) {\n\t\tif ( this.isFake != otherSelection.isFake ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( this.isFake && this.fakeSelectionLabel != otherSelection.fakeSelectionLabel ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( this.rangeCount != otherSelection.rangeCount ) {\n\t\t\treturn false;\n\t\t} else if ( this.rangeCount === 0 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( !this.anchor.isEqual( otherSelection.anchor ) || !this.focus.isEqual( otherSelection.focus ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor ( const thisRange of this._ranges ) {\n\t\t\tlet found = false;\n\n\t\t\tfor ( const otherRange of otherSelection._ranges ) {\n\t\t\t\tif ( thisRange.isEqual( otherRange ) ) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !found ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Checks whether this selection is similar to given selection. Selections are similar if they have same directions, same\n\t * number of ranges, and all {@link module:engine/view/range~Range#getTrimmed trimmed} ranges from one selection are\n\t * equal to any trimmed range from other selection.\n\t *\n\t * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} otherSelection\n\t * Selection to compare with.\n\t * @returns {Boolean} `true` if selections are similar, `false` otherwise.\n\t */\n\tisSimilar( otherSelection ) {\n\t\tif ( this.isBackward != otherSelection.isBackward ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst numOfRangesA = count( this.getRanges() );\n\t\tconst numOfRangesB = count( otherSelection.getRanges() );\n\n\t\t// If selections have different number of ranges, they cannot be similar.\n\t\tif ( numOfRangesA != numOfRangesB ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If both selections have no ranges, they are similar.\n\t\tif ( numOfRangesA == 0 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check if each range in one selection has a similar range in other selection.\n\t\tfor ( let rangeA of this.getRanges() ) {\n\t\t\trangeA = rangeA.getTrimmed();\n\n\t\t\tlet found = false;\n\n\t\t\tfor ( let rangeB of otherSelection.getRanges() ) {\n\t\t\t\trangeB = rangeB.getTrimmed();\n\n\t\t\t\tif ( rangeA.start.isEqual( rangeB.start ) && rangeA.end.isEqual( rangeB.end ) ) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// For `rangeA`, neither range in `otherSelection` was similar. So selections are not similar.\n\t\t\tif ( !found ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// There were no ranges that weren't matched. Selections are similar.\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns the selected element. {@link module:engine/view/element~Element Element} is considered as selected if there is only\n\t * one range in the selection, and that range contains exactly one element.\n\t * Returns `null` if there is no selected element.\n\t *\n\t * @returns {module:engine/view/element~Element|null}\n\t */\n\tgetSelectedElement() {\n\t\tif ( this.rangeCount !== 1 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.getFirstRange().getContainedElement();\n\t}\n\n\t/**\n\t * Sets this selection's ranges and direction to the specified location based on the given\n\t * {@link module:engine/view/selection~Selectable selectable}.\n\t *\n\t *\t\t// Sets selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tselection.setTo( range );\n\t *\n\t *\t\t// Sets selection to given ranges.\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tselection.setTo( range );\n\t *\n\t *\t\t// Sets selection to the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tselection.setTo( otherSelection );\n\t *\n\t *\t \t// Sets selection to contents of DocumentSelection.\n\t *\t\tselection.setTo( editor.editing.view.document.selection );\n\t *\n\t * \t\t// Sets collapsed selection at the given position.\n\t *\t\tconst position = writer.createPositionAt( root, path );\n\t *\t\tselection.setTo( position );\n\t *\n\t * \t\t// Sets collapsed selection at the position of given item and offset.\n\t *\t\tselection.setTo( paragraph, offset );\n\t *\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t *\t\tselection.setTo( paragraph, 'in' );\n\t *\n\t * Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends just after the item.\n\t *\n\t *\t\tselection.setTo( paragraph, 'on' );\n\t *\n\t * \t\t// Clears selection. Removes all ranges.\n\t *\t\tselection.setTo( null );\n\t *\n\t * `Selection#setTo()` method allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Sets selection as backward.\n\t *\t\tselection.setTo( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tselection.setTo( range, { fake: true, label: 'foo' } );\n\t *\n\t * @fires change\n\t * @param {module:engine/view/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t */\n\tsetTo( selectable, placeOrOffset, options ) {\n\t\tif ( selectable === null ) {\n\t\t\tthis._setRanges( [] );\n\t\t\tthis._setFakeOptions( placeOrOffset );\n\t\t} else if ( selectable instanceof Selection || selectable instanceof DocumentSelection ) {\n\t\t\tthis._setRanges( selectable.getRanges(), selectable.isBackward );\n\t\t\tthis._setFakeOptions( { fake: selectable.isFake, label: selectable.fakeSelectionLabel } );\n\t\t} else if ( selectable instanceof Range ) {\n\t\t\tthis._setRanges( [ selectable ], placeOrOffset && placeOrOffset.backward );\n\t\t\tthis._setFakeOptions( placeOrOffset );\n\t\t} else if ( selectable instanceof Position ) {\n\t\t\tthis._setRanges( [ new Range( selectable ) ] );\n\t\t\tthis._setFakeOptions( placeOrOffset );\n\t\t} else if ( selectable instanceof Node ) {\n\t\t\tconst backward = !!options && !!options.backward;\n\t\t\tlet range;\n\n\t\t\tif ( placeOrOffset === undefined ) {\n\t\t\t\t/**\n\t\t\t\t * selection.setTo requires the second parameter when the first parameter is a node.\n\t\t\t\t *\n\t\t\t\t * @error view-selection-setto-required-second-parameter\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'view-selection-setto-required-second-parameter', this );\n\t\t\t} else if ( placeOrOffset == 'in' ) {\n\t\t\t\trange = Range._createIn( selectable );\n\t\t\t} else if ( placeOrOffset == 'on' ) {\n\t\t\t\trange = Range._createOn( selectable );\n\t\t\t} else {\n\t\t\t\trange = new Range( Position._createAt( selectable, placeOrOffset ) );\n\t\t\t}\n\n\t\t\tthis._setRanges( [ range ], backward );\n\t\t\tthis._setFakeOptions( options );\n\t\t} else if ( isIterable( selectable ) ) {\n\t\t\t// We assume that the selectable is an iterable of ranges.\n\t\t\t// Array.from() is used to prevent setting ranges to the old iterable\n\t\t\tthis._setRanges( selectable, placeOrOffset && placeOrOffset.backward );\n\t\t\tthis._setFakeOptions( placeOrOffset );\n\t\t} else {\n\t\t\t/**\n\t\t\t * Cannot set selection to given place.\n\t\t\t *\n\t\t\t * @error view-selection-setto-not-selectable\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-selection-setto-not-selectable', this );\n\t\t}\n\n\t\tthis.fire( 'change' );\n\t}\n\n\t/**\n\t * Moves {@link #focus} to the specified location.\n\t *\n\t * The location can be specified in the same form as {@link module:engine/view/view~View#createPositionAt view.createPositionAt()}\n\t * parameters.\n\t *\n\t * @fires change\n\t * @param {module:engine/view/item~Item|module:engine/view/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tsetFocus( itemOrPosition, offset ) {\n\t\tif ( this.anchor === null ) {\n\t\t\t/**\n\t\t\t * Cannot set selection focus if there are no ranges in selection.\n\t\t\t *\n\t\t\t * @error view-selection-setfocus-no-ranges\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-selection-setfocus-no-ranges', this );\n\t\t}\n\n\t\tconst newFocus = Position._createAt( itemOrPosition, offset );\n\n\t\tif ( newFocus.compareWith( this.focus ) == 'same' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst anchor = this.anchor;\n\n\t\tthis._ranges.pop();\n\n\t\tif ( newFocus.compareWith( anchor ) == 'before' ) {\n\t\t\tthis._addRange( new Range( newFocus, anchor ), true );\n\t\t} else {\n\t\t\tthis._addRange( new Range( anchor, newFocus ) );\n\t\t}\n\n\t\tthis.fire( 'change' );\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\tselection.is( 'selection' ); // -> true\n\t *\t\tselection.is( 'view:selection' ); // -> true\n\t *\n\t *\t\tselection.is( 'model:selection' ); // -> false\n\t *\t\tselection.is( 'element' ); // -> false\n\t *\t\tselection.is( 'range' ); // -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'selection' || type === 'view:selection';\n\t}\n\n\t/**\n\t * Replaces all ranges that were added to the selection with given array of ranges. Last range of the array\n\t * is treated like the last added range and is used to set {@link #anchor anchor} and {@link #focus focus}.\n\t * Accepts a flag describing in which way the selection is made.\n\t *\n\t * @private\n\t * @param {Iterable.<module:engine/view/range~Range>} newRanges Iterable object of ranges to set.\n\t * @param {Boolean} [isLastBackward=false] Flag describing if last added range was selected forward - from start to end\n\t * (`false`) or backward - from end to start (`true`). Defaults to `false`.\n\t */\n\t_setRanges( newRanges, isLastBackward = false ) {\n\t\t// New ranges should be copied to prevent removing them by setting them to `[]` first.\n\t\t// Only applies to situations when selection is set to the same selection or same selection's ranges.\n\t\tnewRanges = Array.from( newRanges );\n\n\t\tthis._ranges = [];\n\n\t\tfor ( const range of newRanges ) {\n\t\t\tthis._addRange( range );\n\t\t}\n\n\t\tthis._lastRangeBackward = !!isLastBackward;\n\t}\n\n\t/**\n\t * Sets this selection instance to be marked as `fake`. A fake selection does not render as browser native selection\n\t * over selected elements and is hidden to the user. This way, no native selection UI artifacts are displayed to\n\t * the user and selection over elements can be represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM (and be\n\t * properly handled by screen readers).\n\t *\n\t * @private\n\t * @param {Object} [options] Options.\n\t * @param {Boolean} [options.fake] If set to true selection will be marked as `fake`.\n\t * @param {String} [options.label=''] Fake selection label.\n\t */\n\t_setFakeOptions( options = {} ) {\n\t\tthis._isFake = !!options.fake;\n\t\tthis._fakeSelectionLabel = options.fake ? options.label || '' : '';\n\t}\n\n\t/**\n\t * Adds a range to the selection. Added range is copied. This means that passed range is not saved in the\n\t * selection instance and you can safely operate on it.\n\t *\n\t * Accepts a flag describing in which way the selection is made - passed range might be selected from\n\t * {@link module:engine/view/range~Range#start start} to {@link module:engine/view/range~Range#end end}\n\t * or from {@link module:engine/view/range~Range#end end} to {@link module:engine/view/range~Range#start start}.\n\t * The flag is used to set {@link #anchor anchor} and {@link #focus focus} properties.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-selection-range-intersects` if added range intersects\n\t * with ranges already stored in Selection instance.\n\t *\n\t * @private\n\t * @fires change\n\t * @param {module:engine/view/range~Range} range\n\t * @param {Boolean} [isBackward]\n\t */\n\t_addRange( range, isBackward = false ) {\n\t\tif ( !( range instanceof Range ) ) {\n\t\t\t/**\n\t\t\t * Selection range set to an object that is not an instance of {@link module:engine/view/range~Range}.\n\t\t\t *\n\t\t\t * @error view-selection-add-range-not-range\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-selection-add-range-not-range',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\tthis._pushRange( range );\n\t\tthis._lastRangeBackward = !!isBackward;\n\t}\n\n\t/**\n\t * Adds range to selection - creates copy of given range so it can be safely used and modified.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-selection-range-intersects` if added range intersects\n\t * with ranges already stored in selection instance.\n\t *\n\t * @private\n\t * @param {module:engine/view/range~Range} range\n\t */\n\t_pushRange( range ) {\n\t\tfor ( const storedRange of this._ranges ) {\n\t\t\tif ( range.isIntersecting( storedRange ) ) {\n\t\t\t\t/**\n\t\t\t\t * Trying to add a range that intersects with another range from selection.\n\t\t\t\t *\n\t\t\t\t * @error view-selection-range-intersects\n\t\t\t\t * @param {module:engine/view/range~Range} addedRange Range that was added to the selection.\n\t\t\t\t * @param {module:engine/view/range~Range} intersectingRange Range from selection that intersects with `addedRange`.\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'view-selection-range-intersects',\n\t\t\t\t\tthis,\n\t\t\t\t\t{ addedRange: range, intersectingRange: storedRange }\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis._ranges.push( new Range( range.start, range.end ) );\n\t}\n\n\t/**\n\t * Fired whenever selection ranges are changed through {@link ~Selection Selection API}.\n\t *\n\t * @event change\n\t */\n}\n\nmix( Selection, EmitterMixin );\n\n/**\n * An entity that is used to set selection.\n *\n * See also {@link module:engine/view/selection~Selection#setTo}\n *\n * @typedef {\n *    module:engine/view/selection~Selection|\n *    module:engine/view/documentselection~DocumentSelection|\n *    module:engine/view/position~Position|\n *    Iterable.<module:engine/view/range~Range>|\n *    module:engine/view/range~Range|\n *    module:engine/view/item~Item|\n *    null\n * } module:engine/view/selection~Selectable\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/documentselection\n */\n\nimport Selection from './selection';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\n\n/**\n * Class representing the document selection in the view.\n *\n * Its instance is available in {@link module:engine/view/document~Document#selection `Document#selection`}.\n *\n * It is similar to {@link module:engine/view/selection~Selection} but\n * it has a read-only API and can be modified only by the writer available in\n * the {@link module:engine/view/view~View#change `View#change()`} block\n * (so via {@link module:engine/view/downcastwriter~DowncastWriter#setSelection `DowncastWriter#setSelection()`}).\n */\nexport default class DocumentSelection {\n\t/**\n\t * Creates new DocumentSelection instance.\n\t *\n\t * \t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = new DocumentSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tconst selection = new DocumentSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( start2, end2 ) ];\n\t *\t\tconst selection = new DocumentSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tconst selection = new DocumentSelection( otherSelection );\n\t *\n\t * \t\t// Creates selection at the given position.\n\t *\t\tconst position = writer.createPositionAt( root, offset );\n\t *\t\tconst selection = new DocumentSelection( position );\n\t *\n\t *\t\t// Creates collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = writer.createContainerElement( 'paragraph' );\n\t *\t\tconst selection = new DocumentSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/view/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = new DocumentSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = new DocumentSelection( paragraph, 'on' );\n\t *\n\t * `Selection`'s constructor allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = new DocumentSelection( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tconst selection = new DocumentSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} [selectable=null]\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Offset or place when selectable is an `Item`.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t */\n\tconstructor( selectable = null, placeOrOffset, options ) {\n\t\t/**\n\t\t * Selection is used internally (`DocumentSelection` is a proxy to that selection).\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/view/selection~Selection}\n\t\t */\n\t\tthis._selection = new Selection();\n\n\t\t// Delegate change event to be fired on DocumentSelection instance.\n\t\tthis._selection.delegate( 'change' ).to( this );\n\n\t\t// Set selection data.\n\t\tthis._selection.setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Returns true if selection instance is marked as `fake`.\n\t *\n\t * @see #_setTo\n\t * @returns {Boolean}\n\t */\n\tget isFake() {\n\t\treturn this._selection.isFake;\n\t}\n\n\t/**\n\t * Returns fake selection label.\n\t *\n\t * @see #_setTo\n\t * @returns {String}\n\t */\n\tget fakeSelectionLabel() {\n\t\treturn this._selection.fakeSelectionLabel;\n\t}\n\n\t/**\n\t * Selection anchor. Anchor may be described as a position where the selection starts. Together with\n\t * {@link #focus focus} they define the direction of selection, which is important\n\t * when expanding/shrinking selection. Anchor is always the start or end of the most recent added range.\n\t * It may be a bit unintuitive when there are multiple ranges in selection.\n\t *\n\t * @see #focus\n\t * @type {module:engine/view/position~Position}\n\t */\n\tget anchor() {\n\t\treturn this._selection.anchor;\n\t}\n\n\t/**\n\t * Selection focus. Focus is a position where the selection ends.\n\t *\n\t * @see #anchor\n\t * @type {module:engine/view/position~Position}\n\t */\n\tget focus() {\n\t\treturn this._selection.focus;\n\t}\n\n\t/**\n\t * Returns whether the selection is collapsed. Selection is collapsed when there is exactly one range which is\n\t * collapsed.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\treturn this._selection.isCollapsed;\n\t}\n\n\t/**\n\t * Returns number of ranges in selection.\n\t *\n\t * @type {Number}\n\t */\n\tget rangeCount() {\n\t\treturn this._selection.rangeCount;\n\t}\n\n\t/**\n\t * Specifies whether the {@link #focus} precedes {@link #anchor}.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isBackward() {\n\t\treturn this._selection.isBackward;\n\t}\n\n\t/**\n\t * {@link module:engine/view/editableelement~EditableElement EditableElement} instance that contains this selection, or `null`\n\t * if the selection is not inside an editable element.\n\t *\n\t * @type {module:engine/view/editableelement~EditableElement|null}\n\t */\n\tget editableElement() {\n\t\treturn this._selection.editableElement;\n\t}\n\n\t/**\n\t * Used for the compatibility with the {@link module:engine/view/selection~Selection#isEqual} method.\n\t *\n\t * @protected\n\t */\n\tget _ranges() {\n\t\treturn this._selection._ranges;\n\t}\n\n\t/**\n\t * Returns an iterable that contains copies of all ranges added to the selection.\n\t *\n\t * @returns {Iterable.<module:engine/view/range~Range>}\n\t */\n\t* getRanges() {\n\t\tyield* this._selection.getRanges();\n\t}\n\n\t/**\n\t * Returns copy of the first range in the selection. First range is the one which\n\t * {@link module:engine/view/range~Range#start start} position {@link module:engine/view/position~Position#isBefore is before} start\n\t * position of all other ranges (not to confuse with the first range added to the selection).\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/range~Range|null}\n\t */\n\tgetFirstRange() {\n\t\treturn this._selection.getFirstRange();\n\t}\n\n\t/**\n\t * Returns copy of the last range in the selection. Last range is the one which {@link module:engine/view/range~Range#end end}\n\t * position {@link module:engine/view/position~Position#isAfter is after} end position of all other ranges (not to confuse\n\t * with the last range added to the selection). Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/range~Range|null}\n\t */\n\tgetLastRange() {\n\t\treturn this._selection.getLastRange();\n\t}\n\n\t/**\n\t * Returns copy of the first position in the selection. First position is the position that\n\t * {@link module:engine/view/position~Position#isBefore is before} any other position in the selection ranges.\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/position~Position|null}\n\t */\n\tgetFirstPosition() {\n\t\treturn this._selection.getFirstPosition();\n\t}\n\n\t/**\n\t * Returns copy of the last position in the selection. Last position is the position that\n\t * {@link module:engine/view/position~Position#isAfter is after} any other position in the selection ranges.\n\t * Returns `null` if no ranges are added to selection.\n\t *\n\t * @returns {module:engine/view/position~Position|null}\n\t */\n\tgetLastPosition() {\n\t\treturn this._selection.getLastPosition();\n\t}\n\n\t/**\n\t * Returns the selected element. {@link module:engine/view/element~Element Element} is considered as selected if there is only\n\t * one range in the selection, and that range contains exactly one element.\n\t * Returns `null` if there is no selected element.\n\t *\n\t * @returns {module:engine/view/element~Element|null}\n\t */\n\tgetSelectedElement() {\n\t\treturn this._selection.getSelectedElement();\n\t}\n\n\t/**\n\t * Checks whether, this selection is equal to given selection. Selections are equal if they have same directions,\n\t * same number of ranges and all ranges from one selection equal to a range from other selection.\n\t *\n\t * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} otherSelection\n\t * Selection to compare with.\n\t * @returns {Boolean} `true` if selections are equal, `false` otherwise.\n\t */\n\tisEqual( otherSelection ) {\n\t\treturn this._selection.isEqual( otherSelection );\n\t}\n\n\t/**\n\t * Checks whether this selection is similar to given selection. Selections are similar if they have same directions, same\n\t * number of ranges, and all {@link module:engine/view/range~Range#getTrimmed trimmed} ranges from one selection are\n\t * equal to any trimmed range from other selection.\n\t *\n\t * @param {module:engine/view/selection~Selection|module:engine/view/documentselection~DocumentSelection} otherSelection\n\t * Selection to compare with.\n\t * @returns {Boolean} `true` if selections are similar, `false` otherwise.\n\t */\n\tisSimilar( otherSelection ) {\n\t\treturn this._selection.isSimilar( otherSelection );\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\tdocSelection.is( 'selection' ); // -> true\n\t *\t\tdocSelection.is( 'documentSelection' ); // -> true\n\t *\t\tdocSelection.is( 'view:selection' ); // -> true\n\t *\t\tdocSelection.is( 'view:documentSelection' ); // -> true\n\t *\n\t *\t\tdocSelection.is( 'model:documentSelection' ); // -> false\n\t *\t\tdocSelection.is( 'element' ); // -> false\n\t *\t\tdocSelection.is( 'node' ); // -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'selection' ||\n\t\t\ttype == 'documentSelection' ||\n\t\t\ttype == 'view:selection' ||\n\t\t\ttype == 'view:documentSelection';\n\t}\n\n\t/**\n\t * Sets this selection's ranges and direction to the specified location based on the given\n\t * {@link module:engine/view/selection~Selectable selectable}.\n\t *\n\t *\t\t// Sets selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tdocumentSelection._setTo( range );\n\t *\n\t *\t\t// Sets selection to given ranges.\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( start2, end2 ) ];\n\t *\t\tdocumentSelection._setTo( range );\n\t *\n\t *\t\t// Sets selection to the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tdocumentSelection._setTo( otherSelection );\n\t *\n\t * \t\t// Sets collapsed selection at the given position.\n\t *\t\tconst position = writer.createPositionAt( root, offset );\n\t *\t\tdocumentSelection._setTo( position );\n\t *\n\t * \t\t// Sets collapsed selection at the position of given item and offset.\n\t *\t\tdocumentSelection._setTo( paragraph, offset );\n\t *\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t *\t\tdocumentSelection._setTo( paragraph, 'in' );\n\t *\n\t * Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends just after the item.\n\t *\n\t *\t\tdocumentSelection._setTo( paragraph, 'on' );\n\t *\n\t * \t\t// Clears selection. Removes all ranges.\n\t *\t\tdocumentSelection._setTo( null );\n\t *\n\t * `Selection#_setTo()` method allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Sets selection as backward.\n\t *\t\tdocumentSelection._setTo( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to des cribe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tdocumentSelection._setTo( range, { fake: true, label: 'foo' } );\n\t *\n\t * @protected\n\t * @fires change\n\t * @param {module:engine/view/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t */\n\t_setTo( selectable, placeOrOffset, options ) {\n\t\tthis._selection.setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Moves {@link #focus} to the specified location.\n\t *\n\t * The location can be specified in the same form as {@link module:engine/view/view~View#createPositionAt view.createPositionAt()}\n\t * parameters.\n\t *\n\t * @protected\n\t * @fires change\n\t * @param {module:engine/view/item~Item|module:engine/view/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\t_setFocus( itemOrPosition, offset ) {\n\t\tthis._selection.setFocus( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Fired whenever selection ranges are changed through {@link ~DocumentSelection Selection API}.\n\t *\n\t * @event change\n\t */\n}\n\nmix( DocumentSelection, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/document\n */\n\nimport DocumentSelection from './documentselection';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\n\n// @if CK_DEBUG_ENGINE // const { logDocument } = require( '../dev-utils/utils' );\n\n/**\n * Document class creates an abstract layer over the content editable area, contains a tree of view elements and\n * {@link module:engine/view/documentselection~DocumentSelection view selection} associated with this document.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class Document {\n\t/**\n\t * Creates a Document instance.\n\t *\n\t * @param {module:engine/view/stylesmap~StylesProcessor} stylesProcessor The styles processor instance.\n\t */\n\tconstructor( stylesProcessor ) {\n\t\t/**\n\t\t * Selection done on this document.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/documentselection~DocumentSelection} module:engine/view/document~Document#selection\n\t\t */\n\t\tthis.selection = new DocumentSelection();\n\n\t\t/**\n\t\t * Roots of the view tree. Collection of the {@link module:engine/view/element~Element view elements}.\n\t\t *\n\t\t * View roots are created as a result of binding between {@link module:engine/view/document~Document#roots} and\n\t\t * {@link module:engine/model/document~Document#roots} and this is handled by\n\t\t * {@link module:engine/controller/editingcontroller~EditingController}, so to create view root we need to create\n\t\t * model root using {@link module:engine/model/document~Document#createRoot}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:utils/collection~Collection} module:engine/view/document~Document#roots\n\t\t */\n\t\tthis.roots = new Collection( { idProperty: 'rootName' } );\n\n\t\t/**\n\t\t * The styles processor instance used by this document when normalizing styles.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/stylesmap~StylesProcessor}\n\t\t */\n\t\tthis.stylesProcessor = stylesProcessor;\n\n\t\t/**\n\t\t * Defines whether document is in read-only mode.\n\t\t *\n\t\t * When document is read-ony then all roots are read-only as well and caret placed inside this root is hidden.\n\t\t *\n\t\t * @observable\n\t\t * @member {Boolean} #isReadOnly\n\t\t */\n\t\tthis.set( 'isReadOnly', false );\n\n\t\t/**\n\t\t * True if document is focused.\n\t\t *\n\t\t * This property is updated by the {@link module:engine/view/observer/focusobserver~FocusObserver}.\n\t\t * If the {@link module:engine/view/observer/focusobserver~FocusObserver} is disabled this property will not change.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} module:engine/view/document~Document#isFocused\n\t\t */\n\t\tthis.set( 'isFocused', false );\n\n\t\t/**\n\t\t * True if composition is in progress inside the document.\n\t\t *\n\t\t * This property is updated by the {@link module:engine/view/observer/compositionobserver~CompositionObserver}.\n\t\t * If the {@link module:engine/view/observer/compositionobserver~CompositionObserver} is disabled this property will not change.\n\t\t *\n\t\t * @readonly\n\t\t * @observable\n\t\t * @member {Boolean} module:engine/view/document~Document#isComposing\n\t\t */\n\t\tthis.set( 'isComposing', false );\n\n\t\t/**\n\t\t * Post-fixer callbacks registered to the view document.\n\t\t *\n\t\t * @private\n\t\t * @member {Set}\n\t\t */\n\t\tthis._postFixers = new Set();\n\t}\n\n\t/**\n\t * Gets a {@link module:engine/view/document~Document#roots view root element} with the specified name. If the name is not\n\t * specific \"main\" root is returned.\n\t *\n\t * @param {String} [name='main'] Name of the root.\n\t * @returns {module:engine/view/rooteditableelement~RootEditableElement|null} The view root element with the specified name\n\t * or null when there is no root of given name.\n\t */\n\tgetRoot( name = 'main' ) {\n\t\treturn this.roots.get( name );\n\t}\n\n\t/**\n\t * Allows registering post-fixer callbacks. A post-fixers mechanism allows to update the view tree just before it is rendered\n\t * to the DOM.\n\t *\n\t * Post-fixers are executed right after all changes from the outermost change block were applied but\n\t * before the {@link module:engine/view/view~View#event:render render event} is fired. If a post-fixer callback made\n\t * a change, it should return `true`. When this happens, all post-fixers are fired again to check if something else should\n\t * not be fixed in the new document tree state.\n\t *\n\t * View post-fixers are useful when you want to apply some fixes whenever the view structure changes. Keep in mind that\n\t * changes executed in a view post-fixer should not break model-view mapping.\n\t *\n\t * The types of changes which should be safe:\n\t *\n\t * * adding or removing attribute from elements,\n\t * * changes inside of {@link module:engine/view/uielement~UIElement UI elements},\n\t * * {@link module:engine/model/differ~Differ#refreshItem marking some of the model elements to be re-converted}.\n\t *\n\t * Try to avoid changes which touch view structure:\n\t *\n\t * * you should not add or remove nor wrap or unwrap any view elements,\n\t * * you should not change the editor data model in a view post-fixer.\n\t *\n\t * As a parameter, a post-fixer callback receives a {@link module:engine/view/downcastwriter~DowncastWriter downcast writer}.\n\t *\n\t * Typically, a post-fixer will look like this:\n\t *\n\t *\t\teditor.editing.view.document.registerPostFixer( writer => {\n\t *\t\t\tif ( checkSomeCondition() ) {\n\t *\t\t\t\twriter.doSomething();\n\t *\n\t *\t\t\t\t// Let other post-fixers know that something changed.\n\t *\t\t\t\treturn true;\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * Note that nothing happens right after you register a post-fixer (e.g. execute such a code in the console).\n\t * That is because adding a post-fixer does not execute it.\n\t * The post-fixer will be executed as soon as any change in the document needs to cause its rendering.\n\t * If you want to re-render the editor's view after registering the post-fixer then you should do it manually by calling\n\t * {@link module:engine/view/view~View#forceRender `view.forceRender()`}.\n\t *\n\t * If you need to register a callback which is executed when DOM elements are already updated,\n\t * use {@link module:engine/view/view~View#event:render render event}.\n\t *\n\t * @param {Function} postFixer\n\t */\n\tregisterPostFixer( postFixer ) {\n\t\tthis._postFixers.add( postFixer );\n\t}\n\n\t/**\n\t * Destroys this instance. Makes sure that all observers are destroyed and listeners removed.\n\t */\n\tdestroy() {\n\t\tthis.roots.map( root => root.destroy() );\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Performs post-fixer loops. Executes post-fixer callbacks as long as none of them has done any changes to the model.\n\t *\n\t * @protected\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer\n\t */\n\t_callPostFixers( writer ) {\n\t\tlet wasFixed = false;\n\n\t\tdo {\n\t\t\tfor ( const callback of this._postFixers ) {\n\t\t\t\twasFixed = callback( writer );\n\n\t\t\t\tif ( wasFixed ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} while ( wasFixed );\n\t}\n\n\t/**\n\t * Event fired whenever document content layout changes. It is fired whenever content is\n\t * {@link module:engine/view/view~View#event:render rendered}, but should be also fired by observers in case of\n\t * other actions which may change layout, for instance when image loads.\n\t *\n\t * @event layoutChanged\n\t */\n\n\t// @if CK_DEBUG_ENGINE // log( version ) {\n\t// @if CK_DEBUG_ENGINE //\tlogDocument( this, version );\n\t// @if CK_DEBUG_ENGINE // }\n}\n\nmix( Document, ObservableMixin );\n\n/**\n * Enum representing type of the change.\n *\n * Possible values:\n *\n * * `children` - for child list changes,\n * * `attributes` - for element attributes changes,\n * * `text` - for text nodes changes.\n *\n * @typedef {String} module:engine/view/document~ChangeType\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/attributeelement\n */\n\nimport Element from './element';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n// Default attribute priority.\nconst DEFAULT_PRIORITY = 10;\n\n/**\n * Attribute elements are used to represent formatting elements in the view (think  `<b>`, `<span style=\"font-size: 2em\">`, etc.).\n * Most often they are created when downcasting model text attributes.\n *\n * Editing engine does not define a fixed HTML DTD. This is why a feature developer needs to choose between various\n * types (container element, {@link module:engine/view/attributeelement~AttributeElement attribute element},\n * {@link module:engine/view/emptyelement~EmptyElement empty element}, etc) when developing a feature.\n *\n * To create a new attribute element instance use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createAttributeElement `DowncastWriter#createAttributeElement()`} method.\n *\n * @extends module:engine/view/element~Element\n */\nexport default class AttributeElement extends Element {\n\t/**\n\t * Creates an attribute element.\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createAttributeElement\n\t * @see module:engine/view/element~Element\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document instance to which this element belongs.\n\t * @param {String} name Node name.\n\t * @param {Object|Iterable} [attrs] Collection of attributes.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into created element.\n\t */\n\tconstructor( document, name, attrs, children ) {\n\t\tsuper( document, name, attrs, children );\n\n\t\t/**\n\t\t * Returns block {@link module:engine/view/filler filler} offset or `null` if block filler is not needed.\n\t\t *\n\t\t * @method #getFillerOffset\n\t\t * @returns {Number|null} Block filler offset or `null` if block filler is not needed.\n\t\t */\n\t\tthis.getFillerOffset = getFillerOffset;\n\n\t\t/**\n\t\t * Element priority. Decides in what order elements are wrapped by {@link module:engine/view/downcastwriter~DowncastWriter}.\n\t\t *\n\t\t * @protected\n\t\t * @member {Number}\n\t\t */\n\t\tthis._priority = DEFAULT_PRIORITY;\n\n\t\t/**\n\t\t * Element identifier. If set, it is used by {@link module:engine/view/element~Element#isSimilar},\n\t\t * and then two elements are considered similar if, and only if they have the same `_id`.\n\t\t *\n\t\t * @protected\n\t\t * @member {String|Number}\n\t\t */\n\t\tthis._id = null;\n\n\t\t/**\n\t\t * Keeps all the attribute elements that have the same {@link module:engine/view/attributeelement~AttributeElement#id ids}\n\t\t * and still exist in the view tree.\n\t\t *\n\t\t * This property is managed by {@link module:engine/view/downcastwriter~DowncastWriter}.\n\t\t *\n\t\t * @protected\n\t\t * @member {Set.<module:engine/view/attributeelement~AttributeElement>|null}\n\t\t */\n\t\tthis._clonesGroup = null;\n\t}\n\n\t/**\n\t * Element priority. Decides in what order elements are wrapped by {@link module:engine/view/downcastwriter~DowncastWriter}.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget priority() {\n\t\treturn this._priority;\n\t}\n\n\t/**\n\t * Element identifier. If set, it is used by {@link module:engine/view/element~Element#isSimilar},\n\t * and then two elements are considered similar if, and only if they have the same `id`.\n\t *\n\t * @readonly\n\t * @type {String|Number}\n\t */\n\tget id() {\n\t\treturn this._id;\n\t}\n\n\t/**\n\t * Returns all {@link module:engine/view/attributeelement~AttributeElement attribute elements} that has the\n\t * same {@link module:engine/view/attributeelement~AttributeElement#id id} and are in the view tree (were not removed).\n\t *\n\t * Note: If this element has been removed from the tree, returned set will not include it.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError attribute-element-get-elements-with-same-id-no-id}\n\t * if this element has no `id`.\n\t *\n\t * @returns {Set.<module:engine/view/attributeelement~AttributeElement>} Set containing all the attribute elements\n\t * with the same `id` that were added and not removed from the view tree.\n\t */\n\tgetElementsWithSameId() {\n\t\tif ( this.id === null ) {\n\t\t\t/**\n\t\t\t * Cannot get elements with the same id for an attribute element without id.\n\t\t\t *\n\t\t\t * @error attribute-element-get-elements-with-same-id-no-id\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'attribute-element-get-elements-with-same-id-no-id',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\treturn new Set( this._clonesGroup );\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\tattributeElement.is( 'attributeElement' ); // -> true\n\t *\t\tattributeElement.is( 'element' ); // -> true\n\t *\t\tattributeElement.is( 'node' ); // -> true\n\t *\t\tattributeElement.is( 'view:attributeElement' ); // -> true\n\t *\t\tattributeElement.is( 'view:element' ); // -> true\n\t *\t\tattributeElement.is( 'view:node' ); // -> true\n\t *\n\t *\t\tattributeElement.is( 'model:element' ); // -> false\n\t *\t\tattributeElement.is( 'documentFragment' ); // -> false\n\t *\n\t * Assuming that the object being checked is an attribute element, you can also check its\n\t * {@link module:engine/view/attributeelement~AttributeElement#name name}:\n\t *\n\t *\t\tattributeElement.is( 'element', 'b' ); // -> true if this is a bold element\n\t *\t\tattributeElement.is( 'attributeElement', 'b' ); // -> same as above\n\t *\t\ttext.is( 'element', 'b' ); -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'attributeElement' || type === 'view:attributeElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'element' || type === 'view:element' ||\n\t\t\t\ttype === 'node' || type === 'view:node';\n\t\t} else {\n\t\t\treturn name === this.name && (\n\t\t\t\ttype === 'attributeElement' || type === 'view:attributeElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'element' || type === 'view:element'\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Checks if this element is similar to other element.\n\t *\n\t * If none of elements has set {@link module:engine/view/attributeelement~AttributeElement#id}, then both elements\n\t * should have the same name, attributes and priority to be considered as similar. Two similar elements can contain\n\t * different set of children nodes.\n\t *\n\t * If at least one element has {@link module:engine/view/attributeelement~AttributeElement#id} set, then both\n\t * elements have to have the same {@link module:engine/view/attributeelement~AttributeElement#id} value to be\n\t * considered similar.\n\t *\n\t * Similarity is important for {@link module:engine/view/downcastwriter~DowncastWriter}. For example:\n\t *\n\t * * two following similar elements can be merged together into one, longer element,\n\t * * {@link module:engine/view/downcastwriter~DowncastWriter#unwrap} checks similarity of passed element and processed element to\n\t * decide whether processed element should be unwrapped,\n\t * * etc.\n\t *\n\t * @param {module:engine/view/element~Element} otherElement\n\t * @returns {Boolean}\n\t */\n\tisSimilar( otherElement ) {\n\t\t// If any element has an `id` set, just compare the ids.\n\t\tif ( this.id !== null || otherElement.id !== null ) {\n\t\t\treturn this.id === otherElement.id;\n\t\t}\n\n\t\treturn super.isSimilar( otherElement ) && this.priority == otherElement.priority;\n\t}\n\n\t/**\n\t * Clones provided element with priority.\n\t *\n\t * @protected\n\t * @param {Boolean} deep If set to `true` clones element and all its children recursively. When set to `false`,\n\t * element will be cloned without any children.\n\t * @returns {module:engine/view/attributeelement~AttributeElement} Clone of this element.\n\t */\n\t_clone( deep ) {\n\t\tconst cloned = super._clone( deep );\n\n\t\t// Clone priority too.\n\t\tcloned._priority = this._priority;\n\n\t\t// And id too.\n\t\tcloned._id = this._id;\n\n\t\treturn cloned;\n\t}\n}\n\n/**\n * Default attribute priority.\n *\n * @member {Number} module:engine/view/attributeelement~AttributeElement.DEFAULT_PRIORITY\n */\nAttributeElement.DEFAULT_PRIORITY = DEFAULT_PRIORITY;\n\n// Returns block {@link module:engine/view/filler~Filler filler} offset or `null` if block filler is not needed.\n//\n// @returns {Number|null} Block filler offset or `null` if block filler is not needed.\nfunction getFillerOffset() {\n\t// <b>foo</b> does not need filler.\n\tif ( nonUiChildrenCount( this ) ) {\n\t\treturn null;\n\t}\n\n\tlet element = this.parent;\n\n\t// <p><b></b></p> needs filler -> <p><b><br></b></p>\n\twhile ( element && element.is( 'attributeElement' ) ) {\n\t\tif ( nonUiChildrenCount( element ) > 1 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\telement = element.parent;\n\t}\n\n\tif ( !element || nonUiChildrenCount( element ) > 1 ) {\n\t\treturn null;\n\t}\n\n\t// Render block filler at the end of element (after all ui elements).\n\treturn this.childCount;\n}\n\n// Returns total count of children that are not {@link module:engine/view/uielement~UIElement UIElements}.\n//\n// @param {module:engine/view/element~Element} element\n// @returns {Number}\nfunction nonUiChildrenCount( element ) {\n\treturn Array.from( element.getChildren() ).filter( element => !element.is( 'uiElement' ) ).length;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/emptyelement\n */\n\nimport Element from './element';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Node from './node';\n\n/**\n * Empty element class. It is used to represent elements that cannot contain any child nodes (for example `<img>` elements).\n *\n * To create a new empty element use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createEmptyElement `downcastWriter#createEmptyElement()`} method.\n *\n * @extends module:engine/view/element~Element\n */\nexport default class EmptyElement extends Element {\n\t/**\n\t * Creates new instance of EmptyElement.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-emptyelement-cannot-add` when third parameter is passed,\n\t * to inform that usage of EmptyElement is incorrect (adding child nodes to EmptyElement is forbidden).\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createEmptyElement\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document instance to which this element belongs.\n\t * @param {String} name Node name.\n\t * @param {Object|Iterable} [attrs] Collection of attributes.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into created element.\n\t */\n\tconstructor( document, name, attrs, children ) {\n\t\tsuper( document, name, attrs, children );\n\n\t\t/**\n\t\t * Returns `null` because filler is not needed for EmptyElements.\n\t\t *\n\t\t * @method #getFillerOffset\n\t\t * @returns {null} Always returns null.\n\t\t */\n\t\tthis.getFillerOffset = getFillerOffset;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\temptyElement.is( 'emptyElement' ); // -> true\n\t *\t\temptyElement.is( 'element' ); // -> true\n\t *\t\temptyElement.is( 'node' ); // -> true\n\t *\t\temptyElement.is( 'view:emptyElement' ); // -> true\n\t *\t\temptyElement.is( 'view:element' ); // -> true\n\t *\t\temptyElement.is( 'view:node' ); // -> true\n\t *\n\t *\t\temptyElement.is( 'model:element' ); // -> false\n\t *\t\temptyElement.is( 'documentFragment' ); // -> false\n\t *\n\t * Assuming that the object being checked is an empty element, you can also check its\n\t * {@link module:engine/view/emptyelement~EmptyElement#name name}:\n\t *\n\t *\t\temptyElement.is( 'element', 'img' ); // -> true if this is a img element\n\t *\t\temptyElement.is( 'emptyElement', 'img' ); // -> same as above\n\t *\t\ttext.is( 'element', 'img' ); -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'emptyElement' || type === 'view:emptyElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'element' || type === 'view:element' ||\n\t\t\t\ttype === 'node' || type === 'view:node';\n\t\t} else {\n\t\t\treturn name === this.name && (\n\t\t\t\ttype === 'emptyElement' || type === 'view:emptyElement' ||\n\t\t\t\ttype === 'element' || type === 'view:element'\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Overrides {@link module:engine/view/element~Element#_insertChild} method.\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-emptyelement-cannot-add` to prevent\n\t * adding any child nodes to EmptyElement.\n\t *\n\t * @protected\n\t */\n\t_insertChild( index, nodes ) {\n\t\tif ( nodes && ( nodes instanceof Node || Array.from( nodes ).length > 0 ) ) {\n\t\t\t/**\n\t\t\t * Cannot add children to {@link module:engine/view/emptyelement~EmptyElement}.\n\t\t\t *\n\t\t\t * @error view-emptyelement-cannot-add\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-emptyelement-cannot-add',\n\t\t\t\t[ this, nodes ]\n\t\t\t);\n\t\t}\n\t}\n}\n\n// Returns `null` because block filler is not needed for EmptyElements.\n//\n// @returns {null}\nfunction getFillerOffset() {\n\treturn null;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals navigator:false */\n\n/**\n * @module utils/env\n */\n\nconst userAgent = navigator.userAgent.toLowerCase();\n\n/**\n * A namespace containing environment and browser information.\n *\n * @namespace\n */\nconst env = {\n\t/**\n\t * Indicates that the application is running on Macintosh.\n\t *\n\t * @static\n\t * @type {Boolean}\n\t */\n\tisMac: isMac( userAgent ),\n\n\t/**\n\t * Indicates that the application is running in Firefox (Gecko).\n\t *\n\t * @static\n\t * @type {Boolean}\n\t */\n\tisGecko: isGecko( userAgent ),\n\n\t/**\n\t * Indicates that the application is running in Safari.\n\t *\n\t * @static\n\t * @type {Boolean}\n\t */\n\tisSafari: isSafari( userAgent ),\n\n\t/**\n\t * Indicates that the application is running on Android mobile device.\n\t *\n\t * @static\n\t * @type {Boolean}\n\t */\n\tisAndroid: isAndroid( userAgent ),\n\n\t/**\n\t * Indicates that the application is running in a browser using the Blink engine.\n\t *\n\t * @static\n\t * @type {Boolean}\n\t */\n\tisBlink: isBlink( userAgent ),\n\n\t/**\n\t * Environment features information.\n\t *\n\t * @memberOf module:utils/env~env\n\t * @namespace\n\t */\n\tfeatures: {\n\t\t/**\n\t\t * Indicates that the environment supports ES2018 Unicode property escapes  like `\\p{P}` or `\\p{L}`.\n\t\t * More information about unicode properties might be found\n\t\t * [in Unicode Standard Annex #44](https://www.unicode.org/reports/tr44/#GC_Values_Table).\n\t\t *\n\t\t * @type {Boolean}\n\t\t */\n\t\tisRegExpUnicodePropertySupported: isRegExpUnicodePropertySupported()\n\t}\n};\n\nexport default env;\n\n/**\n * Checks if User Agent represented by the string is running on Macintosh.\n *\n * @param {String} userAgent **Lowercase** `navigator.userAgent` string.\n * @returns {Boolean} Whether User Agent is running on Macintosh or not.\n */\nexport function isMac( userAgent ) {\n\treturn userAgent.indexOf( 'macintosh' ) > -1;\n}\n\n/**\n * Checks if User Agent represented by the string is Firefox (Gecko).\n *\n * @param {String} userAgent **Lowercase** `navigator.userAgent` string.\n * @returns {Boolean} Whether User Agent is Firefox or not.\n */\nexport function isGecko( userAgent ) {\n\treturn !!userAgent.match( /gecko\\/\\d+/ );\n}\n\n/**\n * Checks if User Agent represented by the string is Safari.\n *\n * @param {String} userAgent **Lowercase** `navigator.userAgent` string.\n * @returns {Boolean} Whether User Agent is Safari or not.\n */\nexport function isSafari( userAgent ) {\n\treturn userAgent.indexOf( ' applewebkit/' ) > -1 && userAgent.indexOf( 'chrome' ) === -1;\n}\n\n/**\n * Checks if User Agent represented by the string is Android mobile device.\n *\n * @param {String} userAgent **Lowercase** `navigator.userAgent` string.\n * @returns {Boolean} Whether User Agent is Safari or not.\n */\nexport function isAndroid( userAgent ) {\n\treturn userAgent.indexOf( 'android' ) > -1;\n}\n\n/**\n * Checks if User Agent represented by the string is Blink engine.\n *\n * @param {String} userAgent **Lowercase** `navigator.userAgent` string.\n * @returns {Boolean} Whether User Agent is Blink engine or not.\n */\nexport function isBlink( userAgent ) {\n\t// The Edge browser before switching to the Blink engine used to report itself as Chrome (and \"Edge/\")\n\t// but after switching to the Blink it replaced \"Edge/\" with \"Edg/\".\n\treturn userAgent.indexOf( 'chrome/' ) > -1 && userAgent.indexOf( 'edge/' ) < 0;\n}\n\n/**\n * Checks if the current environment supports ES2018 Unicode properties like `\\p{P}` or `\\p{L}`.\n * More information about unicode properties might be found\n * [in Unicode Standard Annex #44](https://www.unicode.org/reports/tr44/#GC_Values_Table).\n *\n * @returns {Boolean}\n */\nexport function isRegExpUnicodePropertySupported() {\n\tlet isSupported = false;\n\n\t// Feature detection for Unicode properties. Added in ES2018. Currently Firefox does not support it.\n\t// See https://github.com/ckeditor/ckeditor5-mention/issues/44#issuecomment-487002174.\n\n\ttry {\n\t\t// Usage of regular expression literal cause error during build (ckeditor/ckeditor5-dev#534).\n\t\tisSupported = ''.search( new RegExp( '[\\\\p{L}]', 'u' ) ) === 0;\n\t} catch ( error ) {\n\t\t// Firefox throws a SyntaxError when the group is unsupported.\n\t}\n\n\treturn isSupported;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Set of utils related to keyboard support.\n *\n * @module utils/keyboard\n */\n\nimport CKEditorError from './ckeditorerror';\nimport env from './env';\n\nconst macGlyphsToModifiers = {\n\t'': 'ctrl',\n\t'': 'shift',\n\t'': 'alt'\n};\n\nconst modifiersToMacGlyphs = {\n\t'ctrl': '',\n\t'shift': '',\n\t'alt': ''\n};\n\n/**\n * Object with `keyName => keyCode` pairs for a set of known keys.\n *\n * Contains:\n *\n * * `a-z`,\n * * `0-9`,\n * * `f1-f12`,\n * * `arrow(left|up|right|bottom)`,\n * * `backspace`, `delete`, `enter`, `esc`, `tab`,\n * * `ctrl`, `cmd`, `shift`, `alt`.\n */\nexport const keyCodes = generateKnownKeyCodes();\n\n/**\n * Converts a key name or a {@link module:utils/keyboard~KeystrokeInfo keystroke info} into a key code.\n *\n * Note: Key names are matched with {@link module:utils/keyboard~keyCodes} in a case-insensitive way.\n *\n * @param {String|module:utils/keyboard~KeystrokeInfo} Key name (see {@link module:utils/keyboard~keyCodes})\n * or a keystroke data object.\n * @returns {Number} Key or keystroke code.\n */\nexport function getCode( key ) {\n\tlet keyCode;\n\n\tif ( typeof key == 'string' ) {\n\t\tkeyCode = keyCodes[ key.toLowerCase() ];\n\n\t\tif ( !keyCode ) {\n\t\t\t/**\n\t\t\t * Unknown key name. Only key names contained by the {@link module:utils/keyboard~keyCodes} can be used.\n\t\t\t *\n\t\t\t * @error keyboard-unknown-key\n\t\t\t * @param {String} key\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'keyboard-unknown-key', null, { key } );\n\t\t}\n\t} else {\n\t\tkeyCode = key.keyCode +\n\t\t\t( key.altKey ? keyCodes.alt : 0 ) +\n\t\t\t( key.ctrlKey ? keyCodes.ctrl : 0 ) +\n\t\t\t( key.shiftKey ? keyCodes.shift : 0 );\n\t}\n\n\treturn keyCode;\n}\n\n/**\n * Parses keystroke and returns a keystroke code that will match the code returned by\n * link {@link module:utils/keyboard~getCode} for a corresponding {@link module:utils/keyboard~KeystrokeInfo keystroke info}.\n *\n * The keystroke can be passed in two formats:\n *\n * * as a single string  e.g. `ctrl + A`,\n * * as an array of {@link module:utils/keyboard~keyCodes known key names} and key codes  e.g.:\n *   * `[ 'ctrl', 32 ]` (ctrl + space),\n *   * `[ 'ctrl', 'a' ]` (ctrl + A).\n *\n * Note: Key names are matched with {@link module:utils/keyboard~keyCodes} in a case-insensitive way.\n *\n * Note: Only keystrokes with a single non-modifier key are supported (e.g. `ctrl+A` is OK, but `ctrl+A+B` is not).\n *\n * @param {String|Array.<Number|String>} keystroke Keystroke definition.\n * @returns {Number} Keystroke code.\n */\nexport function parseKeystroke( keystroke ) {\n\tif ( typeof keystroke == 'string' ) {\n\t\tkeystroke = splitKeystrokeText( keystroke );\n\t}\n\n\treturn keystroke\n\t\t.map( key => ( typeof key == 'string' ) ? getCode( key ) : key )\n\t\t.reduce( ( key, sum ) => sum + key, 0 );\n}\n\n/**\n * It translates any keystroke string text like `\"CTRL+A\"` to an\n * environmentspecific keystroke, i.e. `\"A\"` on Mac OSX.\n *\n * @param {String} keystroke Keystroke text.\n * @returns {String} Keystroke text specific for the environment.\n */\nexport function getEnvKeystrokeText( keystroke ) {\n\tif ( !env.isMac ) {\n\t\treturn keystroke;\n\t}\n\n\treturn splitKeystrokeText( keystroke )\n\t\t// Replace modifiers (e.g. \"ctrl\") with Mac glyphs (e.g. \"\") first.\n\t\t.map( key => modifiersToMacGlyphs[ key.toLowerCase() ] || key )\n\n\t\t// Decide whether to put \"+\" between keys in the keystroke or not.\n\t\t.reduce( ( value, key ) => {\n\t\t\tif ( value.slice( -1 ) in macGlyphsToModifiers ) {\n\t\t\t\treturn value + key;\n\t\t\t} else {\n\t\t\t\treturn value + '+' + key;\n\t\t\t}\n\t\t} );\n}\n\n/**\n * Returns `true` if the provided key code represents one of the arrow keys.\n *\n * @param {Number} keyCode A key code as in {@link module:utils/keyboard~KeystrokeInfo#keyCode}.\n * @returns {Boolean}\n */\nexport function isArrowKeyCode( keyCode ) {\n\treturn keyCode == keyCodes.arrowright ||\n\t\tkeyCode == keyCodes.arrowleft ||\n\t\tkeyCode == keyCodes.arrowup ||\n\t\tkeyCode == keyCodes.arrowdown;\n}\n\n/**\n * Returns the direction in which the {@link module:engine/model/documentselection~DocumentSelection selection}\n * will move when a provided arrow key code is pressed considering the language direction of the editor content.\n *\n * For instance, in righttoleft (RTL) content languages, pressing the left arrow means moving selection right (forward)\n * in the model structure. Similarly, pressing the right arrow moves the selection left (backward).\n *\n * @param {Number} keyCode A key code as in {@link module:utils/keyboard~KeystrokeInfo#keyCode}.\n * @param {'ltr'|'rtl'} contentLanguageDirection The content language direction, corresponding to\n * {@link module:utils/locale~Locale#contentLanguageDirection}.\n * @returns {'left'|'up'|'right'|'down'} Localized arrow direction.\n */\nexport function getLocalizedArrowKeyCodeDirection( keyCode, contentLanguageDirection ) {\n\tconst isLtrContent = contentLanguageDirection === 'ltr';\n\n\tswitch ( keyCode ) {\n\t\tcase keyCodes.arrowleft:\n\t\t\treturn isLtrContent ? 'left' : 'right';\n\n\t\tcase keyCodes.arrowright:\n\t\t\treturn isLtrContent ? 'right' : 'left';\n\n\t\tcase keyCodes.arrowup:\n\t\t\treturn 'up';\n\n\t\tcase keyCodes.arrowdown:\n\t\t\treturn 'down';\n\t}\n}\n\n/**\n * Determines if the provided key code moves the {@link module:engine/model/documentselection~DocumentSelection selection}\n * forward or backward considering the language direction of the editor content.\n *\n * For instance, in righttoleft (RTL) languages, pressing the left arrow means moving forward\n * in the model structure. Similarly, pressing the right arrow moves the selection backward.\n *\n * @param {Number} keyCode A key code as in {@link module:utils/keyboard~KeystrokeInfo#keyCode}.\n * @param {'ltr'|'rtl'} contentLanguageDirection The content language direction, corresponding to\n * {@link module:utils/locale~Locale#contentLanguageDirection}.\n * @returns {Boolean}\n */\nexport function isForwardArrowKeyCode( keyCode, contentLanguageDirection ) {\n\tconst localizedKeyCodeDirection = getLocalizedArrowKeyCodeDirection( keyCode, contentLanguageDirection );\n\n\treturn localizedKeyCodeDirection === 'down' || localizedKeyCodeDirection === 'right';\n}\n\nfunction generateKnownKeyCodes() {\n\tconst keyCodes = {\n\t\tarrowleft: 37,\n\t\tarrowup: 38,\n\t\tarrowright: 39,\n\t\tarrowdown: 40,\n\t\tbackspace: 8,\n\t\tdelete: 46,\n\t\tenter: 13,\n\t\tspace: 32,\n\t\tesc: 27,\n\t\ttab: 9,\n\n\t\t// The idea about these numbers is that they do not collide with any real key codes, so we can use them\n\t\t// like bit masks.\n\t\tctrl: 0x110000,\n\t\t// Has the same code as ctrl, because their behaviour should be unified across the editor.\n\t\t// See http://ckeditor.github.io/editor-recommendations/general-policies#ctrl-vs-cmd\n\t\tcmd: 0x110000,\n\t\tshift: 0x220000,\n\t\talt: 0x440000\n\t};\n\n\t// a-z\n\tfor ( let code = 65; code <= 90; code++ ) {\n\t\tconst letter = String.fromCharCode( code );\n\n\t\tkeyCodes[ letter.toLowerCase() ] = code;\n\t}\n\n\t// 0-9\n\tfor ( let code = 48; code <= 57; code++ ) {\n\t\tkeyCodes[ code - 48 ] = code;\n\t}\n\n\t// F1-F12\n\tfor ( let code = 112; code <= 123; code++ ) {\n\t\tkeyCodes[ 'f' + ( code - 111 ) ] = code;\n\t}\n\n\treturn keyCodes;\n}\n\nfunction splitKeystrokeText( keystroke ) {\n\treturn keystroke.split( /\\s*\\+\\s*/ );\n}\n\n/**\n * Information about a keystroke.\n *\n * @interface module:utils/keyboard~KeystrokeInfo\n */\n\n/**\n * The [key code](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode).\n *\n * @member {Number} module:utils/keyboard~KeystrokeInfo#keyCode\n */\n\n/**\n * Whether the <kbd>Alt</kbd> modifier was pressed.\n *\n * @member {Bolean} module:utils/keyboard~KeystrokeInfo#altKey\n */\n\n/**\n * Whether the <kbd>Ctrl</kbd> or <kbd>Cmd</kbd> modifier was pressed.\n *\n * @member {Bolean} module:utils/keyboard~KeystrokeInfo#ctrlKey\n */\n\n/**\n * Whether the <kbd>Shift</kbd> modifier was pressed.\n *\n * @member {Bolean} module:utils/keyboard~KeystrokeInfo#shiftKey\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/uielement\n */\n\nimport Element from './element';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Node from './node';\nimport { keyCodes } from '@ckeditor/ckeditor5-utils/src/keyboard';\n\n/**\n * UI element class. It should be used to represent editing UI which needs to be injected into the editing view\n * If possible, you should keep your UI outside the editing view. However, if that is not possible,\n * UI elements can be used.\n *\n * How a UI element is rendered is in your control (you pass a callback to\n * {@link module:engine/view/downcastwriter~DowncastWriter#createUIElement `downcastWriter#createUIElement()`}).\n * The editor will ignore your UI element  the selection cannot be placed in it, it is skipped (invisible) when\n * the user modifies the selection by using arrow keys and the editor does not listen to any mutations which\n * happen inside your UI elements.\n *\n * The limitation is that you cannot convert a model element to a UI element. UI elements need to be\n * created for {@link module:engine/model/markercollection~Marker markers} or as additinal elements\n * inside normal {@link module:engine/view/containerelement~ContainerElement container elements}.\n *\n * To create a new UI element use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createUIElement `downcastWriter#createUIElement()`} method.\n *\n * @extends module:engine/view/element~Element\n */\nexport default class UIElement extends Element {\n\t/**\n\t * Creates new instance of UIElement.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-uielement-cannot-add` when third parameter is passed,\n\t * to inform that usage of UIElement is incorrect (adding child nodes to UIElement is forbidden).\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createUIElement\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document instance to which this element belongs.\n\t * @param {String} name Node name.\n\t * @param {Object|Iterable} [attributes] Collection of attributes.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into created element.\n\t */\n\tconstructor( document, name, attributes, children ) {\n\t\tsuper( document, name, attributes, children );\n\n\t\t/**\n\t\t * Returns `null` because filler is not needed for UIElements.\n\t\t *\n\t\t * @method #getFillerOffset\n\t\t * @returns {null} Always returns null.\n\t\t */\n\t\tthis.getFillerOffset = getFillerOffset;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\tuiElement.is( 'uiElement' ); // -> true\n\t *\t\tuiElement.is( 'element' ); // -> true\n\t *\t\tuiElement.is( 'node' ); // -> true\n\t *\t\tuiElement.is( 'view:uiElement' ); // -> true\n\t *\t\tuiElement.is( 'view:element' ); // -> true\n\t *\t\tuiElement.is( 'view:node' ); // -> true\n\t *\n\t *\t\tuiElement.is( 'model:element' ); // -> false\n\t *\t\tuiElement.is( 'documentFragment' ); // -> false\n\t *\n\t * Assuming that the object being checked is an ui element, you can also check its\n\t * {@link module:engine/view/uielement~UIElement#name name}:\n\t *\n\t *\t\tuiElement.is( 'element', 'span' ); // -> true if this is a span ui element\n\t *\t\tuiElement.is( 'uiElement', 'span' ); // -> same as above\n\t *\t\ttext.is( 'element', 'span' ); -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'uiElement' || type === 'view:uiElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'element' || type === 'view:element' ||\n\t\t\t\ttype === 'node' || type === 'view:node';\n\t\t} else {\n\t\t\treturn name === this.name && (\n\t\t\t\ttype === 'uiElement' || type === 'view:uiElement' ||\n\t\t\t\ttype === 'element' || type === 'view:element'\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Overrides {@link module:engine/view/element~Element#_insertChild} method.\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-uielement-cannot-add` to prevent adding any child nodes\n\t * to UIElement.\n\t *\n\t * @protected\n\t */\n\t_insertChild( index, nodes ) {\n\t\tif ( nodes && ( nodes instanceof Node || Array.from( nodes ).length > 0 ) ) {\n\t\t\t/**\n\t\t\t * Cannot add children to {@link module:engine/view/uielement~UIElement}.\n\t\t\t *\n\t\t\t * @error view-uielement-cannot-add\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-uielement-cannot-add', this );\n\t\t}\n\t}\n\n\t/**\n\t * Renders this {@link module:engine/view/uielement~UIElement} to DOM. This method is called by\n\t * {@link module:engine/view/domconverter~DomConverter}.\n\t * Do not use inheritance to create custom rendering method, replace `render()` method instead:\n\t *\n\t *\t\tconst myUIElement = downcastWriter.createUIElement( 'span' );\n\t *\t\tmyUIElement.render = function( domDocument ) {\n\t *\t\t\tconst domElement = this.toDomElement( domDocument );\n\t *\t\t\tdomElement.innerHTML = '<b>this is ui element</b>';\n\t *\n\t *\t\t\treturn domElement;\n\t *\t\t};\n\t *\n\t * If changes in your UI element should trigger some editor UI update you should call\n\t * the {@link module:core/editor/editorui~EditorUI#update `editor.ui.update()`} method\n\t * after rendering your UI element.\n\t *\n\t * @param {Document} domDocument\n\t * @returns {HTMLElement}\n\t */\n\trender( domDocument ) {\n\t\treturn this.toDomElement( domDocument );\n\t}\n\n\t/**\n\t * Creates DOM element based on this view UIElement.\n\t * Note that each time this method is called new DOM element is created.\n\t *\n\t * @param {Document} domDocument\n\t * @returns {HTMLElement}\n\t */\n\ttoDomElement( domDocument ) {\n\t\tconst domElement = domDocument.createElement( this.name );\n\n\t\tfor ( const key of this.getAttributeKeys() ) {\n\t\t\tdomElement.setAttribute( key, this.getAttribute( key ) );\n\t\t}\n\n\t\treturn domElement;\n\t}\n}\n\n/**\n * This function injects UI element handling to the given {@link module:engine/view/document~Document document}.\n *\n * A callback is added to {@link module:engine/view/document~Document#event:keydown document keydown event}.\n * The callback handles the situation when right arrow key is pressed and selection is collapsed before a UI element.\n * Without this handler, it would be impossible to \"jump over\" UI element using right arrow key.\n *\n * @param {module:engine/view/view~View} view View controller to which the quirks handling will be injected.\n */\nexport function injectUiElementHandling( view ) {\n\tview.document.on( 'keydown', ( evt, data ) => jumpOverUiElement( evt, data, view.domConverter ) );\n}\n\n// Returns `null` because block filler is not needed for UIElements.\n//\n// @returns {null}\nfunction getFillerOffset() {\n\treturn null;\n}\n\n// Selection cannot be placed in a `UIElement`. Whenever it is placed there, it is moved before it. This\n// causes a situation when it is impossible to jump over `UIElement` using right arrow key, because the selection\n// ends up in ui element (in DOM) and is moved back to the left. This handler fixes this situation.\nfunction jumpOverUiElement( evt, data, domConverter ) {\n\tif ( data.keyCode == keyCodes.arrowright ) {\n\t\tconst domSelection = data.domTarget.ownerDocument.defaultView.getSelection();\n\t\tconst domSelectionCollapsed = domSelection.rangeCount == 1 && domSelection.getRangeAt( 0 ).collapsed;\n\n\t\t// Jump over UI element if selection is collapsed or shift key is pressed. These are the cases when selection would extend.\n\t\tif ( domSelectionCollapsed || data.shiftKey ) {\n\t\t\tconst domParent = domSelection.focusNode;\n\t\t\tconst domOffset = domSelection.focusOffset;\n\n\t\t\tconst viewPosition = domConverter.domPositionToView( domParent, domOffset );\n\n\t\t\t// In case if dom element is not converted to view or is not mapped or something. Happens for example in some tests.\n\t\t\tif ( viewPosition === null ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Skip all following ui elements.\n\t\t\tlet jumpedOverAnyUiElement = false;\n\n\t\t\tconst nextViewPosition = viewPosition.getLastMatchingPosition( value => {\n\t\t\t\tif ( value.item.is( 'uiElement' ) ) {\n\t\t\t\t\t// Remember that there was at least one ui element.\n\t\t\t\t\tjumpedOverAnyUiElement = true;\n\t\t\t\t}\n\n\t\t\t\t// Jump over ui elements, jump over empty attribute elements, move up from inside of attribute element.\n\t\t\t\tif ( value.item.is( 'uiElement' ) || value.item.is( 'attributeElement' ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// Don't jump over text or don't get out of container element.\n\t\t\t\treturn false;\n\t\t\t} );\n\n\t\t\t// If anything has been skipped, fix position.\n\t\t\t// This `if` could be possibly omitted but maybe it is better not to mess with DOM selection if not needed.\n\t\t\tif ( jumpedOverAnyUiElement ) {\n\t\t\t\tconst newDomPosition = domConverter.viewPositionToDom( nextViewPosition );\n\n\t\t\t\tif ( domSelectionCollapsed ) {\n\t\t\t\t\t// Selection was collapsed, so collapse it at further position.\n\t\t\t\t\tdomSelection.collapse( newDomPosition.parent, newDomPosition.offset );\n\t\t\t\t} else {\n\t\t\t\t\t// Selection was not collapse, so extend it instead of collapsing.\n\t\t\t\t\tdomSelection.extend( newDomPosition.parent, newDomPosition.offset );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/rawelement\n */\n\nimport Element from './element';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Node from './node';\n\n/**\n * The raw element class.\n *\n * The raw elements work as data containers (\"wrappers\", \"sandboxes\") but their children are not managed or\n * even recognized by the editor. This encapsulation allows integrations to maintain custom DOM structures\n * in the editor content without, for instance, worrying about compatibility with other editor features.\n * Raw elements are a perfect tool for integration with external frameworks and data sources.\n *\n * Unlike {@link module:engine/view/uielement~UIElement UI elements}, raw elements act like real editor\n * content (similar to {@link module:engine/view/containerelement~ContainerElement} or\n * {@link module:engine/view/emptyelement~EmptyElement}), they are considered by the editor selection and\n * {@link module:widget/utils~toWidget they can work as widgets}.\n *\n * To create a new raw element, use the\n * {@link module:engine/view/downcastwriter~DowncastWriter#createRawElement `downcastWriter#createRawElement()`} method.\n *\n * @extends module:engine/view/element~Element\n */\nexport default class RawElement extends Element {\n\t/**\n\t * Creates a new instance of a raw element.\n\t *\n\t * Throws the `view-rawelement-cannot-add` {@link module:utils/ckeditorerror~CKEditorError CKEditorError} when the `children`\n\t * parameter is passed to inform that the usage of `RawElement` is incorrect (adding child nodes to `RawElement` is forbidden).\n\t *\n\t * @see module:engine/view/downcastwriter~DowncastWriter#createRawElement\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document instance to which this element belongs.\n\t * @param {String} name A node name.\n\t * @param {Object|Iterable} [attrs] The collection of attributes.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into the created element.\n\t */\n\tconstructor( document, name, attrs, children ) {\n\t\tsuper( document, name, attrs, children );\n\n\t\t/**\n\t\t * Returns `null` because filler is not needed for raw elements.\n\t\t *\n\t\t * @method #getFillerOffset\n\t\t * @returns {null} Always returns null.\n\t\t */\n\t\tthis.getFillerOffset = getFillerOffset;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type or name.\n\t *\n\t *\t\trawElement.is( 'rawElement' ); // -> true\n\t *\t\trawElement.is( 'element' ); // -> true\n\t *\t\trawElement.is( 'node' ); // -> true\n\t *\t\trawElement.is( 'view:rawElement' ); // -> true\n\t *\t\trawElement.is( 'view:element' ); // -> true\n\t *\t\trawElement.is( 'view:node' ); // -> true\n\t *\n\t *\t\trawElement.is( 'model:element' ); // -> false\n\t *\t\trawElement.is( 'documentFragment' ); // -> false\n\t *\n\t * Assuming that the object being checked is a raw element, you can also check its\n\t * {@link module:engine/view/rawelement~RawElement#name name}:\n\t *\n\t *\t\trawElement.is( 'img' ); // -> true if this is an img element\n\t *\t\trawElement.is( 'rawElement', 'img' ); // -> same as above\n\t *\t\ttext.is( 'img' ); -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type The type to check when the `name` parameter is present.\n\t * Otherwise, it acts like the `name` parameter.\n\t * @param {String} [name] The element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'rawElement' || type === 'view:rawElement' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === this.name || type === 'view:' + this.name ||\n\t\t\t\ttype === 'element' || type === 'view:element' ||\n\t\t\t\ttype === 'node' || type === 'view:node';\n\t\t} else {\n\t\t\treturn name === this.name && (\n\t\t\t\ttype === 'rawElement' || type === 'view:rawElement' ||\n\t\t\t\ttype === 'element' || type === 'view:element'\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Overrides the {@link module:engine/view/element~Element#_insertChild} method.\n\t * Throws the `view-rawelement-cannot-add` {@link module:utils/ckeditorerror~CKEditorError CKEditorError} to prevent\n\t * adding any child nodes to a raw element.\n\t *\n\t * @protected\n\t */\n\t_insertChild( index, nodes ) {\n\t\tif ( nodes && ( nodes instanceof Node || Array.from( nodes ).length > 0 ) ) {\n\t\t\t/**\n\t\t\t * Cannot add children to a {@link module:engine/view/rawelement~RawElement} instance.\n\t\t\t *\n\t\t\t * @error view-rawelement-cannot-add\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-rawelement-cannot-add',\n\t\t\t\t[ this, nodes ]\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * This allows rendering the children of a {@link module:engine/view/rawelement~RawElement} on the DOM level.\n\t * This method is called by the {@link module:engine/view/domconverter~DomConverter} with the raw DOM element\n\t * passed as an argument, leaving the number and shape of the children up to the integrator.\n\t *\n\t * This method **must be defined** for the raw element to work:\n\t *\n\t *\t\tconst myRawElement = downcastWriter.createRawElement( 'div' );\n\t *\n\t *\t\tmyRawElement.render = function( domElement ) {\n\t *\t\t\tdomElement.innerHTML = '<b>This is the raw content of myRawElement.</b>';\n\t *\t\t};\n\t *\n\t * @method #render\n\t * @param {HTMLElement} domElement The native DOM element representing the raw view element.\n\t */\n}\n\n// Returns `null` because block filler is not needed for raw elements.\n//\n// @returns {null}\nfunction getFillerOffset() {\n\treturn null;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/documentfragment\n */\n\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\n\n/**\n * Document fragment.\n *\n * To create a new document fragment instance use the\n * {@link module:engine/view/upcastwriter~UpcastWriter#createDocumentFragment `UpcastWriter#createDocumentFragment()`}\n * method.\n */\nexport default class DocumentFragment {\n\t/**\n\t * Creates new DocumentFragment instance.\n\t *\n\t * @protected\n\t * @param {module:engine/view/document~Document} document The document to which this document fragment belongs.\n\t * @param {module:engine/view/node~Node|Iterable.<module:engine/view/node~Node>} [children]\n\t * A list of nodes to be inserted into the created document fragment.\n\t */\n\tconstructor( document, children ) {\n\t\t/**\n\t\t * The document to which this document fragment belongs.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/document~Document}\n\t\t */\n\t\tthis.document = document;\n\n\t\t/**\n\t\t * Array of child nodes.\n\t\t *\n\t\t * @protected\n\t\t * @member {Array.<module:engine/view/element~Element>} module:engine/view/documentfragment~DocumentFragment#_children\n\t\t */\n\t\tthis._children = [];\n\n\t\tif ( children ) {\n\t\t\tthis._insertChild( 0, children );\n\t\t}\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over nodes added to this document fragment.\n\t *\n\t * @returns {Iterable.<module:engine/view/node~Node>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._children[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Number of child nodes in this document fragment.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget childCount() {\n\t\treturn this._children.length;\n\t}\n\n\t/**\n\t * Is `true` if there are no nodes inside this document fragment, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isEmpty() {\n\t\treturn this.childCount === 0;\n\t}\n\n\t/**\n\t * Artificial root of `DocumentFragment`. Returns itself. Added for compatibility reasons.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this;\n\t}\n\n\t/**\n\t * Artificial parent of `DocumentFragment`. Returns `null`. Added for compatibility reasons.\n\t *\n\t * @readonly\n\t * @type {null}\n\t */\n\tget parent() {\n\t\treturn null;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\tdocFrag.is( 'documentFragment' ); // -> true\n\t *\t\tdocFrag.is( 'view:documentFragment' ); // -> true\n\t *\n\t *\t\tdocFrag.is( 'model:documentFragment' ); // -> false\n\t *\t\tdocFrag.is( 'element' ); // -> false\n\t *\t\tdocFrag.is( 'node' ); // -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'documentFragment' || type === 'view:documentFragment';\n\t}\n\n\t/**\n\t * {@link module:engine/view/documentfragment~DocumentFragment#_insertChild Insert} a child node or a list of child nodes at the end\n\t * and sets the parent of these nodes to this fragment.\n\t *\n\t * @param {module:engine/view/item~Item|Iterable.<module:engine/view/item~Item>} items Items to be inserted.\n\t * @returns {Number} Number of appended nodes.\n\t */\n\t_appendChild( items ) {\n\t\treturn this._insertChild( this.childCount, items );\n\t}\n\n\t/**\n\t * Gets child at the given index.\n\t *\n\t * @param {Number} index Index of child.\n\t * @returns {module:engine/view/node~Node} Child node.\n\t */\n\tgetChild( index ) {\n\t\treturn this._children[ index ];\n\t}\n\n\t/**\n\t * Gets index of the given child node. Returns `-1` if child node is not found.\n\t *\n\t * @param {module:engine/view/node~Node} node Child node.\n\t * @returns {Number} Index of the child node.\n\t */\n\tgetChildIndex( node ) {\n\t\treturn this._children.indexOf( node );\n\t}\n\n\t/**\n\t * Gets child nodes iterator.\n\t *\n\t * @returns {Iterable.<module:engine/view/node~Node>} Child nodes iterator.\n\t */\n\tgetChildren() {\n\t\treturn this._children[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Inserts a child node or a list of child nodes on the given index and sets the parent of these nodes to\n\t * this fragment.\n\t *\n\t * @param {Number} index Position where nodes should be inserted.\n\t * @param {module:engine/view/item~Item|Iterable.<module:engine/view/item~Item>} items Items to be inserted.\n\t * @returns {Number} Number of inserted nodes.\n\t */\n\t_insertChild( index, items ) {\n\t\tthis._fireChange( 'children', this );\n\t\tlet count = 0;\n\n\t\tconst nodes = normalize( this.document, items );\n\n\t\tfor ( const node of nodes ) {\n\t\t\t// If node that is being added to this element is already inside another element, first remove it from the old parent.\n\t\t\tif ( node.parent !== null ) {\n\t\t\t\tnode._remove();\n\t\t\t}\n\n\t\t\tnode.parent = this;\n\n\t\t\tthis._children.splice( index, 0, node );\n\t\t\tindex++;\n\t\t\tcount++;\n\t\t}\n\n\t\treturn count;\n\t}\n\n\t/**\n\t * Removes number of child nodes starting at the given index and set the parent of these nodes to `null`.\n\t *\n\t * @param {Number} index Number of the first node to remove.\n\t * @param {Number} [howMany=1] Number of nodes to remove.\n\t * @returns {Array.<module:engine/view/node~Node>} The array of removed nodes.\n\t */\n\t_removeChildren( index, howMany = 1 ) {\n\t\tthis._fireChange( 'children', this );\n\n\t\tfor ( let i = index; i < index + howMany; i++ ) {\n\t\t\tthis._children[ i ].parent = null;\n\t\t}\n\n\t\treturn this._children.splice( index, howMany );\n\t}\n\n\t/**\n\t * Fires `change` event with given type of the change.\n\t *\n\t * @private\n\t * @param {module:engine/view/document~ChangeType} type Type of the change.\n\t * @param {module:engine/view/node~Node} node Changed node.\n\t * @fires module:engine/view/node~Node#change\n\t */\n\t_fireChange( type, node ) {\n\t\tthis.fire( 'change:' + type, node );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // printTree() {\n\t// @if CK_DEBUG_ENGINE //\tlet string = 'ViewDocumentFragment: [';\n\n\t// @if CK_DEBUG_ENGINE //\tfor ( const child of this.getChildren() ) {\n\t// @if CK_DEBUG_ENGINE //\t\tif ( child.is( '$text' ) ) {\n\t// @if CK_DEBUG_ENGINE //\t\t\tstring += '\\n' + '\\t'.repeat( 1 ) + child.data;\n\t// @if CK_DEBUG_ENGINE //\t\t} else {\n\t// @if CK_DEBUG_ENGINE //\t\t\tstring += '\\n' + child.printTree( 1 );\n\t// @if CK_DEBUG_ENGINE //\t\t}\n\t// @if CK_DEBUG_ENGINE //\t}\n\n\t// @if CK_DEBUG_ENGINE //\tstring += '\\n]';\n\n\t// @if CK_DEBUG_ENGINE //\treturn string;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logTree() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( this.printTree() );\n\t// @if CK_DEBUG_ENGINE // }\n}\n\nmix( DocumentFragment, EmitterMixin );\n\n// Converts strings to Text and non-iterables to arrays.\n//\n// @param {String|module:engine/view/item~Item|Iterable.<String|module:engine/view/item~Item>}\n// @returns {Iterable.<module:engine/view/node~Node>}\nfunction normalize( document, nodes ) {\n\t// Separate condition because string is iterable.\n\tif ( typeof nodes == 'string' ) {\n\t\treturn [ new Text( document, nodes ) ];\n\t}\n\n\tif ( !isIterable( nodes ) ) {\n\t\tnodes = [ nodes ];\n\t}\n\n\t// Array.from to enable .map() on non-arrays.\n\treturn Array.from( nodes )\n\t\t.map( node => {\n\t\t\tif ( typeof node == 'string' ) {\n\t\t\t\treturn new Text( document, node );\n\t\t\t}\n\n\t\t\tif ( node instanceof TextProxy ) {\n\t\t\t\treturn new Text( document, node.data );\n\t\t\t}\n\n\t\t\treturn node;\n\t\t} );\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module module:engine/view/downcastwriter\n */\n\nimport Position from './position';\nimport Range from './range';\nimport Selection from './selection';\nimport ContainerElement from './containerelement';\nimport AttributeElement from './attributeelement';\nimport EmptyElement from './emptyelement';\nimport UIElement from './uielement';\nimport RawElement from './rawelement';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport DocumentFragment from './documentfragment';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\nimport Text from './text';\nimport EditableElement from './editableelement';\nimport { isPlainObject } from 'lodash-es';\n\n/**\n * View downcast writer.\n *\n * It provides a set of methods used to manipulate view nodes.\n *\n * Do not create an instance of this writer manually. To modify a view structure, use\n * the {@link module:engine/view/view~View#change `View#change()`} block.\n *\n * The `DowncastWriter` is designed to work with semantic views which are the views that were/are being downcasted from the model.\n * To work with ordinary views (e.g. parsed from a pasted content) use the\n * {@link module:engine/view/upcastwriter~UpcastWriter upcast writer}.\n *\n * Read more about changing the view in the {@glink framework/guides/architecture/editing-engine#changing-the-view Changing the view}\n * section of the {@glink framework/guides/architecture/editing-engine Editing engine architecture} guide.\n */\nexport default class DowncastWriter {\n\t/**\n\t * @param {module:engine/view/document~Document} document The view document instance.\n\t */\n\tconstructor( document ) {\n\t\t/**\n\t\t * The view document instance in which this writer operates.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/view/document~Document}\n\t\t */\n\t\tthis.document = document;\n\n\t\t/**\n\t\t * Holds references to the attribute groups that share the same {@link module:engine/view/attributeelement~AttributeElement#id id}.\n\t\t * The keys are `id`s, the values are `Set`s holding {@link module:engine/view/attributeelement~AttributeElement}s.\n\t\t *\n\t\t * @private\n\t\t * @type {Map.<String,Set>}\n\t\t */\n\t\tthis._cloneGroups = new Map();\n\t}\n\n\t/**\n\t * Sets {@link module:engine/view/documentselection~DocumentSelection selection's} ranges and direction to the\n\t * specified location based on the given {@link module:engine/view/selection~Selectable selectable}.\n\t *\n\t * Usage:\n\t *\n\t *\t\t// Sets selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\twriter.setSelection( range );\n\t *\n\t *\t\t// Sets backward selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\twriter.setSelection( range );\n\t *\n\t *\t\t// Sets selection to given ranges.\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( start2, end2 ) ];\n\t *\t\twriter.setSelection( range );\n\t *\n\t *\t\t// Sets selection to the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\twriter.setSelection( otherSelection );\n\t *\n\t * \t\t// Sets collapsed selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\twriter.setSelection( position );\n\t *\n\t * \t\t// Sets collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = writer.createContainerElement( 'p' );\n\t *\t\twriter.setSelection( paragraph, offset );\n\t *\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n \t * that element and ends after the last child of that element.\n\t *\n\t * \t\twriter.setSelection( paragraph, 'in' );\n\t *\n\t * Creates a range on the {@link module:engine/view/item~Item item} which starts before the item and ends just after the item.\n\t *\n\t *\t\twriter.setSelection( paragraph, 'on' );\n\t *\n\t * \t\t// Removes all ranges.\n\t *\t\twriter.setSelection( null );\n\t *\n\t * `DowncastWriter#setSelection()` allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Sets selection as backward.\n\t *\t\twriter.setSelection( range, { backward: true } );\n\t *\n\t *\t\t// Sets selection as fake.\n\t *\t\t// Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * \t\t// This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * \t\t// represented in other way, for example by applying proper CSS class.\n\t *\t\twriter.setSelection( range, { fake: true } );\n\t *\n\t * \t\t// Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * \t\t// (and be  properly handled by screen readers).\n\t *\t\twriter.setSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t */\n\tsetSelection( selectable, placeOrOffset, options ) {\n\t\tthis.document.selection._setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Moves {@link module:engine/view/documentselection~DocumentSelection#focus selection's focus} to the specified location.\n\t *\n\t * The location can be specified in the same form as {@link module:engine/view/view~View#createPositionAt view.createPositionAt()}\n\t * parameters.\n\t *\n\t * @param {module:engine/view/item~Item|module:engine/view/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tsetSelectionFocus( itemOrPosition, offset ) {\n\t\tthis.document.selection._setFocus( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/text~Text text node}.\n\t *\n\t *\t\twriter.createText( 'foo' );\n\t *\n\t * @param {String} data The text's data.\n\t * @returns {module:engine/view/text~Text} The created text node.\n\t */\n\tcreateText( data ) {\n\t\treturn new Text( this.document, data );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/attributeelement~AttributeElement}.\n\t *\n\t *\t\twriter.createAttributeElement( 'strong' );\n\t *\t\twriter.createAttributeElement( 'a', { href: 'foo.bar' } );\n\t *\n\t *\t\t// Make `<a>` element contain other attributes element so the `<a>` element is not broken.\n\t *\t\twriter.createAttributeElement( 'a', { href: 'foo.bar' }, { priority: 5 } );\n\t *\n\t *\t\t// Set `id` of a marker element so it is not joined or merged with \"normal\" elements.\n\t *\t\twriter.createAttributeElement( 'span', { class: 'my-marker' }, { id: 'marker:my' } );\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Element's attributes.\n\t * @param {Object} [options] Element's options.\n\t * @param {Number} [options.priority] Element's {@link module:engine/view/attributeelement~AttributeElement#priority priority}.\n\t * @param {Number|String} [options.id] Element's {@link module:engine/view/attributeelement~AttributeElement#id id}.\n\t * @returns {module:engine/view/attributeelement~AttributeElement} Created element.\n\t */\n\tcreateAttributeElement( name, attributes, options = {} ) {\n\t\tconst attributeElement = new AttributeElement( this.document, name, attributes );\n\n\t\tif ( options.priority ) {\n\t\t\tattributeElement._priority = options.priority;\n\t\t}\n\n\t\tif ( options.id ) {\n\t\t\tattributeElement._id = options.id;\n\t\t}\n\n\t\treturn attributeElement;\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/containerelement~ContainerElement}.\n\t *\n\t *\t\twriter.createContainerElement( 'p' );\n\t *\n\t *\t\t// Create element with custom attributes.\n\t *\t\twriter.createContainerElement( 'div', { id: 'foo-bar', 'data-baz': '123' } );\n\t *\n\t *\t\t// Create element with custom styles.\n\t *\t\twriter.createContainerElement( 'p', { style: 'font-weight: bold; padding-bottom: 10px' } );\n\t *\n\t *\t\t// Create element with custom classes.\n\t *\t\twriter.createContainerElement( 'p', { class: 'foo bar baz' } );\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Elements attributes.\n\t * @returns {module:engine/view/containerelement~ContainerElement} Created element.\n\t */\n\tcreateContainerElement( name, attributes ) {\n\t\treturn new ContainerElement( this.document, name, attributes );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/editableelement~EditableElement}.\n\t *\n\t *\t\twriter.createEditableElement( 'div' );\n\t *\t\twriter.createEditableElement( 'div', { id: 'foo-1234' } );\n\t *\n\t * Note: The editable element is to be used in the editing pipeline. Usually, together with\n\t * {@link module:widget/utils~toWidgetEditable `toWidgetEditable()`}.\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Elements attributes.\n\t * @returns {module:engine/view/editableelement~EditableElement} Created element.\n\t */\n\tcreateEditableElement( name, attributes ) {\n\t\tconst editableElement = new EditableElement( this.document, name, attributes );\n\t\teditableElement._document = this.document;\n\n\t\treturn editableElement;\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/emptyelement~EmptyElement}.\n\t *\n\t *\t\twriter.createEmptyElement( 'img' );\n\t *\t\twriter.createEmptyElement( 'img', { id: 'foo-1234' } );\n\t *\n\t * @param {String} name Name of the element.\n\t * @param {Object} [attributes] Elements attributes.\n\t * @returns {module:engine/view/emptyelement~EmptyElement} Created element.\n\t */\n\tcreateEmptyElement( name, attributes ) {\n\t\treturn new EmptyElement( this.document, name, attributes );\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/uielement~UIElement}.\n\t *\n\t *\t\twriter.createUIElement( 'span' );\n\t *\t\twriter.createUIElement( 'span', { id: 'foo-1234' } );\n\t *\n\t * A custom render function can be provided as the third parameter:\n\t *\n\t *\t\twriter.createUIElement( 'span', null, function( domDocument ) {\n\t *\t\t\tconst domElement = this.toDomElement( domDocument );\n\t *\t\t\tdomElement.innerHTML = '<b>this is ui element</b>';\n\t *\n\t *\t\t\treturn domElement;\n\t *\t\t} );\n\t *\n\t * Unlike {@link #createRawElement raw elements}, UI elements are by no means editor content, for instance,\n\t * they are ignored by the editor selection system.\n\t *\n\t * You should not use UI elements as data containers. Check out {@link #createRawElement} instead.\n\t *\n\t * @param {String} name The name of the element.\n\t * @param {Object} [attributes] Element attributes.\n\t * @param {Function} [renderFunction] A custom render function.\n\t * @returns {module:engine/view/uielement~UIElement} The created element.\n\t */\n\tcreateUIElement( name, attributes, renderFunction ) {\n\t\tconst uiElement = new UIElement( this.document, name, attributes );\n\n\t\tif ( renderFunction ) {\n\t\t\tuiElement.render = renderFunction;\n\t\t}\n\n\t\treturn uiElement;\n\t}\n\n\t/**\n\t * Creates a new {@link module:engine/view/rawelement~RawElement}.\n\t *\n\t *\t\twriter.createRawElement( 'span', { id: 'foo-1234' }, function( domElement ) {\n\t *\t\t\tdomElement.innerHTML = '<b>This is the raw content of the raw element.</b>';\n\t *\t\t} );\n\t *\n\t * Raw elements work as data containers (\"wrappers\", \"sandboxes\") but their children are not managed or\n\t * even recognized by the editor. This encapsulation allows integrations to maintain custom DOM structures\n\t * in the editor content without, for instance, worrying about compatibility with other editor features.\n\t * Raw elements are a perfect tool for integration with external frameworks and data sources.\n\t *\n\t * Unlike {@link #createUIElement UI elements}, raw elements act like \"real\" editor content (similar to\n\t * {@link module:engine/view/containerelement~ContainerElement} or {@link module:engine/view/emptyelement~EmptyElement}),\n\t * and they are considered by the editor selection.\n\t *\n\t * You should not use raw elements to render the UI in the editor content. Check out {@link #createUIElement `#createUIElement()`}\n\t * instead.\n\t *\n\t * @param {String} name The name of the element.\n\t * @param {Object} [attributes] Element attributes.\n\t * @param {Function} [renderFunction] A custom render function.\n\t * @returns {module:engine/view/rawelement~RawElement} The created element.\n\t */\n\tcreateRawElement( name, attributes, renderFunction ) {\n\t\tconst rawElement = new RawElement( this.document, name, attributes );\n\n\t\trawElement.render = renderFunction || ( () => {} );\n\n\t\treturn rawElement;\n\t}\n\n\t/**\n\t * Adds or overwrites the element's attribute with a specified key and value.\n\t *\n\t *\t\twriter.setAttribute( 'href', 'http://ckeditor.com', linkElement );\n\t *\n\t * @param {String} key The attribute key.\n\t * @param {String} value The attribute value.\n\t * @param {module:engine/view/element~Element} element\n\t */\n\tsetAttribute( key, value, element ) {\n\t\telement._setAttribute( key, value );\n\t}\n\n\t/**\n\t * Removes attribute from the element.\n\t *\n\t *\t\twriter.removeAttribute( 'href', linkElement );\n\t *\n\t * @param {String} key Attribute key.\n\t * @param {module:engine/view/element~Element} element\n\t */\n\tremoveAttribute( key, element ) {\n\t\telement._removeAttribute( key );\n\t}\n\n\t/**\n\t * Adds specified class to the element.\n\t *\n\t *\t\twriter.addClass( 'foo', linkElement );\n\t *\t\twriter.addClass( [ 'foo', 'bar' ], linkElement );\n\t *\n\t * @param {Array.<String>|String} className\n\t * @param {module:engine/view/element~Element} element\n\t */\n\taddClass( className, element ) {\n\t\telement._addClass( className );\n\t}\n\n\t/**\n\t * Removes specified class from the element.\n\t *\n\t *\t\twriter.removeClass( 'foo', linkElement );\n\t *\t\twriter.removeClass( [ 'foo', 'bar' ], linkElement );\n\t *\n\t * @param {Array.<String>|String} className\n\t * @param {module:engine/view/element~Element} element\n\t */\n\tremoveClass( className, element ) {\n\t\telement._removeClass( className );\n\t}\n\n\t/**\n\t * Adds style to the element.\n\t *\n\t *\t\twriter.setStyle( 'color', 'red', element );\n\t *\t\twriter.setStyle( {\n\t *\t\t\tcolor: 'red',\n\t *\t\t\tposition: 'fixed'\n\t *\t\t}, element );\n\t *\n\t * **Note**: The passed style can be normalized if\n\t * {@link module:engine/controller/datacontroller~DataController#addStyleProcessorRules a particular style processor rule is enabled}.\n\t * See {@link module:engine/view/stylesmap~StylesMap#set `StylesMap#set()`} for details.\n\t *\n\t * @param {String|Object} property Property name or object with key - value pairs.\n\t * @param {String} [value] Value to set. This parameter is ignored if object is provided as the first parameter.\n\t * @param {module:engine/view/element~Element} element Element to set styles on.\n\t */\n\tsetStyle( property, value, element ) {\n\t\tif ( isPlainObject( property ) && element === undefined ) {\n\t\t\telement = value;\n\t\t}\n\n\t\telement._setStyle( property, value );\n\t}\n\n\t/**\n\t * Removes specified style from the element.\n\t *\n\t *\t\twriter.removeStyle( 'color', element ); // Removes 'color' style.\n\t *\t\twriter.removeStyle( [ 'color', 'border-top' ], element ); // Removes both 'color' and 'border-top' styles.\n\t *\n\t * **Note**: This method can work with normalized style names if\n\t * {@link module:engine/controller/datacontroller~DataController#addStyleProcessorRules a particular style processor rule is enabled}.\n\t * See {@link module:engine/view/stylesmap~StylesMap#remove `StylesMap#remove()`} for details.\n\t *\n\t * @param {Array.<String>|String} property\n\t * @param {module:engine/view/element~Element} element\n\t */\n\tremoveStyle( property, element ) {\n\t\telement._removeStyle( property );\n\t}\n\n\t/**\n\t * Sets a custom property on element. Unlike attributes, custom properties are not rendered to the DOM,\n\t * so they can be used to add special data to elements.\n\t *\n\t * @param {String|Symbol} key\n\t * @param {*} value\n\t * @param {module:engine/view/element~Element} element\n\t */\n\tsetCustomProperty( key, value, element ) {\n\t\telement._setCustomProperty( key, value );\n\t}\n\n\t/**\n\t * Removes a custom property stored under the given key.\n\t *\n\t * @param {String|Symbol} key\n\t * @param {module:engine/view/element~Element} element\n\t * @returns {Boolean} Returns true if property was removed.\n\t */\n\tremoveCustomProperty( key, element ) {\n\t\treturn element._removeCustomProperty( key );\n\t}\n\n\t/**\n\t * Breaks attribute elements at the provided position or at the boundaries of a provided range. It breaks attribute elements\n\t * up to their first ancestor that is a container element.\n\t *\n\t * In following examples `<p>` is a container, `<b>` and `<u>` are attribute elements:\n\t *\n\t *\t\t<p>foo<b><u>bar{}</u></b></p> -> <p>foo<b><u>bar</u></b>[]</p>\n\t *\t\t<p>foo<b><u>{}bar</u></b></p> -> <p>foo{}<b><u>bar</u></b></p>\n\t *\t\t<p>foo<b><u>b{}ar</u></b></p> -> <p>foo<b><u>b</u></b>[]<b><u>ar</u></b></p>\n\t *\t\t<p><b>fo{o</b><u>ba}r</u></p> -> <p><b>fo</b><b>o</b><u>ba</u><u>r</u></b></p>\n\t *\n\t * **Note:** {@link module:engine/view/documentfragment~DocumentFragment DocumentFragment} is treated like a container.\n\t *\n\t * **Note:** The difference between {@link module:engine/view/downcastwriter~DowncastWriter#breakAttributes breakAttributes()} and\n\t * {@link module:engine/view/downcastwriter~DowncastWriter#breakContainer breakContainer()} is that `breakAttributes()` breaks all\n\t * {@link module:engine/view/attributeelement~AttributeElement attribute elements} that are ancestors of a given `position`,\n\t * up to the first encountered {@link module:engine/view/containerelement~ContainerElement container element}.\n\t * `breakContainer()` assumes that a given `position` is directly in the container element and breaks that container element.\n\t *\n\t * Throws the `view-writer-invalid-range-container` {@link module:utils/ckeditorerror~CKEditorError CKEditorError}\n\t * when the {@link module:engine/view/range~Range#start start}\n\t * and {@link module:engine/view/range~Range#end end} positions of a passed range are not placed inside same parent container.\n\t *\n\t * Throws the `view-writer-cannot-break-empty-element` {@link module:utils/ckeditorerror~CKEditorError CKEditorError}\n\t * when trying to break attributes inside an {@link module:engine/view/emptyelement~EmptyElement EmptyElement}.\n\t *\n\t * Throws the `view-writer-cannot-break-ui-element` {@link module:utils/ckeditorerror~CKEditorError CKEditorError}\n\t * when trying to break attributes inside a {@link module:engine/view/uielement~UIElement UIElement}.\n\t *\n\t * @see module:engine/view/attributeelement~AttributeElement\n\t * @see module:engine/view/containerelement~ContainerElement\n\t * @see module:engine/view/downcastwriter~DowncastWriter#breakContainer\n\t * @param {module:engine/view/position~Position|module:engine/view/range~Range} positionOrRange The position where\n\t * to break attribute elements.\n\t * @returns {module:engine/view/position~Position|module:engine/view/range~Range} The new position or range, after breaking the\n\t * attribute elements.\n\t */\n\tbreakAttributes( positionOrRange ) {\n\t\tif ( positionOrRange instanceof Position ) {\n\t\t\treturn this._breakAttributes( positionOrRange );\n\t\t} else {\n\t\t\treturn this._breakAttributesRange( positionOrRange );\n\t\t}\n\t}\n\n\t/**\n\t * Breaks a {@link module:engine/view/containerelement~ContainerElement container view element} into two, at the given position.\n\t * The position has to be directly inside the container element and cannot be in the root. It does not break the conrainer view element\n\t * if the position is at the beginning or at the end of its parent element.\n\t *\n\t *\t\t<p>foo^bar</p> -> <p>foo</p><p>bar</p>\n\t *\t\t<div><p>foo</p>^<p>bar</p></div> -> <div><p>foo</p></div><div><p>bar</p></div>\n\t *\t\t<p>^foobar</p> -> ^<p>foobar</p>\n\t *\t\t<p>foobar^</p> -> <p>foobar</p>^\n\t *\n\t * **Note:** The difference between {@link module:engine/view/downcastwriter~DowncastWriter#breakAttributes breakAttributes()} and\n\t * {@link module:engine/view/downcastwriter~DowncastWriter#breakContainer breakContainer()} is that `breakAttributes()` breaks all\n\t * {@link module:engine/view/attributeelement~AttributeElement attribute elements} that are ancestors of a given `position`,\n\t * up to the first encountered {@link module:engine/view/containerelement~ContainerElement container element}.\n\t * `breakContainer()` assumes that the given `position` is directly in the container element and breaks that container element.\n\t *\n\t * @see module:engine/view/attributeelement~AttributeElement\n\t * @see module:engine/view/containerelement~ContainerElement\n\t * @see module:engine/view/downcastwriter~DowncastWriter#breakAttributes\n\t * @param {module:engine/view/position~Position} position The position where to break the element.\n\t * @returns {module:engine/view/position~Position} The position between broken elements. If an element has not been broken,\n\t * the returned position is placed either before or after it.\n\t */\n\tbreakContainer( position ) {\n\t\tconst element = position.parent;\n\n\t\tif ( !( element.is( 'containerElement' ) ) ) {\n\t\t\t/**\n\t\t\t * Trying to break an element which is not a container element.\n\t\t\t *\n\t\t\t * @error view-writer-break-non-container-element\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-break-non-container-element', this.document );\n\t\t}\n\n\t\tif ( !element.parent ) {\n\t\t\t/**\n\t\t\t * Trying to break root element.\n\t\t\t *\n\t\t\t * @error view-writer-break-root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-break-root', this.document );\n\t\t}\n\n\t\tif ( position.isAtStart ) {\n\t\t\treturn Position._createBefore( element );\n\t\t} else if ( !position.isAtEnd ) {\n\t\t\tconst newElement = element._clone( false );\n\n\t\t\tthis.insert( Position._createAfter( element ), newElement );\n\n\t\t\tconst sourceRange = new Range( position, Position._createAt( element, 'end' ) );\n\t\t\tconst targetPosition = new Position( newElement, 0 );\n\n\t\t\tthis.move( sourceRange, targetPosition );\n\t\t}\n\n\t\treturn Position._createAfter( element );\n\t}\n\n\t/**\n\t * Merges {@link module:engine/view/attributeelement~AttributeElement attribute elements}. It also merges text nodes if needed.\n\t * Only {@link module:engine/view/attributeelement~AttributeElement#isSimilar similar} attribute elements can be merged.\n\t *\n\t * In following examples `<p>` is a container and `<b>` is an attribute element:\n\t *\n\t *\t\t<p>foo[]bar</p> -> <p>foo{}bar</p>\n\t *\t\t<p><b>foo</b>[]<b>bar</b></p> -> <p><b>foo{}bar</b></p>\n\t *\t\t<p><b foo=\"bar\">a</b>[]<b foo=\"baz\">b</b></p> -> <p><b foo=\"bar\">a</b>[]<b foo=\"baz\">b</b></p>\n\t *\n\t * It will also take care about empty attributes when merging:\n\t *\n\t *\t\t<p><b>[]</b></p> -> <p>[]</p>\n\t *\t\t<p><b>foo</b><i>[]</i><b>bar</b></p> -> <p><b>foo{}bar</b></p>\n\t *\n\t * **Note:** Difference between {@link module:engine/view/downcastwriter~DowncastWriter#mergeAttributes mergeAttributes} and\n\t * {@link module:engine/view/downcastwriter~DowncastWriter#mergeContainers mergeContainers} is that `mergeAttributes` merges two\n\t * {@link module:engine/view/attributeelement~AttributeElement attribute elements} or {@link module:engine/view/text~Text text nodes}\n\t * while `mergeContainer` merges two {@link module:engine/view/containerelement~ContainerElement container elements}.\n\t *\n\t * @see module:engine/view/attributeelement~AttributeElement\n\t * @see module:engine/view/containerelement~ContainerElement\n\t * @see module:engine/view/downcastwriter~DowncastWriter#mergeContainers\n\t * @param {module:engine/view/position~Position} position Merge position.\n\t * @returns {module:engine/view/position~Position} Position after merge.\n\t */\n\tmergeAttributes( position ) {\n\t\tconst positionOffset = position.offset;\n\t\tconst positionParent = position.parent;\n\n\t\t// When inside text node - nothing to merge.\n\t\tif ( positionParent.is( '$text' ) ) {\n\t\t\treturn position;\n\t\t}\n\n\t\t// When inside empty attribute - remove it.\n\t\tif ( positionParent.is( 'attributeElement' ) && positionParent.childCount === 0 ) {\n\t\t\tconst parent = positionParent.parent;\n\t\t\tconst offset = positionParent.index;\n\n\t\t\tpositionParent._remove();\n\t\t\tthis._removeFromClonedElementsGroup( positionParent );\n\n\t\t\treturn this.mergeAttributes( new Position( parent, offset ) );\n\t\t}\n\n\t\tconst nodeBefore = positionParent.getChild( positionOffset - 1 );\n\t\tconst nodeAfter = positionParent.getChild( positionOffset );\n\n\t\t// Position should be placed between two nodes.\n\t\tif ( !nodeBefore || !nodeAfter ) {\n\t\t\treturn position;\n\t\t}\n\n\t\t// When position is between two text nodes.\n\t\tif ( nodeBefore.is( '$text' ) && nodeAfter.is( '$text' ) ) {\n\t\t\treturn mergeTextNodes( nodeBefore, nodeAfter );\n\t\t}\n\t\t// When position is between two same attribute elements.\n\t\telse if ( nodeBefore.is( 'attributeElement' ) && nodeAfter.is( 'attributeElement' ) && nodeBefore.isSimilar( nodeAfter ) ) {\n\t\t\t// Move all children nodes from node placed after selection and remove that node.\n\t\t\tconst count = nodeBefore.childCount;\n\t\t\tnodeBefore._appendChild( nodeAfter.getChildren() );\n\n\t\t\tnodeAfter._remove();\n\t\t\tthis._removeFromClonedElementsGroup( nodeAfter );\n\n\t\t\t// New position is located inside the first node, before new nodes.\n\t\t\t// Call this method recursively to merge again if needed.\n\t\t\treturn this.mergeAttributes( new Position( nodeBefore, count ) );\n\t\t}\n\n\t\treturn position;\n\t}\n\n\t/**\n\t * Merges two {@link module:engine/view/containerelement~ContainerElement container elements} that are before and after given position.\n\t * Precisely, the element after the position is removed and it's contents are moved to element before the position.\n\t *\n\t *\t\t<p>foo</p>^<p>bar</p> -> <p>foo^bar</p>\n\t *\t\t<div>foo</div>^<p>bar</p> -> <div>foo^bar</div>\n\t *\n\t * **Note:** Difference between {@link module:engine/view/downcastwriter~DowncastWriter#mergeAttributes mergeAttributes} and\n\t * {@link module:engine/view/downcastwriter~DowncastWriter#mergeContainers mergeContainers} is that `mergeAttributes` merges two\n\t * {@link module:engine/view/attributeelement~AttributeElement attribute elements} or {@link module:engine/view/text~Text text nodes}\n\t * while `mergeContainer` merges two {@link module:engine/view/containerelement~ContainerElement container elements}.\n\t *\n\t * @see module:engine/view/attributeelement~AttributeElement\n\t * @see module:engine/view/containerelement~ContainerElement\n\t * @see module:engine/view/downcastwriter~DowncastWriter#mergeAttributes\n\t * @param {module:engine/view/position~Position} position Merge position.\n\t * @returns {module:engine/view/position~Position} Position after merge.\n\t */\n\tmergeContainers( position ) {\n\t\tconst prev = position.nodeBefore;\n\t\tconst next = position.nodeAfter;\n\n\t\tif ( !prev || !next || !prev.is( 'containerElement' ) || !next.is( 'containerElement' ) ) {\n\t\t\t/**\n\t\t\t * Element before and after given position cannot be merged.\n\t\t\t *\n\t\t\t * @error view-writer-merge-containers-invalid-position\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-merge-containers-invalid-position', this.document );\n\t\t}\n\n\t\tconst lastChild = prev.getChild( prev.childCount - 1 );\n\t\tconst newPosition = lastChild instanceof Text ? Position._createAt( lastChild, 'end' ) : Position._createAt( prev, 'end' );\n\n\t\tthis.move( Range._createIn( next ), Position._createAt( prev, 'end' ) );\n\t\tthis.remove( Range._createOn( next ) );\n\n\t\treturn newPosition;\n\t}\n\n\t/**\n\t * Inserts a node or nodes at specified position. Takes care about breaking attributes before insertion\n\t * and merging them afterwards.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-insert-invalid-node` when nodes to insert\n\t * contains instances that are not {@link module:engine/view/text~Text Texts},\n\t * {@link module:engine/view/attributeelement~AttributeElement AttributeElements},\n\t * {@link module:engine/view/containerelement~ContainerElement ContainerElements},\n\t * {@link module:engine/view/emptyelement~EmptyElement EmptyElements},\n\t * {@link module:engine/view/rawelement~RawElement RawElements} or\n\t * {@link module:engine/view/uielement~UIElement UIElements}.\n\t *\n\t * @param {module:engine/view/position~Position} position Insertion position.\n\t * @param {module:engine/view/text~Text|module:engine/view/attributeelement~AttributeElement|\n\t * module:engine/view/containerelement~ContainerElement|module:engine/view/emptyelement~EmptyElement|\n\t * module:engine/view/rawelement~RawElement|module:engine/view/uielement~UIElement|\n\t * Iterable.<module:engine/view/text~Text|\n\t * module:engine/view/attributeelement~AttributeElement|module:engine/view/containerelement~ContainerElement|\n\t * module:engine/view/emptyelement~EmptyElement|module:engine/view/rawelement~RawElement|\n\t * module:engine/view/uielement~UIElement>} nodes Node or nodes to insert.\n\t * @returns {module:engine/view/range~Range} Range around inserted nodes.\n\t */\n\tinsert( position, nodes ) {\n\t\tnodes = isIterable( nodes ) ? [ ...nodes ] : [ nodes ];\n\n\t\t// Check if nodes to insert are instances of AttributeElements, ContainerElements, EmptyElements, UIElements or Text.\n\t\tvalidateNodesToInsert( nodes, this.document );\n\n\t\tconst container = getParentContainer( position );\n\n\t\tif ( !container ) {\n\t\t\t/**\n\t\t\t * Position's parent container cannot be found.\n\t\t\t *\n\t\t\t * @error view-writer-invalid-position-container\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-writer-invalid-position-container',\n\t\t\t\tthis.document\n\t\t\t);\n\t\t}\n\n\t\tconst insertionPosition = this._breakAttributes( position, true );\n\t\tconst length = container._insertChild( insertionPosition.offset, nodes );\n\n\t\tfor ( const node of nodes ) {\n\t\t\tthis._addToClonedElementsGroup( node );\n\t\t}\n\n\t\tconst endPosition = insertionPosition.getShiftedBy( length );\n\t\tconst start = this.mergeAttributes( insertionPosition );\n\n\t\t// When no nodes were inserted - return collapsed range.\n\t\tif ( length === 0 ) {\n\t\t\treturn new Range( start, start );\n\t\t} else {\n\t\t\t// If start position was merged - move end position.\n\t\t\tif ( !start.isEqual( insertionPosition ) ) {\n\t\t\t\tendPosition.offset--;\n\t\t\t}\n\n\t\t\tconst end = this.mergeAttributes( endPosition );\n\n\t\t\treturn new Range( start, end );\n\t\t}\n\t}\n\n\t/**\n\t * Removes provided range from the container.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-invalid-range-container` when\n\t * {@link module:engine/view/range~Range#start start} and {@link module:engine/view/range~Range#end end} positions are not placed inside\n\t * same parent container.\n\t *\n\t * @param {module:engine/view/range~Range|module:engine/view/item~Item} rangeOrItem Range to remove from container\n\t * or an {@link module:engine/view/item~Item item} to remove. If range is provided, after removing, it will be updated\n\t * to a collapsed range showing the new position.\n\t * @returns {module:engine/view/documentfragment~DocumentFragment} Document fragment containing removed nodes.\n\t */\n\tremove( rangeOrItem ) {\n\t\tconst range = rangeOrItem instanceof Range ? rangeOrItem : Range._createOn( rangeOrItem );\n\n\t\tvalidateRangeContainer( range, this.document );\n\n\t\t// If range is collapsed - nothing to remove.\n\t\tif ( range.isCollapsed ) {\n\t\t\treturn new DocumentFragment( this.document );\n\t\t}\n\n\t\t// Break attributes at range start and end.\n\t\tconst { start: breakStart, end: breakEnd } = this._breakAttributesRange( range, true );\n\t\tconst parentContainer = breakStart.parent;\n\n\t\tconst count = breakEnd.offset - breakStart.offset;\n\n\t\t// Remove nodes in range.\n\t\tconst removed = parentContainer._removeChildren( breakStart.offset, count );\n\n\t\tfor ( const node of removed ) {\n\t\t\tthis._removeFromClonedElementsGroup( node );\n\t\t}\n\n\t\t// Merge after removing.\n\t\tconst mergePosition = this.mergeAttributes( breakStart );\n\t\trange.start = mergePosition;\n\t\trange.end = mergePosition.clone();\n\n\t\t// Return removed nodes.\n\t\treturn new DocumentFragment( this.document, removed );\n\t}\n\n\t/**\n\t * Removes matching elements from given range.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-invalid-range-container` when\n\t * {@link module:engine/view/range~Range#start start} and {@link module:engine/view/range~Range#end end} positions are not placed inside\n\t * same parent container.\n\t *\n\t * @param {module:engine/view/range~Range} range Range to clear.\n\t * @param {module:engine/view/element~Element} element Element to remove.\n\t */\n\tclear( range, element ) {\n\t\tvalidateRangeContainer( range, this.document );\n\n\t\t// Create walker on given range.\n\t\t// We walk backward because when we remove element during walk it modifies range end position.\n\t\tconst walker = range.getWalker( {\n\t\t\tdirection: 'backward',\n\t\t\tignoreElementEnd: true\n\t\t} );\n\n\t\t// Let's walk.\n\t\tfor ( const current of walker ) {\n\t\t\tconst item = current.item;\n\t\t\tlet rangeToRemove;\n\n\t\t\t// When current item matches to the given element.\n\t\t\tif ( item.is( 'element' ) && element.isSimilar( item ) ) {\n\t\t\t\t// Create range on this element.\n\t\t\t\trangeToRemove = Range._createOn( item );\n\t\t\t\t// When range starts inside Text or TextProxy element.\n\t\t\t} else if ( !current.nextPosition.isAfter( range.start ) && item.is( '$textProxy' ) ) {\n\t\t\t\t// We need to check if parent of this text matches to given element.\n\t\t\t\tconst parentElement = item.getAncestors().find( ancestor => {\n\t\t\t\t\treturn ancestor.is( 'element' ) && element.isSimilar( ancestor );\n\t\t\t\t} );\n\n\t\t\t\t// If it is then create range inside this element.\n\t\t\t\tif ( parentElement ) {\n\t\t\t\t\trangeToRemove = Range._createIn( parentElement );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we have found element to remove.\n\t\t\tif ( rangeToRemove ) {\n\t\t\t\t// We need to check if element range stick out of the given range and truncate if it is.\n\t\t\t\tif ( rangeToRemove.end.isAfter( range.end ) ) {\n\t\t\t\t\trangeToRemove.end = range.end;\n\t\t\t\t}\n\n\t\t\t\tif ( rangeToRemove.start.isBefore( range.start ) ) {\n\t\t\t\t\trangeToRemove.start = range.start;\n\t\t\t\t}\n\n\t\t\t\t// At the end we remove range with found element.\n\t\t\t\tthis.remove( rangeToRemove );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Moves nodes from provided range to target position.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-invalid-range-container` when\n\t * {@link module:engine/view/range~Range#start start} and {@link module:engine/view/range~Range#end end} positions are not placed inside\n\t * same parent container.\n\t *\n\t * @param {module:engine/view/range~Range} sourceRange Range containing nodes to move.\n\t * @param {module:engine/view/position~Position} targetPosition Position to insert.\n\t * @returns {module:engine/view/range~Range} Range in target container. Inserted nodes are placed between\n\t * {@link module:engine/view/range~Range#start start} and {@link module:engine/view/range~Range#end end} positions.\n\t */\n\tmove( sourceRange, targetPosition ) {\n\t\tlet nodes;\n\n\t\tif ( targetPosition.isAfter( sourceRange.end ) ) {\n\t\t\ttargetPosition = this._breakAttributes( targetPosition, true );\n\n\t\t\tconst parent = targetPosition.parent;\n\t\t\tconst countBefore = parent.childCount;\n\n\t\t\tsourceRange = this._breakAttributesRange( sourceRange, true );\n\n\t\t\tnodes = this.remove( sourceRange );\n\n\t\t\ttargetPosition.offset += ( parent.childCount - countBefore );\n\t\t} else {\n\t\t\tnodes = this.remove( sourceRange );\n\t\t}\n\n\t\treturn this.insert( targetPosition, nodes );\n\t}\n\n\t/**\n\t * Wraps elements within range with provided {@link module:engine/view/attributeelement~AttributeElement AttributeElement}.\n\t * If a collapsed range is provided, it will be wrapped only if it is equal to view selection.\n\t *\n\t * If a collapsed range was passed and is same as selection, the selection\n\t * will be moved to the inside of the wrapped attribute element.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError} `view-writer-invalid-range-container`\n\t * when {@link module:engine/view/range~Range#start}\n\t * and {@link module:engine/view/range~Range#end} positions are not placed inside same parent container.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError} `view-writer-wrap-invalid-attribute` when passed attribute element is not\n\t * an instance of {@link module:engine/view/attributeelement~AttributeElement AttributeElement}.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError} `view-writer-wrap-nonselection-collapsed-range` when passed range\n\t * is collapsed and different than view selection.\n\t *\n\t * @param {module:engine/view/range~Range} range Range to wrap.\n\t * @param {module:engine/view/attributeelement~AttributeElement} attribute Attribute element to use as wrapper.\n\t * @returns {module:engine/view/range~Range} range Range after wrapping, spanning over wrapping attribute element.\n\t */\n\twrap( range, attribute ) {\n\t\tif ( !( attribute instanceof AttributeElement ) ) {\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-writer-wrap-invalid-attribute',\n\t\t\t\tthis.document\n\t\t\t);\n\t\t}\n\n\t\tvalidateRangeContainer( range, this.document );\n\n\t\tif ( !range.isCollapsed ) {\n\t\t\t// Non-collapsed range. Wrap it with the attribute element.\n\t\t\treturn this._wrapRange( range, attribute );\n\t\t} else {\n\t\t\t// Collapsed range. Wrap position.\n\t\t\tlet position = range.start;\n\n\t\t\tif ( position.parent.is( 'element' ) && !_hasNonUiChildren( position.parent ) ) {\n\t\t\t\tposition = position.getLastMatchingPosition( value => value.item.is( 'uiElement' ) );\n\t\t\t}\n\n\t\t\tposition = this._wrapPosition( position, attribute );\n\t\t\tconst viewSelection = this.document.selection;\n\n\t\t\t// If wrapping position is equal to view selection, move view selection inside wrapping attribute element.\n\t\t\tif ( viewSelection.isCollapsed && viewSelection.getFirstPosition().isEqual( range.start ) ) {\n\t\t\t\tthis.setSelection( position );\n\t\t\t}\n\n\t\t\treturn new Range( position );\n\t\t}\n\t}\n\n\t/**\n\t * Unwraps nodes within provided range from attribute element.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-invalid-range-container` when\n\t * {@link module:engine/view/range~Range#start start} and {@link module:engine/view/range~Range#end end} positions are not placed inside\n\t * same parent container.\n\t *\n\t * @param {module:engine/view/range~Range} range\n\t * @param {module:engine/view/attributeelement~AttributeElement} attribute\n\t */\n\tunwrap( range, attribute ) {\n\t\tif ( !( attribute instanceof AttributeElement ) ) {\n\t\t\t/**\n\t\t\t * The `attribute` passed to {@link module:engine/view/downcastwriter~DowncastWriter#unwrap `DowncastWriter#unwrap()`}\n\t\t\t * must be an instance of {@link module:engine/view/attributeelement~AttributeElement `AttributeElement`}.\n\t\t\t *\n\t\t\t * @error view-writer-unwrap-invalid-attribute\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'view-writer-unwrap-invalid-attribute',\n\t\t\t\tthis.document\n\t\t\t);\n\t\t}\n\n\t\tvalidateRangeContainer( range, this.document );\n\n\t\t// If range is collapsed - nothing to unwrap.\n\t\tif ( range.isCollapsed ) {\n\t\t\treturn range;\n\t\t}\n\n\t\t// Break attributes at range start and end.\n\t\tconst { start: breakStart, end: breakEnd } = this._breakAttributesRange( range, true );\n\t\tconst parentContainer = breakStart.parent;\n\n\t\t// Unwrap children located between break points.\n\t\tconst newRange = this._unwrapChildren( parentContainer, breakStart.offset, breakEnd.offset, attribute );\n\n\t\t// Merge attributes at the both ends and return a new range.\n\t\tconst start = this.mergeAttributes( newRange.start );\n\n\t\t// If start position was merged - move end position back.\n\t\tif ( !start.isEqual( newRange.start ) ) {\n\t\t\tnewRange.end.offset--;\n\t\t}\n\n\t\tconst end = this.mergeAttributes( newRange.end );\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Renames element by creating a copy of renamed element but with changed name and then moving contents of the\n\t * old element to the new one. Keep in mind that this will invalidate all {@link module:engine/view/position~Position positions} which\n\t * has renamed element as {@link module:engine/view/position~Position#parent a parent}.\n\t *\n\t * New element has to be created because `Element#tagName` property in DOM is readonly.\n\t *\n\t * Since this function creates a new element and removes the given one, the new element is returned to keep reference.\n\t *\n\t * @param {String} newName New name for element.\n\t * @param {module:engine/view/containerelement~ContainerElement} viewElement Element to be renamed.\n\t */\n\trename( newName, viewElement ) {\n\t\tconst newElement = new ContainerElement( this.document, newName, viewElement.getAttributes() );\n\n\t\tthis.insert( Position._createAfter( viewElement ), newElement );\n\t\tthis.move( Range._createIn( viewElement ), Position._createAt( newElement, 0 ) );\n\t\tthis.remove( Range._createOn( viewElement ) );\n\n\t\treturn newElement;\n\t}\n\n\t/**\n\t * Cleans up memory by removing obsolete cloned elements group from the writer.\n\t *\n\t * Should be used whenever all {@link module:engine/view/attributeelement~AttributeElement attribute elements}\n\t * with the same {@link module:engine/view/attributeelement~AttributeElement#id id} are going to be removed from the view and\n\t * the group will no longer be needed.\n\t *\n\t * Cloned elements group are not removed automatically in case if the group is still needed after all its elements\n\t * were removed from the view.\n\t *\n\t * Keep in mind that group names are equal to the `id` property of the attribute element.\n\t *\n\t * @param {String} groupName Name of the group to clear.\n\t */\n\tclearClonedElementsGroup( groupName ) {\n\t\tthis._cloneGroups.delete( groupName );\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/view/position~Position position},\n\t * * parent element and offset (offset defaults to `0`),\n\t * * parent element and `'end'` (sets position at the end of that element),\n\t * * {@link module:engine/view/item~Item view item} and `'before'` or `'after'` (sets position before or after given view item).\n\t *\n\t * This method is a shortcut to other constructors such as:\n\t *\n\t * * {@link #createPositionBefore},\n\t * * {@link #createPositionAfter},\n\t *\n\t * @param {module:engine/view/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tcreatePositionAt( itemOrPosition, offset ) {\n\t\treturn Position._createAt( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Creates a new position after given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item after which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionAfter( item ) {\n\t\treturn Position._createAfter( item );\n\t}\n\n\t/**\n\t * Creates a new position before given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item before which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionBefore( item ) {\n\t\treturn Position._createBefore( item );\n\t}\n\n\t/**\n\t * Creates a range spanning from `start` position to `end` position.\n\t *\n\t * **Note:** This factory method creates its own {@link module:engine/view/position~Position} instances basing on passed values.\n\t *\n\t * @param {module:engine/view/position~Position} start Start position.\n\t * @param {module:engine/view/position~Position} [end] End position. If not set, range will be collapsed at `start` position.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRange( start, end ) {\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Creates a range that starts before given {@link module:engine/view/item~Item view item} and ends after it.\n\t *\n\t * @param {module:engine/view/item~Item} item\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeOn( item ) {\n\t\treturn Range._createOn( item );\n\t}\n\n\t/**\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * @param {module:engine/view/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeIn( element ) {\n\t\treturn Range._createIn( element );\n\t}\n\n\t/**\n\t Creates new {@link module:engine/view/selection~Selection} instance.\n\t *\n\t * \t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = writer.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tconst selection = writer.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t * \t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tconst selection = writer.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tconst selection = writer.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the document selection.\n\t *\t\tconst selection = writer.createSelection( editor.editing.view.document.selection );\n\t *\n\t * \t\t// Creates selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\tconst selection = writer.createSelection( position );\n\t *\n\t *\t\t// Creates collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = writer.createContainerElement( 'p' );\n\t *\t\tconst selection = writer.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/view/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'on' );\n\t *\n\t * `Selection`'s constructor allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = writer.createSelection( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tconst selection = writer.createSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} [selectable=null]\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Offset or place when selectable is an `Item`.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t * @returns {module:engine/view/selection~Selection}\n\t */\n\tcreateSelection( selectable, placeOrOffset, options ) {\n\t\treturn new Selection( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Wraps children with provided `wrapElement`. Only children contained in `parent` element between\n\t * `startOffset` and `endOffset` will be wrapped.\n\t *\n\t * @private\n\t * @param {module:engine/view/element~Element} parent\n\t * @param {Number} startOffset\n\t * @param {Number} endOffset\n\t * @param {module:engine/view/element~Element} wrapElement\n\t */\n\t_wrapChildren( parent, startOffset, endOffset, wrapElement ) {\n\t\tlet i = startOffset;\n\t\tconst wrapPositions = [];\n\n\t\twhile ( i < endOffset ) {\n\t\t\tconst child = parent.getChild( i );\n\t\t\tconst isText = child.is( '$text' );\n\t\t\tconst isAttribute = child.is( 'attributeElement' );\n\t\t\tconst isEmpty = child.is( 'emptyElement' );\n\t\t\tconst isUI = child.is( 'uiElement' );\n\t\t\tconst isRaw = child.is( 'rawElement' );\n\n\t\t\t//\n\t\t\t// (In all examples, assume that `wrapElement` is `<span class=\"foo\">` element.)\n\t\t\t//\n\t\t\t// Check if `wrapElement` can be joined with the wrapped element. One of requirements is having same name.\n\t\t\t// If possible, join elements.\n\t\t\t//\n\t\t\t// <p><span class=\"bar\">abc</span></p>  -->  <p><span class=\"foo bar\">abc</span></p>\n\t\t\t//\n\t\t\tif ( isAttribute && this._wrapAttributeElement( wrapElement, child ) ) {\n\t\t\t\twrapPositions.push( new Position( parent, i ) );\n\t\t\t}\n\t\t\t//\n\t\t\t// Wrap the child if it is not an attribute element or if it is an attribute element that should be inside\n\t\t\t// `wrapElement` (due to priority).\n\t\t\t//\n\t\t\t// <p>abc</p>                   -->  <p><span class=\"foo\">abc</span></p>\n\t\t\t// <p><strong>abc</strong></p>  -->  <p><span class=\"foo\"><strong>abc</strong></span></p>\n\t\t\telse if ( isText || isEmpty || isUI || isRaw || ( isAttribute && shouldABeOutsideB( wrapElement, child ) ) ) {\n\t\t\t\t// Clone attribute.\n\t\t\t\tconst newAttribute = wrapElement._clone();\n\n\t\t\t\t// Wrap current node with new attribute.\n\t\t\t\tchild._remove();\n\t\t\t\tnewAttribute._appendChild( child );\n\n\t\t\t\tparent._insertChild( i, newAttribute );\n\t\t\t\tthis._addToClonedElementsGroup( newAttribute );\n\n\t\t\t\twrapPositions.push( new Position( parent, i ) );\n\t\t\t}\n\t\t\t//\n\t\t\t// If other nested attribute is found and it wasn't wrapped (see above), continue wrapping inside it.\n\t\t\t//\n\t\t\t// <p><a href=\"foo.html\">abc</a></p>  -->  <p><a href=\"foo.html\"><span class=\"foo\">abc</span></a></p>\n\t\t\t//\n\t\t\telse if ( isAttribute ) {\n\t\t\t\tthis._wrapChildren( child, 0, child.childCount, wrapElement );\n\t\t\t}\n\n\t\t\ti++;\n\t\t}\n\n\t\t// Merge at each wrap.\n\t\tlet offsetChange = 0;\n\n\t\tfor ( const position of wrapPositions ) {\n\t\t\tposition.offset -= offsetChange;\n\n\t\t\t// Do not merge with elements outside selected children.\n\t\t\tif ( position.offset == startOffset ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst newPosition = this.mergeAttributes( position );\n\n\t\t\t// If nodes were merged - other merge offsets will change.\n\t\t\tif ( !newPosition.isEqual( position ) ) {\n\t\t\t\toffsetChange++;\n\t\t\t\tendOffset--;\n\t\t\t}\n\t\t}\n\n\t\treturn Range._createFromParentsAndOffsets( parent, startOffset, parent, endOffset );\n\t}\n\n\t/**\n\t * Unwraps children from provided `unwrapElement`. Only children contained in `parent` element between\n\t * `startOffset` and `endOffset` will be unwrapped.\n\t *\n\t * @private\n\t * @param {module:engine/view/element~Element} parent\n\t * @param {Number} startOffset\n\t * @param {Number} endOffset\n\t * @param {module:engine/view/element~Element} unwrapElement\n\t */\n\t_unwrapChildren( parent, startOffset, endOffset, unwrapElement ) {\n\t\tlet i = startOffset;\n\t\tconst unwrapPositions = [];\n\n\t\t// Iterate over each element between provided offsets inside parent.\n\t\t// We don't use tree walker or range iterator because we will be removing and merging potentially multiple nodes,\n\t\t// so it could get messy. It is safer to it manually in this case.\n\t\twhile ( i < endOffset ) {\n\t\t\tconst child = parent.getChild( i );\n\n\t\t\t// Skip all text nodes. There should be no container element's here either.\n\t\t\tif ( !child.is( 'attributeElement' ) ) {\n\t\t\t\ti++;\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t//\n\t\t\t// (In all examples, assume that `unwrapElement` is `<span class=\"foo\">` element.)\n\t\t\t//\n\t\t\t// If the child is similar to the given attribute element, unwrap it - it will be completely removed.\n\t\t\t//\n\t\t\t// <p><span class=\"foo\">abc</span>xyz</p>  -->  <p>abcxyz</p>\n\t\t\t//\n\t\t\tif ( child.isSimilar( unwrapElement ) ) {\n\t\t\t\tconst unwrapped = child.getChildren();\n\t\t\t\tconst count = child.childCount;\n\n\t\t\t\t// Replace wrapper element with its children\n\t\t\t\tchild._remove();\n\t\t\t\tparent._insertChild( i, unwrapped );\n\n\t\t\t\tthis._removeFromClonedElementsGroup( child );\n\n\t\t\t\t// Save start and end position of moved items.\n\t\t\t\tunwrapPositions.push(\n\t\t\t\t\tnew Position( parent, i ),\n\t\t\t\t\tnew Position( parent, i + count )\n\t\t\t\t);\n\n\t\t\t\t// Skip elements that were unwrapped. Assuming there won't be another element to unwrap in child elements.\n\t\t\t\ti += count;\n\t\t\t\tendOffset += count - 1;\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t//\n\t\t\t// If the child is not similar but is an attribute element, try partial unwrapping - remove the same attributes/styles/classes.\n\t\t\t// Partial unwrapping will happen only if the elements have the same name.\n\t\t\t//\n\t\t\t// <p><span class=\"foo bar\">abc</span>xyz</p>  -->  <p><span class=\"bar\">abc</span>xyz</p>\n\t\t\t// <p><i class=\"foo\">abc</i>xyz</p>            -->  <p><i class=\"foo\">abc</i>xyz</p>\n\t\t\t//\n\t\t\tif ( this._unwrapAttributeElement( unwrapElement, child ) ) {\n\t\t\t\tunwrapPositions.push(\n\t\t\t\t\tnew Position( parent, i ),\n\t\t\t\t\tnew Position( parent, i + 1 )\n\t\t\t\t);\n\n\t\t\t\ti++;\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t//\n\t\t\t// If other nested attribute is found, look through it's children for elements to unwrap.\n\t\t\t//\n\t\t\t// <p><i><span class=\"foo\">abc</span></i><p>  -->  <p><i>abc</i><p>\n\t\t\t//\n\t\t\tthis._unwrapChildren( child, 0, child.childCount, unwrapElement );\n\n\t\t\ti++;\n\t\t}\n\n\t\t// Merge at each unwrap.\n\t\tlet offsetChange = 0;\n\n\t\tfor ( const position of unwrapPositions ) {\n\t\t\tposition.offset -= offsetChange;\n\n\t\t\t// Do not merge with elements outside selected children.\n\t\t\tif ( position.offset == startOffset || position.offset == endOffset ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst newPosition = this.mergeAttributes( position );\n\n\t\t\t// If nodes were merged - other merge offsets will change.\n\t\t\tif ( !newPosition.isEqual( position ) ) {\n\t\t\t\toffsetChange++;\n\t\t\t\tendOffset--;\n\t\t\t}\n\t\t}\n\n\t\treturn Range._createFromParentsAndOffsets( parent, startOffset, parent, endOffset );\n\t}\n\n\t/**\n\t * Helper function for `view.writer.wrap`. Wraps range with provided attribute element.\n\t * This method will also merge newly added attribute element with its siblings whenever possible.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError} `view-writer-wrap-invalid-attribute` when passed attribute element is not\n\t * an instance of {@link module:engine/view/attributeelement~AttributeElement AttributeElement}.\n\t *\n\t * @private\n\t * @param {module:engine/view/range~Range} range\n\t * @param {module:engine/view/attributeelement~AttributeElement} attribute\n\t * @returns {module:engine/view/range~Range} New range after wrapping, spanning over wrapping attribute element.\n\t */\n\t_wrapRange( range, attribute ) {\n\t\t// Break attributes at range start and end.\n\t\tconst { start: breakStart, end: breakEnd } = this._breakAttributesRange( range, true );\n\t\tconst parentContainer = breakStart.parent;\n\n\t\t// Wrap all children with attribute.\n\t\tconst newRange = this._wrapChildren( parentContainer, breakStart.offset, breakEnd.offset, attribute );\n\n\t\t// Merge attributes at the both ends and return a new range.\n\t\tconst start = this.mergeAttributes( newRange.start );\n\n\t\t// If start position was merged - move end position back.\n\t\tif ( !start.isEqual( newRange.start ) ) {\n\t\t\tnewRange.end.offset--;\n\t\t}\n\t\tconst end = this.mergeAttributes( newRange.end );\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Helper function for {@link #wrap}. Wraps position with provided attribute element.\n\t * This method will also merge newly added attribute element with its siblings whenever possible.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError} `view-writer-wrap-invalid-attribute` when passed attribute element is not\n\t * an instance of {@link module:engine/view/attributeelement~AttributeElement AttributeElement}.\n\t *\n\t * @private\n\t * @param {module:engine/view/position~Position} position\n\t * @param {module:engine/view/attributeelement~AttributeElement} attribute\n\t * @returns {module:engine/view/position~Position} New position after wrapping.\n\t */\n\t_wrapPosition( position, attribute ) {\n\t\t// Return same position when trying to wrap with attribute similar to position parent.\n\t\tif ( attribute.isSimilar( position.parent ) ) {\n\t\t\treturn movePositionToTextNode( position.clone() );\n\t\t}\n\n\t\t// When position is inside text node - break it and place new position between two text nodes.\n\t\tif ( position.parent.is( '$text' ) ) {\n\t\t\tposition = breakTextNode( position );\n\t\t}\n\n\t\t// Create fake element that will represent position, and will not be merged with other attributes.\n\t\tconst fakePosition = this.createAttributeElement();\n\t\tfakePosition._priority = Number.POSITIVE_INFINITY;\n\t\tfakePosition.isSimilar = () => false;\n\n\t\t// Insert fake element in position location.\n\t\tposition.parent._insertChild( position.offset, fakePosition );\n\n\t\t// Range around inserted fake attribute element.\n\t\tconst wrapRange = new Range( position, position.getShiftedBy( 1 ) );\n\n\t\t// Wrap fake element with attribute (it will also merge if possible).\n\t\tthis.wrap( wrapRange, attribute );\n\n\t\t// Remove fake element and place new position there.\n\t\tconst newPosition = new Position( fakePosition.parent, fakePosition.index );\n\t\tfakePosition._remove();\n\n\t\t// If position is placed between text nodes - merge them and return position inside.\n\t\tconst nodeBefore = newPosition.nodeBefore;\n\t\tconst nodeAfter = newPosition.nodeAfter;\n\n\t\tif ( nodeBefore instanceof Text && nodeAfter instanceof Text ) {\n\t\t\treturn mergeTextNodes( nodeBefore, nodeAfter );\n\t\t}\n\n\t\t// If position is next to text node - move position inside.\n\t\treturn movePositionToTextNode( newPosition );\n\t}\n\n\t/**\n\t * \tWraps one {@link module:engine/view/attributeelement~AttributeElement AttributeElement} into another by\n\t * \tmerging them if possible. When merging is possible - all attributes, styles and classes are moved from wrapper\n\t * \telement to element being wrapped.\n\t *\n\t * \t@private\n\t * \t@param {module:engine/view/attributeelement~AttributeElement} wrapper Wrapper AttributeElement.\n\t * \t@param {module:engine/view/attributeelement~AttributeElement} toWrap AttributeElement to wrap using wrapper element.\n\t * \t@returns {Boolean} Returns `true` if elements are merged.\n\t */\n\t_wrapAttributeElement( wrapper, toWrap ) {\n\t\tif ( !canBeJoined( wrapper, toWrap ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Can't merge if name or priority differs.\n\t\tif ( wrapper.name !== toWrap.name || wrapper.priority !== toWrap.priority ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if attributes can be merged.\n\t\tfor ( const key of wrapper.getAttributeKeys() ) {\n\t\t\t// Classes and styles should be checked separately.\n\t\t\tif ( key === 'class' || key === 'style' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If some attributes are different we cannot wrap.\n\t\t\tif ( toWrap.hasAttribute( key ) && toWrap.getAttribute( key ) !== wrapper.getAttribute( key ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Check if styles can be merged.\n\t\tfor ( const key of wrapper.getStyleNames() ) {\n\t\t\tif ( toWrap.hasStyle( key ) && toWrap.getStyle( key ) !== wrapper.getStyle( key ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Move all attributes/classes/styles from wrapper to wrapped AttributeElement.\n\t\tfor ( const key of wrapper.getAttributeKeys() ) {\n\t\t\t// Classes and styles should be checked separately.\n\t\t\tif ( key === 'class' || key === 'style' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Move only these attributes that are not present - other are similar.\n\t\t\tif ( !toWrap.hasAttribute( key ) ) {\n\t\t\t\tthis.setAttribute( key, wrapper.getAttribute( key ), toWrap );\n\t\t\t}\n\t\t}\n\n\t\tfor ( const key of wrapper.getStyleNames() ) {\n\t\t\tif ( !toWrap.hasStyle( key ) ) {\n\t\t\t\tthis.setStyle( key, wrapper.getStyle( key ), toWrap );\n\t\t\t}\n\t\t}\n\n\t\tfor ( const key of wrapper.getClassNames() ) {\n\t\t\tif ( !toWrap.hasClass( key ) ) {\n\t\t\t\tthis.addClass( key, toWrap );\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Unwraps {@link module:engine/view/attributeelement~AttributeElement AttributeElement} from another by removing\n\t * corresponding attributes, classes and styles. All attributes, classes and styles from wrapper should be present\n\t * inside element being unwrapped.\n\t *\n\t * @private\n\t * @param {module:engine/view/attributeelement~AttributeElement} wrapper Wrapper AttributeElement.\n\t * @param {module:engine/view/attributeelement~AttributeElement} toUnwrap AttributeElement to unwrap using wrapper element.\n\t * @returns {Boolean} Returns `true` if elements are unwrapped.\n\t **/\n\t_unwrapAttributeElement( wrapper, toUnwrap ) {\n\t\tif ( !canBeJoined( wrapper, toUnwrap ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Can't unwrap if name or priority differs.\n\t\tif ( wrapper.name !== toUnwrap.name || wrapper.priority !== toUnwrap.priority ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if AttributeElement has all wrapper attributes.\n\t\tfor ( const key of wrapper.getAttributeKeys() ) {\n\t\t\t// Classes and styles should be checked separately.\n\t\t\tif ( key === 'class' || key === 'style' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If some attributes are missing or different we cannot unwrap.\n\t\t\tif ( !toUnwrap.hasAttribute( key ) || toUnwrap.getAttribute( key ) !== wrapper.getAttribute( key ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Check if AttributeElement has all wrapper classes.\n\t\tif ( !toUnwrap.hasClass( ...wrapper.getClassNames() ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if AttributeElement has all wrapper styles.\n\t\tfor ( const key of wrapper.getStyleNames() ) {\n\t\t\t// If some styles are missing or different we cannot unwrap.\n\t\t\tif ( !toUnwrap.hasStyle( key ) || toUnwrap.getStyle( key ) !== wrapper.getStyle( key ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Remove all wrapper's attributes from unwrapped element.\n\t\tfor ( const key of wrapper.getAttributeKeys() ) {\n\t\t\t// Classes and styles should be checked separately.\n\t\t\tif ( key === 'class' || key === 'style' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.removeAttribute( key, toUnwrap );\n\t\t}\n\n\t\t// Remove all wrapper's classes from unwrapped element.\n\t\tthis.removeClass( Array.from( wrapper.getClassNames() ), toUnwrap );\n\n\t\t// Remove all wrapper's styles from unwrapped element.\n\t\tthis.removeStyle( Array.from( wrapper.getStyleNames() ), toUnwrap );\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Helper function used by other `DowncastWriter` methods. Breaks attribute elements at the boundaries of given range.\n\t *\n\t * @private\n\t * @param {module:engine/view/range~Range} range Range which `start` and `end` positions will be used to break attributes.\n\t * @param {Boolean} [forceSplitText=false] If set to `true`, will break text nodes even if they are directly in container element.\n\t * This behavior will result in incorrect view state, but is needed by other view writing methods which then fixes view state.\n\t * @returns {module:engine/view/range~Range} New range with located at break positions.\n\t */\n\t_breakAttributesRange( range, forceSplitText = false ) {\n\t\tconst rangeStart = range.start;\n\t\tconst rangeEnd = range.end;\n\n\t\tvalidateRangeContainer( range, this.document );\n\n\t\t// Break at the collapsed position. Return new collapsed range.\n\t\tif ( range.isCollapsed ) {\n\t\t\tconst position = this._breakAttributes( range.start, forceSplitText );\n\n\t\t\treturn new Range( position, position );\n\t\t}\n\n\t\tconst breakEnd = this._breakAttributes( rangeEnd, forceSplitText );\n\t\tconst count = breakEnd.parent.childCount;\n\t\tconst breakStart = this._breakAttributes( rangeStart, forceSplitText );\n\n\t\t// Calculate new break end offset.\n\t\tbreakEnd.offset += breakEnd.parent.childCount - count;\n\n\t\treturn new Range( breakStart, breakEnd );\n\t}\n\n\t/**\n\t * Helper function used by other `DowncastWriter` methods. Breaks attribute elements at given position.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-cannot-break-empty-element` when break position\n\t * is placed inside {@link module:engine/view/emptyelement~EmptyElement EmptyElement}.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-cannot-break-ui-element` when break position\n\t * is placed inside {@link module:engine/view/uielement~UIElement UIElement}.\n\t *\n\t * @private\n\t * @param {module:engine/view/position~Position} position Position where to break attributes.\n\t * @param {Boolean} [forceSplitText=false] If set to `true`, will break text nodes even if they are directly in container element.\n\t * This behavior will result in incorrect view state, but is needed by other view writing methods which then fixes view state.\n\t * @returns {module:engine/view/position~Position} New position after breaking the attributes.\n\t */\n\t_breakAttributes( position, forceSplitText = false ) {\n\t\tconst positionOffset = position.offset;\n\t\tconst positionParent = position.parent;\n\n\t\t// If position is placed inside EmptyElement - throw an exception as we cannot break inside.\n\t\tif ( position.parent.is( 'emptyElement' ) ) {\n\t\t\t/**\n\t\t\t * Cannot break an `EmptyElement` instance.\n\t\t\t *\n\t\t\t * This error is thrown if\n\t\t\t * {@link module:engine/view/downcastwriter~DowncastWriter#breakAttributes `DowncastWriter#breakAttributes()`}\n\t\t\t * was executed in an incorrect position.\n\t\t\t *\n\t\t\t * @error view-writer-cannot-break-empty-element\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-cannot-break-empty-element', this.document );\n\t\t}\n\n\t\t// If position is placed inside UIElement - throw an exception as we cannot break inside.\n\t\tif ( position.parent.is( 'uiElement' ) ) {\n\t\t\t/**\n\t\t\t * Cannot break a `UIElement` instance.\n\t\t\t *\n\t\t\t * This error is thrown if\n\t\t\t * {@link module:engine/view/downcastwriter~DowncastWriter#breakAttributes `DowncastWriter#breakAttributes()`}\n\t\t\t * was executed in an incorrect position.\n\t\t\t *\n\t\t\t * @error view-writer-cannot-break-ui-element\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-cannot-break-ui-element', this.document );\n\t\t}\n\n\t\t// If position is placed inside RawElement - throw an exception as we cannot break inside.\n\t\tif ( position.parent.is( 'rawElement' ) ) {\n\t\t\t/**\n\t\t\t * Cannot break a `RawElement` instance.\n\t\t\t *\n\t\t\t * This error is thrown if\n\t\t\t * {@link module:engine/view/downcastwriter~DowncastWriter#breakAttributes `DowncastWriter#breakAttributes()`}\n\t\t\t * was executed in an incorrect position.\n\t\t\t *\n\t\t\t * @error view-writer-cannot-break-raw-element\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-cannot-break-raw-element', this.document );\n\t\t}\n\n\t\t// There are no attributes to break and text nodes breaking is not forced.\n\t\tif ( !forceSplitText && positionParent.is( '$text' ) && isContainerOrFragment( positionParent.parent ) ) {\n\t\t\treturn position.clone();\n\t\t}\n\n\t\t// Position's parent is container, so no attributes to break.\n\t\tif ( isContainerOrFragment( positionParent ) ) {\n\t\t\treturn position.clone();\n\t\t}\n\n\t\t// Break text and start again in new position.\n\t\tif ( positionParent.is( '$text' ) ) {\n\t\t\treturn this._breakAttributes( breakTextNode( position ), forceSplitText );\n\t\t}\n\n\t\tconst length = positionParent.childCount;\n\n\t\t// <p>foo<b><u>bar{}</u></b></p>\n\t\t// <p>foo<b><u>bar</u>[]</b></p>\n\t\t// <p>foo<b><u>bar</u></b>[]</p>\n\t\tif ( positionOffset == length ) {\n\t\t\tconst newPosition = new Position( positionParent.parent, positionParent.index + 1 );\n\n\t\t\treturn this._breakAttributes( newPosition, forceSplitText );\n\t\t} else {\n\t\t\t// <p>foo<b><u>{}bar</u></b></p>\n\t\t\t// <p>foo<b>[]<u>bar</u></b></p>\n\t\t\t// <p>foo{}<b><u>bar</u></b></p>\n\t\t\tif ( positionOffset === 0 ) {\n\t\t\t\tconst newPosition = new Position( positionParent.parent, positionParent.index );\n\n\t\t\t\treturn this._breakAttributes( newPosition, forceSplitText );\n\t\t\t}\n\t\t\t// <p>foo<b><u>b{}ar</u></b></p>\n\t\t\t// <p>foo<b><u>b[]ar</u></b></p>\n\t\t\t// <p>foo<b><u>b</u>[]<u>ar</u></b></p>\n\t\t\t// <p>foo<b><u>b</u></b>[]<b><u>ar</u></b></p>\n\t\t\telse {\n\t\t\t\tconst offsetAfter = positionParent.index + 1;\n\n\t\t\t\t// Break element.\n\t\t\t\tconst clonedNode = positionParent._clone();\n\n\t\t\t\t// Insert cloned node to position's parent node.\n\t\t\t\tpositionParent.parent._insertChild( offsetAfter, clonedNode );\n\t\t\t\tthis._addToClonedElementsGroup( clonedNode );\n\n\t\t\t\t// Get nodes to move.\n\t\t\t\tconst count = positionParent.childCount - positionOffset;\n\t\t\t\tconst nodesToMove = positionParent._removeChildren( positionOffset, count );\n\n\t\t\t\t// Move nodes to cloned node.\n\t\t\t\tclonedNode._appendChild( nodesToMove );\n\n\t\t\t\t// Create new position to work on.\n\t\t\t\tconst newPosition = new Position( positionParent.parent, offsetAfter );\n\n\t\t\t\treturn this._breakAttributes( newPosition, forceSplitText );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Stores the information that an {@link module:engine/view/attributeelement~AttributeElement attribute element} was\n\t * added to the tree. Saves the reference to the group in the given element and updates the group, so other elements\n\t * from the group now keep a reference to the given attribute element.\n\t *\n\t * The clones group can be obtained using {@link module:engine/view/attributeelement~AttributeElement#getElementsWithSameId}.\n\t *\n\t * Does nothing if added element has no {@link module:engine/view/attributeelement~AttributeElement#id id}.\n\t *\n\t * @private\n\t * @param {module:engine/view/attributeelement~AttributeElement} element Attribute element to save.\n\t */\n\t_addToClonedElementsGroup( element ) {\n\t\t// Add only if the element is in document tree.\n\t\tif ( !element.root.is( 'rootElement' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Traverse the element's children recursively to find other attribute elements that also might got inserted.\n\t\t// The loop is at the beginning so we can make fast returns later in the code.\n\t\tif ( element.is( 'element' ) ) {\n\t\t\tfor ( const child of element.getChildren() ) {\n\t\t\t\tthis._addToClonedElementsGroup( child );\n\t\t\t}\n\t\t}\n\n\t\tconst id = element.id;\n\n\t\tif ( !id ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet group = this._cloneGroups.get( id );\n\n\t\tif ( !group ) {\n\t\t\tgroup = new Set();\n\t\t\tthis._cloneGroups.set( id, group );\n\t\t}\n\n\t\tgroup.add( element );\n\t\telement._clonesGroup = group;\n\t}\n\n\t/**\n\t * Removes all the information about the given {@link module:engine/view/attributeelement~AttributeElement attribute element}\n\t * from its clones group.\n\t *\n\t * Keep in mind, that the element will still keep a reference to the group (but the group will not keep a reference to it).\n\t * This allows to reference the whole group even if the element was already removed from the tree.\n\t *\n\t * Does nothing if the element has no {@link module:engine/view/attributeelement~AttributeElement#id id}.\n\t *\n\t * @private\n\t * @param {module:engine/view/attributeelement~AttributeElement} element Attribute element to remove.\n\t */\n\t_removeFromClonedElementsGroup( element ) {\n\t\t// Traverse the element's children recursively to find other attribute elements that also got removed.\n\t\t// The loop is at the beginning so we can make fast returns later in the code.\n\t\tif ( element.is( 'element' ) ) {\n\t\t\tfor ( const child of element.getChildren() ) {\n\t\t\t\tthis._removeFromClonedElementsGroup( child );\n\t\t\t}\n\t\t}\n\n\t\tconst id = element.id;\n\n\t\tif ( !id ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst group = this._cloneGroups.get( id );\n\n\t\tif ( !group ) {\n\t\t\treturn;\n\t\t}\n\n\t\tgroup.delete( element );\n\t\t// Not removing group from element on purpose!\n\t\t// If other parts of code have reference to this element, they will be able to get references to other elements from the group.\n\t}\n}\n\n// Helper function for `view.writer.wrap`. Checks if given element has any children that are not ui elements.\nfunction _hasNonUiChildren( parent ) {\n\treturn Array.from( parent.getChildren() ).some( child => !child.is( 'uiElement' ) );\n}\n\n/**\n * The `attribute` passed to {@link module:engine/view/downcastwriter~DowncastWriter#wrap `DowncastWriter#wrap()`}\n * must be an instance of {@link module:engine/view/attributeelement~AttributeElement `AttributeElement`}.\n *\n * @error view-writer-wrap-invalid-attribute\n */\n\n// Returns first parent container of specified {@link module:engine/view/position~Position Position}.\n// Position's parent node is checked as first, then next parents are checked.\n// Note that {@link module:engine/view/documentfragment~DocumentFragment DocumentFragment} is treated like a container.\n//\n// @param {module:engine/view/position~Position} position Position used as a start point to locate parent container.\n// @returns {module:engine/view/containerelement~ContainerElement|module:engine/view/documentfragment~DocumentFragment|undefined}\n// Parent container element or `undefined` if container is not found.\nfunction getParentContainer( position ) {\n\tlet parent = position.parent;\n\n\twhile ( !isContainerOrFragment( parent ) ) {\n\t\tif ( !parent ) {\n\t\t\treturn undefined;\n\t\t}\n\t\tparent = parent.parent;\n\t}\n\n\treturn parent;\n}\n\n// Checks if first {@link module:engine/view/attributeelement~AttributeElement AttributeElement} provided to the function\n// can be wrapped otuside second element. It is done by comparing elements'\n// {@link module:engine/view/attributeelement~AttributeElement#priority priorities}, if both have same priority\n// {@link module:engine/view/element~Element#getIdentity identities} are compared.\n//\n// @param {module:engine/view/attributeelement~AttributeElement} a\n// @param {module:engine/view/attributeelement~AttributeElement} b\n// @returns {Boolean}\nfunction shouldABeOutsideB( a, b ) {\n\tif ( a.priority < b.priority ) {\n\t\treturn true;\n\t} else if ( a.priority > b.priority ) {\n\t\treturn false;\n\t}\n\n\t// When priorities are equal and names are different - use identities.\n\treturn a.getIdentity() < b.getIdentity();\n}\n\n// Returns new position that is moved to near text node. Returns same position if there is no text node before of after\n// specified position.\n//\n//\t\t<p>foo[]</p>  ->  <p>foo{}</p>\n//\t\t<p>[]foo</p>  ->  <p>{}foo</p>\n//\n// @param {module:engine/view/position~Position} position\n// @returns {module:engine/view/position~Position} Position located inside text node or same position if there is no text nodes\n// before or after position location.\nfunction movePositionToTextNode( position ) {\n\tconst nodeBefore = position.nodeBefore;\n\n\tif ( nodeBefore && nodeBefore.is( '$text' ) ) {\n\t\treturn new Position( nodeBefore, nodeBefore.data.length );\n\t}\n\n\tconst nodeAfter = position.nodeAfter;\n\n\tif ( nodeAfter && nodeAfter.is( '$text' ) ) {\n\t\treturn new Position( nodeAfter, 0 );\n\t}\n\n\treturn position;\n}\n\n// Breaks text node into two text nodes when possible.\n//\n//\t\t<p>foo{}bar</p> -> <p>foo[]bar</p>\n//\t\t<p>{}foobar</p> -> <p>[]foobar</p>\n//\t\t<p>foobar{}</p> -> <p>foobar[]</p>\n//\n// @param {module:engine/view/position~Position} position Position that need to be placed inside text node.\n// @returns {module:engine/view/position~Position} New position after breaking text node.\nfunction breakTextNode( position ) {\n\tif ( position.offset == position.parent.data.length ) {\n\t\treturn new Position( position.parent.parent, position.parent.index + 1 );\n\t}\n\n\tif ( position.offset === 0 ) {\n\t\treturn new Position( position.parent.parent, position.parent.index );\n\t}\n\n\t// Get part of the text that need to be moved.\n\tconst textToMove = position.parent.data.slice( position.offset );\n\n\t// Leave rest of the text in position's parent.\n\tposition.parent._data = position.parent.data.slice( 0, position.offset );\n\n\t// Insert new text node after position's parent text node.\n\tposition.parent.parent._insertChild( position.parent.index + 1, new Text( position.root.document, textToMove ) );\n\n\t// Return new position between two newly created text nodes.\n\treturn new Position( position.parent.parent, position.parent.index + 1 );\n}\n\n// Merges two text nodes into first node. Removes second node and returns merge position.\n//\n// @param {module:engine/view/text~Text} t1 First text node to merge. Data from second text node will be moved at the end of\n// this text node.\n// @param {module:engine/view/text~Text} t2 Second text node to merge. This node will be removed after merging.\n// @returns {module:engine/view/position~Position} Position after merging text nodes.\nfunction mergeTextNodes( t1, t2 ) {\n\t// Merge text data into first text node and remove second one.\n\tconst nodeBeforeLength = t1.data.length;\n\tt1._data += t2.data;\n\tt2._remove();\n\n\treturn new Position( t1, nodeBeforeLength );\n}\n\n// Checks if provided nodes are valid to insert.\n//\n// Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-insert-invalid-node` when nodes to insert\n// contains instances that are not supported ones (see error description for valid ones.\n//\n// @param Iterable.<module:engine/view/text~Text|module:engine/view/element~Element> nodes\n// @param {Object} errorContext\nfunction validateNodesToInsert( nodes, errorContext ) {\n\tfor ( const node of nodes ) {\n\t\tif ( !validNodesToInsert.some( ( validNode => node instanceof validNode ) ) ) { // eslint-disable-line no-use-before-define\n\t\t\t/**\n\t\t\t * One of the nodes to be inserted is of an invalid type.\n\t\t\t *\n\t\t\t * Nodes to be inserted with {@link module:engine/view/downcastwriter~DowncastWriter#insert `DowncastWriter#insert()`} should be\n\t\t\t * of the following types:\n\t\t\t *\n\t\t\t * * {@link module:engine/view/attributeelement~AttributeElement AttributeElement},\n\t\t\t * * {@link module:engine/view/containerelement~ContainerElement ContainerElement},\n\t\t\t * * {@link module:engine/view/emptyelement~EmptyElement EmptyElement},\n\t\t\t * * {@link module:engine/view/uielement~UIElement UIElement},\n\t\t\t * * {@link module:engine/view/rawelement~RawElement RawElement},\n\t\t\t * * {@link module:engine/view/text~Text Text}.\n\t\t\t *\n\t\t\t * @error view-writer-insert-invalid-node-type\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-writer-insert-invalid-node-type', errorContext );\n\t\t}\n\n\t\tif ( !node.is( '$text' ) ) {\n\t\t\tvalidateNodesToInsert( node.getChildren(), errorContext );\n\t\t}\n\t}\n}\n\nconst validNodesToInsert = [ Text, AttributeElement, ContainerElement, EmptyElement, RawElement, UIElement ];\n\n// Checks if node is ContainerElement or DocumentFragment, because in most cases they should be treated the same way.\n//\n// @param {module:engine/view/node~Node} node\n// @returns {Boolean} Returns `true` if node is instance of ContainerElement or DocumentFragment.\nfunction isContainerOrFragment( node ) {\n\treturn node && ( node.is( 'containerElement' ) || node.is( 'documentFragment' ) );\n}\n\n// Checks if {@link module:engine/view/range~Range#start range start} and {@link module:engine/view/range~Range#end range end} are placed\n// inside same {@link module:engine/view/containerelement~ContainerElement container element}.\n// Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `view-writer-invalid-range-container` when validation fails.\n//\n// @param {module:engine/view/range~Range} range\n// @param {Object} errorContext\nfunction validateRangeContainer( range, errorContext ) {\n\tconst startContainer = getParentContainer( range.start );\n\tconst endContainer = getParentContainer( range.end );\n\n\tif ( !startContainer || !endContainer || startContainer !== endContainer ) {\n\t\t/**\n\t\t * The container of the given range is invalid.\n\t\t *\n\t\t * This may happen if {@link module:engine/view/range~Range#start range start} and\n\t\t * {@link module:engine/view/range~Range#end range end} positions are not placed inside the same container element or\n\t\t * a parent container for these positions cannot be found.\n\t\t *\n\t\t * Methods like {@link module:engine/view/downcastwriter~DowncastWriter#wrap `DowncastWriter#remove()`},\n\t\t * {@link module:engine/view/downcastwriter~DowncastWriter#wrap `DowncastWriter#clean()`},\n\t\t * {@link module:engine/view/downcastwriter~DowncastWriter#wrap `DowncastWriter#wrap()`},\n\t\t * {@link module:engine/view/downcastwriter~DowncastWriter#wrap `DowncastWriter#unwrap()`} need to be called\n\t\t * on a range that has its start and end positions located in the same container element. Both positions can be\n\t\t * nested within other elements (e.g. an attribute element) but the closest container ancestor must be the same.\n\t\t *\n\t\t * @error view-writer-invalid-range-container\n\t\t */\n\t\tthrow new CKEditorError( 'view-writer-invalid-range-container', errorContext );\n\t}\n}\n\n// Checks if two attribute elements can be joined together. Elements can be joined together if, and only if\n// they do not have ids specified.\n//\n// @private\n// @param {module:engine/view/element~Element} a\n// @param {module:engine/view/element~Element} b\n// @returns {Boolean}\nfunction canBeJoined( a, b ) {\n\treturn a.id === null && b.id === null;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/istext\n */\n\n/**\n * Checks if the object is a native DOM Text node.\n *\n * @param {*} obj\n * @returns {Boolean}\n */\nexport default function isText( obj ) {\n\treturn Object.prototype.toString.call( obj ) == '[object Text]';\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\nimport { keyCodes } from '@ckeditor/ckeditor5-utils/src/keyboard';\nimport isText from '@ckeditor/ckeditor5-utils/src/dom/istext';\n\n/**\n * Set of utils related to block and inline fillers handling.\n *\n * Browsers do not allow to put caret in elements which does not have height. Because of it, we need to fill all\n * empty elements which should be selectable with elements or characters called \"fillers\". Unfortunately there is no one\n * universal filler, this is why two types are uses:\n *\n * * Block filler is an element which fill block elements, like `<p>`. CKEditor uses `<br>` as a block filler during the editing,\n * as browsers do natively. So instead of an empty `<p>` there will be `<p><br></p>`. The advantage of block filler is that\n * it is transparent for the selection, so when the caret is before the `<br>` and user presses right arrow he will be\n * moved to the next paragraph, not after the `<br>`. The disadvantage is that it breaks a block, so it can not be used\n * in the middle of a line of text. The {@link module:engine/view/filler~BR_FILLER `<br>` filler} can be replaced with any other\n * character in the data output, for instance {@link module:engine/view/filler~NBSP_FILLER non-breaking space}.\n *\n * * Inline filler is a filler which does not break a line of text, so it can be used inside the text, for instance in the empty\n * `<b>` surrendered by text: `foo<b></b>bar`, if we want to put the caret there. CKEditor uses a sequence of the zero-width\n * spaces as an {@link module:engine/view/filler~INLINE_FILLER inline filler} having the predetermined\n * {@link module:engine/view/filler~INLINE_FILLER_LENGTH length}. A sequence is used, instead of a single character to\n * avoid treating random zero-width spaces as the inline filler. Disadvantage of the inline filler is that it is not\n * transparent for the selection. The arrow key moves the caret between zero-width spaces characters, so the additional\n * code is needed to handle the caret.\n *\n * Both inline and block fillers are handled by the {@link module:engine/view/renderer~Renderer renderer} and are not present in the\n * view.\n *\n * @module engine/view/filler\n */\n\n/**\n * Non-breaking space filler creator. This is a function which creates `&nbsp;` text node.\n * It defines how the filler is created.\n *\n * @see module:engine/view/filler~BR_FILLER\n * @function\n */\nexport const NBSP_FILLER = domDocument => domDocument.createTextNode( '\\u00A0' );\n\n/**\n * `<br>` filler creator. This is a function which creates `<br data-cke-filler=\"true\">` element.\n * It defines how the filler is created.\n *\n * @see module:engine/view/filler~NBSP_FILLER\n * @function\n */\nexport const BR_FILLER = domDocument => {\n\tconst fillerBr = domDocument.createElement( 'br' );\n\tfillerBr.dataset.ckeFiller = true;\n\n\treturn fillerBr;\n};\n\n/**\n * Length of the {@link module:engine/view/filler~INLINE_FILLER INLINE_FILLER}.\n */\nexport const INLINE_FILLER_LENGTH = 7;\n\n/**\n * Inline filler which is a sequence of the zero width spaces.\n *\n * @type {String}\n */\nexport const INLINE_FILLER = ( () => {\n\tlet inlineFiller = '';\n\n\tfor ( let i = 0; i < INLINE_FILLER_LENGTH; i++ ) {\n\t\tinlineFiller += '\\u200b';\n\t}\n\n\treturn inlineFiller;\n} )(); // Usu IIF so the INLINE_FILLER appears as a constant in the docs.\n\n/**\n * Checks if the node is a text node which starts with the {@link module:engine/view/filler~INLINE_FILLER inline filler}.\n *\n *\t\tstartsWithFiller( document.createTextNode( INLINE_FILLER ) ); // true\n *\t\tstartsWithFiller( document.createTextNode( INLINE_FILLER + 'foo' ) ); // true\n *\t\tstartsWithFiller( document.createTextNode( 'foo' ) ); // false\n *\t\tstartsWithFiller( document.createElement( 'p' ) ); // false\n *\n * @param {Node} domNode DOM node.\n * @returns {Boolean} True if the text node starts with the {@link module:engine/view/filler~INLINE_FILLER inline filler}.\n */\nexport function startsWithFiller( domNode ) {\n\treturn isText( domNode ) && ( domNode.data.substr( 0, INLINE_FILLER_LENGTH ) === INLINE_FILLER );\n}\n\n/**\n * Checks if the text node contains only the {@link module:engine/view/filler~INLINE_FILLER inline filler}.\n *\n *\t\tisInlineFiller( document.createTextNode( INLINE_FILLER ) ); // true\n *\t\tisInlineFiller( document.createTextNode( INLINE_FILLER + 'foo' ) ); // false\n *\n * @param {Text} domText DOM text node.\n * @returns {Boolean} True if the text node contains only the {@link module:engine/view/filler~INLINE_FILLER inline filler}.\n */\nexport function isInlineFiller( domText ) {\n\treturn domText.data.length == INLINE_FILLER_LENGTH && startsWithFiller( domText );\n}\n\n/**\n * Get string data from the text node, removing an {@link module:engine/view/filler~INLINE_FILLER inline filler} from it,\n * if text node contains it.\n *\n *\t\tgetDataWithoutFiller( document.createTextNode( INLINE_FILLER + 'foo' ) ) == 'foo' // true\n *\t\tgetDataWithoutFiller( document.createTextNode( 'foo' ) ) == 'foo' // true\n *\n * @param {Text} domText DOM text node, possible with inline filler.\n * @returns {String} Data without filler.\n */\nexport function getDataWithoutFiller( domText ) {\n\tif ( startsWithFiller( domText ) ) {\n\t\treturn domText.data.slice( INLINE_FILLER_LENGTH );\n\t} else {\n\t\treturn domText.data;\n\t}\n}\n\n/**\n * Assign key observer which move cursor from the end of the inline filler to the beginning of it when\n * the left arrow is pressed, so the filler does not break navigation.\n *\n * @param {module:engine/view/view~View} view View controller instance we should inject quirks handling on.\n */\nexport function injectQuirksHandling( view ) {\n\tview.document.on( 'keydown', jumpOverInlineFiller );\n}\n\n// Move cursor from the end of the inline filler to the beginning of it when, so the filler does not break navigation.\nfunction jumpOverInlineFiller( evt, data ) {\n\tif ( data.keyCode == keyCodes.arrowleft ) {\n\t\tconst domSelection = data.domTarget.ownerDocument.defaultView.getSelection();\n\n\t\tif ( domSelection.rangeCount == 1 && domSelection.getRangeAt( 0 ).collapsed ) {\n\t\t\tconst domParent = domSelection.getRangeAt( 0 ).startContainer;\n\t\t\tconst domOffset = domSelection.getRangeAt( 0 ).startOffset;\n\n\t\t\tif ( startsWithFiller( domParent ) && domOffset <= INLINE_FILLER_LENGTH ) {\n\t\t\t\tdomSelection.collapse( domParent, 0 );\n\t\t\t}\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/fastdiff\n */\n\n/**\n * Finds positions of the first and last change in the given string/array and generates a set of changes:\n *\n *\t\tfastDiff( '12a', '12xyza' );\n *\t\t// [ { index: 2, type: 'insert', values: [ 'x', 'y', 'z' ] } ]\n *\n *\t\tfastDiff( '12a', '12aa' );\n *\t\t// [ { index: 3, type: 'insert', values: [ 'a' ] } ]\n *\n *\t\tfastDiff( '12xyza', '12a' );\n *\t\t// [ { index: 2, type: 'delete', howMany: 3 } ]\n *\n *\t\tfastDiff( [ '1', '2', 'a', 'a' ], [ '1', '2', 'a' ] );\n *\t\t// [ { index: 3, type: 'delete', howMany: 1 } ]\n *\n *\t\tfastDiff( [ '1', '2', 'a', 'b', 'c', '3' ], [ '2', 'a', 'b' ] );\n *\t\t// [ { index: 0, type: 'insert', values: [ '2', 'a', 'b' ] }, { index: 3, type: 'delete', howMany: 6 } ]\n *\n * Passed arrays can contain any type of data, however to compare them correctly custom comparator function\n * should be passed as a third parameter:\n *\n *\t\tfastDiff( [ { value: 1 }, { value: 2 } ], [ { value: 1 }, { value: 3 } ], ( a, b ) => {\n *\t\t\treturn a.value === b.value;\n *\t\t} );\n *\t\t// [ { index: 1, type: 'insert', values: [ { value: 3 } ] }, { index: 2, type: 'delete', howMany: 1 } ]\n *\n * The resulted set of changes can be applied to the input in order to transform it into the output, for example:\n *\n *\t\tlet input = '12abc3';\n *\t\tconst output = '2ab';\n *\t\tconst changes = fastDiff( input, output );\n *\n *\t\tchanges.forEach( change => {\n *\t\t\tif ( change.type == 'insert' ) {\n *\t\t\t\tinput = input.substring( 0, change.index ) + change.values.join( '' ) + input.substring( change.index );\n *\t\t\t} else if ( change.type == 'delete' ) {\n *\t\t\t\tinput = input.substring( 0, change.index ) + input.substring( change.index + change.howMany );\n *\t\t\t}\n *\t\t} );\n *\n *\t\t// input equals output now\n *\n * or in case of arrays:\n *\n *\t\tlet input = [ '1', '2', 'a', 'b', 'c', '3' ];\n *\t\tconst output = [ '2', 'a', 'b' ];\n *\t\tconst changes = fastDiff( input, output );\n *\n *\t\tchanges.forEach( change => {\n *\t\t\tif ( change.type == 'insert' ) {\n *\t\t\t\tinput = input.slice( 0, change.index ).concat( change.values, input.slice( change.index ) );\n *\t\t\t} else if ( change.type == 'delete' ) {\n *\t\t\t\tinput = input.slice( 0, change.index ).concat( input.slice( change.index + change.howMany ) );\n *\t\t\t}\n *\t\t} );\n *\n *\t\t// input equals output now\n *\n * By passing `true` as the fourth parameter (`atomicChanges`) the output of this function will become compatible with\n * the {@link module:utils/diff~diff `diff()`} function:\n *\n *\t\tfastDiff( '12a', '12xyza' );\n *\t\t// [ 'equal', 'equal', 'insert', 'insert', 'insert', 'equal' ]\n *\n * The default output format of this function is compatible with the output format of\n * {@link module:utils/difftochanges~diffToChanges `diffToChanges()`}. The `diffToChanges()` input format is, in turn,\n * compatible with the output of {@link module:utils/diff~diff `diff()`}:\n *\n *\t\tconst a = '1234';\n *\t\tconst b = '12xyz34';\n *\n *\t\t// Both calls will return the same results (grouped changes format).\n *\t\tfastDiff( a, b );\n *\t\tdiffToChanges( diff( a, b ) );\n *\n *\t\t// Again, both calls will return the same results (atomic changes format).\n *\t\tfastDiff( a, b, null, true );\n *\t\tdiff( a, b );\n *\n *\n * @param {Array|String} a Input array or string.\n * @param {Array|String} b Input array or string.\n * @param {Function} [cmp] Optional function used to compare array values, by default `===` (strict equal operator) is used.\n * @param {Boolean} [atomicChanges=false] Whether an array of `inset|delete|equal` operations should\n * be returned instead of changes set. This makes this function compatible with {@link module:utils/diff~diff `diff()`}.\n * @returns {Array} Array of changes.\n */\nexport default function fastDiff( a, b, cmp, atomicChanges = false ) {\n\t// Set the comparator function.\n\tcmp = cmp || function( a, b ) {\n\t\treturn a === b;\n\t};\n\n\t// Convert the string (or any array-like object - eg. NodeList) to an array by using the slice() method because,\n\t// unlike Array.from(), it returns array of UTF-16 code units instead of the code points of a string.\n\t// One code point might be a surrogate pair of two code units. All text offsets are expected to be in code units.\n\t// See ckeditor/ckeditor5#3147.\n\t//\n\t// We need to make sure here that fastDiff() works identical to diff().\n\tif ( !Array.isArray( a ) ) {\n\t\ta = Array.prototype.slice.call( a );\n\t}\n\n\tif ( !Array.isArray( b ) ) {\n\t\tb = Array.prototype.slice.call( b );\n\t}\n\n\t// Find first and last change.\n\tconst changeIndexes = findChangeBoundaryIndexes( a, b, cmp );\n\n\t// Transform into changes array.\n\treturn atomicChanges ? changeIndexesToAtomicChanges( changeIndexes, b.length ) : changeIndexesToChanges( b, changeIndexes );\n}\n\n// Finds position of the first and last change in the given arrays. For example:\n//\n//\t\tconst indexes = findChangeBoundaryIndexes( [ '1', '2', '3', '4' ], [ '1', '3', '4', '2', '4' ] );\n//\t\tconsole.log( indexes ); // { firstIndex: 1, lastIndexOld: 3, lastIndexNew: 4 }\n//\n// The above indexes means that in the first array the modified part is `1[23]4` and in the second array it is `1[342]4`.\n// Based on such indexes, array with `insert`/`delete` operations which allows transforming first value into the second one\n// can be generated.\n//\n// @param {Array} arr1\n// @param {Array} arr2\n// @param {Function} cmp Comparator function.\n// @returns {Object}\n// @returns {Number} return.firstIndex Index of the first change in both values (always the same for both).\n// @returns {Number} result.lastIndexOld Index of the last common value in `arr1`.\n// @returns {Number} result.lastIndexNew Index of the last common value in `arr2`.\nfunction findChangeBoundaryIndexes( arr1, arr2, cmp ) {\n\t// Find the first difference between passed values.\n\tconst firstIndex = findFirstDifferenceIndex( arr1, arr2, cmp );\n\n\t// If arrays are equal return -1 indexes object.\n\tif ( firstIndex === -1 ) {\n\t\treturn { firstIndex: -1, lastIndexOld: -1, lastIndexNew: -1 };\n\t}\n\n\t// Remove the common part of each value and reverse them to make it simpler to find the last difference between them.\n\tconst oldArrayReversed = cutAndReverse( arr1, firstIndex );\n\tconst newArrayReversed = cutAndReverse( arr2, firstIndex );\n\n\t// Find the first difference between reversed values.\n\t// It should be treated as \"how many elements from the end the last difference occurred\".\n\t//\n\t// For example:\n\t//\n\t// \t\t\t\tinitial\t->\tafter cut\t-> reversed:\n\t// oldValue:\t'321ba'\t->\t'21ba'\t\t-> 'ab12'\n\t// newValue:\t'31xba'\t->\t'1xba'\t\t-> 'abx1'\n\t// lastIndex:\t\t\t\t\t\t\t-> 2\n\t//\n\t// So the last change occurred two characters from the end of the arrays.\n\tconst lastIndex = findFirstDifferenceIndex( oldArrayReversed, newArrayReversed, cmp );\n\n\t// Use `lastIndex` to calculate proper offset, starting from the beginning (`lastIndex` kind of starts from the end).\n\tconst lastIndexOld = arr1.length - lastIndex;\n\tconst lastIndexNew = arr2.length - lastIndex;\n\n\treturn { firstIndex, lastIndexOld, lastIndexNew };\n}\n\n// Returns a first index on which given arrays differ. If both arrays are the same, -1 is returned.\n//\n// @param {Array} arr1\n// @param {Array} arr2\n// @param {Function} cmp Comparator function.\n// @returns {Number}\nfunction findFirstDifferenceIndex( arr1, arr2, cmp ) {\n\tfor ( let i = 0; i < Math.max( arr1.length, arr2.length ); i++ ) {\n\t\tif ( arr1[ i ] === undefined || arr2[ i ] === undefined || !cmp( arr1[ i ], arr2[ i ] ) ) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn -1; // Return -1 if arrays are equal.\n}\n\n// Returns a copy of the given array with `howMany` elements removed starting from the beginning and in reversed order.\n//\n// @param {Array} arr Array to be processed.\n// @param {Number} howMany How many elements from array beginning to remove.\n// @returns {Array} Shortened and reversed array.\nfunction cutAndReverse( arr, howMany ) {\n\treturn arr.slice( howMany ).reverse();\n}\n\n// Generates changes array based on change indexes from `findChangeBoundaryIndexes` function. This function will\n// generate array with 0 (no changes), 1 (deletion or insertion) or 2 records (insertion and deletion).\n//\n// @param {Array} newArray New array for which change indexes were calculated.\n// @param {Object} changeIndexes Change indexes object from `findChangeBoundaryIndexes` function.\n// @returns {Array.<Object>} Array of changes compatible with {@link module:utils/difftochanges~diffToChanges} format.\nfunction changeIndexesToChanges( newArray, changeIndexes ) {\n\tconst result = [];\n\tconst { firstIndex, lastIndexOld, lastIndexNew } = changeIndexes;\n\n\t// Order operations as 'insert', 'delete' array to keep compatibility with {@link module:utils/difftochanges~diffToChanges}\n\t// in most cases. However, 'diffToChanges' does not stick to any order so in some cases\n\t// (for example replacing '12345' with 'abcd') it will generate 'delete', 'insert' order.\n\tif ( lastIndexNew - firstIndex > 0 ) {\n\t\tresult.push( {\n\t\t\tindex: firstIndex,\n\t\t\ttype: 'insert',\n\t\t\tvalues: newArray.slice( firstIndex, lastIndexNew )\n\t\t} );\n\t}\n\n\tif ( lastIndexOld - firstIndex > 0 ) {\n\t\tresult.push( {\n\t\t\tindex: firstIndex + ( lastIndexNew - firstIndex ), // Increase index of what was inserted.\n\t\t\ttype: 'delete',\n\t\t\thowMany: lastIndexOld - firstIndex\n\t\t} );\n\t}\n\n\treturn result;\n}\n\n// Generates array with set `equal|insert|delete` operations based on change indexes from `findChangeBoundaryIndexes` function.\n//\n// @param {Object} changeIndexes Change indexes object from `findChangeBoundaryIndexes` function.\n// @param {Number} newLength Length of the new array on which `findChangeBoundaryIndexes` calculated change indexes.\n// @returns {Array.<String>} Array of changes compatible with {@link module:utils/diff~diff} format.\nfunction changeIndexesToAtomicChanges( changeIndexes, newLength ) {\n\tconst { firstIndex, lastIndexOld, lastIndexNew } = changeIndexes;\n\n\t// No changes.\n\tif ( firstIndex === -1 ) {\n\t\treturn Array( newLength ).fill( 'equal' );\n\t}\n\n\tlet result = [];\n\tif ( firstIndex > 0 ) {\n\t\tresult = result.concat( Array( firstIndex ).fill( 'equal' ) );\n\t}\n\n\tif ( lastIndexNew - firstIndex > 0 ) {\n\t\tresult = result.concat( Array( lastIndexNew - firstIndex ).fill( 'insert' ) );\n\t}\n\n\tif ( lastIndexOld - firstIndex > 0 ) {\n\t\tresult = result.concat( Array( lastIndexOld - firstIndex ).fill( 'delete' ) );\n\t}\n\n\tif ( lastIndexNew < newLength ) {\n\t\tresult = result.concat( Array( newLength - lastIndexNew ).fill( 'equal' ) );\n\t}\n\n\treturn result;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/diff\n */\n\nimport fastDiff from '../src/fastdiff';\n\n// The following code is based on the \"O(NP) Sequence Comparison Algorithm\"\n// by Sun Wu, Udi Manber, Gene Myers, Webb Miller.\n\n/**\n * Calculates the difference between two arrays or strings producing an array containing a list of changes\n * necessary to transform input into output.\n *\n *\t\tdiff( 'aba', 'acca' ); // [ 'equal', 'insert', 'insert', 'delete', 'equal' ]\n *\n * This function is based on the \"O(NP) Sequence Comparison Algorithm\" by Sun Wu, Udi Manber, Gene Myers, Webb Miller.\n * Unfortunately, while it gives the most precise results, its to complex for longer strings/arrow (above 200 items).\n * Therefore, `diff()` automatically switches to {@link module:utils/fastdiff~fastDiff `fastDiff()`} when detecting\n * such a scenario. The return formats of both functions are identical.\n *\n * @param {Array|String} a Input array or string.\n * @param {Array|String} b Output array or string.\n * @param {Function} [cmp] Optional function used to compare array values, by default === is used.\n * @returns {Array} Array of changes.\n */\nexport default function diff( a, b, cmp ) {\n\t// Set the comparator function.\n\tcmp = cmp || function( a, b ) {\n\t\treturn a === b;\n\t};\n\n\tconst aLength = a.length;\n\tconst bLength = b.length;\n\n\t// Perform `fastDiff` for longer strings/arrays (see #269).\n\tif ( aLength > 200 || bLength > 200 || aLength + bLength > 300 ) {\n\t\treturn diff.fastDiff( a, b, cmp, true );\n\t}\n\n\t// Temporary action type statics.\n\tlet _insert, _delete;\n\n\t// Swapped the arrays to use the shorter one as the first one.\n\tif ( bLength < aLength ) {\n\t\tconst tmp = a;\n\n\t\ta = b;\n\t\tb = tmp;\n\n\t\t// We swap the action types as well.\n\t\t_insert = 'delete';\n\t\t_delete = 'insert';\n\t} else {\n\t\t_insert = 'insert';\n\t\t_delete = 'delete';\n\t}\n\n\tconst m = a.length;\n\tconst n = b.length;\n\tconst delta = n - m;\n\n\t// Edit scripts, for each diagonal.\n\tconst es = {};\n\t// Furthest points, the furthest y we can get on each diagonal.\n\tconst fp = {};\n\n\tfunction snake( k ) {\n\t\t// We use -1 as an alternative below to handle initial values ( instead of filling the fp with -1 first ).\n\t\t// Furthest points (y) on the diagonal below k.\n\t\tconst y1 = ( fp[ k - 1 ] !== undefined ? fp[ k - 1 ] : -1 ) + 1;\n\t\t// Furthest points (y) on the diagonal above k.\n\t\tconst y2 = fp[ k + 1 ] !== undefined ? fp[ k + 1 ] : -1;\n\t\t// The way we should go to get further.\n\t\tconst dir = y1 > y2 ? -1 : 1;\n\n\t\t// Clone previous changes array (if any).\n\t\tif ( es[ k + dir ] ) {\n\t\t\tes[ k ] = es[ k + dir ].slice( 0 );\n\t\t}\n\n\t\t// Create changes array.\n\t\tif ( !es[ k ] ) {\n\t\t\tes[ k ] = [];\n\t\t}\n\n\t\t// Push the action.\n\t\tes[ k ].push( y1 > y2 ? _insert : _delete );\n\n\t\t// Set the beginning coordinates.\n\t\tlet y = Math.max( y1, y2 );\n\t\tlet x = y - k;\n\n\t\t// Traverse the diagonal as long as the values match.\n\t\twhile ( x < m && y < n && cmp( a[ x ], b[ y ] ) ) {\n\t\t\tx++;\n\t\t\ty++;\n\t\t\t// Push no change action.\n\t\t\tes[ k ].push( 'equal' );\n\t\t}\n\n\t\treturn y;\n\t}\n\n\tlet p = 0;\n\tlet k;\n\n\t// Traverse the graph until we reach the end of the longer string.\n\tdo {\n\t\t// Updates furthest points and edit scripts for diagonals below delta.\n\t\tfor ( k = -p; k < delta; k++ ) {\n\t\t\tfp[ k ] = snake( k );\n\t\t}\n\n\t\t// Updates furthest points and edit scripts for diagonals above delta.\n\t\tfor ( k = delta + p; k > delta; k-- ) {\n\t\t\tfp[ k ] = snake( k );\n\t\t}\n\n\t\t// Updates furthest point and edit script for the delta diagonal.\n\t\t// note that the delta diagonal is the one which goes through the sink (m, n).\n\t\tfp[ delta ] = snake( delta );\n\n\t\tp++;\n\t} while ( fp[ delta ] !== n );\n\n\t// Return the final list of edit changes.\n\t// We remove the first item that represents the action for the injected nulls.\n\treturn es[ delta ].slice( 1 );\n}\n\n// Store the API in static property to easily overwrite it in tests.\n// Too bad dependency injection does not work in Webpack + ES 6 (const) + Babel.\ndiff.fastDiff = fastDiff;\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/insertat\n */\n\n/**\n * Inserts node to the parent at given index.\n *\n * @param {Element} parentElement Parent element.\n * @param {Number} index Insertions index.\n * @param {Node} nodeToInsert Node to insert.\n */\nexport default function insertAt( parentElement, index, nodeToInsert ) {\n\tparentElement.insertBefore( nodeToInsert, parentElement.childNodes[ index ] || null );\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/remove\n */\n\n/**\n * Removes given node from parent.\n *\n * @param {Node} node Node to remove.\n */\nexport default function remove( node ) {\n\tconst parent = node.parentNode;\n\n\tif ( parent ) {\n\t\tparent.removeChild( node );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/isnode\n */\n\n/**\n * Checks if the object is a native DOM Node.\n *\n * @param {*} obj\n * @returns {Boolean}\n */\nexport default function isNode( obj ) {\n\tif ( obj ) {\n\t\tif ( obj.defaultView ) {\n\t\t\treturn obj instanceof obj.defaultView.Document;\n\t\t} else if ( obj.ownerDocument && obj.ownerDocument.defaultView ) {\n\t\t\treturn obj instanceof obj.ownerDocument.defaultView.Node;\n\t\t}\n\t}\n\n\treturn false;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals Node */\n\n/**\n * @module engine/view/renderer\n */\n\nimport ViewText from './text';\nimport ViewPosition from './position';\nimport { INLINE_FILLER, INLINE_FILLER_LENGTH, startsWithFiller, isInlineFiller } from './filler';\n\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport diff from '@ckeditor/ckeditor5-utils/src/diff';\nimport insertAt from '@ckeditor/ckeditor5-utils/src/dom/insertat';\nimport remove from '@ckeditor/ckeditor5-utils/src/dom/remove';\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport isText from '@ckeditor/ckeditor5-utils/src/dom/istext';\nimport isNode from '@ckeditor/ckeditor5-utils/src/dom/isnode';\nimport fastDiff from '@ckeditor/ckeditor5-utils/src/fastdiff';\nimport env from '@ckeditor/ckeditor5-utils/src/env';\n\n/**\n * Renderer is responsible for updating the DOM structure and the DOM selection based on\n * the {@link module:engine/view/renderer~Renderer#markToSync information about updated view nodes}.\n * In other words, it renders the view to the DOM.\n *\n * Its main responsibility is to make only the necessary, minimal changes to the DOM. However, unlike in many\n * virtual DOM implementations, the primary reason for doing minimal changes is not the performance but ensuring\n * that native editing features such as text composition, autocompletion, spell checking, selection's x-index are\n * affected as little as possible.\n *\n * Renderer uses {@link module:engine/view/domconverter~DomConverter} to transform view nodes and positions\n * to and from the DOM.\n */\nexport default class Renderer {\n\t/**\n\t * Creates a renderer instance.\n\t *\n\t * @param {module:engine/view/domconverter~DomConverter} domConverter Converter instance.\n\t * @param {module:engine/view/documentselection~DocumentSelection} selection View selection.\n\t */\n\tconstructor( domConverter, selection ) {\n\t\t/**\n\t\t * Set of DOM Documents instances.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Set.<Document>}\n\t\t */\n\t\tthis.domDocuments = new Set();\n\n\t\t/**\n\t\t * Converter instance.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/domconverter~DomConverter}\n\t\t */\n\t\tthis.domConverter = domConverter;\n\n\t\t/**\n\t\t * Set of nodes which attributes changed and may need to be rendered.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Set.<module:engine/view/node~Node>}\n\t\t */\n\t\tthis.markedAttributes = new Set();\n\n\t\t/**\n\t\t * Set of elements which child lists changed and may need to be rendered.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Set.<module:engine/view/node~Node>}\n\t\t */\n\t\tthis.markedChildren = new Set();\n\n\t\t/**\n\t\t * Set of text nodes which text data changed and may need to be rendered.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Set.<module:engine/view/node~Node>}\n\t\t */\n\t\tthis.markedTexts = new Set();\n\n\t\t/**\n\t\t * View selection. Renderer updates DOM selection based on the view selection.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/documentselection~DocumentSelection}\n\t\t */\n\t\tthis.selection = selection;\n\n\t\t/**\n\t\t * Indicates if the view document is focused and selection can be rendered. Selection will not be rendered if\n\t\t * this is set to `false`.\n\t\t *\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis.isFocused = false;\n\n\t\t/**\n\t\t * The text node in which the inline filler was rendered.\n\t\t *\n\t\t * @private\n\t\t * @member {Text}\n\t\t */\n\t\tthis._inlineFiller = null;\n\n\t\t/**\n\t\t * DOM element containing fake selection.\n\t\t *\n\t\t * @private\n\t\t * @type {null|HTMLElement}\n\t\t */\n\t\tthis._fakeSelectionContainer = null;\n\t}\n\n\t/**\n\t * Marks a view node to be updated in the DOM by {@link #render `render()`}.\n\t *\n\t * Note that only view nodes whose parents have corresponding DOM elements need to be marked to be synchronized.\n\t *\n\t * @see #markedAttributes\n\t * @see #markedChildren\n\t * @see #markedTexts\n\t *\n\t * @param {module:engine/view/document~ChangeType} type Type of the change.\n\t * @param {module:engine/view/node~Node} node Node to be marked.\n\t */\n\tmarkToSync( type, node ) {\n\t\tif ( type === 'text' ) {\n\t\t\tif ( this.domConverter.mapViewToDom( node.parent ) ) {\n\t\t\t\tthis.markedTexts.add( node );\n\t\t\t}\n\t\t} else {\n\t\t\t// If the node has no DOM element it is not rendered yet,\n\t\t\t// its children/attributes do not need to be marked to be sync.\n\t\t\tif ( !this.domConverter.mapViewToDom( node ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( type === 'attributes' ) {\n\t\t\t\tthis.markedAttributes.add( node );\n\t\t\t} else if ( type === 'children' ) {\n\t\t\t\tthis.markedChildren.add( node );\n\t\t\t} else {\n\t\t\t\t/**\n\t\t\t\t * Unknown type passed to Renderer.markToSync.\n\t\t\t\t *\n\t\t\t\t * @error view-renderer-unknown-type\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'view-renderer-unknown-type', this );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Renders all buffered changes ({@link #markedAttributes}, {@link #markedChildren} and {@link #markedTexts}) and\n\t * the current view selection (if needed) to the DOM by applying a minimal set of changes to it.\n\t *\n\t * Renderer tries not to break the text composition (e.g. IME) and x-index of the selection,\n\t * so it does as little as it is needed to update the DOM.\n\t *\n\t * Renderer also handles {@link module:engine/view/filler fillers}. Especially, it checks if the inline filler is needed\n\t * at the selection position and adds or removes it. To prevent breaking text composition inline filler will not be\n\t * removed as long as the selection is in the text node which needed it at first.\n\t */\n\trender() {\n\t\tlet inlineFillerPosition;\n\n\t\t// Refresh mappings.\n\t\tfor ( const element of this.markedChildren ) {\n\t\t\tthis._updateChildrenMappings( element );\n\t\t}\n\n\t\t// There was inline filler rendered in the DOM but it's not\n\t\t// at the selection position any more, so we can remove it\n\t\t// (cause even if it's needed, it must be placed in another location).\n\t\tif ( this._inlineFiller && !this._isSelectionInInlineFiller() ) {\n\t\t\tthis._removeInlineFiller();\n\t\t}\n\n\t\t// If we've got the filler, let's try to guess its position in the view.\n\t\tif ( this._inlineFiller ) {\n\t\t\tinlineFillerPosition = this._getInlineFillerPosition();\n\t\t}\n\t\t// Otherwise, if it's needed, create it at the selection position.\n\t\telse if ( this._needsInlineFillerAtSelection() ) {\n\t\t\tinlineFillerPosition = this.selection.getFirstPosition();\n\n\t\t\t// Do not use `markToSync` so it will be added even if the parent is already added.\n\t\t\tthis.markedChildren.add( inlineFillerPosition.parent );\n\t\t}\n\n\t\tfor ( const element of this.markedAttributes ) {\n\t\t\tthis._updateAttrs( element );\n\t\t}\n\n\t\tfor ( const element of this.markedChildren ) {\n\t\t\tthis._updateChildren( element, { inlineFillerPosition } );\n\t\t}\n\n\t\tfor ( const node of this.markedTexts ) {\n\t\t\tif ( !this.markedChildren.has( node.parent ) && this.domConverter.mapViewToDom( node.parent ) ) {\n\t\t\t\tthis._updateText( node, { inlineFillerPosition } );\n\t\t\t}\n\t\t}\n\n\t\t// Check whether the inline filler is required and where it really is in the DOM.\n\t\t// At this point in most cases it will be in the DOM, but there are exceptions.\n\t\t// For example, if the inline filler was deep in the created DOM structure, it will not be created.\n\t\t// Similarly, if it was removed at the beginning of this function and then neither text nor children were updated,\n\t\t// it will not be present.\n\t\t// Fix those and similar scenarios.\n\t\tif ( inlineFillerPosition ) {\n\t\t\tconst fillerDomPosition = this.domConverter.viewPositionToDom( inlineFillerPosition );\n\t\t\tconst domDocument = fillerDomPosition.parent.ownerDocument;\n\n\t\t\tif ( !startsWithFiller( fillerDomPosition.parent ) ) {\n\t\t\t\t// Filler has not been created at filler position. Create it now.\n\t\t\t\tthis._inlineFiller = addInlineFiller( domDocument, fillerDomPosition.parent, fillerDomPosition.offset );\n\t\t\t} else {\n\t\t\t\t// Filler has been found, save it.\n\t\t\t\tthis._inlineFiller = fillerDomPosition.parent;\n\t\t\t}\n\t\t} else {\n\t\t\t// There is no filler needed.\n\t\t\tthis._inlineFiller = null;\n\t\t}\n\n\t\tthis._updateSelection();\n\t\tthis._updateFocus();\n\n\t\tthis.markedTexts.clear();\n\t\tthis.markedAttributes.clear();\n\t\tthis.markedChildren.clear();\n\t}\n\n\t/**\n\t * Updates mappings of view element's children.\n\t *\n\t * Children that were replaced in the view structure by similar elements (same tag name) are treated as 'replaced'.\n\t * This means that their mappings can be updated so the new view elements are mapped to the existing DOM elements.\n\t * Thanks to that these elements do not need to be re-rendered completely.\n\t *\n\t * @private\n\t * @param {module:engine/view/node~Node} viewElement The view element whose children mappings will be updated.\n\t */\n\t_updateChildrenMappings( viewElement ) {\n\t\tconst domElement = this.domConverter.mapViewToDom( viewElement );\n\n\t\tif ( !domElement ) {\n\t\t\t// If there is no `domElement` it means that it was already removed from DOM and there is no need to process it.\n\t\t\treturn;\n\t\t}\n\n\t\tconst actualDomChildren = this.domConverter.mapViewToDom( viewElement ).childNodes;\n\t\tconst expectedDomChildren = Array.from(\n\t\t\tthis.domConverter.viewChildrenToDom( viewElement, domElement.ownerDocument, { withChildren: false } )\n\t\t);\n\t\tconst diff = this._diffNodeLists( actualDomChildren, expectedDomChildren );\n\t\tconst actions = this._findReplaceActions( diff, actualDomChildren, expectedDomChildren );\n\n\t\tif ( actions.indexOf( 'replace' ) !== -1 ) {\n\t\t\tconst counter = { equal: 0, insert: 0, delete: 0 };\n\n\t\t\tfor ( const action of actions ) {\n\t\t\t\tif ( action === 'replace' ) {\n\t\t\t\t\tconst insertIndex = counter.equal + counter.insert;\n\t\t\t\t\tconst deleteIndex = counter.equal + counter.delete;\n\t\t\t\t\tconst viewChild = viewElement.getChild( insertIndex );\n\n\t\t\t\t\t// UIElement and RawElement are special cases. Their children are not stored in a view (#799)\n\t\t\t\t\t// so we cannot use them with replacing flow (since they use view children during rendering\n\t\t\t\t\t// which will always result in rendering empty elements).\n\t\t\t\t\tif ( viewChild && !( viewChild.is( 'uiElement' ) || viewChild.is( 'rawElement' ) ) ) {\n\t\t\t\t\t\tthis._updateElementMappings( viewChild, actualDomChildren[ deleteIndex ] );\n\t\t\t\t\t}\n\n\t\t\t\t\tremove( expectedDomChildren[ insertIndex ] );\n\t\t\t\t\tcounter.equal++;\n\t\t\t\t} else {\n\t\t\t\t\tcounter[ action ]++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Updates mappings of a given view element.\n\t *\n\t * @private\n\t * @param {module:engine/view/node~Node} viewElement The view element whose mappings will be updated.\n\t * @param {Node} domElement The DOM element representing the given view element.\n\t */\n\t_updateElementMappings( viewElement, domElement ) {\n\t\t// Remap 'DomConverter' bindings.\n\t\tthis.domConverter.unbindDomElement( domElement );\n\t\tthis.domConverter.bindElements( domElement, viewElement );\n\n\t\t// View element may have children which needs to be updated, but are not marked, mark them to update.\n\t\tthis.markedChildren.add( viewElement );\n\n\t\t// Because we replace new view element mapping with the existing one, the corresponding DOM element\n\t\t// will not be rerendered. The new view element may have different attributes than the previous one.\n\t\t// Since its corresponding DOM element will not be rerendered, new attributes will not be added\n\t\t// to the DOM, so we need to mark it here to make sure its attributes gets updated. See #1427 for more\n\t\t// detailed case study.\n\t\t// Also there are cases where replaced element is removed from the view structure and then has\n\t\t// its attributes changed or removed. In such cases the element will not be present in `markedAttributes`\n\t\t// and also may be the same (`element.isSimilar()`) as the reused element not having its attributes updated.\n\t\t// To prevent such situations we always mark reused element to have its attributes rerenderd (#1560).\n\t\tthis.markedAttributes.add( viewElement );\n\t}\n\n\t/**\n\t * Gets the position of the inline filler based on the current selection.\n\t * Here, we assume that we know that the filler is needed and\n\t * {@link #_isSelectionInInlineFiller is at the selection position}, and, since it is needed,\n\t * it is somewhere at the selection position.\n\t *\n\t * Note: The filler position cannot be restored based on the filler's DOM text node, because\n\t * when this method is called (before rendering), the bindings will often be broken. View-to-DOM\n\t * bindings are only dependable after rendering.\n\t *\n\t * @private\n\t * @returns {module:engine/view/position~Position}\n\t */\n\t_getInlineFillerPosition() {\n\t\tconst firstPos = this.selection.getFirstPosition();\n\n\t\tif ( firstPos.parent.is( '$text' ) ) {\n\t\t\treturn ViewPosition._createBefore( this.selection.getFirstPosition().parent );\n\t\t} else {\n\t\t\treturn firstPos;\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` if the selection has not left the inline filler's text node.\n\t * If it is `true`, it means that the filler had been added for a reason and the selection did not\n\t * leave the filler's text node. For example, the user can be in the middle of a composition so it should not be touched.\n\t *\n\t * @private\n\t * @returns {Boolean} `true` if the inline filler and selection are in the same place.\n\t */\n\t_isSelectionInInlineFiller() {\n\t\tif ( this.selection.rangeCount != 1 || !this.selection.isCollapsed ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Note, we can't check if selection's position equals position of the\n\t\t// this._inlineFiller node, because of #663. We may not be able to calculate\n\t\t// the filler's position in the view at this stage.\n\t\t// Instead, we check it the other way  whether selection is anchored in\n\t\t// that text node or next to it.\n\n\t\t// Possible options are:\n\t\t// \"FILLER{}\"\n\t\t// \"FILLERadded-text{}\"\n\t\tconst selectionPosition = this.selection.getFirstPosition();\n\t\tconst position = this.domConverter.viewPositionToDom( selectionPosition );\n\n\t\tif ( position && isText( position.parent ) && startsWithFiller( position.parent ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Removes the inline filler.\n\t *\n\t * @private\n\t */\n\t_removeInlineFiller() {\n\t\tconst domFillerNode = this._inlineFiller;\n\n\t\t// Something weird happened and the stored node doesn't contain the filler's text.\n\t\tif ( !startsWithFiller( domFillerNode ) ) {\n\t\t\t/**\n\t\t\t * The inline filler node was lost. Most likely, something overwrote the filler text node\n\t\t\t * in the DOM.\n\t\t\t *\n\t\t\t * @error view-renderer-filler-was-lost\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-renderer-filler-was-lost', this );\n\t\t}\n\n\t\tif ( isInlineFiller( domFillerNode ) ) {\n\t\t\tdomFillerNode.parentNode.removeChild( domFillerNode );\n\t\t} else {\n\t\t\tdomFillerNode.data = domFillerNode.data.substr( INLINE_FILLER_LENGTH );\n\t\t}\n\n\t\tthis._inlineFiller = null;\n\t}\n\n\t/**\n\t * Checks if the inline {@link module:engine/view/filler filler} should be added.\n\t *\n\t * @private\n\t * @returns {Boolean} `true` if the inline filler should be added.\n\t */\n\t_needsInlineFillerAtSelection() {\n\t\tif ( this.selection.rangeCount != 1 || !this.selection.isCollapsed ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst selectionPosition = this.selection.getFirstPosition();\n\t\tconst selectionParent = selectionPosition.parent;\n\t\tconst selectionOffset = selectionPosition.offset;\n\n\t\t// If there is no DOM root we do not care about fillers.\n\t\tif ( !this.domConverter.mapViewToDom( selectionParent.root ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( !( selectionParent.is( 'element' ) ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Prevent adding inline filler inside elements with contenteditable=false.\n\t\t// https://github.com/ckeditor/ckeditor5-engine/issues/1170\n\t\tif ( !isEditable( selectionParent ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// We have block filler, we do not need inline one.\n\t\tif ( selectionOffset === selectionParent.getFillerOffset() ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst nodeBefore = selectionPosition.nodeBefore;\n\t\tconst nodeAfter = selectionPosition.nodeAfter;\n\n\t\tif ( nodeBefore instanceof ViewText || nodeAfter instanceof ViewText ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Checks if text needs to be updated and possibly updates it.\n\t *\n\t * @private\n\t * @param {module:engine/view/text~Text} viewText View text to update.\n\t * @param {Object} options\n\t * @param {module:engine/view/position~Position} options.inlineFillerPosition The position where the inline\n\t * filler should be rendered.\n\t */\n\t_updateText( viewText, options ) {\n\t\tconst domText = this.domConverter.findCorrespondingDomText( viewText );\n\t\tconst newDomText = this.domConverter.viewToDom( viewText, domText.ownerDocument );\n\n\t\tconst actualText = domText.data;\n\t\tlet expectedText = newDomText.data;\n\n\t\tconst filler = options.inlineFillerPosition;\n\n\t\tif ( filler && filler.parent == viewText.parent && filler.offset == viewText.index ) {\n\t\t\texpectedText = INLINE_FILLER + expectedText;\n\t\t}\n\n\t\tif ( actualText != expectedText ) {\n\t\t\tconst actions = fastDiff( actualText, expectedText );\n\n\t\t\tfor ( const action of actions ) {\n\t\t\t\tif ( action.type === 'insert' ) {\n\t\t\t\t\tdomText.insertData( action.index, action.values.join( '' ) );\n\t\t\t\t} else { // 'delete'\n\t\t\t\t\tdomText.deleteData( action.index, action.howMany );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if attribute list needs to be updated and possibly updates it.\n\t *\n\t * @private\n\t * @param {module:engine/view/element~Element} viewElement The view element to update.\n\t */\n\t_updateAttrs( viewElement ) {\n\t\tconst domElement = this.domConverter.mapViewToDom( viewElement );\n\n\t\tif ( !domElement ) {\n\t\t\t// If there is no `domElement` it means that 'viewElement' is outdated as its mapping was updated\n\t\t\t// in 'this._updateChildrenMappings()'. There is no need to process it as new view element which\n\t\t\t// replaced old 'viewElement' mapping was also added to 'this.markedAttributes'\n\t\t\t// in 'this._updateChildrenMappings()' so it will be processed separately.\n\t\t\treturn;\n\t\t}\n\n\t\tconst domAttrKeys = Array.from( domElement.attributes ).map( attr => attr.name );\n\t\tconst viewAttrKeys = viewElement.getAttributeKeys();\n\n\t\t// Add or overwrite attributes.\n\t\tfor ( const key of viewAttrKeys ) {\n\t\t\tdomElement.setAttribute( key, viewElement.getAttribute( key ) );\n\t\t}\n\n\t\t// Remove from DOM attributes which do not exists in the view.\n\t\tfor ( const key of domAttrKeys ) {\n\t\t\tif ( !viewElement.hasAttribute( key ) ) {\n\t\t\t\tdomElement.removeAttribute( key );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if elements child list needs to be updated and possibly updates it.\n\t *\n\t * @private\n\t * @param {module:engine/view/element~Element} viewElement View element to update.\n\t * @param {Object} options\n\t * @param {module:engine/view/position~Position} options.inlineFillerPosition The position where the inline\n\t * filler should be rendered.\n\t */\n\t_updateChildren( viewElement, options ) {\n\t\tconst domElement = this.domConverter.mapViewToDom( viewElement );\n\n\t\tif ( !domElement ) {\n\t\t\t// If there is no `domElement` it means that it was already removed from DOM.\n\t\t\t// There is no need to process it. It will be processed when re-inserted.\n\t\t\treturn;\n\t\t}\n\n\t\tconst inlineFillerPosition = options.inlineFillerPosition;\n\t\tconst actualDomChildren = this.domConverter.mapViewToDom( viewElement ).childNodes;\n\t\tconst expectedDomChildren = Array.from(\n\t\t\tthis.domConverter.viewChildrenToDom( viewElement, domElement.ownerDocument, { bind: true, inlineFillerPosition } )\n\t\t);\n\n\t\t// Inline filler element has to be created as it is present in the DOM, but not in the view. It is required\n\t\t// during diffing so text nodes could be compared correctly and also during rendering to maintain\n\t\t// proper order and indexes while updating the DOM.\n\t\tif ( inlineFillerPosition && inlineFillerPosition.parent === viewElement ) {\n\t\t\taddInlineFiller( domElement.ownerDocument, expectedDomChildren, inlineFillerPosition.offset );\n\t\t}\n\n\t\tconst diff = this._diffNodeLists( actualDomChildren, expectedDomChildren );\n\n\t\tlet i = 0;\n\t\tconst nodesToUnbind = new Set();\n\n\t\t// Handle deletions first.\n\t\t// This is to prevent a situation where an element that already exists in `actualDomChildren` is inserted at a different\n\t\t// index in `actualDomChildren`. Since `actualDomChildren` is a `NodeList`, this works like move, not like an insert,\n\t\t// and it disrupts the whole algorithm. See https://github.com/ckeditor/ckeditor5/issues/6367.\n\t\t//\n\t\t// It doesn't matter in what order we remove or add nodes, as long as we remove and add correct nodes at correct indexes.\n\t\tfor ( const action of diff ) {\n\t\t\tif ( action === 'delete' ) {\n\t\t\t\tnodesToUnbind.add( actualDomChildren[ i ] );\n\t\t\t\tremove( actualDomChildren[ i ] );\n\t\t\t} else if ( action === 'equal' ) {\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\n\t\ti = 0;\n\n\t\tfor ( const action of diff ) {\n\t\t\tif ( action === 'insert' ) {\n\t\t\t\tinsertAt( domElement, i, expectedDomChildren[ i ] );\n\t\t\t\ti++;\n\t\t\t} else if ( action === 'equal' ) {\n\t\t\t\t// Force updating text nodes inside elements which did not change and do not need to be re-rendered (#1125).\n\t\t\t\t// Do it here (not in the loop above) because only after insertions the `i` index is correct.\n\t\t\t\tthis._markDescendantTextToSync( this.domConverter.domToView( expectedDomChildren[ i ] ) );\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\n\t\t// Unbind removed nodes. When node does not have a parent it means that it was removed from DOM tree during\n\t\t// comparison with the expected DOM. We don't need to check child nodes, because if child node was reinserted,\n\t\t// it was moved to DOM tree out of the removed node.\n\t\tfor ( const node of nodesToUnbind ) {\n\t\t\tif ( !node.parentNode ) {\n\t\t\t\tthis.domConverter.unbindDomElement( node );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Shorthand for diffing two arrays or node lists of DOM nodes.\n\t *\n\t * @private\n\t * @param {Array.<Node>|NodeList} actualDomChildren Actual DOM children\n\t * @param {Array.<Node>|NodeList} expectedDomChildren Expected DOM children.\n\t * @returns {Array.<String>} The list of actions based on the {@link module:utils/diff~diff} function.\n\t */\n\t_diffNodeLists( actualDomChildren, expectedDomChildren ) {\n\t\tactualDomChildren = filterOutFakeSelectionContainer( actualDomChildren, this._fakeSelectionContainer );\n\n\t\treturn diff( actualDomChildren, expectedDomChildren, sameNodes.bind( null, this.domConverter ) );\n\t}\n\n\t/**\n\t * Finds DOM nodes that were replaced with the similar nodes (same tag name) in the view. All nodes are compared\n\t * within one `insert`/`delete` action group, for example:\n\t *\n\t * \t\tActual DOM:\t\t<p><b>Foo</b>Bar<i>Baz</i><b>Bax</b></p>\n\t * \t\tExpected DOM:\t<p>Bar<b>123</b><i>Baz</i><b>456</b></p>\n\t * \t\tInput actions:\t[ insert, insert, delete, delete, equal, insert, delete ]\n\t * \t\tOutput actions:\t[ insert, replace, delete, equal, replace ]\n\t *\n\t * @private\n\t * @param {Array.<String>} actions Actions array which is a result of the {@link module:utils/diff~diff} function.\n\t * @param {Array.<Node>|NodeList} actualDom Actual DOM children\n\t * @param {Array.<Node>} expectedDom Expected DOM children.\n\t * @returns {Array.<String>} Actions array modified with the `replace` actions.\n\t */\n\t_findReplaceActions( actions, actualDom, expectedDom ) {\n\t\t// If there is no both 'insert' and 'delete' actions, no need to check for replaced elements.\n\t\tif ( actions.indexOf( 'insert' ) === -1 || actions.indexOf( 'delete' ) === -1 ) {\n\t\t\treturn actions;\n\t\t}\n\n\t\tlet newActions = [];\n\t\tlet actualSlice = [];\n\t\tlet expectedSlice = [];\n\n\t\tconst counter = { equal: 0, insert: 0, delete: 0 };\n\n\t\tfor ( const action of actions ) {\n\t\t\tif ( action === 'insert' ) {\n\t\t\t\texpectedSlice.push( expectedDom[ counter.equal + counter.insert ] );\n\t\t\t} else if ( action === 'delete' ) {\n\t\t\t\tactualSlice.push( actualDom[ counter.equal + counter.delete ] );\n\t\t\t} else { // equal\n\t\t\t\tnewActions = newActions.concat( diff( actualSlice, expectedSlice, areSimilar ).map( x => x === 'equal' ? 'replace' : x ) );\n\t\t\t\tnewActions.push( 'equal' );\n\t\t\t\t// Reset stored elements on 'equal'.\n\t\t\t\tactualSlice = [];\n\t\t\t\texpectedSlice = [];\n\t\t\t}\n\t\t\tcounter[ action ]++;\n\t\t}\n\n\t\treturn newActions.concat( diff( actualSlice, expectedSlice, areSimilar ).map( x => x === 'equal' ? 'replace' : x ) );\n\t}\n\n\t/**\n\t * Marks text nodes to be synchronized.\n\t *\n\t * If a text node is passed, it will be marked. If an element is passed, all descendant text nodes inside it will be marked.\n\t *\n\t * @private\n\t * @param {module:engine/view/node~Node} viewNode View node to sync.\n\t */\n\t_markDescendantTextToSync( viewNode ) {\n\t\tif ( !viewNode ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( viewNode.is( '$text' ) ) {\n\t\t\tthis.markedTexts.add( viewNode );\n\t\t} else if ( viewNode.is( 'element' ) ) {\n\t\t\tfor ( const child of viewNode.getChildren() ) {\n\t\t\t\tthis._markDescendantTextToSync( child );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if the selection needs to be updated and possibly updates it.\n\t *\n\t * @private\n\t */\n\t_updateSelection() {\n\t\t// If there is no selection - remove DOM and fake selections.\n\t\tif ( this.selection.rangeCount === 0 ) {\n\t\t\tthis._removeDomSelection();\n\t\t\tthis._removeFakeSelection();\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst domRoot = this.domConverter.mapViewToDom( this.selection.editableElement );\n\n\t\t// Do nothing if there is no focus, or there is no DOM element corresponding to selection's editable element.\n\t\tif ( !this.isFocused || !domRoot ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Render selection.\n\t\tif ( this.selection.isFake ) {\n\t\t\tthis._updateFakeSelection( domRoot );\n\t\t} else {\n\t\t\tthis._removeFakeSelection();\n\t\t\tthis._updateDomSelection( domRoot );\n\t\t}\n\t}\n\n\t/**\n\t * Updates the fake selection.\n\t *\n\t * @private\n\t * @param {HTMLElement} domRoot A valid DOM root where the fake selection container should be added.\n\t */\n\t_updateFakeSelection( domRoot ) {\n\t\tconst domDocument = domRoot.ownerDocument;\n\n\t\tif ( !this._fakeSelectionContainer ) {\n\t\t\tthis._fakeSelectionContainer = createFakeSelectionContainer( domDocument );\n\t\t}\n\n\t\tconst container = this._fakeSelectionContainer;\n\n\t\t// Bind fake selection container with the current selection *position*.\n\t\tthis.domConverter.bindFakeSelection( container, this.selection );\n\n\t\tif ( !this._fakeSelectionNeedsUpdate( domRoot ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !container.parentElement || container.parentElement != domRoot ) {\n\t\t\tdomRoot.appendChild( container );\n\t\t}\n\n\t\tcontainer.textContent = this.selection.fakeSelectionLabel || '\\u00A0';\n\n\t\tconst domSelection = domDocument.getSelection();\n\t\tconst domRange = domDocument.createRange();\n\n\t\tdomSelection.removeAllRanges();\n\t\tdomRange.selectNodeContents( container );\n\t\tdomSelection.addRange( domRange );\n\t}\n\n\t/**\n\t * Updates the DOM selection.\n\t *\n\t * @private\n\t * @param {HTMLElement} domRoot A valid DOM root where the DOM selection should be rendered.\n\t */\n\t_updateDomSelection( domRoot ) {\n\t\tconst domSelection = domRoot.ownerDocument.defaultView.getSelection();\n\n\t\t// Let's check whether DOM selection needs updating at all.\n\t\tif ( !this._domSelectionNeedsUpdate( domSelection ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Multi-range selection is not available in most browsers, and, at least in Chrome, trying to\n\t\t// set such selection, that is not continuous, throws an error. Because of that, we will just use anchor\n\t\t// and focus of view selection.\n\t\t// Since we are not supporting multi-range selection, we also do not need to check if proper editable is\n\t\t// selected. If there is any editable selected, it is okay (editable is taken from selection anchor).\n\t\tconst anchor = this.domConverter.viewPositionToDom( this.selection.anchor );\n\t\tconst focus = this.domConverter.viewPositionToDom( this.selection.focus );\n\n\t\t// Focus the new editing host.\n\t\t// Otherwise, FF may throw an error (https://github.com/ckeditor/ckeditor5/issues/721).\n\t\tdomRoot.focus();\n\n\t\tdomSelection.collapse( anchor.parent, anchor.offset );\n\t\tdomSelection.extend( focus.parent, focus.offset );\n\n\t\t// Firefoxspecific hack (https://github.com/ckeditor/ckeditor5-engine/issues/1439).\n\t\tif ( env.isGecko ) {\n\t\t\tfixGeckoSelectionAfterBr( focus, domSelection );\n\t\t}\n\t}\n\n\t/**\n\t * Checks whether a given DOM selection needs to be updated.\n\t *\n\t * @private\n\t * @param {Selection} domSelection The DOM selection to check.\n\t * @returns {Boolean}\n\t */\n\t_domSelectionNeedsUpdate( domSelection ) {\n\t\tif ( !this.domConverter.isDomSelectionCorrect( domSelection ) ) {\n\t\t\t// Current DOM selection is in incorrect position. We need to update it.\n\t\t\treturn true;\n\t\t}\n\n\t\tconst oldViewSelection = domSelection && this.domConverter.domSelectionToView( domSelection );\n\n\t\tif ( oldViewSelection && this.selection.isEqual( oldViewSelection ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If selection is not collapsed, it does not need to be updated if it is similar.\n\t\tif ( !this.selection.isCollapsed && this.selection.isSimilar( oldViewSelection ) ) {\n\t\t\t// Selection did not changed and is correct, do not update.\n\t\t\treturn false;\n\t\t}\n\n\t\t// Selections are not similar.\n\t\treturn true;\n\t}\n\n\t/**\n\t * Checks whether the fake selection needs to be updated.\n\t *\n\t * @private\n\t * @param {HTMLElement} domRoot A valid DOM root where a new fake selection container should be added.\n\t * @returns {Boolean}\n\t */\n\t_fakeSelectionNeedsUpdate( domRoot ) {\n\t\tconst container = this._fakeSelectionContainer;\n\t\tconst domSelection = domRoot.ownerDocument.getSelection();\n\n\t\t// Fake selection needs to be updated if there's no fake selection container, or the container currently sits\n\t\t// in a different root.\n\t\tif ( !container || container.parentElement !== domRoot ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Make sure that the selection actually is within the fake selection.\n\t\tif ( domSelection.anchorNode !== container && !container.contains( domSelection.anchorNode ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn container.textContent !== this.selection.fakeSelectionLabel;\n\t}\n\n\t/**\n\t * Removes the DOM selection.\n\t *\n\t * @private\n\t */\n\t_removeDomSelection() {\n\t\tfor ( const doc of this.domDocuments ) {\n\t\t\tconst domSelection = doc.getSelection();\n\n\t\t\tif ( domSelection.rangeCount ) {\n\t\t\t\tconst activeDomElement = doc.activeElement;\n\t\t\t\tconst viewElement = this.domConverter.mapDomToView( activeDomElement );\n\n\t\t\t\tif ( activeDomElement && viewElement ) {\n\t\t\t\t\tdoc.getSelection().removeAllRanges();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Removes the fake selection.\n\t *\n\t * @private\n\t */\n\t_removeFakeSelection() {\n\t\tconst container = this._fakeSelectionContainer;\n\n\t\tif ( container ) {\n\t\t\tcontainer.remove();\n\t\t}\n\t}\n\n\t/**\n\t * Checks if focus needs to be updated and possibly updates it.\n\t *\n\t * @private\n\t */\n\t_updateFocus() {\n\t\tif ( this.isFocused ) {\n\t\t\tconst editable = this.selection.editableElement;\n\n\t\t\tif ( editable ) {\n\t\t\t\tthis.domConverter.focus( editable );\n\t\t\t}\n\t\t}\n\t}\n}\n\nmix( Renderer, ObservableMixin );\n\n// Checks if provided element is editable.\n//\n// @private\n// @param {module:engine/view/element~Element} element\n// @returns {Boolean}\nfunction isEditable( element ) {\n\tif ( element.getAttribute( 'contenteditable' ) == 'false' ) {\n\t\treturn false;\n\t}\n\n\tconst parent = element.findAncestor( element => element.hasAttribute( 'contenteditable' ) );\n\n\treturn !parent || parent.getAttribute( 'contenteditable' ) == 'true';\n}\n\n// Adds inline filler at a given position.\n//\n// The position can be given as an array of DOM nodes and an offset in that array,\n// or a DOM parent element and an offset in that element.\n//\n// @private\n// @param {Document} domDocument\n// @param {Element|Array.<Node>} domParentOrArray\n// @param {Number} offset\n// @returns {Text} The DOM text node that contains an inline filler.\nfunction addInlineFiller( domDocument, domParentOrArray, offset ) {\n\tconst childNodes = domParentOrArray instanceof Array ? domParentOrArray : domParentOrArray.childNodes;\n\tconst nodeAfterFiller = childNodes[ offset ];\n\n\tif ( isText( nodeAfterFiller ) ) {\n\t\tnodeAfterFiller.data = INLINE_FILLER + nodeAfterFiller.data;\n\n\t\treturn nodeAfterFiller;\n\t} else {\n\t\tconst fillerNode = domDocument.createTextNode( INLINE_FILLER );\n\n\t\tif ( Array.isArray( domParentOrArray ) ) {\n\t\t\tchildNodes.splice( offset, 0, fillerNode );\n\t\t} else {\n\t\t\tinsertAt( domParentOrArray, offset, fillerNode );\n\t\t}\n\n\t\treturn fillerNode;\n\t}\n}\n\n// Whether two DOM nodes should be considered as similar.\n// Nodes are considered similar if they have the same tag name.\n//\n// @private\n// @param {Node} node1\n// @param {Node} node2\n// @returns {Boolean}\nfunction areSimilar( node1, node2 ) {\n\treturn isNode( node1 ) && isNode( node2 ) &&\n\t\t!isText( node1 ) && !isText( node2 ) &&\n\t\tnode1.nodeType !== Node.COMMENT_NODE && node2.nodeType !== Node.COMMENT_NODE &&\n\t\tnode1.tagName.toLowerCase() === node2.tagName.toLowerCase();\n}\n\n// Whether two dom nodes should be considered as the same.\n// Two nodes which are considered the same are:\n//\n//\t\t* Text nodes with the same text.\n//\t\t* Element nodes represented by the same object.\n//\t\t* Two block filler elements.\n//\n// @private\n// @param {String} blockFillerMode Block filler mode, see {@link module:engine/view/domconverter~DomConverter#blockFillerMode}.\n// @param {Node} node1\n// @param {Node} node2\n// @returns {Boolean}\nfunction sameNodes( domConverter, actualDomChild, expectedDomChild ) {\n\t// Elements.\n\tif ( actualDomChild === expectedDomChild ) {\n\t\treturn true;\n\t}\n\t// Texts.\n\telse if ( isText( actualDomChild ) && isText( expectedDomChild ) ) {\n\t\treturn actualDomChild.data === expectedDomChild.data;\n\t}\n\t// Block fillers.\n\telse if ( domConverter.isBlockFiller( actualDomChild ) &&\n\t\tdomConverter.isBlockFiller( expectedDomChild ) ) {\n\t\treturn true;\n\t}\n\n\t// Not matching types.\n\treturn false;\n}\n\n// The following is a Firefoxspecific hack (https://github.com/ckeditor/ckeditor5-engine/issues/1439).\n// When the native DOM selection is at the end of the block and preceded by <br /> e.g.\n//\n//\t\t<p>foo<br/>[]</p>\n//\n// which happens a lot when using the soft line break, the browser fails to (visually) move the\n// caret to the new line. A quick fix is as simple as forcerefreshing the selection with the same range.\nfunction fixGeckoSelectionAfterBr( focus, domSelection ) {\n\tconst parent = focus.parent;\n\n\t// This fix works only when the focus point is at the very end of an element.\n\t// There is no point in running it in cases unrelated to the browser bug.\n\tif ( parent.nodeType != Node.ELEMENT_NODE || focus.offset != parent.childNodes.length - 1 ) {\n\t\treturn;\n\t}\n\n\tconst childAtOffset = parent.childNodes[ focus.offset ];\n\n\t// To stay on the safe side, the fix being as specific as possible, it targets only the\n\t// selection which is at the very end of the element and preceded by <br />.\n\tif ( childAtOffset && childAtOffset.tagName == 'BR' ) {\n\t\tdomSelection.addRange( domSelection.getRangeAt( 0 ) );\n\t}\n}\n\nfunction filterOutFakeSelectionContainer( domChildList, fakeSelectionContainer ) {\n\tconst childList = Array.from( domChildList );\n\n\tif ( childList.length == 0 || !fakeSelectionContainer ) {\n\t\treturn childList;\n\t}\n\n\tconst last = childList[ childList.length - 1 ];\n\n\tif ( last == fakeSelectionContainer ) {\n\t\tchildList.pop();\n\t}\n\n\treturn childList;\n}\n\n// Creates a fake selection container for a given document.\n//\n// @private\n// @param {Document} domDocument\n// @returns {HTMLElement}\nfunction createFakeSelectionContainer( domDocument ) {\n\tconst container = domDocument.createElement( 'div' );\n\n\tcontainer.className = 'ck-fake-selection-container';\n\n\tObject.assign( container.style, {\n\t\tposition: 'fixed',\n\t\ttop: 0,\n\t\tleft: '-9999px',\n\t\t// See https://github.com/ckeditor/ckeditor5/issues/752.\n\t\twidth: '42px'\n\t} );\n\n\t// Fill it with a text node so we can update it later.\n\tcontainer.textContent = '\\u00A0';\n\n\treturn container;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals window, document */\n\n/**\n * @module utils/dom/global\n */\n\n/**\n * A helper (module) giving an access to the global DOM objects such as `window` and\n * `document`. Accessing these objects using this helper allows easy and bulletproof\n * testing, i.e. stubbing native properties:\n *\n *\t\timport global from 'ckeditor5/utils/dom/global.js';\n *\n *\t\t// This stub will work for any code using global module.\n *\t\ttestUtils.sinon.stub( global, 'window', {\n *\t\t\tinnerWidth: 10000\n *\t\t} );\n *\n *\t\tconsole.log( global.window.innerWidth );\n */\nexport default { window, document };\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/indexof\n */\n\n/**\n * Returns index of the node in the parent element.\n *\n * @param {Node} node Node which index is tested.\n * @returns {Number} Index of the node in the parent element. Returns 0 if node has no parent.\n */\nexport default function indexOf( node ) {\n\tlet index = 0;\n\n\twhile ( node.previousSibling ) {\n\t\tnode = node.previousSibling;\n\t\tindex++;\n\t}\n\n\treturn index;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* globals Node */\n\n/**\n * @module utils/dom/getancestors\n */\n\n/**\n * Returns all ancestors of given DOM node, starting from the top-most (root). Includes the given node itself. If the\n * node is a part of `DocumentFragment` that `DocumentFragment` will be returned. In contrary, if the node is\n * appended to a `Document`, that `Document` will not be returned (algorithms operating on DOM tree care for `Document#documentElement`\n * at most, which will be returned).\n *\n * @param {Node} node DOM node.\n * @returns {Array.<Node|DocumentFragment>} Array of given `node` parents.\n */\nexport default function getAncestors( node ) {\n\tconst nodes = [];\n\n\t// We are interested in `Node`s `DocumentFragment`s only.\n\twhile ( node && node.nodeType != Node.DOCUMENT_NODE ) {\n\t\tnodes.unshift( node );\n\t\tnode = node.parentNode;\n\t}\n\n\treturn nodes;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/domconverter\n */\n\n/* globals document, Node, NodeFilter, Text */\n\nimport ViewText from './text';\nimport ViewElement from './element';\nimport ViewPosition from './position';\nimport ViewRange from './range';\nimport ViewSelection from './selection';\nimport ViewDocumentFragment from './documentfragment';\nimport ViewTreeWalker from './treewalker';\nimport Matcher from './matcher';\nimport { BR_FILLER, getDataWithoutFiller, INLINE_FILLER_LENGTH, isInlineFiller, NBSP_FILLER, startsWithFiller } from './filler';\n\nimport global from '@ckeditor/ckeditor5-utils/src/dom/global';\nimport indexOf from '@ckeditor/ckeditor5-utils/src/dom/indexof';\nimport getAncestors from '@ckeditor/ckeditor5-utils/src/dom/getancestors';\nimport getCommonAncestor from '@ckeditor/ckeditor5-utils/src/dom/getcommonancestor';\nimport isText from '@ckeditor/ckeditor5-utils/src/dom/istext';\nimport { isElement } from 'lodash-es';\n\n// eslint-disable-next-line new-cap\nconst BR_FILLER_REF = BR_FILLER( document );\n\n/**\n * `DomConverter` is a set of tools to do transformations between DOM nodes and view nodes. It also handles\n * {@link module:engine/view/domconverter~DomConverter#bindElements bindings} between these nodes.\n *\n * An instance of the DOM converter is available under\n * {@link module:engine/view/view~View#domConverter `editor.editing.view.domConverter`}.\n *\n * The DOM converter does not check which nodes should be rendered (use {@link module:engine/view/renderer~Renderer}), does not keep the\n * state of a tree nor keeps the synchronization between the tree view and the DOM tree (use {@link module:engine/view/document~Document}).\n *\n * The DOM converter keeps DOM elements to view element bindings, so when the converter gets destroyed, the bindings are lost.\n * Two converters will keep separate binding maps, so one tree view can be bound with two DOM trees.\n */\nexport default class DomConverter {\n\t/**\n\t * Creates a DOM converter.\n\t *\n\t * @param {module:engine/view/document~Document} document The view document instance.\n\t * @param {Object} options An object with configuration options.\n\t * @param {module:engine/view/filler~BlockFillerMode} [options.blockFillerMode='br'] The type of the block filler to use.\n\t */\n\tconstructor( document, options = {} ) {\n\t\t/**\n\t\t * @readonly\n\t\t * @type {module:engine/view/document~Document}\n\t\t */\n\t\tthis.document = document;\n\n\t\t/**\n\t\t * The mode of a block filler used by the DOM converter.\n\t\t *\n\t\t * @readonly\n\t\t * @member {'br'|'nbsp'} module:engine/view/domconverter~DomConverter#blockFillerMode\n\t\t */\n\t\tthis.blockFillerMode = options.blockFillerMode || 'br';\n\n\t\t/**\n\t\t * Elements which are considered pre-formatted elements.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Array.<String>} module:engine/view/domconverter~DomConverter#preElements\n\t\t */\n\t\tthis.preElements = [ 'pre' ];\n\n\t\t/**\n\t\t * Elements which are considered block elements (and hence should be filled with a\n\t\t * {@link #isBlockFiller block filler}).\n\t\t *\n\t\t * Whether an element is considered a block element also affects handling of trailing whitespaces.\n\t\t *\n\t\t * You can extend this array if you introduce support for block elements which are not yet recognized here.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Array.<String>} module:engine/view/domconverter~DomConverter#blockElements\n\t\t */\n\t\tthis.blockElements = [ 'p', 'div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'li', 'dd', 'dt', 'figcaption', 'td', 'th' ];\n\n\t\t/**\n\t\t * Block {@link module:engine/view/filler filler} creator, which is used to create all block fillers during the\n\t\t * view-to-DOM conversion and to recognize block fillers during the DOM-to-view conversion.\n\t\t *\n\t\t * @readonly\n\t\t * @private\n\t\t * @member {Function} module:engine/view/domconverter~DomConverter#_blockFiller\n\t\t */\n\t\tthis._blockFiller = this.blockFillerMode == 'br' ? BR_FILLER : NBSP_FILLER;\n\n\t\t/**\n\t\t * The DOM-to-view mapping.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap} module:engine/view/domconverter~DomConverter#_domToViewMapping\n\t\t */\n\t\tthis._domToViewMapping = new WeakMap();\n\n\t\t/**\n\t\t * The view-to-DOM mapping.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap} module:engine/view/domconverter~DomConverter#_viewToDomMapping\n\t\t */\n\t\tthis._viewToDomMapping = new WeakMap();\n\n\t\t/**\n\t\t * Holds the mapping between fake selection containers and corresponding view selections.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap} module:engine/view/domconverter~DomConverter#_fakeSelectionMapping\n\t\t */\n\t\tthis._fakeSelectionMapping = new WeakMap();\n\n\t\t/**\n\t\t * Matcher for view elements whose content should be treated as a raw data\n\t\t * and not processed during conversion from DOM nodes to view elements.\n\t\t *\n\t\t * @private\n\t\t * @type {module:engine/view/matcher~Matcher}\n\t\t */\n\t\tthis._rawContentElementMatcher = new Matcher();\n\n\t\t/**\n\t\t * Set of encountered raw content DOM nodes. It is used for preventing left trimming of the following text node.\n\t\t *\n\t\t * @private\n\t\t * @type {WeakSet.<Node>}\n\t\t */\n\t\tthis._encounteredRawContentDomNodes = new WeakSet();\n\t}\n\n\t/**\n\t * Binds given DOM element that represents fake selection to a **position** of a\n\t * {@link module:engine/view/documentselection~DocumentSelection document selection}.\n\t * Document selection copy is stored and can be retrieved by\n\t * {@link module:engine/view/domconverter~DomConverter#fakeSelectionToView} method.\n\t *\n\t * @param {HTMLElement} domElement\n\t * @param {module:engine/view/documentselection~DocumentSelection} viewDocumentSelection\n\t */\n\tbindFakeSelection( domElement, viewDocumentSelection ) {\n\t\tthis._fakeSelectionMapping.set( domElement, new ViewSelection( viewDocumentSelection ) );\n\t}\n\n\t/**\n\t * Returns {@link module:engine/view/selection~Selection view selection} instance corresponding to\n\t * given DOM element that represents fake selection. Returns `undefined` if binding to given DOM element does not exists.\n\t *\n\t * @param {HTMLElement} domElement\n\t * @returns {module:engine/view/selection~Selection|undefined}\n\t */\n\tfakeSelectionToView( domElement ) {\n\t\treturn this._fakeSelectionMapping.get( domElement );\n\t}\n\n\t/**\n\t * Binds DOM and View elements, so it will be possible to get corresponding elements using\n\t * {@link module:engine/view/domconverter~DomConverter#mapDomToView} and\n\t * {@link module:engine/view/domconverter~DomConverter#mapViewToDom}.\n\t *\n\t * @param {HTMLElement} domElement DOM element to bind.\n\t * @param {module:engine/view/element~Element} viewElement View element to bind.\n\t */\n\tbindElements( domElement, viewElement ) {\n\t\tthis._domToViewMapping.set( domElement, viewElement );\n\t\tthis._viewToDomMapping.set( viewElement, domElement );\n\t}\n\n\t/**\n\t * Unbinds given `domElement` from the view element it was bound to. Unbinding is deep, meaning that all children of\n\t * `domElement` will be unbound too.\n\t *\n\t * @param {HTMLElement} domElement DOM element to unbind.\n\t */\n\tunbindDomElement( domElement ) {\n\t\tconst viewElement = this._domToViewMapping.get( domElement );\n\n\t\tif ( viewElement ) {\n\t\t\tthis._domToViewMapping.delete( domElement );\n\t\t\tthis._viewToDomMapping.delete( viewElement );\n\n\t\t\tfor ( const child of domElement.childNodes ) {\n\t\t\t\tthis.unbindDomElement( child );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Binds DOM and View document fragments, so it will be possible to get corresponding document fragments using\n\t * {@link module:engine/view/domconverter~DomConverter#mapDomToView} and\n\t * {@link module:engine/view/domconverter~DomConverter#mapViewToDom}.\n\t *\n\t * @param {DocumentFragment} domFragment DOM document fragment to bind.\n\t * @param {module:engine/view/documentfragment~DocumentFragment} viewFragment View document fragment to bind.\n\t */\n\tbindDocumentFragments( domFragment, viewFragment ) {\n\t\tthis._domToViewMapping.set( domFragment, viewFragment );\n\t\tthis._viewToDomMapping.set( viewFragment, domFragment );\n\t}\n\n\t/**\n\t * Converts view to DOM. For all text nodes, not bound elements and document fragments new items will\n\t * be created. For bound elements and document fragments function will return corresponding items.\n\t *\n\t * @param {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment} viewNode\n\t * View node or document fragment to transform.\n\t * @param {Document} domDocument Document which will be used to create DOM nodes.\n\t * @param {Object} [options] Conversion options.\n\t * @param {Boolean} [options.bind=false] Determines whether new elements will be bound.\n\t * @param {Boolean} [options.withChildren=true] If `true`, node's and document fragment's children will be converted too.\n\t * @returns {Node|DocumentFragment} Converted node or DocumentFragment.\n\t */\n\tviewToDom( viewNode, domDocument, options = {} ) {\n\t\tif ( viewNode.is( '$text' ) ) {\n\t\t\tconst textData = this._processDataFromViewText( viewNode );\n\n\t\t\treturn domDocument.createTextNode( textData );\n\t\t} else {\n\t\t\tif ( this.mapViewToDom( viewNode ) ) {\n\t\t\t\treturn this.mapViewToDom( viewNode );\n\t\t\t}\n\n\t\t\tlet domElement;\n\n\t\t\tif ( viewNode.is( 'documentFragment' ) ) {\n\t\t\t\t// Create DOM document fragment.\n\t\t\t\tdomElement = domDocument.createDocumentFragment();\n\n\t\t\t\tif ( options.bind ) {\n\t\t\t\t\tthis.bindDocumentFragments( domElement, viewNode );\n\t\t\t\t}\n\t\t\t} else if ( viewNode.is( 'uiElement' ) ) {\n\t\t\t\t// UIElement has its own render() method (see #799).\n\t\t\t\tdomElement = viewNode.render( domDocument );\n\n\t\t\t\tif ( options.bind ) {\n\t\t\t\t\tthis.bindElements( domElement, viewNode );\n\t\t\t\t}\n\n\t\t\t\treturn domElement;\n\t\t\t} else {\n\t\t\t\t// Create DOM element.\n\t\t\t\tif ( viewNode.hasAttribute( 'xmlns' ) ) {\n\t\t\t\t\tdomElement = domDocument.createElementNS( viewNode.getAttribute( 'xmlns' ), viewNode.name );\n\t\t\t\t} else {\n\t\t\t\t\tdomElement = domDocument.createElement( viewNode.name );\n\t\t\t\t}\n\n\t\t\t\t// RawElement take care of their children in RawElement#render() method which can be customized\n\t\t\t\t// (see https://github.com/ckeditor/ckeditor5/issues/4469).\n\t\t\t\tif ( viewNode.is( 'rawElement' ) ) {\n\t\t\t\t\tviewNode.render( domElement );\n\t\t\t\t}\n\n\t\t\t\tif ( options.bind ) {\n\t\t\t\t\tthis.bindElements( domElement, viewNode );\n\t\t\t\t}\n\n\t\t\t\t// Copy element's attributes.\n\t\t\t\tfor ( const key of viewNode.getAttributeKeys() ) {\n\t\t\t\t\tdomElement.setAttribute( key, viewNode.getAttribute( key ) );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( options.withChildren !== false ) {\n\t\t\t\tfor ( const child of this.viewChildrenToDom( viewNode, domDocument, options ) ) {\n\t\t\t\t\tdomElement.appendChild( child );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn domElement;\n\t\t}\n\t}\n\n\t/**\n\t * Converts children of the view element to DOM using the\n\t * {@link module:engine/view/domconverter~DomConverter#viewToDom} method.\n\t * Additionally, this method adds block {@link module:engine/view/filler filler} to the list of children, if needed.\n\t *\n\t * @param {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment} viewElement Parent view element.\n\t * @param {Document} domDocument Document which will be used to create DOM nodes.\n\t * @param {Object} options See {@link module:engine/view/domconverter~DomConverter#viewToDom} options parameter.\n\t * @returns {Iterable.<Node>} DOM nodes.\n\t */\n\t* viewChildrenToDom( viewElement, domDocument, options = {} ) {\n\t\tconst fillerPositionOffset = viewElement.getFillerOffset && viewElement.getFillerOffset();\n\t\tlet offset = 0;\n\n\t\tfor ( const childView of viewElement.getChildren() ) {\n\t\t\tif ( fillerPositionOffset === offset ) {\n\t\t\t\tyield this._blockFiller( domDocument );\n\t\t\t}\n\n\t\t\tyield this.viewToDom( childView, domDocument, options );\n\n\t\t\toffset++;\n\t\t}\n\n\t\tif ( fillerPositionOffset === offset ) {\n\t\t\tyield this._blockFiller( domDocument );\n\t\t}\n\t}\n\n\t/**\n\t * Converts view {@link module:engine/view/range~Range} to DOM range.\n\t * Inline and block {@link module:engine/view/filler fillers} are handled during the conversion.\n\t *\n\t * @param {module:engine/view/range~Range} viewRange View range.\n\t * @returns {Range} DOM range.\n\t */\n\tviewRangeToDom( viewRange ) {\n\t\tconst domStart = this.viewPositionToDom( viewRange.start );\n\t\tconst domEnd = this.viewPositionToDom( viewRange.end );\n\n\t\tconst domRange = document.createRange();\n\t\tdomRange.setStart( domStart.parent, domStart.offset );\n\t\tdomRange.setEnd( domEnd.parent, domEnd.offset );\n\n\t\treturn domRange;\n\t}\n\n\t/**\n\t * Converts view {@link module:engine/view/position~Position} to DOM parent and offset.\n\t *\n\t * Inline and block {@link module:engine/view/filler fillers} are handled during the conversion.\n\t * If the converted position is directly before inline filler it is moved inside the filler.\n\t *\n\t * @param {module:engine/view/position~Position} viewPosition View position.\n\t * @returns {Object|null} position DOM position or `null` if view position could not be converted to DOM.\n\t * @returns {Node} position.parent DOM position parent.\n\t * @returns {Number} position.offset DOM position offset.\n\t */\n\tviewPositionToDom( viewPosition ) {\n\t\tconst viewParent = viewPosition.parent;\n\n\t\tif ( viewParent.is( '$text' ) ) {\n\t\t\tconst domParent = this.findCorrespondingDomText( viewParent );\n\n\t\t\tif ( !domParent ) {\n\t\t\t\t// Position is in a view text node that has not been rendered to DOM yet.\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tlet offset = viewPosition.offset;\n\n\t\t\tif ( startsWithFiller( domParent ) ) {\n\t\t\t\toffset += INLINE_FILLER_LENGTH;\n\t\t\t}\n\n\t\t\treturn { parent: domParent, offset };\n\t\t} else {\n\t\t\t// viewParent is instance of ViewElement.\n\t\t\tlet domParent, domBefore, domAfter;\n\n\t\t\tif ( viewPosition.offset === 0 ) {\n\t\t\t\tdomParent = this.mapViewToDom( viewParent );\n\n\t\t\t\tif ( !domParent ) {\n\t\t\t\t\t// Position is in a view element that has not been rendered to DOM yet.\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tdomAfter = domParent.childNodes[ 0 ];\n\t\t\t} else {\n\t\t\t\tconst nodeBefore = viewPosition.nodeBefore;\n\n\t\t\t\tdomBefore = nodeBefore.is( '$text' ) ?\n\t\t\t\t\tthis.findCorrespondingDomText( nodeBefore ) :\n\t\t\t\t\tthis.mapViewToDom( viewPosition.nodeBefore );\n\n\t\t\t\tif ( !domBefore ) {\n\t\t\t\t\t// Position is after a view element that has not been rendered to DOM yet.\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tdomParent = domBefore.parentNode;\n\t\t\t\tdomAfter = domBefore.nextSibling;\n\t\t\t}\n\n\t\t\t// If there is an inline filler at position return position inside the filler. We should never return\n\t\t\t// the position before the inline filler.\n\t\t\tif ( isText( domAfter ) && startsWithFiller( domAfter ) ) {\n\t\t\t\treturn { parent: domAfter, offset: INLINE_FILLER_LENGTH };\n\t\t\t}\n\n\t\t\tconst offset = domBefore ? indexOf( domBefore ) + 1 : 0;\n\n\t\t\treturn { parent: domParent, offset };\n\t\t}\n\t}\n\n\t/**\n\t * Converts DOM to view. For all text nodes, not bound elements and document fragments new items will\n\t * be created. For bound elements and document fragments function will return corresponding items. For\n\t * {@link module:engine/view/filler fillers} `null` will be returned.\n\t * For all DOM elements rendered by {@link module:engine/view/uielement~UIElement} that UIElement will be returned.\n\t *\n\t * @param {Node|DocumentFragment} domNode DOM node or document fragment to transform.\n\t * @param {Object} [options] Conversion options.\n\t * @param {Boolean} [options.bind=false] Determines whether new elements will be bound.\n\t * @param {Boolean} [options.withChildren=true] If `true`, node's and document fragment's children will be converted too.\n\t * @param {Boolean} [options.keepOriginalCase=false] If `false`, node's tag name will be converter to lower case.\n\t * @returns {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment|null} Converted node or document fragment\n\t * or `null` if DOM node is a {@link module:engine/view/filler filler} or the given node is an empty text node.\n\t */\n\tdomToView( domNode, options = {} ) {\n\t\tif ( this.isBlockFiller( domNode, this.blockFillerMode ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// When node is inside a UIElement or a RawElement return that parent as it's view representation.\n\t\tconst hostElement = this.getHostViewElement( domNode );\n\n\t\tif ( hostElement ) {\n\t\t\treturn hostElement;\n\t\t}\n\n\t\tif ( isText( domNode ) ) {\n\t\t\tif ( isInlineFiller( domNode ) ) {\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tconst textData = this._processDataFromDomText( domNode );\n\n\t\t\t\treturn textData === '' ? null : new ViewText( this.document, textData );\n\t\t\t}\n\t\t} else if ( this.isComment( domNode ) ) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tif ( this.mapDomToView( domNode ) ) {\n\t\t\t\treturn this.mapDomToView( domNode );\n\t\t\t}\n\n\t\t\tlet viewElement;\n\n\t\t\tif ( this.isDocumentFragment( domNode ) ) {\n\t\t\t\t// Create view document fragment.\n\t\t\t\tviewElement = new ViewDocumentFragment( this.document );\n\n\t\t\t\tif ( options.bind ) {\n\t\t\t\t\tthis.bindDocumentFragments( domNode, viewElement );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Create view element.\n\t\t\t\tconst viewName = options.keepOriginalCase ? domNode.tagName : domNode.tagName.toLowerCase();\n\t\t\t\tviewElement = new ViewElement( this.document, viewName );\n\n\t\t\t\tif ( options.bind ) {\n\t\t\t\t\tthis.bindElements( domNode, viewElement );\n\t\t\t\t}\n\n\t\t\t\t// Copy element's attributes.\n\t\t\t\tconst attrs = domNode.attributes;\n\n\t\t\t\tfor ( let i = attrs.length - 1; i >= 0; i-- ) {\n\t\t\t\t\tviewElement._setAttribute( attrs[ i ].name, attrs[ i ].value );\n\t\t\t\t}\n\n\t\t\t\t// Treat this element's content as a raw data if it was registered as such.\n\t\t\t\tif ( options.withChildren !== false && this._rawContentElementMatcher.match( viewElement ) ) {\n\t\t\t\t\tviewElement._setCustomProperty( '$rawContent', domNode.innerHTML );\n\n\t\t\t\t\t// Store a DOM node to prevent left trimming of the following text node.\n\t\t\t\t\tthis._encounteredRawContentDomNodes.add( domNode );\n\n\t\t\t\t\treturn viewElement;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( options.withChildren !== false ) {\n\t\t\t\tfor ( const child of this.domChildrenToView( domNode, options ) ) {\n\t\t\t\t\tviewElement._appendChild( child );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn viewElement;\n\t\t}\n\t}\n\n\t/**\n\t * Converts children of the DOM element to view nodes using\n\t * the {@link module:engine/view/domconverter~DomConverter#domToView} method.\n\t * Additionally this method omits block {@link module:engine/view/filler filler}, if it exists in the DOM parent.\n\t *\n\t * @param {HTMLElement} domElement Parent DOM element.\n\t * @param {Object} options See {@link module:engine/view/domconverter~DomConverter#domToView} options parameter.\n\t * @returns {Iterable.<module:engine/view/node~Node>} View nodes.\n\t */\n\t* domChildrenToView( domElement, options = {} ) {\n\t\tfor ( let i = 0; i < domElement.childNodes.length; i++ ) {\n\t\t\tconst domChild = domElement.childNodes[ i ];\n\t\t\tconst viewChild = this.domToView( domChild, options );\n\n\t\t\tif ( viewChild !== null ) {\n\t\t\t\tyield viewChild;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Converts DOM selection to view {@link module:engine/view/selection~Selection}.\n\t * Ranges which cannot be converted will be omitted.\n\t *\n\t * @param {Selection} domSelection DOM selection.\n\t * @returns {module:engine/view/selection~Selection} View selection.\n\t */\n\tdomSelectionToView( domSelection ) {\n\t\t// DOM selection might be placed in fake selection container.\n\t\t// If container contains fake selection - return corresponding view selection.\n\t\tif ( domSelection.rangeCount === 1 ) {\n\t\t\tlet container = domSelection.getRangeAt( 0 ).startContainer;\n\n\t\t\t// The DOM selection might be moved to the text node inside the fake selection container.\n\t\t\tif ( isText( container ) ) {\n\t\t\t\tcontainer = container.parentNode;\n\t\t\t}\n\n\t\t\tconst viewSelection = this.fakeSelectionToView( container );\n\n\t\t\tif ( viewSelection ) {\n\t\t\t\treturn viewSelection;\n\t\t\t}\n\t\t}\n\n\t\tconst isBackward = this.isDomSelectionBackward( domSelection );\n\n\t\tconst viewRanges = [];\n\n\t\tfor ( let i = 0; i < domSelection.rangeCount; i++ ) {\n\t\t\t// DOM Range have correct start and end, no matter what is the DOM Selection direction. So we don't have to fix anything.\n\t\t\tconst domRange = domSelection.getRangeAt( i );\n\t\t\tconst viewRange = this.domRangeToView( domRange );\n\n\t\t\tif ( viewRange ) {\n\t\t\t\tviewRanges.push( viewRange );\n\t\t\t}\n\t\t}\n\n\t\treturn new ViewSelection( viewRanges, { backward: isBackward } );\n\t}\n\n\t/**\n\t * Converts DOM Range to view {@link module:engine/view/range~Range}.\n\t * If the start or end position can not be converted `null` is returned.\n\t *\n\t * @param {Range} domRange DOM range.\n\t * @returns {module:engine/view/range~Range|null} View range.\n\t */\n\tdomRangeToView( domRange ) {\n\t\tconst viewStart = this.domPositionToView( domRange.startContainer, domRange.startOffset );\n\t\tconst viewEnd = this.domPositionToView( domRange.endContainer, domRange.endOffset );\n\n\t\tif ( viewStart && viewEnd ) {\n\t\t\treturn new ViewRange( viewStart, viewEnd );\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Converts DOM parent and offset to view {@link module:engine/view/position~Position}.\n\t *\n\t * If the position is inside a {@link module:engine/view/filler filler} which has no corresponding view node,\n\t * position of the filler will be converted and returned.\n\t *\n\t * If the position is inside DOM element rendered by {@link module:engine/view/uielement~UIElement}\n\t * that position will be converted to view position before that UIElement.\n\t *\n\t * If structures are too different and it is not possible to find corresponding position then `null` will be returned.\n\t *\n\t * @param {Node} domParent DOM position parent.\n\t * @param {Number} domOffset DOM position offset.\n\t * @returns {module:engine/view/position~Position} viewPosition View position.\n\t */\n\tdomPositionToView( domParent, domOffset ) {\n\t\tif ( this.isBlockFiller( domParent, this.blockFillerMode ) ) {\n\t\t\treturn this.domPositionToView( domParent.parentNode, indexOf( domParent ) );\n\t\t}\n\n\t\t// If position is somewhere inside UIElement or a RawElement - return position before that element.\n\t\tconst viewElement = this.mapDomToView( domParent );\n\n\t\tif ( viewElement && ( viewElement.is( 'uiElement' ) || viewElement.is( 'rawElement' ) ) ) {\n\t\t\treturn ViewPosition._createBefore( viewElement );\n\t\t}\n\n\t\tif ( isText( domParent ) ) {\n\t\t\tif ( isInlineFiller( domParent ) ) {\n\t\t\t\treturn this.domPositionToView( domParent.parentNode, indexOf( domParent ) );\n\t\t\t}\n\n\t\t\tconst viewParent = this.findCorrespondingViewText( domParent );\n\t\t\tlet offset = domOffset;\n\n\t\t\tif ( !viewParent ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif ( startsWithFiller( domParent ) ) {\n\t\t\t\toffset -= INLINE_FILLER_LENGTH;\n\t\t\t\toffset = offset < 0 ? 0 : offset;\n\t\t\t}\n\n\t\t\treturn new ViewPosition( viewParent, offset );\n\t\t}\n\t\t// domParent instanceof HTMLElement.\n\t\telse {\n\t\t\tif ( domOffset === 0 ) {\n\t\t\t\tconst viewParent = this.mapDomToView( domParent );\n\n\t\t\t\tif ( viewParent ) {\n\t\t\t\t\treturn new ViewPosition( viewParent, 0 );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst domBefore = domParent.childNodes[ domOffset - 1 ];\n\t\t\t\tconst viewBefore = isText( domBefore ) ?\n\t\t\t\t\tthis.findCorrespondingViewText( domBefore ) :\n\t\t\t\t\tthis.mapDomToView( domBefore );\n\n\t\t\t\t// TODO #663\n\t\t\t\tif ( viewBefore && viewBefore.parent ) {\n\t\t\t\t\treturn new ViewPosition( viewBefore.parent, viewBefore.index + 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Returns corresponding view {@link module:engine/view/element~Element Element} or\n\t * {@link module:engine/view/documentfragment~DocumentFragment} for provided DOM element or\n\t * document fragment. If there is no view item {@link module:engine/view/domconverter~DomConverter#bindElements bound}\n\t * to the given DOM - `undefined` is returned.\n\t *\n\t * For all DOM elements rendered by a {@link module:engine/view/uielement~UIElement} or\n\t * a {@link module:engine/view/rawelement~RawElement}, the parent `UIElement` or `RawElement` will be returned.\n\t *\n\t * @param {DocumentFragment|Element} domElementOrDocumentFragment DOM element or document fragment.\n\t * @returns {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment|undefined}\n\t * Corresponding view element, document fragment or `undefined` if no element was bound.\n\t */\n\tmapDomToView( domElementOrDocumentFragment ) {\n\t\tconst hostElement = this.getHostViewElement( domElementOrDocumentFragment );\n\n\t\treturn hostElement || this._domToViewMapping.get( domElementOrDocumentFragment );\n\t}\n\n\t/**\n\t * Finds corresponding text node. Text nodes are not {@link module:engine/view/domconverter~DomConverter#bindElements bound},\n\t * corresponding text node is returned based on the sibling or parent.\n\t *\n\t * If the directly previous sibling is a {@link module:engine/view/domconverter~DomConverter#bindElements bound} element, it is used\n\t * to find the corresponding text node.\n\t *\n\t * If this is a first child in the parent and the parent is a {@link module:engine/view/domconverter~DomConverter#bindElements bound}\n\t * element, it is used to find the corresponding text node.\n\t *\n\t * For all text nodes rendered by a {@link module:engine/view/uielement~UIElement} or\n\t * a {@link module:engine/view/rawelement~RawElement}, the parent `UIElement` or `RawElement` will be returned.\n\t *\n\t * Otherwise `null` is returned.\n\t *\n\t * Note that for the block or inline {@link module:engine/view/filler filler} this method returns `null`.\n\t *\n\t * @param {Text} domText DOM text node.\n\t * @returns {module:engine/view/text~Text|null} Corresponding view text node or `null`, if it was not possible to find a\n\t * corresponding node.\n\t */\n\tfindCorrespondingViewText( domText ) {\n\t\tif ( isInlineFiller( domText ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// If DOM text was rendered by a UIElement or a RawElement - return this parent element.\n\t\tconst hostElement = this.getHostViewElement( domText );\n\n\t\tif ( hostElement ) {\n\t\t\treturn hostElement;\n\t\t}\n\n\t\tconst previousSibling = domText.previousSibling;\n\n\t\t// Try to use previous sibling to find the corresponding text node.\n\t\tif ( previousSibling ) {\n\t\t\tif ( !( this.isElement( previousSibling ) ) ) {\n\t\t\t\t// The previous is text or comment.\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst viewElement = this.mapDomToView( previousSibling );\n\n\t\t\tif ( viewElement ) {\n\t\t\t\tconst nextSibling = viewElement.nextSibling;\n\n\t\t\t\t// It might be filler which has no corresponding view node.\n\t\t\t\tif ( nextSibling instanceof ViewText ) {\n\t\t\t\t\treturn viewElement.nextSibling;\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Try to use parent to find the corresponding text node.\n\t\telse {\n\t\t\tconst viewElement = this.mapDomToView( domText.parentNode );\n\n\t\t\tif ( viewElement ) {\n\t\t\t\tconst firstChild = viewElement.getChild( 0 );\n\n\t\t\t\t// It might be filler which has no corresponding view node.\n\t\t\t\tif ( firstChild instanceof ViewText ) {\n\t\t\t\t\treturn firstChild;\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Returns corresponding DOM item for provided {@link module:engine/view/element~Element Element} or\n\t * {@link module:engine/view/documentfragment~DocumentFragment DocumentFragment}.\n\t * To find a corresponding text for {@link module:engine/view/text~Text view Text instance}\n\t * use {@link #findCorrespondingDomText}.\n\t *\n\t * @param {module:engine/view/element~Element|module:engine/view/documentfragment~DocumentFragment} viewNode\n\t * View element or document fragment.\n\t * @returns {Node|DocumentFragment|undefined} Corresponding DOM node or document fragment.\n\t */\n\tmapViewToDom( documentFragmentOrElement ) {\n\t\treturn this._viewToDomMapping.get( documentFragmentOrElement );\n\t}\n\n\t/**\n\t * Finds corresponding text node. Text nodes are not {@link module:engine/view/domconverter~DomConverter#bindElements bound},\n\t * corresponding text node is returned based on the sibling or parent.\n\t *\n\t * If the directly previous sibling is a {@link module:engine/view/domconverter~DomConverter#bindElements bound} element, it is used\n\t * to find the corresponding text node.\n\t *\n\t * If this is a first child in the parent and the parent is a {@link module:engine/view/domconverter~DomConverter#bindElements bound}\n\t * element, it is used to find the corresponding text node.\n\t *\n\t * Otherwise `null` is returned.\n\t *\n\t * @param {module:engine/view/text~Text} viewText View text node.\n\t * @returns {Text|null} Corresponding DOM text node or `null`, if it was not possible to find a corresponding node.\n\t */\n\tfindCorrespondingDomText( viewText ) {\n\t\tconst previousSibling = viewText.previousSibling;\n\n\t\t// Try to use previous sibling to find the corresponding text node.\n\t\tif ( previousSibling && this.mapViewToDom( previousSibling ) ) {\n\t\t\treturn this.mapViewToDom( previousSibling ).nextSibling;\n\t\t}\n\n\t\t// If this is a first node, try to use parent to find the corresponding text node.\n\t\tif ( !previousSibling && viewText.parent && this.mapViewToDom( viewText.parent ) ) {\n\t\t\treturn this.mapViewToDom( viewText.parent ).childNodes[ 0 ];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Focuses DOM editable that is corresponding to provided {@link module:engine/view/editableelement~EditableElement}.\n\t *\n\t * @param {module:engine/view/editableelement~EditableElement} viewEditable\n\t */\n\tfocus( viewEditable ) {\n\t\tconst domEditable = this.mapViewToDom( viewEditable );\n\n\t\tif ( domEditable && domEditable.ownerDocument.activeElement !== domEditable ) {\n\t\t\t// Save the scrollX and scrollY positions before the focus.\n\t\t\tconst { scrollX, scrollY } = global.window;\n\t\t\tconst scrollPositions = [];\n\n\t\t\t// Save all scrollLeft and scrollTop values starting from domEditable up to\n\t\t\t// document#documentElement.\n\t\t\tforEachDomNodeAncestor( domEditable, node => {\n\t\t\t\tconst { scrollLeft, scrollTop } = node;\n\n\t\t\t\tscrollPositions.push( [ scrollLeft, scrollTop ] );\n\t\t\t} );\n\n\t\t\tdomEditable.focus();\n\n\t\t\t// Restore scrollLeft and scrollTop values starting from domEditable up to\n\t\t\t// document#documentElement.\n\t\t\t// https://github.com/ckeditor/ckeditor5-engine/issues/951\n\t\t\t// https://github.com/ckeditor/ckeditor5-engine/issues/957\n\t\t\tforEachDomNodeAncestor( domEditable, node => {\n\t\t\t\tconst [ scrollLeft, scrollTop ] = scrollPositions.shift();\n\n\t\t\t\tnode.scrollLeft = scrollLeft;\n\t\t\t\tnode.scrollTop = scrollTop;\n\t\t\t} );\n\n\t\t\t// Restore the scrollX and scrollY positions after the focus.\n\t\t\t// https://github.com/ckeditor/ckeditor5-engine/issues/951\n\t\t\tglobal.window.scrollTo( scrollX, scrollY );\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` when `node.nodeType` equals `Node.ELEMENT_NODE`.\n\t *\n\t * @param {Node} node Node to check.\n\t * @returns {Boolean}\n\t */\n\tisElement( node ) {\n\t\treturn node && node.nodeType == Node.ELEMENT_NODE;\n\t}\n\n\t/**\n\t * Returns `true` when `node.nodeType` equals `Node.DOCUMENT_FRAGMENT_NODE`.\n\t *\n\t * @param {Node} node Node to check.\n\t * @returns {Boolean}\n\t */\n\tisDocumentFragment( node ) {\n\t\treturn node && node.nodeType == Node.DOCUMENT_FRAGMENT_NODE;\n\t}\n\n\t/**\n\t * Returns `true` when `node.nodeType` equals `Node.COMMENT_NODE`.\n\t *\n\t * @param {Node} node Node to check.\n\t * @returns {Boolean}\n\t */\n\tisComment( node ) {\n\t\treturn node && node.nodeType == Node.COMMENT_NODE;\n\t}\n\n\t/**\n\t * Checks if the node is an instance of the block filler for this DOM converter.\n\t *\n\t *\t\tconst converter = new DomConverter( viewDocument, { blockFillerMode: 'br' } );\n\t *\n\t *\t\tconverter.isBlockFiller( BR_FILLER( document ) ); // true\n\t *\t\tconverter.isBlockFiller( NBSP_FILLER( document ) ); // false\n\t *\n\t * **Note:**: For the `'nbsp'` mode the method also checks context of a node so it cannot be a detached node.\n\t *\n\t * **Note:** A special case in the `'nbsp'` mode exists where the `<br>` in `<p><br></p>` is treated as a block filler.\n\t *\n\t * @param {Node} domNode DOM node to check.\n\t * @returns {Boolean} True if a node is considered a block filler for given mode.\n\t */\n\tisBlockFiller( domNode ) {\n\t\tif ( this.blockFillerMode == 'br' ) {\n\t\t\treturn domNode.isEqualNode( BR_FILLER_REF );\n\t\t}\n\n\t\t// Special case for <p><br></p> in which case the <br> should be treated as filler even\n\t\t// when we're in the 'nbsp' mode. See ckeditor5#5564.\n\t\tif ( domNode.tagName === 'BR' && hasBlockParent( domNode, this.blockElements ) && domNode.parentNode.childNodes.length === 1 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn isNbspBlockFiller( domNode, this.blockElements );\n\t}\n\n\t/**\n\t * Returns `true` if given selection is a backward selection, that is, if it's `focus` is before `anchor`.\n\t *\n\t * @param {Selection} DOM Selection instance to check.\n\t * @returns {Boolean}\n\t */\n\tisDomSelectionBackward( selection ) {\n\t\tif ( selection.isCollapsed ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Since it takes multiple lines of code to check whether a \"DOM Position\" is before/after another \"DOM Position\",\n\t\t// we will use the fact that range will collapse if it's end is before it's start.\n\t\tconst range = document.createRange();\n\n\t\trange.setStart( selection.anchorNode, selection.anchorOffset );\n\t\trange.setEnd( selection.focusNode, selection.focusOffset );\n\n\t\tconst backward = range.collapsed;\n\n\t\trange.detach();\n\n\t\treturn backward;\n\t}\n\n\t/**\n\t * Returns a parent {@link module:engine/view/uielement~UIElement} or {@link module:engine/view/rawelement~RawElement}\n\t * that hosts the provided DOM node. Returns `null` if there is no such parent.\n\t *\n\t * @param {Node} domNode\n\t * @returns {module:engine/view/uielement~UIElement|module:engine/view/rawelement~RawElement|null}\n\t */\n\tgetHostViewElement( domNode ) {\n\t\tconst ancestors = getAncestors( domNode );\n\n\t\t// Remove domNode from the list.\n\t\tancestors.pop();\n\n\t\twhile ( ancestors.length ) {\n\t\t\tconst domNode = ancestors.pop();\n\t\t\tconst viewNode = this._domToViewMapping.get( domNode );\n\n\t\t\tif ( viewNode && ( viewNode.is( 'uiElement' ) || viewNode.is( 'rawElement' ) ) ) {\n\t\t\t\treturn viewNode;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Checks if the given selection's boundaries are at correct places.\n\t *\n\t * The following places are considered as incorrect for selection boundaries:\n\t *\n\t * * before or in the middle of an inline filler sequence,\n\t * * inside a DOM element which represents {@link module:engine/view/uielement~UIElement a view UI element},\n\t * * inside a DOM element which represents {@link module:engine/view/rawelement~RawElement a view raw element}.\n\t *\n\t * @param {Selection} domSelection The DOM selection object to be checked.\n\t * @returns {Boolean} `true` if the given selection is at a correct place, `false` otherwise.\n\t */\n\tisDomSelectionCorrect( domSelection ) {\n\t\treturn this._isDomSelectionPositionCorrect( domSelection.anchorNode, domSelection.anchorOffset ) &&\n\t\t\tthis._isDomSelectionPositionCorrect( domSelection.focusNode, domSelection.focusOffset );\n\t}\n\n\t/**\n\t * Registers a {@link module:engine/view/matcher~MatcherPattern} for view elements whose content should be treated as a raw data\n\t * and not processed during conversion from DOM nodes to view elements.\n\t *\n\t * This is affecting how {@link module:engine/view/domconverter~DomConverter#domToView} and\n\t * {@link module:engine/view/domconverter~DomConverter#domChildrenToView} processes DOM nodes.\n\t *\n\t * The raw data can be later accessed by {@link module:engine/view/element~Element#getCustomProperty view element custom property}\n\t * `\"$rawContent\"`.\n\t *\n\t * @param {module:engine/view/matcher~MatcherPattern} pattern Pattern matching view element which content should\n\t * be treated as a raw data.\n\t */\n\tregisterRawContentMatcher( pattern ) {\n\t\tthis._rawContentElementMatcher.add( pattern );\n\t}\n\n\t/**\n\t * Checks if the given DOM position is a correct place for selection boundary. See {@link #isDomSelectionCorrect}.\n\t *\n\t * @private\n\t * @param {Element} domParent Position parent.\n\t * @param {Number} offset Position offset.\n\t * @returns {Boolean} `true` if given position is at a correct place for selection boundary, `false` otherwise.\n\t */\n\t_isDomSelectionPositionCorrect( domParent, offset ) {\n\t\t// If selection is before or in the middle of inline filler string, it is incorrect.\n\t\tif ( isText( domParent ) && startsWithFiller( domParent ) && offset < INLINE_FILLER_LENGTH ) {\n\t\t\t// Selection in a text node, at wrong position (before or in the middle of filler).\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( this.isElement( domParent ) && startsWithFiller( domParent.childNodes[ offset ] ) ) {\n\t\t\t// Selection in an element node, before filler text node.\n\t\t\treturn false;\n\t\t}\n\n\t\tconst viewParent = this.mapDomToView( domParent );\n\n\t\t// The position is incorrect when anchored inside a UIElement or a RawElement.\n\t\t// Note: In case of UIElement and RawElement, mapDomToView() returns a parent element for any DOM child\n\t\t// so there's no need to perform any additional checks.\n\t\tif ( viewParent && ( viewParent.is( 'uiElement' ) || viewParent.is( 'rawElement' ) ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Takes text data from a given {@link module:engine/view/text~Text#data} and processes it so\n\t * it is correctly displayed in the DOM.\n\t *\n\t * Following changes are done:\n\t *\n\t * * a space at the beginning is changed to `&nbsp;` if this is the first text node in its container\n\t * element or if a previous text node ends with a space character,\n\t * * space at the end of the text node is changed to `&nbsp;` if there are two spaces at the end of a node or if next node\n\t * starts with a space or if it is the last text node in its container,\n\t * * remaining spaces are replaced to a chain of spaces and `&nbsp;` (e.g. `'x   x'` becomes `'x &nbsp; x'`).\n\t *\n\t * Content of {@link #preElements} is not processed.\n\t *\n\t * @private\n\t * @param {module:engine/view/text~Text} node View text node to process.\n\t * @returns {String} Processed text data.\n\t */\n\t_processDataFromViewText( node ) {\n\t\tlet data = node.data;\n\n\t\t// If any of node ancestors has a name which is in `preElements` array, then currently processed\n\t\t// view text node is (will be) in preformatted element. We should not change whitespaces then.\n\t\tif ( node.getAncestors().some( parent => this.preElements.includes( parent.name ) ) ) {\n\t\t\treturn data;\n\t\t}\n\n\t\t// 1. Replace the first space with a nbsp if the previous node ends with a space or there is no previous node\n\t\t// (container element boundary).\n\t\tif ( data.charAt( 0 ) == ' ' ) {\n\t\t\tconst prevNode = this._getTouchingViewTextNode( node, false );\n\t\t\tconst prevEndsWithSpace = prevNode && this._nodeEndsWithSpace( prevNode );\n\n\t\t\tif ( prevEndsWithSpace || !prevNode ) {\n\t\t\t\tdata = '\\u00A0' + data.substr( 1 );\n\t\t\t}\n\t\t}\n\n\t\t// 2. Replace the last space with nbsp if there are two spaces at the end or if the next node starts with space or there is no\n\t\t// next node (container element boundary).\n\t\t//\n\t\t// Keep in mind that Firefox prefers $nbsp; before tag, not inside it:\n\t\t//\n\t\t// Foo <span>&nbsp;bar</span>  <-- bad.\n\t\t// Foo&nbsp;<span> bar</span>  <-- good.\n\t\t//\n\t\t// More here: https://github.com/ckeditor/ckeditor5-engine/issues/1747.\n\t\tif ( data.charAt( data.length - 1 ) == ' ' ) {\n\t\t\tconst nextNode = this._getTouchingViewTextNode( node, true );\n\n\t\t\tif ( data.charAt( data.length - 2 ) == ' ' || !nextNode || nextNode.data.charAt( 0 ) == ' ' ) {\n\t\t\t\tdata = data.substr( 0, data.length - 1 ) + '\\u00A0';\n\t\t\t}\n\t\t}\n\n\t\t// 3. Create space+nbsp pairs.\n\t\treturn data.replace( / {2}/g, ' \\u00A0' );\n\t}\n\n\t/**\n\t * Checks whether given node ends with a space character after changing appropriate space characters to `&nbsp;`s.\n\t *\n\t * @private\n\t * @param {module:engine/view/text~Text} node Node to check.\n\t * @returns {Boolean} `true` if given `node` ends with space, `false` otherwise.\n\t */\n\t_nodeEndsWithSpace( node ) {\n\t\tif ( node.getAncestors().some( parent => this.preElements.includes( parent.name ) ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst data = this._processDataFromViewText( node );\n\n\t\treturn data.charAt( data.length - 1 ) == ' ';\n\t}\n\n\t/**\n\t * Takes text data from native `Text` node and processes it to a correct {@link module:engine/view/text~Text view text node} data.\n\t *\n\t * Following changes are done:\n\t *\n\t * * multiple whitespaces are replaced to a single space,\n\t * * space at the beginning of a text node is removed if it is the first text node in its container\n\t * element or if the previous text node ends with a space character,\n\t * * space at the end of the text node is removed if there are two spaces at the end of a node or if next node\n\t * starts with a space or if it is the last text node in its container\n\t * * nbsps are converted to spaces.\n\t *\n\t * @param {Node} node DOM text node to process.\n\t * @returns {String} Processed data.\n\t * @private\n\t */\n\t_processDataFromDomText( node ) {\n\t\tlet data = node.data;\n\n\t\tif ( _hasDomParentOfType( node, this.preElements ) ) {\n\t\t\treturn getDataWithoutFiller( node );\n\t\t}\n\n\t\t// Change all consecutive whitespace characters (from the [ \\n\\t\\r] set \n\t\t// see https://github.com/ckeditor/ckeditor5-engine/issues/822#issuecomment-311670249) to a single space character.\n\t\t// That's how multiple whitespaces are treated when rendered, so we normalize those whitespaces.\n\t\t// We're replacing 1+ (and not 2+) to also normalize singular \\n\\t\\r characters (#822).\n\t\tdata = data.replace( /[ \\n\\t\\r]{1,}/g, ' ' );\n\n\t\tconst prevNode = this._getTouchingInlineDomNode( node, false );\n\t\tconst nextNode = this._getTouchingInlineDomNode( node, true );\n\n\t\tconst shouldLeftTrim = this._checkShouldLeftTrimDomText( node, prevNode );\n\t\tconst shouldRightTrim = this._checkShouldRightTrimDomText( node, nextNode );\n\n\t\t// If the previous dom text node does not exist or it ends by whitespace character, remove space character from the beginning\n\t\t// of this text node. Such space character is treated as a whitespace.\n\t\tif ( shouldLeftTrim ) {\n\t\t\tdata = data.replace( /^ /, '' );\n\t\t}\n\n\t\t// If the next text node does not exist remove space character from the end of this text node.\n\t\tif ( shouldRightTrim ) {\n\t\t\tdata = data.replace( / $/, '' );\n\t\t}\n\n\t\t// At the beginning and end of a block element, Firefox inserts normal space + <br> instead of non-breaking space.\n\t\t// This means that the text node starts/end with normal space instead of non-breaking space.\n\t\t// This causes a problem because the normal space would be removed in `.replace` calls above. To prevent that,\n\t\t// the inline filler is removed only after the data is initially processed (by the `.replace` above). See ckeditor5#692.\n\t\tdata = getDataWithoutFiller( new Text( data ) );\n\n\t\t// At this point we should have removed all whitespaces from DOM text data.\n\t\t//\n\t\t// Now, We will reverse the process that happens in `_processDataFromViewText`.\n\t\t//\n\t\t// We have to change &nbsp; chars, that were in DOM text data because of rendering reasons, to spaces.\n\t\t// First, change all ` \\u00A0` pairs (space + &nbsp;) to two spaces. DOM converter changes two spaces from model/view to\n\t\t// ` \\u00A0` to ensure proper rendering. Since here we convert back, we recognize those pairs and change them back to `  `.\n\t\tdata = data.replace( / \\u00A0/g, '  ' );\n\n\t\t// Then, let's change the last nbsp to a space.\n\t\tif ( /( |\\u00A0)\\u00A0$/.test( data ) || !nextNode || ( nextNode.data && nextNode.data.charAt( 0 ) == ' ' ) ) {\n\t\t\tdata = data.replace( /\\u00A0$/, ' ' );\n\t\t}\n\n\t\t// Then, change &nbsp; character that is at the beginning of the text node to space character.\n\t\t// We do that replacement only if this is the first node or the previous node ends on whitespace character.\n\t\tif ( shouldLeftTrim ) {\n\t\t\tdata = data.replace( /^\\u00A0/, ' ' );\n\t\t}\n\n\t\t// At this point, all whitespaces should be removed and all &nbsp; created for rendering reasons should be\n\t\t// changed to normal space. All left &nbsp; are &nbsp; inserted intentionally.\n\t\treturn data;\n\t}\n\n\t/**\n\t * Helper function which checks if a DOM text node, preceded by the given `prevNode` should\n\t * be trimmed from the left side.\n\t *\n\t * @private\n\t * @param {Node} node\n\t * @param {Node} prevNode\n\t */\n\t_checkShouldLeftTrimDomText( node, prevNode ) {\n\t\tif ( !prevNode ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( isElement( prevNode ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Shouldn't left trim if previous node is a node that was encountered as a raw content node.\n\t\tif ( this._encounteredRawContentDomNodes.has( node.previousSibling ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn /[^\\S\\u00A0]/.test( prevNode.data.charAt( prevNode.data.length - 1 ) );\n\t}\n\n\t/**\n\t * Helper function which checks if a DOM text node, succeeded by the given `nextNode` should\n\t * be trimmed from the right side.\n\t *\n\t * @private\n\t * @param {Node} node\n\t * @param {Node} nextNode\n\t */\n\t_checkShouldRightTrimDomText( node, nextNode ) {\n\t\tif ( nextNode ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !startsWithFiller( node );\n\t}\n\n\t/**\n\t * Helper function. For given {@link module:engine/view/text~Text view text node}, it finds previous or next sibling\n\t * that is contained in the same container element. If there is no such sibling, `null` is returned.\n\t *\n\t * @private\n\t * @param {module:engine/view/text~Text} node Reference node.\n\t * @param {Boolean} getNext\n\t * @returns {module:engine/view/text~Text|null} Touching text node or `null` if there is no next or previous touching text node.\n\t */\n\t_getTouchingViewTextNode( node, getNext ) {\n\t\tconst treeWalker = new ViewTreeWalker( {\n\t\t\tstartPosition: getNext ? ViewPosition._createAfter( node ) : ViewPosition._createBefore( node ),\n\t\t\tdirection: getNext ? 'forward' : 'backward'\n\t\t} );\n\n\t\tfor ( const value of treeWalker ) {\n\t\t\t// ViewContainerElement is found on a way to next ViewText node, so given `node` was first/last\n\t\t\t// text node in its container element.\n\t\t\tif ( value.item.is( 'containerElement' ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t// <br> found  it works like a block boundary, so do not scan further.\n\t\t\telse if ( value.item.is( 'element', 'br' ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t// Found a text node in the same container element.\n\t\t\telse if ( value.item.is( '$textProxy' ) ) {\n\t\t\t\treturn value.item;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Helper function. For the given text node, it finds the closest touching node which is either\n\t * a text node or a `<br>`. The search is terminated at block element boundaries and if a matching node\n\t * wasn't found so far, `null` is returned.\n\t *\n\t * In the following DOM structure:\n\t *\n\t *\t\t<p>foo<b>bar</b><br>bom</p>\n\t *\n\t * * `foo` doesn't have its previous touching inline node (`null` is returned),\n\t * * `foo`'s next touching inline node is `bar`\n\t * * `bar`'s next touching inline node is `<br>`\n\t *\n\t * This method returns text nodes and `<br>` elements because these types of nodes affect how\n\t * spaces in the given text node need to be converted.\n\t *\n\t * @private\n\t * @param {Text} node\n\t * @param {Boolean} getNext\n\t * @returns {Text|Element|null}\n\t */\n\t_getTouchingInlineDomNode( node, getNext ) {\n\t\tif ( !node.parentNode ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst direction = getNext ? 'nextNode' : 'previousNode';\n\t\tconst document = node.ownerDocument;\n\t\tconst topmostParent = getAncestors( node )[ 0 ];\n\n\t\tconst treeWalker = document.createTreeWalker( topmostParent, NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT, {\n\t\t\tacceptNode( node ) {\n\t\t\t\tif ( isText( node ) ) {\n\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t}\n\n\t\t\t\tif ( node.tagName == 'BR' ) {\n\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t}\n\n\t\t\t\treturn NodeFilter.FILTER_SKIP;\n\t\t\t}\n\t\t} );\n\n\t\ttreeWalker.currentNode = node;\n\n\t\tconst touchingNode = treeWalker[ direction ]();\n\n\t\tif ( touchingNode !== null ) {\n\t\t\tconst lca = getCommonAncestor( node, touchingNode );\n\n\t\t\t// If there is common ancestor between the text node and next/prev text node,\n\t\t\t// and there are no block elements on a way from the text node to that ancestor,\n\t\t\t// and there are no block elements on a way from next/prev text node to that ancestor...\n\t\t\tif (\n\t\t\t\tlca &&\n\t\t\t\t!_hasDomParentOfType( node, this.blockElements, lca ) &&\n\t\t\t\t!_hasDomParentOfType( touchingNode, this.blockElements, lca )\n\t\t\t) {\n\t\t\t\t// Then they are in the same container element.\n\t\t\t\treturn touchingNode;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\n// Helper function.\n// Used to check if given native `Element` or `Text` node has parent with tag name from `types` array.\n//\n// @param {Node} node\n// @param {Array.<String>} types\n// @param {Boolean} [boundaryParent] Can be given if parents should be checked up to a given element (excluding that element).\n// @returns {Boolean} `true` if such parent exists or `false` if it does not.\nfunction _hasDomParentOfType( node, types, boundaryParent ) {\n\tlet parents = getAncestors( node );\n\n\tif ( boundaryParent ) {\n\t\tparents = parents.slice( parents.indexOf( boundaryParent ) + 1 );\n\t}\n\n\treturn parents.some( parent => parent.tagName && types.includes( parent.tagName.toLowerCase() ) );\n}\n\n// A helper that executes given callback for each DOM node's ancestor, starting from the given node\n// and ending in document#documentElement.\n//\n// @param {Node} node\n// @param {Function} callback A callback to be executed for each ancestor.\nfunction forEachDomNodeAncestor( node, callback ) {\n\twhile ( node && node != global.document ) {\n\t\tcallback( node );\n\t\tnode = node.parentNode;\n\t}\n}\n\n// Checks if given node is a nbsp block filler.\n//\n// A &nbsp; is a block filler only if it is a single child of a block element.\n//\n// @param {Node} domNode DOM node.\n// @returns {Boolean}\nfunction isNbspBlockFiller( domNode, blockElements ) {\n\tconst isNBSP = isText( domNode ) && domNode.data == '\\u00A0';\n\n\treturn isNBSP && hasBlockParent( domNode, blockElements ) && domNode.parentNode.childNodes.length === 1;\n}\n\n// Checks if domNode has block parent.\n//\n// @param {Node} domNode DOM node.\n// @returns {Boolean}\nfunction hasBlockParent( domNode, blockElements ) {\n\tconst parent = domNode.parentNode;\n\n\treturn parent && parent.tagName && blockElements.includes( parent.tagName.toLowerCase() );\n}\n\n/**\n * Enum representing type of the block filler.\n *\n * Possible values:\n *\n * * `br` - for `<br>` block filler used in editing view,\n * * `nbsp` - for `&nbsp;` block fillers used in the data.\n *\n * @typedef {String} module:engine/view/filler~BlockFillerMode\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/getcommonancestor\n */\n\nimport getAncestors from './getancestors';\n\n/**\n * Searches and returns the lowest common ancestor of two given nodes.\n *\n * @param {Node} nodeA First node.\n * @param {Node} nodeB Second node.\n * @returns {Node|DocumentFragment|Document|null} Lowest common ancestor of both nodes or `null` if nodes do not have a common ancestor.\n */\nexport default function getCommonAncestor( nodeA, nodeB ) {\n\tconst ancestorsA = getAncestors( nodeA );\n\tconst ancestorsB = getAncestors( nodeB );\n\n\tlet i = 0;\n\n\t// It does not matter which array is shorter.\n\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\ti++;\n\t}\n\n\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/iswindow\n */\n\n/**\n * Checks if the object is a native DOM Window.\n *\n * @param {*} obj\n * @returns {Boolean}\n */\nexport default function isWindow( obj ) {\n\tconst stringifiedObject = Object.prototype.toString.apply( obj );\n\n\t// Returns `true` for the `window` object in browser environments.\n\tif ( stringifiedObject == '[object Window]' ) {\n\t\treturn true;\n\t}\n\n\t// Returns `true` for the `window` object in the Electron environment.\n\tif ( stringifiedObject == '[object global]' ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/emittermixin\n */\n\nimport { default as EmitterMixin, _getEmitterListenedTo, _setEmitterId } from '../emittermixin';\nimport uid from '../uid';\nimport isNode from './isnode';\nimport isWindow from './iswindow';\nimport { extend } from 'lodash-es';\n\n/**\n * Mixin that injects the DOM events API into its host. It provides the API\n * compatible with {@link module:utils/emittermixin~EmitterMixin}.\n *\n * DOM emitter mixin is by default available in the {@link module:ui/view~View} class,\n * but it can also be mixed into any other class:\n *\n *\t\timport mix from '../utils/mix.js';\n *\t\timport DomEmitterMixin from '../utils/dom/emittermixin.js';\n *\n *\t\tclass SomeView {}\n *\t\tmix( SomeView, DomEmitterMixin );\n *\n *\t\tconst view = new SomeView();\n *\t\tview.listenTo( domElement, ( evt, domEvt ) => {\n *\t\t\tconsole.log( evt, domEvt );\n *\t\t} );\n *\n * @mixin EmitterMixin\n * @mixes module:utils/emittermixin~EmitterMixin\n * @implements module:utils/dom/emittermixin~Emitter\n */\nconst DomEmitterMixin = extend( {}, EmitterMixin, {\n\t/**\n\t * Registers a callback function to be executed when an event is fired in a specific Emitter or DOM Node.\n\t * It is backwards compatible with {@link module:utils/emittermixin~EmitterMixin#listenTo}.\n\t *\n\t * @param {module:utils/emittermixin~Emitter|Node} emitter The object that fires the event.\n\t * @param {String} event The name of the event.\n\t * @param {Function} callback The function to be called on event.\n\t * @param {Object} [options={}] Additional options.\n\t * @param {module:utils/priorities~PriorityString|Number} [options.priority='normal'] The priority of this event callback. The higher\n\t * the priority value the sooner the callback will be fired. Events having the same priority are called in the\n\t * order they were added.\n\t * @param {Boolean} [options.useCapture=false] Indicates that events of this type will be dispatched to the registered\n\t * listener before being dispatched to any EventTarget beneath it in the DOM tree.\n\t * @param {Boolean} [options.usePassive=false] Indicates that the function specified by listener will never call preventDefault()\n\t * and prevents blocking browser's main thread by this event handler.\n\t */\n\tlistenTo( emitter, ...rest ) {\n\t\t// Check if emitter is an instance of DOM Node. If so, replace the argument with\n\t\t// corresponding ProxyEmitter (or create one if not existing).\n\t\tif ( isNode( emitter ) || isWindow( emitter ) ) {\n\t\t\tconst proxy = this._getProxyEmitter( emitter ) || new ProxyEmitter( emitter );\n\n\t\t\tproxy.attach( ...rest );\n\n\t\t\temitter = proxy;\n\t\t}\n\n\t\t// Execute parent class method with Emitter (or ProxyEmitter) instance.\n\t\tEmitterMixin.listenTo.call( this, emitter, ...rest );\n\t},\n\n\t/**\n\t * Stops listening for events. It can be used at different levels:\n\t * It is backwards compatible with {@link module:utils/emittermixin~EmitterMixin#listenTo}.\n\t *\n\t * * To stop listening to a specific callback.\n\t * * To stop listening to a specific event.\n\t * * To stop listening to all events fired by a specific object.\n\t * * To stop listening to all events fired by all object.\n\t *\n\t * @param {module:utils/emittermixin~Emitter|Node} [emitter] The object to stop listening to. If omitted, stops it for all objects.\n\t * @param {String} [event] (Requires the `emitter`) The name of the event to stop listening to. If omitted, stops it\n\t * for all events from `emitter`.\n\t * @param {Function} [callback] (Requires the `event`) The function to be removed from the call list for the given\n\t * `event`.\n\t */\n\tstopListening( emitter, event, callback ) {\n\t\t// Check if emitter is an instance of DOM Node. If so, replace the argument with corresponding ProxyEmitter.\n\t\tif ( isNode( emitter ) || isWindow( emitter ) ) {\n\t\t\tconst proxy = this._getProxyEmitter( emitter );\n\n\t\t\t// Element has no listeners.\n\t\t\tif ( !proxy ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\temitter = proxy;\n\t\t}\n\n\t\t// Execute parent class method with Emitter (or ProxyEmitter) instance.\n\t\tEmitterMixin.stopListening.call( this, emitter, event, callback );\n\n\t\tif ( emitter instanceof ProxyEmitter ) {\n\t\t\temitter.detach( event );\n\t\t}\n\t},\n\n\t/**\n\t * Retrieves ProxyEmitter instance for given DOM Node residing in this Host.\n\t *\n\t * @private\n\t * @param {Node} node DOM Node of the ProxyEmitter.\n\t * @returns {module:utils/dom/emittermixin~ProxyEmitter} ProxyEmitter instance or null.\n\t */\n\t_getProxyEmitter( node ) {\n\t\treturn _getEmitterListenedTo( this, getNodeUID( node ) );\n\t}\n} );\n\nexport default DomEmitterMixin;\n\n/**\n * Creates a ProxyEmitter instance. Such an instance is a bridge between a DOM Node firing events\n * and any Host listening to them. It is backwards compatible with {@link module:utils/emittermixin~EmitterMixin#on}.\n *\n *                                  listenTo( click, ... )\n *                    +-----------------------------------------+\n *                    |              stopListening( ... )       |\n *     +----------------------------+                           |             addEventListener( click, ... )\n *     | Host                       |                           |   +---------------------------------------------+\n *     +----------------------------+                           |   |       removeEventListener( click, ... )     |\n *     | _listeningTo: {            |                +----------v-------------+                                   |\n *     |   UID: {                   |                | ProxyEmitter           |                                   |\n *     |     emitter: ProxyEmitter, |                +------------------------+                      +------------v----------+\n *     |     callbacks: {           |                | events: {              |                      | Node (HTMLElement)    |\n *     |       click: [ callbacks ] |                |   click: [ callbacks ] |                      +-----------------------+\n *     |     }                      |                | },                     |                      | data-ck-expando: UID  |\n *     |   }                        |                | _domNode: Node,        |                      +-----------------------+\n *     | }                          |                | _domListeners: {},     |                                   |\n *     | +------------------------+ |                | _emitterId: UID        |                                   |\n *     | | DomEmitterMixin        | |                +--------------^---------+                                   |\n *     | +------------------------+ |                           |   |                                             |\n *     +--------------^-------------+                           |   +---------------------------------------------+\n *                    |                                         |                  click (DOM Event)\n *                    +-----------------------------------------+\n *                                fire( click, DOM Event )\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n * @implements module:utils/dom/emittermixin~Emitter\n * @private\n */\nclass ProxyEmitter {\n\t/**\n\t * @param {Node} node DOM Node that fires events.\n\t * @returns {Object} ProxyEmitter instance bound to the DOM Node.\n\t */\n\tconstructor( node ) {\n\t\t// Set emitter ID to match DOM Node \"expando\" property.\n\t\t_setEmitterId( this, getNodeUID( node ) );\n\n\t\t// Remember the DOM Node this ProxyEmitter is bound to.\n\t\tthis._domNode = node;\n\t}\n}\n\nextend( ProxyEmitter.prototype, EmitterMixin, {\n\t/**\n\t * Collection of native DOM listeners.\n\t *\n\t * @private\n\t * @member {Object} module:utils/dom/emittermixin~ProxyEmitter#_domListeners\n\t */\n\n\t/**\n\t * Registers a callback function to be executed when an event is fired.\n\t *\n\t * It attaches a native DOM listener to the DOM Node. When fired,\n\t * a corresponding Emitter event will also fire with DOM Event object as an argument.\n\t *\n\t * @method module:utils/dom/emittermixin~ProxyEmitter#attach\n\t * @param {String} event The name of the event.\n\t * @param {Function} callback The function to be called on event.\n\t * @param {Object} [options={}] Additional options.\n\t * @param {Boolean} [options.useCapture=false] Indicates that events of this type will be dispatched to the registered\n\t * listener before being dispatched to any EventTarget beneath it in the DOM tree.\n\t * @param {Boolean} [options.usePassive=false] Indicates that the function specified by listener will never call preventDefault()\n\t * and prevents blocking browser's main thread by this event handler.\n\t */\n\tattach( event, callback, options = {} ) {\n\t\t// If the DOM Listener for given event already exist it is pointless\n\t\t// to attach another one.\n\t\tif ( this._domListeners && this._domListeners[ event ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst listenerOptions = {\n\t\t\tcapture: !!options.useCapture,\n\t\t\tpassive: !!options.usePassive\n\t\t};\n\n\t\tconst domListener = this._createDomListener( event, listenerOptions );\n\n\t\t// Attach the native DOM listener to DOM Node.\n\t\tthis._domNode.addEventListener( event, domListener, listenerOptions );\n\n\t\tif ( !this._domListeners ) {\n\t\t\tthis._domListeners = {};\n\t\t}\n\n\t\t// Store the native DOM listener in this ProxyEmitter. It will be helpful\n\t\t// when stopping listening to the event.\n\t\tthis._domListeners[ event ] = domListener;\n\t},\n\n\t/**\n\t * Stops executing the callback on the given event.\n\t *\n\t * @method module:utils/dom/emittermixin~ProxyEmitter#detach\n\t * @param {String} event The name of the event.\n\t */\n\tdetach( event ) {\n\t\tlet events;\n\n\t\t// Remove native DOM listeners which are orphans. If no callbacks\n\t\t// are awaiting given event, detach native DOM listener from DOM Node.\n\t\t// See: {@link attach}.\n\n\t\tif ( this._domListeners[ event ] && ( !( events = this._events[ event ] ) || !events.callbacks.length ) ) {\n\t\t\tthis._domListeners[ event ].removeListener();\n\t\t}\n\t},\n\n\t/**\n\t * Creates a native DOM listener callback. When the native DOM event\n\t * is fired it will fire corresponding event on this ProxyEmitter.\n\t * Note: A native DOM Event is passed as an argument.\n\t *\n\t * @private\n\t * @method module:utils/dom/emittermixin~ProxyEmitter#_createDomListener\n\t * @param {String} event The name of the event.\n\t * @param {Object} [options] Additional options.\n\t * @param {Boolean} [options.capture=false] Indicates whether the listener was created for capturing event.\n\t * @param {Boolean} [options.passive=false] Indicates that the function specified by listener will never call preventDefault()\n\t * and prevents blocking browser's main thread by this event handler.\n\t * @returns {Function} The DOM listener callback.\n\t */\n\t_createDomListener( event, options ) {\n\t\tconst domListener = domEvt => {\n\t\t\tthis.fire( event, domEvt );\n\t\t};\n\n\t\t// Supply the DOM listener callback with a function that will help\n\t\t// detach it from the DOM Node, when it is no longer necessary.\n\t\t// See: {@link detach}.\n\t\tdomListener.removeListener = () => {\n\t\t\tthis._domNode.removeEventListener( event, domListener, options );\n\t\t\tdelete this._domListeners[ event ];\n\t\t};\n\n\t\treturn domListener;\n\t}\n} );\n\n// Gets an unique DOM Node identifier. The identifier will be set if not defined.\n//\n// @private\n// @param {Node} node\n// @returns {String} UID for given DOM Node.\nfunction getNodeUID( node ) {\n\treturn node[ 'data-ck-expando' ] || ( node[ 'data-ck-expando' ] = uid() );\n}\n\n/**\n * Interface representing classes which mix in {@link module:utils/dom/emittermixin~EmitterMixin}.\n *\n * @interface Emitter\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/observer\n */\n\nimport DomEmitterMixin from '@ckeditor/ckeditor5-utils/src/dom/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * Abstract base observer class. Observers are classes which listen to DOM events, do the preliminary\n * processing and fire events on the {@link module:engine/view/document~Document} objects.\n * Observers can also add features to the view, for instance by updating its status or marking elements\n * which need a refresh on DOM events.\n *\n * @abstract\n */\nexport default class Observer {\n\t/**\n\t * Creates an instance of the observer.\n\t *\n\t * @param {module:engine/view/view~View} view\n\t */\n\tconstructor( view ) {\n\t\t/**\n\t\t * An instance of the view controller.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/view~View}\n\t\t */\n\t\tthis.view = view;\n\n\t\t/**\n\t\t * A reference to the {@link module:engine/view/document~Document} object.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/document~Document}\n\t\t */\n\t\tthis.document = view.document;\n\n\t\t/**\n\t\t * State of the observer. If it is disabled no events will be fired.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis.isEnabled = false;\n\t}\n\n\t/**\n\t * Enables the observer. This method is called when the observer is registered to the\n\t * {@link module:engine/view/view~View} and after {@link module:engine/view/view~View#forceRender rendering}\n\t * (all observers are {@link #disable disabled} before rendering).\n\t *\n\t * A typical use case for disabling observers is that mutation observers need to be disabled for the rendering.\n\t * However, a child class may not need to be disabled, so it can implement an empty method.\n\t *\n\t * @see module:engine/view/observer/observer~Observer#disable\n\t */\n\tenable() {\n\t\tthis.isEnabled = true;\n\t}\n\n\t/**\n\t * Disables the observer. This method is called before\n\t * {@link module:engine/view/view~View#forceRender rendering} to prevent firing events during rendering.\n\t *\n\t * @see module:engine/view/observer/observer~Observer#enable\n\t */\n\tdisable() {\n\t\tthis.isEnabled = false;\n\t}\n\n\t/**\n\t * Disables and destroys the observer, among others removes event listeners created by the observer.\n\t */\n\tdestroy() {\n\t\tthis.disable();\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Checks whether a given DOM event should be ignored (should not be turned into a synthetic view document event).\n\t *\n\t * Currently, an event will be ignored only if its target or any of its ancestors has the `data-cke-ignore-events` attribute.\n\t * This attribute can be used inside the structures generated by\n\t * {@link module:engine/view/downcastwriter~DowncastWriter#createUIElement `DowncastWriter#createUIElement()`} to ignore events\n\t * fired within a UI that should be excluded from CKEditor 5's realms.\n\t *\n\t * @param {Node} domTarget The DOM event target to check (usually an element, sometimes a text node and\n\t * potentially sometimes a document, too).\n\t * @returns {Boolean} Whether this event should be ignored by the observer.\n\t */\n\tcheckShouldIgnoreEventFromTarget( domTarget ) {\n\t\tif ( domTarget && domTarget.nodeType === 3 ) {\n\t\t\tdomTarget = domTarget.parentNode;\n\t\t}\n\n\t\tif ( !domTarget || domTarget.nodeType !== 1 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn domTarget.matches( '[data-cke-ignore-events], [data-cke-ignore-events] *' );\n\t}\n\n\t/**\n\t * Starts observing the given root element.\n\t *\n\t * @method #observe\n\t * @param {HTMLElement} domElement\n\t * @param {String} name The name of the root element.\n\t */\n}\n\nmix( Observer, DomEmitterMixin );\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nexport default setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nexport default setCacheHas;\n","import MapCache from './_MapCache.js';\nimport setCacheAdd from './_setCacheAdd.js';\nimport setCacheHas from './_setCacheHas.js';\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nexport default SetCache;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nexport default cacheHas;\n","import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nexport default mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nexport default setToArray;\n","import Symbol from './_Symbol.js';\nimport Uint8Array from './_Uint8Array.js';\nimport eq from './eq.js';\nimport equalArrays from './_equalArrays.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nexport default equalByTag;\n","import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n","import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n","import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * This method is like `_.isEqual` except that it accepts `customizer` which\n * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n * are handled by the method instead. The `customizer` is invoked with up to\n * six arguments: (objValue, othValue [, index|key, object, other, stack]).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * function isGreeting(value) {\n *   return /^h(?:i|ello)$/.test(value);\n * }\n *\n * function customizer(objValue, othValue) {\n *   if (isGreeting(objValue) && isGreeting(othValue)) {\n *     return true;\n *   }\n * }\n *\n * var array = ['hello', 'goodbye'];\n * var other = ['hi', 'goodbye'];\n *\n * _.isEqualWith(array, other, customizer);\n * // => true\n */\nfunction isEqualWith(value, other, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  var result = customizer ? customizer(value, other) : undefined;\n  return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;\n}\n\nexport default isEqualWith;\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/mutationobserver\n */\n\n/* globals window */\n\nimport Observer from './observer';\nimport ViewSelection from '../selection';\nimport { startsWithFiller, getDataWithoutFiller } from '../filler';\nimport { isEqualWith } from 'lodash-es';\n\n/**\n * Mutation observer class observes changes in the DOM, fires {@link module:engine/view/document~Document#event:mutations} event, mark view\n * elements as changed and call {@link module:engine/view/renderer~Renderer#render}.\n * Because all mutated nodes are marked as \"to be rendered\" and the\n * {@link module:engine/view/renderer~Renderer#render} is called, all changes will be reverted, unless the mutation will be handled by the\n * {@link module:engine/view/document~Document#event:mutations} event listener. It means user will see only handled changes, and the editor\n * will block all changes which are not handled.\n *\n * Mutation Observer also take care of reducing number of mutations which are fired. It removes duplicates and\n * mutations on elements which do not have corresponding view elements. Also\n * {@link module:engine/view/observer/mutationobserver~MutatedText text mutation} is fired only if parent element do not change child list.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @extends module:engine/view/observer/observer~Observer\n */\nexport default class MutationObserver extends Observer {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\t/**\n\t\t * Native mutation observer config.\n\t\t *\n\t\t * @private\n\t\t * @member {Object}\n\t\t */\n\t\tthis._config = {\n\t\t\tchildList: true,\n\t\t\tcharacterData: true,\n\t\t\tcharacterDataOldValue: true,\n\t\t\tsubtree: true\n\t\t};\n\n\t\t/**\n\t\t * Reference to the {@link module:engine/view/view~View#domConverter}.\n\t\t *\n\t\t * @member {module:engine/view/domconverter~DomConverter}\n\t\t */\n\t\tthis.domConverter = view.domConverter;\n\n\t\t/**\n\t\t * Reference to the {@link module:engine/view/view~View#_renderer}.\n\t\t *\n\t\t * @member {module:engine/view/renderer~Renderer}\n\t\t */\n\t\tthis.renderer = view._renderer;\n\n\t\t/**\n\t\t * Observed DOM elements.\n\t\t *\n\t\t * @private\n\t\t * @member {Array.<HTMLElement>}\n\t\t */\n\t\tthis._domElements = [];\n\n\t\t/**\n\t\t * Native mutation observer.\n\t\t *\n\t\t * @private\n\t\t * @member {MutationObserver}\n\t\t */\n\t\tthis._mutationObserver = new window.MutationObserver( this._onMutations.bind( this ) );\n\t}\n\n\t/**\n\t * Synchronously fires {@link module:engine/view/document~Document#event:mutations} event with all mutations in record queue.\n\t * At the same time empties the queue so mutations will not be fired twice.\n\t */\n\tflush() {\n\t\tthis._onMutations( this._mutationObserver.takeRecords() );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve( domElement ) {\n\t\tthis._domElements.push( domElement );\n\n\t\tif ( this.isEnabled ) {\n\t\t\tthis._mutationObserver.observe( domElement, this._config );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tenable() {\n\t\tsuper.enable();\n\n\t\tfor ( const domElement of this._domElements ) {\n\t\t\tthis._mutationObserver.observe( domElement, this._config );\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdisable() {\n\t\tsuper.disable();\n\n\t\tthis._mutationObserver.disconnect();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tsuper.destroy();\n\n\t\tthis._mutationObserver.disconnect();\n\t}\n\n\t/**\n\t * Handles mutations. Deduplicates, mark view elements to sync, fire event and call render.\n\t *\n\t * @private\n\t * @param {Array.<Object>} domMutations Array of native mutations.\n\t */\n\t_onMutations( domMutations ) {\n\t\t// As a result of this.flush() we can have an empty collection.\n\t\tif ( domMutations.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst domConverter = this.domConverter;\n\n\t\t// Use map and set for deduplication.\n\t\tconst mutatedTexts = new Map();\n\t\tconst mutatedElements = new Set();\n\n\t\t// Handle `childList` mutations first, so we will be able to check if the `characterData` mutation is in the\n\t\t// element with changed structure anyway.\n\t\tfor ( const mutation of domMutations ) {\n\t\t\tif ( mutation.type === 'childList' ) {\n\t\t\t\tconst element = domConverter.mapDomToView( mutation.target );\n\n\t\t\t\t// Do not collect mutations from UIElements and RawElements.\n\t\t\t\tif ( element && ( element.is( 'uiElement' ) || element.is( 'rawElement' ) ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif ( element && !this._isBogusBrMutation( mutation ) ) {\n\t\t\t\t\tmutatedElements.add( element );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Handle `characterData` mutations later, when we have the full list of nodes which changed structure.\n\t\tfor ( const mutation of domMutations ) {\n\t\t\tconst element = domConverter.mapDomToView( mutation.target );\n\n\t\t\t// Do not collect mutations from UIElements and RawElements.\n\t\t\tif ( element && ( element.is( 'uiElement' ) || element.is( 'rawElement' ) ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( mutation.type === 'characterData' ) {\n\t\t\t\tconst text = domConverter.findCorrespondingViewText( mutation.target );\n\n\t\t\t\tif ( text && !mutatedElements.has( text.parent ) ) {\n\t\t\t\t\t// Use text as a key, for deduplication. If there will be another mutation on the same text element\n\t\t\t\t\t// we will have only one in the map.\n\t\t\t\t\tmutatedTexts.set( text, {\n\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\toldText: text.data,\n\t\t\t\t\t\tnewText: getDataWithoutFiller( mutation.target ),\n\t\t\t\t\t\tnode: text\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\t// When we added first letter to the text node which had only inline filler, for the DOM it is mutation\n\t\t\t\t// on text, but for the view, where filler text node did not existed, new text node was created, so we\n\t\t\t\t// need to fire 'children' mutation instead of 'text'.\n\t\t\t\telse if ( !text && startsWithFiller( mutation.target ) ) {\n\t\t\t\t\tmutatedElements.add( domConverter.mapDomToView( mutation.target.parentNode ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Now we build the list of mutations to fire and mark elements. We did not do it earlier to avoid marking the\n\t\t// same node multiple times in case of duplication.\n\n\t\t// List of mutations we will fire.\n\t\tconst viewMutations = [];\n\n\t\tfor ( const mutatedText of mutatedTexts.values() ) {\n\t\t\tthis.renderer.markToSync( 'text', mutatedText.node );\n\t\t\tviewMutations.push( mutatedText );\n\t\t}\n\n\t\tfor ( const viewElement of mutatedElements ) {\n\t\t\tconst domElement = domConverter.mapViewToDom( viewElement );\n\t\t\tconst viewChildren = Array.from( viewElement.getChildren() );\n\t\t\tconst newViewChildren = Array.from( domConverter.domChildrenToView( domElement, { withChildren: false } ) );\n\n\t\t\t// It may happen that as a result of many changes (sth was inserted and then removed),\n\t\t\t// both elements haven't really changed. #1031\n\t\t\tif ( !isEqualWith( viewChildren, newViewChildren, sameNodes ) ) {\n\t\t\t\tthis.renderer.markToSync( 'children', viewElement );\n\n\t\t\t\tviewMutations.push( {\n\t\t\t\t\ttype: 'children',\n\t\t\t\t\toldChildren: viewChildren,\n\t\t\t\t\tnewChildren: newViewChildren,\n\t\t\t\t\tnode: viewElement\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\t// Retrieve `domSelection` using `ownerDocument` of one of mutated nodes.\n\t\t// There should not be simultaneous mutation in multiple documents, so it's fine.\n\t\tconst domSelection = domMutations[ 0 ].target.ownerDocument.getSelection();\n\n\t\tlet viewSelection = null;\n\n\t\tif ( domSelection && domSelection.anchorNode ) {\n\t\t\t// If `domSelection` is inside a dom node that is already bound to a view node from view tree, get\n\t\t\t// corresponding selection in the view and pass it together with `viewMutations`. The `viewSelection` may\n\t\t\t// be used by features handling mutations.\n\t\t\t// Only one range is supported.\n\n\t\t\tconst viewSelectionAnchor = domConverter.domPositionToView( domSelection.anchorNode, domSelection.anchorOffset );\n\t\t\tconst viewSelectionFocus = domConverter.domPositionToView( domSelection.focusNode, domSelection.focusOffset );\n\n\t\t\t// Anchor and focus has to be properly mapped to view.\n\t\t\tif ( viewSelectionAnchor && viewSelectionFocus ) {\n\t\t\t\tviewSelection = new ViewSelection( viewSelectionAnchor );\n\t\t\t\tviewSelection.setFocus( viewSelectionFocus );\n\t\t\t}\n\t\t}\n\n\t\t// In case only non-relevant mutations were recorded it skips the event and force render (#5600).\n\t\tif ( viewMutations.length ) {\n\t\t\tthis.document.fire( 'mutations', viewMutations, viewSelection );\n\n\t\t\t// If nothing changes on `mutations` event, at this point we have \"dirty DOM\" (changed) and de-synched\n\t\t\t// view (which has not been changed). In order to \"reset DOM\" we render the view again.\n\t\t\tthis.view.forceRender();\n\t\t}\n\n\t\tfunction sameNodes( child1, child2 ) {\n\t\t\t// First level of comparison (array of children vs array of children)  use the Lodash's default behavior.\n\t\t\tif ( Array.isArray( child1 ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Elements.\n\t\t\tif ( child1 === child2 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t// Texts.\n\t\t\telse if ( child1.is( '$text' ) && child2.is( '$text' ) ) {\n\t\t\t\treturn child1.data === child2.data;\n\t\t\t}\n\n\t\t\t// Not matching types.\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Checks if mutation was generated by the browser inserting bogus br on the end of the block element.\n\t * Such mutations are generated while pressing space or performing native spellchecker correction\n\t * on the end of the block element in Firefox browser.\n\t *\n\t * @private\n\t * @param {Object} mutation Native mutation object.\n\t * @returns {Boolean}\n\t */\n\t_isBogusBrMutation( mutation ) {\n\t\tlet addedNode = null;\n\n\t\t// Check if mutation added only one node on the end of its parent.\n\t\tif ( mutation.nextSibling === null && mutation.removedNodes.length === 0 && mutation.addedNodes.length == 1 ) {\n\t\t\taddedNode = this.domConverter.domToView( mutation.addedNodes[ 0 ], {\n\t\t\t\twithChildren: false\n\t\t\t} );\n\t\t}\n\n\t\treturn addedNode && addedNode.is( 'element', 'br' );\n\t}\n}\n\n/**\n * Fired when mutation occurred. If tree view is not changed on this event, DOM will be reverted to the state before\n * mutation, so all changes which should be applied, should be handled on this event.\n *\n * Introduced by {@link module:engine/view/observer/mutationobserver~MutationObserver}.\n *\n * Note that because {@link module:engine/view/observer/mutationobserver~MutationObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/mutationobserver~MutationObserver\n * @event module:engine/view/document~Document#event:mutations\n * @param {Array.<module:engine/view/observer/mutationobserver~MutatedText|module:engine/view/observer/mutationobserver~MutatedChildren>}\n * viewMutations Array of mutations.\n * For mutated texts it will be {@link module:engine/view/observer/mutationobserver~MutatedText} and for mutated elements it will be\n * {@link module:engine/view/observer/mutationobserver~MutatedChildren}. You can recognize the type based on the `type` property.\n * @param {module:engine/view/selection~Selection|null} viewSelection View selection that is a result of converting DOM selection to view.\n * Keep in\n * mind that the DOM selection is already \"updated\", meaning that it already acknowledges changes done in mutation.\n */\n\n/**\n * Mutation item for text.\n *\n * @see module:engine/view/document~Document#event:mutations\n * @see module:engine/view/observer/mutationobserver~MutatedChildren\n *\n * @typedef {Object} module:engine/view/observer/mutationobserver~MutatedText\n *\n * @property {String} type For text mutations it is always 'text'.\n * @property {module:engine/view/text~Text} node Mutated text node.\n * @property {String} oldText Old text.\n * @property {String} newText New text.\n */\n\n/**\n * Mutation item for child nodes.\n *\n * @see module:engine/view/document~Document#event:mutations\n * @see module:engine/view/observer/mutationobserver~MutatedText\n *\n * @typedef {Object} module:engine/view/observer/mutationobserver~MutatedChildren\n *\n * @property {String} type For child nodes mutations it is always 'children'.\n * @property {module:engine/view/element~Element} node Parent of the mutated children.\n * @property {Array.<module:engine/view/node~Node>} oldChildren Old child nodes.\n * @property {Array.<module:engine/view/node~Node>} newChildren New child nodes.\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/domeventdata\n */\n\nimport { extend } from 'lodash-es';\n\n/**\n * Information about a DOM event in context of the {@link module:engine/view/document~Document}.\n * It wraps the native event, which usually should not be used as the wrapper contains\n * additional data (like key code for keyboard events).\n */\nexport default class DomEventData {\n\t/**\n\t * @param {module:engine/view/view~View} view The instance of the view controller.\n\t * @param {Event} domEvent The DOM event.\n\t * @param {Object} [additionalData] Additional properties that the instance should contain.\n\t */\n\tconstructor( view, domEvent, additionalData ) {\n\t\t/**\n\t\t * Instance of the view controller.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/view~View} module:engine/view/observer/observer~Observer.DomEvent#view\n\t\t */\n\t\tthis.view = view;\n\n\t\t/**\n\t\t * The instance of the document.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/document~Document} module:engine/view/observer/observer~Observer.DomEvent#document\n\t\t */\n\t\tthis.document = view.document;\n\n\t\t/**\n\t\t * The DOM event.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Event} module:engine/view/observer/observer~Observer.DomEvent#domEvent\n\t\t */\n\t\tthis.domEvent = domEvent;\n\n\t\t/**\n\t\t * The DOM target.\n\t\t *\n\t\t * @readonly\n\t\t * @member {HTMLElement} module:engine/view/observer/observer~Observer.DomEvent#target\n\t\t */\n\t\tthis.domTarget = domEvent.target;\n\n\t\textend( this, additionalData );\n\t}\n\n\t/**\n\t * The tree view element representing the target.\n\t *\n\t * @readonly\n\t * @type module:engine/view/element~Element\n\t */\n\tget target() {\n\t\treturn this.view.domConverter.mapDomToView( this.domTarget );\n\t}\n\n\t/**\n\t * Prevents the native's event default action.\n\t */\n\tpreventDefault() {\n\t\tthis.domEvent.preventDefault();\n\t}\n\n\t/**\n\t * Stops native event propagation.\n\t */\n\tstopPropagation() {\n\t\tthis.domEvent.stopPropagation();\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/domeventobserver\n */\n\nimport Observer from './observer';\nimport DomEventData from './domeventdata';\n\n/**\n * Base class for DOM event observers. This class handles\n * {@link module:engine/view/observer/observer~Observer#observe adding} listeners to DOM elements,\n * {@link module:engine/view/observer/observer~Observer#disable disabling} and\n * {@link module:engine/view/observer/observer~Observer#enable re-enabling} events.\n * Child class needs to define\n * {@link module:engine/view/observer/domeventobserver~DomEventObserver#domEventType DOM event type} and\n * {@link module:engine/view/observer/domeventobserver~DomEventObserver#onDomEvent callback}.\n *\n * For instance:\n *\n *\t\tclass ClickObserver extends DomEventObserver {\n *\t\t\t// It can also be defined as a normal property in the constructor.\n *\t\t\tget domEventType() {\n *\t\t\t\treturn 'click';\n *\t\t\t}\n *\n *\t\t\tonDomEvent( domEvent ) {\n *\t\t\t\tthis.fire( 'click', domEvent );\n *\t\t\t}\n *\t\t}\n *\n * @extends module:engine/view/observer/observer~Observer\n */\nexport default class DomEventObserver extends Observer {\n\t/**\n\t * Type of the DOM event the observer should listen to. Array of types can be defined\n\t * if the observer should listen to multiple DOM events.\n\t *\n\t * @readonly\n\t * @member {String|Array.<String>} #domEventType\n\t */\n\n\t/**\n\t * Callback which should be called when the DOM event occurred. Note that the callback will not be called if\n\t * observer {@link #isEnabled is not enabled}.\n\t *\n\t * @see #domEventType\n\t * @abstract\n\t * @method #onDomEvent\n\t */\n\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\t/**\n\t\t * If set to `true` DOM events will be listened on the capturing phase.\n\t\t * Default value is `false`.\n\t\t *\n\t\t * @member {Boolean}\n\t\t */\n\t\tthis.useCapture = false;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve( domElement ) {\n\t\tconst types = typeof this.domEventType == 'string' ? [ this.domEventType ] : this.domEventType;\n\n\t\ttypes.forEach( type => {\n\t\t\tthis.listenTo( domElement, type, ( eventInfo, domEvent ) => {\n\t\t\t\tif ( this.isEnabled && !this.checkShouldIgnoreEventFromTarget( domEvent.target ) ) {\n\t\t\t\t\tthis.onDomEvent( domEvent );\n\t\t\t\t}\n\t\t\t}, { useCapture: this.useCapture } );\n\t\t} );\n\t}\n\n\t/**\n\t * Calls `Document#fire()` if observer {@link #isEnabled is enabled}.\n\t *\n\t * @see module:utils/emittermixin~EmitterMixin#fire\n\t * @param {String} eventType The event type (name).\n\t * @param {Event} domEvent The DOM event.\n\t * @param {Object} [additionalData] The additional data which should extend the\n\t * {@link module:engine/view/observer/domeventdata~DomEventData event data} object.\n\t */\n\tfire( eventType, domEvent, additionalData ) {\n\t\tif ( this.isEnabled ) {\n\t\t\tthis.document.fire( eventType, new DomEventData( this.view, domEvent, additionalData ) );\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/keyobserver\n */\n\nimport DomEventObserver from './domeventobserver';\nimport { getCode } from '@ckeditor/ckeditor5-utils/src/keyboard';\n\n/**\n * Observer for events connected with pressing keyboard keys.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @extends module:engine/view/observer/domeventobserver~DomEventObserver\n */\nexport default class KeyObserver extends DomEventObserver {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tthis.domEventType = [ 'keydown', 'keyup' ];\n\t}\n\n\tonDomEvent( domEvt ) {\n\t\tthis.fire( domEvt.type, domEvt, {\n\t\t\tkeyCode: domEvt.keyCode,\n\n\t\t\taltKey: domEvt.altKey,\n\t\t\tctrlKey: domEvt.ctrlKey || domEvt.metaKey,\n\t\t\tshiftKey: domEvt.shiftKey,\n\n\t\t\tget keystroke() {\n\t\t\t\treturn getCode( this );\n\t\t\t}\n\t\t} );\n\t}\n}\n\n/**\n * Fired when a key has been pressed.\n *\n * Introduced by {@link module:engine/view/observer/keyobserver~KeyObserver}.\n *\n * Note that because {@link module:engine/view/observer/keyobserver~KeyObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/keyobserver~KeyObserver\n * @event module:engine/view/document~Document#event:keydown\n * @param {module:engine/view/observer/keyobserver~KeyEventData} keyEventData\n */\n\n/**\n * Fired when a key has been released.\n *\n * Introduced by {@link module:engine/view/observer/keyobserver~KeyObserver}.\n *\n * Note that because {@link module:engine/view/observer/keyobserver~KeyObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/keyobserver~KeyObserver\n * @event module:engine/view/document~Document#event:keyup\n * @param {module:engine/view/observer/keyobserver~KeyEventData} keyEventData\n */\n\n/**\n * The value of both events - {@link module:engine/view/document~Document#event:keydown} and\n * {@link module:engine/view/document~Document#event:keyup}.\n *\n * @class module:engine/view/observer/keyobserver~KeyEventData\n * @extends module:engine/view/observer/domeventdata~DomEventData\n * @implements module:utils/keyboard~KeystrokeInfo\n */\n\n/**\n * Code of the whole keystroke. See {@link module:utils/keyboard~getCode}.\n *\n * @readonly\n * @member {Number} module:engine/view/observer/keyobserver~KeyEventData#keystroke\n */\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","import isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/fakeselectionobserver\n */\n\nimport Observer from './observer';\nimport ViewSelection from '../selection';\nimport { keyCodes, isArrowKeyCode } from '@ckeditor/ckeditor5-utils/src/keyboard';\nimport { debounce } from 'lodash-es';\n\n/**\n * Fake selection observer class. If view selection is fake it is placed in dummy DOM container. This observer listens\n * on {@link module:engine/view/document~Document#event:keydown keydown} events and handles moving fake view selection to the correct place\n * if arrow keys are pressed.\n * Fires {@link module:engine/view/document~Document#event:selectionChange selectionChange event} simulating natural behaviour of\n * {@link module:engine/view/observer/selectionobserver~SelectionObserver SelectionObserver}.\n *\n * @extends module:engine/view/observer/observer~Observer\n */\nexport default class FakeSelectionObserver extends Observer {\n\t/**\n\t * Creates new FakeSelectionObserver instance.\n\t *\n\t * @param {module:engine/view/view~View} view\n\t */\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\t/**\n\t\t * Fires debounced event `selectionChangeDone`. It uses `lodash#debounce` method to delay function call.\n\t\t *\n\t\t * @private\n\t\t * @param {Object} data Selection change data.\n\t\t * @method #_fireSelectionChangeDoneDebounced\n\t\t */\n\t\tthis._fireSelectionChangeDoneDebounced = debounce( data => this.document.fire( 'selectionChangeDone', data ), 200 );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve() {\n\t\tconst document = this.document;\n\n\t\tdocument.on( 'keydown', ( eventInfo, data ) => {\n\t\t\tconst selection = document.selection;\n\n\t\t\tif ( selection.isFake && isArrowKeyCode( data.keyCode ) && this.isEnabled ) {\n\t\t\t\t// Prevents default key down handling - no selection change will occur.\n\t\t\t\tdata.preventDefault();\n\n\t\t\t\tthis._handleSelectionMove( data.keyCode );\n\t\t\t}\n\t\t}, { priority: 'lowest' } );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tsuper.destroy();\n\n\t\tthis._fireSelectionChangeDoneDebounced.cancel();\n\t}\n\n\t/**\n\t * Handles collapsing view selection according to given key code. If left or up key is provided - new selection will be\n\t * collapsed to left. If right or down key is pressed - new selection will be collapsed to right.\n\t *\n\t * This method fires {@link module:engine/view/document~Document#event:selectionChange} and\n\t * {@link module:engine/view/document~Document#event:selectionChangeDone} events imitating behaviour of\n\t * {@link module:engine/view/observer/selectionobserver~SelectionObserver}.\n\t *\n\t * @private\n\t * @param {Number} keyCode\n\t * @fires module:engine/view/document~Document#event:selectionChange\n\t * @fires module:engine/view/document~Document#event:selectionChangeDone\n\t */\n\t_handleSelectionMove( keyCode ) {\n\t\tconst selection = this.document.selection;\n\t\tconst newSelection = new ViewSelection( selection.getRanges(), { backward: selection.isBackward, fake: false } );\n\n\t\t// Left or up arrow pressed - move selection to start.\n\t\tif ( keyCode == keyCodes.arrowleft || keyCode == keyCodes.arrowup ) {\n\t\t\tnewSelection.setTo( newSelection.getFirstPosition() );\n\t\t}\n\n\t\t// Right or down arrow pressed - move selection to end.\n\t\tif ( keyCode == keyCodes.arrowright || keyCode == keyCodes.arrowdown ) {\n\t\t\tnewSelection.setTo( newSelection.getLastPosition() );\n\t\t}\n\n\t\tconst data = {\n\t\t\toldSelection: selection,\n\t\t\tnewSelection,\n\t\t\tdomSelection: null\n\t\t};\n\n\t\t// Fire dummy selection change event.\n\t\tthis.document.fire( 'selectionChange', data );\n\n\t\t// Call` #_fireSelectionChangeDoneDebounced` every time when `selectionChange` event is fired.\n\t\t// This function is debounced what means that `selectionChangeDone` event will be fired only when\n\t\t// defined int the function time will elapse since the last time the function was called.\n\t\t// So `selectionChangeDone` will be fired when selection will stop changing.\n\t\tthis._fireSelectionChangeDoneDebounced( data );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/selectionobserver\n */\n\n/* global setInterval, clearInterval */\n\nimport Observer from './observer';\nimport MutationObserver from './mutationobserver';\nimport { debounce } from 'lodash-es';\n\n/**\n * Selection observer class observes selection changes in the document. If a selection changes on the document this\n * observer checks if there are any mutations and if the DOM selection is different from the\n * {@link module:engine/view/document~Document#selection view selection}. The selection observer fires\n * {@link module:engine/view/document~Document#event:selectionChange} event only if a selection change was the only change in the document\n * and the DOM selection is different then the view selection.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @see module:engine/view/observer/mutationobserver~MutationObserver\n * @extends module:engine/view/observer/observer~Observer\n */\nexport default class SelectionObserver extends Observer {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\t/**\n\t\t * Instance of the mutation observer. Selection observer calls\n\t\t * {@link module:engine/view/observer/mutationobserver~MutationObserver#flush} to ensure that the mutations will be handled\n\t\t * before the {@link module:engine/view/document~Document#event:selectionChange} event is fired.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/observer/mutationobserver~MutationObserver}\n\t\t * module:engine/view/observer/selectionobserver~SelectionObserver#mutationObserver\n\t\t */\n\t\tthis.mutationObserver = view.getObserver( MutationObserver );\n\n\t\t/**\n\t\t * Reference to the view {@link module:engine/view/documentselection~DocumentSelection} object used to compare\n\t\t * new selection with it.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/documentselection~DocumentSelection}\n\t\t * module:engine/view/observer/selectionobserver~SelectionObserver#selection\n\t\t */\n\t\tthis.selection = this.document.selection;\n\n\t\t/* eslint-disable max-len */\n\t\t/**\n\t\t * Reference to the {@link module:engine/view/view~View#domConverter}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/domconverter~DomConverter} module:engine/view/observer/selectionobserver~SelectionObserver#domConverter\n\t\t */\n\t\t/* eslint-enable max-len */\n\t\tthis.domConverter = view.domConverter;\n\n\t\t/**\n\t\t * A set of documents which have added `selectionchange` listener to avoid adding a listener twice to the same\n\t\t * document.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakSet.<Document>} module:engine/view/observer/selectionobserver~SelectionObserver#_documents\n\t\t */\n\t\tthis._documents = new WeakSet();\n\n\t\t/**\n\t\t * Fires debounced event `selectionChangeDone`. It uses `lodash#debounce` method to delay function call.\n\t\t *\n\t\t * @private\n\t\t * @param {Object} data Selection change data.\n\t\t * @method #_fireSelectionChangeDoneDebounced\n\t\t */\n\t\tthis._fireSelectionChangeDoneDebounced = debounce( data => this.document.fire( 'selectionChangeDone', data ), 200 );\n\n\t\tthis._clearInfiniteLoopInterval = setInterval( () => this._clearInfiniteLoop(), 1000 );\n\n\t\t/**\n\t\t * Private property to check if the code does not enter infinite loop.\n\t\t *\n\t\t * @private\n\t\t * @member {Number} module:engine/view/observer/selectionobserver~SelectionObserver#_loopbackCounter\n\t\t */\n\t\tthis._loopbackCounter = 0;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve( domElement ) {\n\t\tconst domDocument = domElement.ownerDocument;\n\n\t\t// Add listener once per each document.\n\t\tif ( this._documents.has( domDocument ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.listenTo( domDocument, 'selectionchange', ( evt, domEvent ) => {\n\t\t\tthis._handleSelectionChange( domEvent, domDocument );\n\t\t} );\n\n\t\tthis._documents.add( domDocument );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tsuper.destroy();\n\n\t\tclearInterval( this._clearInfiniteLoopInterval );\n\t\tthis._fireSelectionChangeDoneDebounced.cancel();\n\t}\n\n\t/**\n\t * Selection change listener. {@link module:engine/view/observer/mutationobserver~MutationObserver#flush Flush} mutations, check if\n\t * a selection changes and fires {@link module:engine/view/document~Document#event:selectionChange} event on every change\n\t * and {@link module:engine/view/document~Document#event:selectionChangeDone} when a selection stop changing.\n\t *\n\t * @private\n\t * @param {Event} domEvent DOM event.\n\t * @param {Document} domDocument DOM document.\n\t */\n\t_handleSelectionChange( domEvent, domDocument ) {\n\t\tif ( !this.isEnabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst domSelection = domDocument.defaultView.getSelection();\n\n\t\tif ( this.checkShouldIgnoreEventFromTarget( domSelection.anchorNode ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ensure the mutation event will be before selection event on all browsers.\n\t\tthis.mutationObserver.flush();\n\n\t\t// If there were mutations then the view will be re-rendered by the mutation observer and the selection\n\t\t// will be updated, so the selections will equal and the event will not be fired, as expected.\n\t\tconst newViewSelection = this.domConverter.domSelectionToView( domSelection );\n\n\t\t// Do not convert selection change if the new view selection has no ranges in it.\n\t\t//\n\t\t// It means that the DOM selection is in some way incorrect. Ranges that were in the DOM selection could not be\n\t\t// converted to the view. This happens when the DOM selection was moved outside of the editable element.\n\t\tif ( newViewSelection.rangeCount == 0 ) {\n\t\t\tthis.view.hasDomSelection = false;\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.view.hasDomSelection = true;\n\n\t\tif ( this.selection.isEqual( newViewSelection ) && this.domConverter.isDomSelectionCorrect( domSelection ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ensure we are not in the infinite loop (#400).\n\t\t// This counter is reset each second. 60 selection changes in 1 second is enough high number\n\t\t// to be very difficult (impossible) to achieve using just keyboard keys (during normal editor use).\n\t\tif ( ++this._loopbackCounter > 60 ) {\n\t\t\t// Selection change observer detected an infinite rendering loop.\n\t\t\t// Most probably you try to put the selection in the position which is not allowed\n\t\t\t// by the browser and browser fixes it automatically what causes `selectionchange` event on\n\t\t\t// which a loopback through a model tries to re-render the wrong selection and again.\n\t\t\t//\n\t\t\t// @if CK_DEBUG // console.warn( 'Selection change observer detected an infinite rendering loop.' );\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.selection.isSimilar( newViewSelection ) ) {\n\t\t\t// If selection was equal and we are at this point of algorithm, it means that it was incorrect.\n\t\t\t// Just re-render it, no need to fire any events, etc.\n\t\t\tthis.view.forceRender();\n\t\t} else {\n\t\t\tconst data = {\n\t\t\t\toldSelection: this.selection,\n\t\t\t\tnewSelection: newViewSelection,\n\t\t\t\tdomSelection\n\t\t\t};\n\n\t\t\t// Prepare data for new selection and fire appropriate events.\n\t\t\tthis.document.fire( 'selectionChange', data );\n\n\t\t\t// Call `#_fireSelectionChangeDoneDebounced` every time when `selectionChange` event is fired.\n\t\t\t// This function is debounced what means that `selectionChangeDone` event will be fired only when\n\t\t\t// defined int the function time will elapse since the last time the function was called.\n\t\t\t// So `selectionChangeDone` will be fired when selection will stop changing.\n\t\t\tthis._fireSelectionChangeDoneDebounced( data );\n\t\t}\n\t}\n\n\t/**\n\t * Clears `SelectionObserver` internal properties connected with preventing infinite loop.\n\t *\n\t * @protected\n\t */\n\t_clearInfiniteLoop() {\n\t\tthis._loopbackCounter = 0;\n\t}\n}\n\n/**\n * Fired when a selection has changed. This event is fired only when the selection change was the only change that happened\n * in the document, and the old selection is different then the new selection.\n *\n * Introduced by {@link module:engine/view/observer/selectionobserver~SelectionObserver}.\n *\n * Note that because {@link module:engine/view/observer/selectionobserver~SelectionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/selectionobserver~SelectionObserver\n * @event module:engine/view/document~Document#event:selectionChange\n * @param {Object} data\n * @param {module:engine/view/documentselection~DocumentSelection} data.oldSelection Old View selection which is\n * {@link module:engine/view/document~Document#selection}.\n * @param {module:engine/view/selection~Selection} data.newSelection New View selection which is converted DOM selection.\n * @param {Selection} data.domSelection Native DOM selection.\n */\n\n/**\n * Fired when selection stops changing.\n *\n * Introduced by {@link module:engine/view/observer/selectionobserver~SelectionObserver}.\n *\n * Note that because {@link module:engine/view/observer/selectionobserver~SelectionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/selectionobserver~SelectionObserver\n * @event module:engine/view/document~Document#event:selectionChangeDone\n * @param {Object} data\n * @param {module:engine/view/documentselection~DocumentSelection} data.oldSelection Old View selection which is\n * {@link module:engine/view/document~Document#selection}.\n * @param {module:engine/view/selection~Selection} data.newSelection New View selection which is converted DOM selection.\n * @param {Selection} data.domSelection Native DOM selection.\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/focusobserver\n */\n\n/* globals setTimeout, clearTimeout */\n\nimport DomEventObserver from './domeventobserver';\n\n/**\n * {@link module:engine/view/document~Document#event:focus Focus}\n * and {@link module:engine/view/document~Document#event:blur blur} events observer.\n * Focus observer handle also {@link module:engine/view/rooteditableelement~RootEditableElement#isFocused isFocused} property of the\n * {@link module:engine/view/rooteditableelement~RootEditableElement root elements}.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @extends module:engine/view/observer/domeventobserver~DomEventObserver\n */\nexport default class FocusObserver extends DomEventObserver {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tthis.domEventType = [ 'focus', 'blur' ];\n\t\tthis.useCapture = true;\n\t\tconst document = this.document;\n\n\t\tdocument.on( 'focus', () => {\n\t\t\tdocument.isFocused = true;\n\n\t\t\t// Unfortunately native `selectionchange` event is fired asynchronously.\n\t\t\t// We need to wait until `SelectionObserver` handle the event and then render. Otherwise rendering will\n\t\t\t// overwrite new DOM selection with selection from the view.\n\t\t\t// See https://github.com/ckeditor/ckeditor5-engine/issues/795 for more details.\n\t\t\t// Long timeout is needed to solve #676 and https://github.com/ckeditor/ckeditor5-engine/issues/1157 issues.\n\t\t\tthis._renderTimeoutId = setTimeout( () => view.forceRender(), 50 );\n\t\t} );\n\n\t\tdocument.on( 'blur', ( evt, data ) => {\n\t\t\tconst selectedEditable = document.selection.editableElement;\n\n\t\t\tif ( selectedEditable === null || selectedEditable === data.target ) {\n\t\t\t\tdocument.isFocused = false;\n\n\t\t\t\t// Re-render the document to update view elements.\n\t\t\t\tview.forceRender();\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * Identifier of the timeout currently used by focus listener to delay rendering execution.\n\t\t *\n\t\t * @private\n\t\t * @member {Number} #_renderTimeoutId\n\t\t */\n\t}\n\n\tonDomEvent( domEvent ) {\n\t\tthis.fire( domEvent.type, domEvent );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tif ( this._renderTimeoutId ) {\n\t\t\tclearTimeout( this._renderTimeoutId );\n\t\t}\n\n\t\tsuper.destroy();\n\t}\n}\n\n/**\n * Fired when one of the editables gets focus.\n *\n * Introduced by {@link module:engine/view/observer/focusobserver~FocusObserver}.\n *\n * Note that because {@link module:engine/view/observer/focusobserver~FocusObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/focusobserver~FocusObserver\n * @event module:engine/view/document~Document#event:focus\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n\n/**\n * Fired when one of the editables loses focus.\n *\n * Introduced by {@link module:engine/view/observer/focusobserver~FocusObserver}.\n *\n * Note that because {@link module:engine/view/observer/focusobserver~FocusObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/focusobserver~FocusObserver\n * @event module:engine/view/document~Document#event:blur\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/compositionobserver\n */\n\nimport DomEventObserver from './domeventobserver';\n\n/**\n * {@link module:engine/view/document~Document#event:compositionstart Compositionstart},\n * {@link module:engine/view/document~Document#event:compositionupdate compositionupdate} and\n * {@link module:engine/view/document~Document#event:compositionend compositionend} events observer.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @extends module:engine/view/observer/domeventobserver~DomEventObserver\n */\nexport default class CompositionObserver extends DomEventObserver {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tthis.domEventType = [ 'compositionstart', 'compositionupdate', 'compositionend' ];\n\t\tconst document = this.document;\n\n\t\tdocument.on( 'compositionstart', () => {\n\t\t\tdocument.isComposing = true;\n\t\t} );\n\n\t\tdocument.on( 'compositionend', () => {\n\t\t\tdocument.isComposing = false;\n\t\t} );\n\t}\n\n\tonDomEvent( domEvent ) {\n\t\tthis.fire( domEvent.type, domEvent );\n\t}\n}\n\n/**\n * Fired when composition starts inside one of the editables.\n *\n * Introduced by {@link module:engine/view/observer/compositionobserver~CompositionObserver}.\n *\n * Note that because {@link module:engine/view/observer/compositionobserver~CompositionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/compositionobserver~CompositionObserver\n * @event module:engine/view/document~Document#event:compositionstart\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n\n/**\n * Fired when composition is updated inside one of the editables.\n *\n * Introduced by {@link module:engine/view/observer/compositionobserver~CompositionObserver}.\n *\n * Note that because {@link module:engine/view/observer/compositionobserver~CompositionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/compositionobserver~CompositionObserver\n * @event module:engine/view/document~Document#event:compositionupdate\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n\n/**\n * Fired when composition ends inside one of the editables.\n *\n * Introduced by {@link module:engine/view/observer/compositionobserver~CompositionObserver}.\n *\n * Note that because {@link module:engine/view/observer/compositionobserver~CompositionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/compositionobserver~CompositionObserver\n * @event module:engine/view/document~Document#event:compositionend\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * @module engine/view/observer/inputobserver\n */\n\nimport DomEventObserver from './domeventobserver';\n\n/**\n * Observer for events connected with data input.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @extends module:engine/view/observer/domeventobserver~DomEventObserver\n */\nexport default class InputObserver extends DomEventObserver {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\tthis.domEventType = [ 'beforeinput' ];\n\t}\n\n\tonDomEvent( domEvent ) {\n\t\tthis.fire( domEvent.type, domEvent );\n\t}\n}\n\n/**\n * Fired before browser inputs (or deletes) some data.\n *\n * This event is available only on browsers which support DOM `beforeinput` event.\n *\n * Introduced by {@link module:engine/view/observer/inputobserver~InputObserver}.\n *\n * Note that because {@link module:engine/view/observer/inputobserver~InputObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/inputobserver~InputObserver\n * @event module:engine/view/document~Document#event:beforeinput\n * @param {module:engine/view/observer/domeventdata~DomEventData} data Event data.\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/isrange\n */\n\n/**\n * Checks if the object is a native DOM Range.\n *\n * @param {*} obj\n * @returns {Boolean}\n */\nexport default function isRange( obj ) {\n\treturn Object.prototype.toString.apply( obj ) == '[object Range]';\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/getborderwidths\n */\n\n/**\n * Returns an object containing CSS border widths of a specified HTML element.\n *\n * @param {HTMLElement} element An element which has CSS borders.\n * @returns {Object} An object containing `top`, `left`, `right` and `bottom` properties\n * with numerical values of the `border-[top,left,right,bottom]-width` CSS styles.\n */\nexport default function getBorderWidths( element ) {\n\t// Call getComputedStyle on the window the element document belongs to.\n\tconst style = element.ownerDocument.defaultView.getComputedStyle( element );\n\n\treturn {\n\t\ttop: parseInt( style.borderTopWidth, 10 ),\n\t\tright: parseInt( style.borderRightWidth, 10 ),\n\t\tbottom: parseInt( style.borderBottomWidth, 10 ),\n\t\tleft: parseInt( style.borderLeftWidth, 10 )\n\t};\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/rect\n */\n\nimport isRange from './isrange';\nimport isWindow from './iswindow';\nimport getBorderWidths from './getborderwidths';\nimport isText from './istext';\nimport { isElement } from 'lodash-es';\n\nconst rectProperties = [ 'top', 'right', 'bottom', 'left', 'width', 'height' ];\n\n/**\n * A helper class representing a `ClientRect` object, e.g. value returned by\n * the native `object.getBoundingClientRect()` method. Provides a set of methods\n * to manipulate the rect and compare it against other rect instances.\n */\nexport default class Rect {\n\t/**\n\t * Creates an instance of rect.\n\t *\n\t *\t\t// Rect of an HTMLElement.\n\t *\t\tconst rectA = new Rect( document.body );\n\t *\n\t *\t\t// Rect of a DOM Range.\n\t *\t\tconst rectB = new Rect( document.getSelection().getRangeAt( 0 ) );\n\t *\n\t *\t\t// Rect of a window (web browser viewport).\n\t *\t\tconst rectC = new Rect( window );\n\t *\n\t *\t\t// Rect out of an object.\n\t *\t\tconst rectD = new Rect( { top: 0, right: 10, bottom: 10, left: 0, width: 10, height: 10 } );\n\t *\n\t *\t\t// Rect out of another Rect instance.\n\t *\t\tconst rectE = new Rect( rectD );\n\t *\n\t *\t\t// Rect out of a ClientRect.\n\t *\t\tconst rectF = new Rect( document.body.getClientRects().item( 0 ) );\n\t *\n\t * **Note**: By default a rect of an HTML element includes its CSS borders and scrollbars (if any)\n\t * ant the rect of a `window` includes scrollbars too. Use {@link #excludeScrollbarsAndBorders}\n\t * to get the inner part of the rect.\n\t *\n\t * @param {HTMLElement|Range|Window|ClientRect|module:utils/dom/rect~Rect|Object} source A source object to create the rect.\n\t */\n\tconstructor( source ) {\n\t\tconst isSourceRange = isRange( source );\n\n\t\t/**\n\t\t * The object this rect is for.\n\t\t *\n\t\t * @protected\n\t\t * @readonly\n\t\t * @member {HTMLElement|Range|ClientRect|module:utils/dom/rect~Rect|Object} #_source\n\t\t */\n\t\tObject.defineProperty( this, '_source', {\n\t\t\t// If the source is a Rect instance, copy it's #_source.\n\t\t\tvalue: source._source || source,\n\t\t\twritable: true,\n\t\t\tenumerable: false\n\t\t} );\n\n\t\tif ( isElement( source ) || isSourceRange ) {\n\t\t\t// The `Rect` class depends on `getBoundingClientRect` and `getClientRects` DOM methods. If the source\n\t\t\t// of a rect in an HTML element or a DOM range but it does not belong to any rendered DOM tree, these methods\n\t\t\t// will fail to obtain the geometry and the rect instance makes little sense to the features using it.\n\t\t\t// To get rid of this warning make sure the source passed to the constructor is a descendant of `window.document.body`.\n\t\t\t// @if CK_DEBUG // const sourceNode = isSourceRange ? source.startContainer : source;\n\t\t\t// @if CK_DEBUG // if ( !sourceNode.ownerDocument || !sourceNode.ownerDocument.body.contains( sourceNode ) ) {\n\t\t\t// @if CK_DEBUG // \tconsole.warn(\n\t\t\t// @if CK_DEBUG // \t\t'rect-source-not-in-dom: The source of this rect does not belong to any rendered DOM tree.',\n\t\t\t// @if CK_DEBUG // \t\t{ source } );\n\t\t\t// @if CK_DEBUG // }\n\n\t\t\tif ( isSourceRange ) {\n\t\t\t\tconst rangeRects = Rect.getDomRangeRects( source );\n\t\t\t\tcopyRectProperties( this, Rect.getBoundingRect( rangeRects ) );\n\t\t\t} else {\n\t\t\t\tcopyRectProperties( this, source.getBoundingClientRect() );\n\t\t\t}\n\t\t} else if ( isWindow( source ) ) {\n\t\t\tconst { innerWidth, innerHeight } = source;\n\n\t\t\tcopyRectProperties( this, {\n\t\t\t\ttop: 0,\n\t\t\t\tright: innerWidth,\n\t\t\t\tbottom: innerHeight,\n\t\t\t\tleft: 0,\n\t\t\t\twidth: innerWidth,\n\t\t\t\theight: innerHeight\n\t\t\t} );\n\t\t} else {\n\t\t\tcopyRectProperties( this, source );\n\t\t}\n\n\t\t/**\n\t\t * The \"top\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #top\n\t\t */\n\n\t\t/**\n\t\t * The \"right\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #right\n\t\t */\n\n\t\t/**\n\t\t * The \"bottom\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #bottom\n\t\t */\n\n\t\t/**\n\t\t * The \"left\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #left\n\t\t */\n\n\t\t/**\n\t\t * The \"width\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #width\n\t\t */\n\n\t\t/**\n\t\t * The \"height\" value of the rect.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} #height\n\t\t */\n\t}\n\n\t/**\n\t * Returns a clone of the rect.\n\t *\n\t * @returns {module:utils/dom/rect~Rect} A cloned rect.\n\t */\n\tclone() {\n\t\treturn new Rect( this );\n\t}\n\n\t/**\n\t * Moves the rect so that its upperleft corner lands in desired `[ x, y ]` location.\n\t *\n\t * @param {Number} x Desired horizontal location.\n\t * @param {Number} y Desired vertical location.\n\t * @returns {module:utils/dom/rect~Rect} A rect which has been moved.\n\t */\n\tmoveTo( x, y ) {\n\t\tthis.top = y;\n\t\tthis.right = x + this.width;\n\t\tthis.bottom = y + this.height;\n\t\tthis.left = x;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Moves the rect inplace by a dedicated offset.\n\t *\n\t * @param {Number} x A horizontal offset.\n\t * @param {Number} y A vertical offset\n\t * @returns {module:utils/dom/rect~Rect} A rect which has been moved.\n\t */\n\tmoveBy( x, y ) {\n\t\tthis.top += y;\n\t\tthis.right += x;\n\t\tthis.left += x;\n\t\tthis.bottom += y;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns a new rect a a result of intersection with another rect.\n\t *\n\t * @param {module:utils/dom/rect~Rect} anotherRect\n\t * @returns {module:utils/dom/rect~Rect}\n\t */\n\tgetIntersection( anotherRect ) {\n\t\tconst rect = {\n\t\t\ttop: Math.max( this.top, anotherRect.top ),\n\t\t\tright: Math.min( this.right, anotherRect.right ),\n\t\t\tbottom: Math.min( this.bottom, anotherRect.bottom ),\n\t\t\tleft: Math.max( this.left, anotherRect.left )\n\t\t};\n\n\t\trect.width = rect.right - rect.left;\n\t\trect.height = rect.bottom - rect.top;\n\n\t\tif ( rect.width < 0 || rect.height < 0 ) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn new Rect( rect );\n\t\t}\n\t}\n\n\t/**\n\t * Returns the area of intersection with another rect.\n\t *\n\t * @param {module:utils/dom/rect~Rect} anotherRect [description]\n\t * @returns {Number} Area of intersection.\n\t */\n\tgetIntersectionArea( anotherRect ) {\n\t\tconst rect = this.getIntersection( anotherRect );\n\n\t\tif ( rect ) {\n\t\t\treturn rect.getArea();\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the area of the rect.\n\t *\n\t * @returns {Number}\n\t */\n\tgetArea() {\n\t\treturn this.width * this.height;\n\t}\n\n\t/**\n\t * Returns a new rect, a part of the original rect, which is actually visible to the user,\n\t * e.g. an original rect cropped by parent element rects which have `overflow` set in CSS\n\t * other than `\"visible\"`.\n\t *\n\t * If there's no such visible rect, which is when the rect is limited by one or many of\n\t * the ancestors, `null` is returned.\n\t *\n\t * @returns {module:utils/dom/rect~Rect|null} A visible rect instance or `null`, if there's none.\n\t */\n\tgetVisible() {\n\t\tconst source = this._source;\n\t\tlet visibleRect = this.clone();\n\n\t\t// There's no ancestor to crop <body> with the overflow.\n\t\tif ( !isBody( source ) ) {\n\t\t\tlet parent = source.parentNode || source.commonAncestorContainer;\n\n\t\t\t// Check the ancestors all the way up to the <body>.\n\t\t\twhile ( parent && !isBody( parent ) ) {\n\t\t\t\tconst parentRect = new Rect( parent );\n\t\t\t\tconst intersectionRect = visibleRect.getIntersection( parentRect );\n\n\t\t\t\tif ( intersectionRect ) {\n\t\t\t\t\tif ( intersectionRect.getArea() < visibleRect.getArea() ) {\n\t\t\t\t\t\t// Reduce the visible rect to the intersection.\n\t\t\t\t\t\tvisibleRect = intersectionRect;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// There's no intersection, the rect is completely invisible.\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tparent = parent.parentNode;\n\t\t\t}\n\t\t}\n\n\t\treturn visibleRect;\n\t}\n\n\t/**\n\t * Checks if all property values ({@link #top}, {@link #left}, {@link #right},\n\t * {@link #bottom}, {@link #width} and {@link #height}) are the equal in both rect\n\t * instances.\n\t *\n\t * @param {module:utils/dom/rect~Rect} rect A rect instance to compare with.\n\t * @returns {Boolean} `true` when Rects are equal. `false` otherwise.\n\t */\n\tisEqual( anotherRect ) {\n\t\tfor ( const prop of rectProperties ) {\n\t\t\tif ( this[ prop ] !== anotherRect[ prop ] ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Checks whether a rect fully contains another rect instance.\n\t *\n\t * @param {module:utils/dom/rect~Rect} anotherRect\n\t * @returns {Boolean} `true` if contains, `false` otherwise.\n\t */\n\tcontains( anotherRect ) {\n\t\tconst intersectRect = this.getIntersection( anotherRect );\n\n\t\treturn !!( intersectRect && intersectRect.isEqual( anotherRect ) );\n\t}\n\n\t/**\n\t * Excludes scrollbars and CSS borders from the rect.\n\t *\n\t * * Borders are removed when {@link #_source} is an HTML element.\n\t * * Scrollbars are excluded from HTML elements and the `window`.\n\t *\n\t * @returns {module:utils/dom/rect~Rect} A rect which has been updated.\n\t */\n\texcludeScrollbarsAndBorders() {\n\t\tconst source = this._source;\n\t\tlet scrollBarWidth, scrollBarHeight, direction;\n\n\t\tif ( isWindow( source ) ) {\n\t\t\tscrollBarWidth = source.innerWidth - source.document.documentElement.clientWidth;\n\t\t\tscrollBarHeight = source.innerHeight - source.document.documentElement.clientHeight;\n\t\t\tdirection = source.getComputedStyle( source.document.documentElement ).direction;\n\t\t} else {\n\t\t\tconst borderWidths = getBorderWidths( this._source );\n\n\t\t\tscrollBarWidth = source.offsetWidth - source.clientWidth - borderWidths.left - borderWidths.right;\n\t\t\tscrollBarHeight = source.offsetHeight - source.clientHeight - borderWidths.top - borderWidths.bottom;\n\t\t\tdirection = source.ownerDocument.defaultView.getComputedStyle( source ).direction;\n\n\t\t\tthis.left += borderWidths.left;\n\t\t\tthis.top += borderWidths.top;\n\t\t\tthis.right -= borderWidths.right;\n\t\t\tthis.bottom -= borderWidths.bottom;\n\t\t\tthis.width = this.right - this.left;\n\t\t\tthis.height = this.bottom - this.top;\n\t\t}\n\n\t\tthis.width -= scrollBarWidth;\n\n\t\tif ( direction === 'ltr' ) {\n\t\t\tthis.right -= scrollBarWidth;\n\t\t} else {\n\t\t\tthis.left += scrollBarWidth;\n\t\t}\n\n\t\tthis.height -= scrollBarHeight;\n\t\tthis.bottom -= scrollBarHeight;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns an array of rects of the given native DOM Range.\n\t *\n\t * @param {Range} range A native DOM range.\n\t * @returns {Array.<module:utils/dom/rect~Rect>} DOM Range rects.\n\t */\n\tstatic getDomRangeRects( range ) {\n\t\tconst rects = [];\n\t\t// Safari does not iterate over ClientRectList using for...of loop.\n\t\tconst clientRects = Array.from( range.getClientRects() );\n\n\t\tif ( clientRects.length ) {\n\t\t\tfor ( const rect of clientRects ) {\n\t\t\t\trects.push( new Rect( rect ) );\n\t\t\t}\n\t\t}\n\t\t// If there's no client rects for the Range, use parent container's bounding rect\n\t\t// instead and adjust rect's width to simulate the actual geometry of such range.\n\t\t// https://github.com/ckeditor/ckeditor5-utils/issues/153\n\t\t// https://github.com/ckeditor/ckeditor5-ui/issues/317\n\t\telse {\n\t\t\tlet startContainer = range.startContainer;\n\n\t\t\tif ( isText( startContainer ) ) {\n\t\t\t\tstartContainer = startContainer.parentNode;\n\t\t\t}\n\n\t\t\tconst rect = new Rect( startContainer.getBoundingClientRect() );\n\t\t\trect.right = rect.left;\n\t\t\trect.width = 0;\n\n\t\t\trects.push( rect );\n\t\t}\n\n\t\treturn rects;\n\t}\n\n\t/**\n\t * Returns a bounding rectangle that contains all the given `rects`.\n\t *\n\t * @param {Iterable.<module:utils/dom/rect~Rect>} rects A list of rectangles that should be contained in the result rectangle.\n\t * @returns {module:utils/dom/rect~Rect|null} Bounding rectangle or `null` if no `rects` were given.\n\t */\n\tstatic getBoundingRect( rects ) {\n\t\tconst boundingRectData = {\n\t\t\tleft: Number.POSITIVE_INFINITY,\n\t\t\ttop: Number.POSITIVE_INFINITY,\n\t\t\tright: Number.NEGATIVE_INFINITY,\n\t\t\tbottom: Number.NEGATIVE_INFINITY\n\t\t};\n\t\tlet rectangleCount = 0;\n\n\t\tfor ( const rect of rects ) {\n\t\t\trectangleCount++;\n\n\t\t\tboundingRectData.left = Math.min( boundingRectData.left, rect.left );\n\t\t\tboundingRectData.top = Math.min( boundingRectData.top, rect.top );\n\t\t\tboundingRectData.right = Math.max( boundingRectData.right, rect.right );\n\t\t\tboundingRectData.bottom = Math.max( boundingRectData.bottom, rect.bottom );\n\t\t}\n\n\t\tif ( rectangleCount == 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tboundingRectData.width = boundingRectData.right - boundingRectData.left;\n\t\tboundingRectData.height = boundingRectData.bottom - boundingRectData.top;\n\n\t\treturn new Rect( boundingRectData );\n\t}\n}\n\n// Acquires all the rect properties from the passed source.\n//\n// @private\n// @param {module:utils/dom/rect~Rect} rect\n// @param {ClientRect|module:utils/dom/rect~Rect|Object} source\nfunction copyRectProperties( rect, source ) {\n\tfor ( const p of rectProperties ) {\n\t\trect[ p ] = source[ p ];\n\t}\n}\n\n// Checks if provided object is a <body> HTML element.\n//\n// @private\n// @param {HTMLElement|Range} elementOrRange\n// @returns {Boolean}\nfunction isBody( elementOrRange ) {\n\tif ( !isElement( elementOrRange ) ) {\n\t\treturn false;\n\t}\n\n\treturn elementOrRange === elementOrRange.ownerDocument.body;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/scroll\n */\n\nimport isRange from './isrange';\nimport Rect from './rect';\nimport isText from './istext';\n\nconst utils = {};\n\n/**\n * Makes any page `HTMLElement` or `Range` (`target`) visible inside the browser viewport.\n * This helper will scroll all `target` ancestors and the web browser viewport to reveal the target to\n * the user. If the `target` is already visible, nothing will happen.\n *\n * @param {HTMLElement|Range} options.target A target, which supposed to become visible to the user.\n * @param {Number} [options.viewportOffset] An offset from the edge of the viewport (in pixels)\n * the `target` will be moved by when the viewport is scrolled. It enhances the user experience\n * by keeping the `target` some distance from the edge of the viewport and thus making it easier to\n * read or edit by the user.\n */\nexport function scrollViewportToShowTarget( { target, viewportOffset = 0 } ) {\n\tconst targetWindow = getWindow( target );\n\tlet currentWindow = targetWindow;\n\tlet currentFrame = null;\n\n\t// Iterate over all windows, starting from target's parent window up to window#top.\n\twhile ( currentWindow ) {\n\t\tlet firstAncestorToScroll;\n\n\t\t// Let's scroll target's ancestors first to reveal it. Then, once the ancestor scrolls\n\t\t// settled down, the algorithm can eventually scroll the viewport of the current window.\n\t\t//\n\t\t// Note: If the current window is target's **original** window (e.g. the first one),\n\t\t// start scrolling the closest parent of the target. If not, scroll the closest parent\n\t\t// of an iframe that resides in the current window.\n\t\tif ( currentWindow == targetWindow ) {\n\t\t\tfirstAncestorToScroll = getParentElement( target );\n\t\t} else {\n\t\t\tfirstAncestorToScroll = getParentElement( currentFrame );\n\t\t}\n\n\t\t// Scroll the target's ancestors first. Once done, scrolling the viewport is easy.\n\t\tscrollAncestorsToShowRect( firstAncestorToScroll, () => {\n\t\t\t// Note: If the target does not belong to the current window **directly**,\n\t\t\t// i.e. it resides in an iframe belonging to the window, obtain the target's rect\n\t\t\t// in the coordinates of the current window. By default, a Rect returns geometry\n\t\t\t// relative to the current window's viewport. To make it work in a parent window,\n\t\t\t// it must be shifted.\n\t\t\treturn getRectRelativeToWindow( target, currentWindow );\n\t\t} );\n\n\t\t// Obtain the rect of the target after it has been scrolled within its ancestors.\n\t\t// It's time to scroll the viewport.\n\t\tconst targetRect = getRectRelativeToWindow( target, currentWindow );\n\n\t\tscrollWindowToShowRect( currentWindow, targetRect, viewportOffset );\n\n\t\tif ( currentWindow.parent != currentWindow ) {\n\t\t\t// Keep the reference to the <iframe> element the \"previous current window\" was\n\t\t\t// rendered within. It will be useful to recalculate the rect of the target\n\t\t\t// in the parent window's relative geometry. The target's rect must be shifted\n\t\t\t// by it's iframe's position.\n\t\t\tcurrentFrame = currentWindow.frameElement;\n\t\t\tcurrentWindow = currentWindow.parent;\n\n\t\t\t// If the current window has some parent but frameElement is inaccessible, then they have\n\t\t\t// different domains/ports and, due to security reasons, accessing and scrolling\n\t\t\t// the parent window won't be possible.\n\t\t\t// See https://github.com/ckeditor/ckeditor5/issues/930.\n\t\t\tif ( !currentFrame ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tcurrentWindow = null;\n\t\t}\n\t}\n}\n\n/**\n * Makes any page `HTMLElement` or `Range` (target) visible within its scrollable ancestors,\n * e.g. if they have `overflow: scroll` CSS style.\n *\n * @param {HTMLElement|Range} target A target, which supposed to become visible to the user.\n */\nexport function scrollAncestorsToShowTarget( target ) {\n\tconst targetParent = getParentElement( target );\n\n\tscrollAncestorsToShowRect( targetParent, () => {\n\t\treturn new Rect( target );\n\t} );\n}\n\n// TODO: Using a property value shorthand in the top of the file\n// causes JSDoc to throw errors. See https://github.com/cksource/docs-builder/issues/75.\nObject.assign( utils, {\n\tscrollViewportToShowTarget,\n\tscrollAncestorsToShowTarget\n} );\n\n// Makes a given rect visible within its parent window.\n//\n// Note: Avoid the situation where the caret is still in the viewport, but totally\n// at the edge of it. In such situation, if it moved beyond the viewport in the next\n// action e.g. after paste, the scrolling would move it to the viewportOffset level\n// and it all would look like the caret visually moved up/down:\n//\n// 1.\n//\t\t| foo[]\n//\t\t|                                    <--- N px of space below the caret\n//\t\t+---------------------------------...\n//\n// 2. *paste*\n// 3.\n//\t\t|\n//\t\t|\n//\t\t+-foo-----------------------------...\n//\t\t  bar[]                              <--- caret below viewport, scrolling...\n//\n// 4. *scrolling*\n// 5.\n//\t\t|\n//\t\t| foo\n//\t\t| bar[]                              <--- caret precisely at the edge\n//\t\t+---------------------------------...\n//\n// To prevent this, this method checks the rects moved by the viewportOffset to cover\n// the upper/lower edge of the viewport. It makes sure if the action repeats, there's\n// no twitching  it's a purely visual improvement:\n//\n// 5. (after fix)\n//\t\t|\n//\t\t| foo\n//\t\t| bar[]\n//\t\t|                                    <--- N px of space below the caret\n//\t\t+---------------------------------...\n//\n// @private\n// @param {Window} window A window which is scrolled to reveal the rect.\n// @param {module:utils/dom/rect~Rect} rect A rect which is to be revealed.\n// @param {Number} viewportOffset See scrollViewportToShowTarget.\nfunction scrollWindowToShowRect( window, rect, viewportOffset ) {\n\tconst targetShiftedDownRect = rect.clone().moveBy( 0, viewportOffset );\n\tconst targetShiftedUpRect = rect.clone().moveBy( 0, -viewportOffset );\n\tconst viewportRect = new Rect( window ).excludeScrollbarsAndBorders();\n\n\tconst rects = [ targetShiftedUpRect, targetShiftedDownRect ];\n\n\tif ( !rects.every( rect => viewportRect.contains( rect ) ) ) {\n\t\tlet { scrollX, scrollY } = window;\n\n\t\tif ( isAbove( targetShiftedUpRect, viewportRect ) ) {\n\t\t\tscrollY -= viewportRect.top - rect.top + viewportOffset;\n\t\t} else if ( isBelow( targetShiftedDownRect, viewportRect ) ) {\n\t\t\tscrollY += rect.bottom - viewportRect.bottom + viewportOffset;\n\t\t}\n\n\t\t// TODO: Web browsers scroll natively to place the target in the middle\n\t\t// of the viewport. It's not a very popular case, though.\n\t\tif ( isLeftOf( rect, viewportRect ) ) {\n\t\t\tscrollX -= viewportRect.left - rect.left + viewportOffset;\n\t\t} else if ( isRightOf( rect, viewportRect ) ) {\n\t\t\tscrollX += rect.right - viewportRect.right + viewportOffset;\n\t\t}\n\n\t\twindow.scrollTo( scrollX, scrollY );\n\t}\n}\n\n// Recursively scrolls element ancestors to visually reveal a rect.\n//\n// @private\n// @param {HTMLElement} A parent The first ancestors to start scrolling.\n// @param {Function} getRect A function which returns the Rect, which is to be revealed.\nfunction scrollAncestorsToShowRect( parent, getRect ) {\n\tconst parentWindow = getWindow( parent );\n\tlet parentRect, targetRect;\n\n\twhile ( parent != parentWindow.document.body ) {\n\t\ttargetRect = getRect();\n\t\tparentRect = new Rect( parent ).excludeScrollbarsAndBorders();\n\n\t\tif ( !parentRect.contains( targetRect ) ) {\n\t\t\tif ( isAbove( targetRect, parentRect ) ) {\n\t\t\t\tparent.scrollTop -= parentRect.top - targetRect.top;\n\t\t\t} else if ( isBelow( targetRect, parentRect ) ) {\n\t\t\t\tparent.scrollTop += targetRect.bottom - parentRect.bottom;\n\t\t\t}\n\n\t\t\tif ( isLeftOf( targetRect, parentRect ) ) {\n\t\t\t\tparent.scrollLeft -= parentRect.left - targetRect.left;\n\t\t\t} else if ( isRightOf( targetRect, parentRect ) ) {\n\t\t\t\tparent.scrollLeft += targetRect.right - parentRect.right;\n\t\t\t}\n\t\t}\n\n\t\tparent = parent.parentNode;\n\t}\n}\n\n// Determines if a given `Rect` extends beyond the bottom edge of the second `Rect`.\n//\n// @private\n// @param {module:utils/dom/rect~Rect} firstRect\n// @param {module:utils/dom/rect~Rect} secondRect\nfunction isBelow( firstRect, secondRect ) {\n\treturn firstRect.bottom > secondRect.bottom;\n}\n\n// Determines if a given `Rect` extends beyond the top edge of the second `Rect`.\n//\n// @private\n// @param {module:utils/dom/rect~Rect} firstRect\n// @param {module:utils/dom/rect~Rect} secondRect\nfunction isAbove( firstRect, secondRect ) {\n\treturn firstRect.top < secondRect.top;\n}\n\n// Determines if a given `Rect` extends beyond the left edge of the second `Rect`.\n//\n// @private\n// @param {module:utils/dom/rect~Rect} firstRect\n// @param {module:utils/dom/rect~Rect} secondRect\nfunction isLeftOf( firstRect, secondRect ) {\n\treturn firstRect.left < secondRect.left;\n}\n\n// Determines if a given `Rect` extends beyond the right edge of the second `Rect`.\n//\n// @private\n// @param {module:utils/dom/rect~Rect} firstRect\n// @param {module:utils/dom/rect~Rect} secondRect\nfunction isRightOf( firstRect, secondRect ) {\n\treturn firstRect.right > secondRect.right;\n}\n\n// Returns the closest window of an element or range.\n//\n// @private\n// @param {HTMLElement|Range} firstRect\n// @returns {Window}\nfunction getWindow( elementOrRange ) {\n\tif ( isRange( elementOrRange ) ) {\n\t\treturn elementOrRange.startContainer.ownerDocument.defaultView;\n\t} else {\n\t\treturn elementOrRange.ownerDocument.defaultView;\n\t}\n}\n\n// Returns the closest parent of an element or DOM range.\n//\n// @private\n// @param {HTMLElement|Range} firstRect\n// @returns {HTMLelement}\nfunction getParentElement( elementOrRange ) {\n\tif ( isRange( elementOrRange ) ) {\n\t\tlet parent = elementOrRange.commonAncestorContainer;\n\n\t\t// If a Range is attached to the Text, use the closest element ancestor.\n\t\tif ( isText( parent ) ) {\n\t\t\tparent = parent.parentNode;\n\t\t}\n\n\t\treturn parent;\n\t} else {\n\t\treturn elementOrRange.parentNode;\n\t}\n}\n\n// Returns the rect of an element or range residing in an iframe.\n// The result rect is relative to the geometry of the passed window instance.\n//\n// @private\n// @param {HTMLElement|Range} target Element or range which rect should be returned.\n// @param {Window} relativeWindow A window the rect should be relative to.\n// @returns {module:utils/dom/rect~Rect}\nfunction getRectRelativeToWindow( target, relativeWindow ) {\n\tconst targetWindow = getWindow( target );\n\tconst rect = new Rect( target );\n\n\tif ( targetWindow === relativeWindow ) {\n\t\treturn rect;\n\t} else {\n\t\tlet currentWindow = targetWindow;\n\n\t\twhile ( currentWindow != relativeWindow ) {\n\t\t\tconst frame = currentWindow.frameElement;\n\t\t\tconst frameRect = new Rect( frame ).excludeScrollbarsAndBorders();\n\n\t\t\trect.moveBy( frameRect.left, frameRect.top );\n\n\t\t\tcurrentWindow = currentWindow.parent;\n\t\t}\n\t}\n\n\treturn rect;\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/view\n */\n\nimport Document from './document';\nimport DowncastWriter from './downcastwriter';\nimport Renderer from './renderer';\nimport DomConverter from './domconverter';\nimport Position from './position';\nimport Range from './range';\nimport Selection from './selection';\n\nimport MutationObserver from './observer/mutationobserver';\nimport KeyObserver from './observer/keyobserver';\nimport FakeSelectionObserver from './observer/fakeselectionobserver';\nimport SelectionObserver from './observer/selectionobserver';\nimport FocusObserver from './observer/focusobserver';\nimport CompositionObserver from './observer/compositionobserver';\nimport InputObserver from './observer/inputobserver';\n\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport { scrollViewportToShowTarget } from '@ckeditor/ckeditor5-utils/src/dom/scroll';\nimport { injectUiElementHandling } from './uielement';\nimport { injectQuirksHandling } from './filler';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport env from '@ckeditor/ckeditor5-utils/src/env';\n\n/**\n * Editor's view controller class. Its main responsibility is DOM - View management for editing purposes, to provide\n * abstraction over the DOM structure and events and hide all browsers quirks.\n *\n * View controller renders view document to DOM whenever view structure changes. To determine when view can be rendered,\n * all changes need to be done using the {@link module:engine/view/view~View#change} method, using\n * {@link module:engine/view/downcastwriter~DowncastWriter}:\n *\n *\t\tview.change( writer => {\n *\t\t\twriter.insert( position, writer.createText( 'foo' ) );\n *\t\t} );\n *\n * View controller also register {@link module:engine/view/observer/observer~Observer observers} which observes changes\n * on DOM and fire events on the {@link module:engine/view/document~Document Document}.\n * Note that the following observers are added by the class constructor and are always available:\n *\n * * {@link module:engine/view/observer/mutationobserver~MutationObserver},\n * * {@link module:engine/view/observer/selectionobserver~SelectionObserver},\n * * {@link module:engine/view/observer/focusobserver~FocusObserver},\n * * {@link module:engine/view/observer/keyobserver~KeyObserver},\n * * {@link module:engine/view/observer/fakeselectionobserver~FakeSelectionObserver}.\n * * {@link module:engine/view/observer/compositionobserver~CompositionObserver}.\n *\n * This class also {@link module:engine/view/view~View#attachDomRoot binds the DOM and the view elements}.\n *\n * If you do not need full a DOM - view management, and only want to transform a tree of view elements to a tree of DOM\n * elements you do not need this controller. You can use the {@link module:engine/view/domconverter~DomConverter DomConverter} instead.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class View {\n\t/**\n\t * @param {module:engine/view/stylesmap~StylesProcessor} stylesProcessor The styles processor instance.\n\t */\n\tconstructor( stylesProcessor ) {\n\t\t/**\n\t\t * Instance of the {@link module:engine/view/document~Document} associated with this view controller.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/view/document~Document}\n\t\t */\n\t\tthis.document = new Document( stylesProcessor );\n\n\t\t/**\n\t\t * Instance of the {@link module:engine/view/domconverter~DomConverter domConverter} used by\n\t\t * {@link module:engine/view/view~View#_renderer renderer}\n\t\t * and {@link module:engine/view/observer/observer~Observer observers}.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/view/domconverter~DomConverter}\n\t\t */\n\t\tthis.domConverter = new DomConverter( this.document );\n\n\t\t/**\n\t\t * Roots of the DOM tree. Map on the `HTMLElement`s with roots names as keys.\n\t\t *\n\t\t * @readonly\n\t\t * @type {Map.<String, HTMLElement>}\n\t\t */\n\t\tthis.domRoots = new Map();\n\n\t\t/**\n\t\t * Used to prevent calling {@link #forceRender} and {@link #change} during rendering view to the DOM.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} #isRenderingInProgress\n\t\t */\n\t\tthis.set( 'isRenderingInProgress', false );\n\n\t\t/**\n\t\t * Informs whether the DOM selection is inside any of the DOM roots managed by the view.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} #hasDomSelection\n\t\t */\n\t\tthis.set( 'hasDomSelection', false );\n\n\t\t/**\n\t\t * Instance of the {@link module:engine/view/renderer~Renderer renderer}.\n\t\t *\n\t\t * @protected\n\t\t * @type {module:engine/view/renderer~Renderer}\n\t\t */\n\t\tthis._renderer = new Renderer( this.domConverter, this.document.selection );\n\t\tthis._renderer.bind( 'isFocused' ).to( this.document );\n\n\t\t/**\n\t\t * A DOM root attributes cache. It saves the initial values of DOM root attributes before the DOM element\n\t\t * is {@link module:engine/view/view~View#attachDomRoot attached} to the view so later on, when\n\t\t * the view is destroyed ({@link module:engine/view/view~View#detachDomRoot}), they can be easily restored.\n\t\t * This way, the DOM element can go back to the (clean) state as if the editing view never used it.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap.<HTMLElement,Object>}\n\t\t */\n\t\tthis._initialDomRootAttributes = new WeakMap();\n\n\t\t/**\n\t\t * Map of registered {@link module:engine/view/observer/observer~Observer observers}.\n\t\t *\n\t\t * @private\n\t\t * @type {Map.<Function, module:engine/view/observer/observer~Observer>}\n\t\t */\n\t\tthis._observers = new Map();\n\n\t\t/**\n\t\t * Is set to `true` when {@link #change view changes} are currently in progress.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._ongoingChange = false;\n\n\t\t/**\n\t\t * Used to prevent calling {@link #forceRender} and {@link #change} during rendering view to the DOM.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._postFixersInProgress = false;\n\n\t\t/**\n\t\t * Internal flag to temporary disable rendering. See the usage in the {@link #_disableRendering}.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._renderingDisabled = false;\n\n\t\t/**\n\t\t * Internal flag that disables rendering when there are no changes since the last rendering.\n\t\t * It stores information about changed selection and changed elements from attached document roots.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._hasChangedSinceTheLastRendering = false;\n\n\t\t/**\n\t\t * DowncastWriter instance used in {@link #change change method} callbacks.\n\t\t *\n\t\t * @private\n\t\t * @type {module:engine/view/downcastwriter~DowncastWriter}\n\t\t */\n\t\tthis._writer = new DowncastWriter( this.document );\n\n\t\t// Add default observers.\n\t\tthis.addObserver( MutationObserver );\n\t\tthis.addObserver( SelectionObserver );\n\t\tthis.addObserver( FocusObserver );\n\t\tthis.addObserver( KeyObserver );\n\t\tthis.addObserver( FakeSelectionObserver );\n\t\tthis.addObserver( CompositionObserver );\n\n\t\tif ( env.isAndroid ) {\n\t\t\tthis.addObserver( InputObserver );\n\t\t}\n\n\t\t// Inject quirks handlers.\n\t\tinjectQuirksHandling( this );\n\t\tinjectUiElementHandling( this );\n\n\t\t// Use 'normal' priority so that rendering is performed as first when using that priority.\n\t\tthis.on( 'render', () => {\n\t\t\tthis._render();\n\n\t\t\t// Informs that layout has changed after render.\n\t\t\tthis.document.fire( 'layoutChanged' );\n\n\t\t\t// Reset the `_hasChangedSinceTheLastRendering` flag after rendering.\n\t\t\tthis._hasChangedSinceTheLastRendering = false;\n\t\t} );\n\n\t\t// Listen to the document selection changes directly.\n\t\tthis.listenTo( this.document.selection, 'change', () => {\n\t\t\tthis._hasChangedSinceTheLastRendering = true;\n\t\t} );\n\t}\n\n\t/**\n\t * Attaches a DOM root element to the view element and enable all observers on that element.\n\t * Also {@link module:engine/view/renderer~Renderer#markToSync mark element} to be synchronized\n\t * with the view what means that all child nodes will be removed and replaced with content of the view root.\n\t *\n\t * This method also will change view element name as the same as tag name of given dom root.\n\t * Name is always transformed to lower case.\n\t *\n\t * **Note:** Use {@link #detachDomRoot `detachDomRoot()`} to revert this action.\n\t *\n\t * @param {Element} domRoot DOM root element.\n\t * @param {String} [name='main'] Name of the root.\n\t */\n\tattachDomRoot( domRoot, name = 'main' ) {\n\t\tconst viewRoot = this.document.getRoot( name );\n\n\t\t// Set view root name the same as DOM root tag name.\n\t\tviewRoot._name = domRoot.tagName.toLowerCase();\n\n\t\tconst initialDomRootAttributes = {};\n\n\t\t// 1. Copy and cache the attributes to remember the state of the element before attaching.\n\t\t//    The cached attributes will be restored in detachDomRoot() so the element goes to the\n\t\t//    clean state as if the editing view never used it.\n\t\t// 2. Apply the attributes using the view writer, so they all go under the control of the engine.\n\t\t//    The editing view takes over the attribute management completely because various\n\t\t//    features (e.g. addPlaceholder()) require dynamic changes of those attributes and they\n\t\t//    cannot be managed by the engine and the UI library at the same time.\n\t\tfor ( const { name, value } of Array.from( domRoot.attributes ) ) {\n\t\t\tinitialDomRootAttributes[ name ] = value;\n\n\t\t\t// Do not use writer.setAttribute() for the class attribute. The EditableUIView class\n\t\t\t// and its descendants could have already set some using the writer.addClass() on the view\n\t\t\t// document root. They haven't been rendered yet so they are not present in the DOM root.\n\t\t\t// Using writer.setAttribute( 'class', ... ) would override them completely.\n\t\t\tif ( name === 'class' ) {\n\t\t\t\tthis._writer.addClass( value.split( ' ' ), viewRoot );\n\t\t\t} else {\n\t\t\t\tthis._writer.setAttribute( name, value, viewRoot );\n\t\t\t}\n\t\t}\n\n\t\tthis._initialDomRootAttributes.set( domRoot, initialDomRootAttributes );\n\n\t\tconst updateContenteditableAttribute = () => {\n\t\t\tthis._writer.setAttribute( 'contenteditable', !viewRoot.isReadOnly, viewRoot );\n\n\t\t\tif ( viewRoot.isReadOnly ) {\n\t\t\t\tthis._writer.addClass( 'ck-read-only', viewRoot );\n\t\t\t} else {\n\t\t\t\tthis._writer.removeClass( 'ck-read-only', viewRoot );\n\t\t\t}\n\t\t};\n\n\t\t// Set initial value.\n\t\tupdateContenteditableAttribute();\n\n\t\tthis.domRoots.set( name, domRoot );\n\t\tthis.domConverter.bindElements( domRoot, viewRoot );\n\t\tthis._renderer.markToSync( 'children', viewRoot );\n\t\tthis._renderer.markToSync( 'attributes', viewRoot );\n\t\tthis._renderer.domDocuments.add( domRoot.ownerDocument );\n\n\t\tviewRoot.on( 'change:children', ( evt, node ) => this._renderer.markToSync( 'children', node ) );\n\t\tviewRoot.on( 'change:attributes', ( evt, node ) => this._renderer.markToSync( 'attributes', node ) );\n\t\tviewRoot.on( 'change:text', ( evt, node ) => this._renderer.markToSync( 'text', node ) );\n\t\tviewRoot.on( 'change:isReadOnly', () => this.change( updateContenteditableAttribute ) );\n\n\t\tviewRoot.on( 'change', () => {\n\t\t\tthis._hasChangedSinceTheLastRendering = true;\n\t\t} );\n\n\t\tfor ( const observer of this._observers.values() ) {\n\t\t\tobserver.observe( domRoot, name );\n\t\t}\n\t}\n\n\t/**\n\t * Detaches a DOM root element from the view element and restores its attributes to the state before\n\t * {@link #attachDomRoot `attachDomRoot()`}.\n\t *\n\t * @param {String} name Name of the root to detach.\n\t */\n\tdetachDomRoot( name ) {\n\t\tconst domRoot = this.domRoots.get( name );\n\n\t\t// Remove all root attributes so the DOM element is \"bare\".\n\t\tArray.from( domRoot.attributes ).forEach( ( { name } ) => domRoot.removeAttribute( name ) );\n\n\t\tconst initialDomRootAttributes = this._initialDomRootAttributes.get( domRoot );\n\n\t\t// Revert all view root attributes back to the state before attachDomRoot was called.\n\t\tfor ( const attribute in initialDomRootAttributes ) {\n\t\t\tdomRoot.setAttribute( attribute, initialDomRootAttributes[ attribute ] );\n\t\t}\n\n\t\tthis.domRoots.delete( name );\n\t\tthis.domConverter.unbindDomElement( domRoot );\n\t}\n\n\t/**\n\t * Gets DOM root element.\n\t *\n\t * @param {String} [name='main']  Name of the root.\n\t * @returns {Element} DOM root element instance.\n\t */\n\tgetDomRoot( name = 'main' ) {\n\t\treturn this.domRoots.get( name );\n\t}\n\n\t/**\n\t * Creates observer of the given type if not yet created, {@link module:engine/view/observer/observer~Observer#enable enables} it\n\t * and {@link module:engine/view/observer/observer~Observer#observe attaches} to all existing and future\n\t * {@link #domRoots DOM roots}.\n\t *\n\t * Note: Observers are recognized by their constructor (classes). A single observer will be instantiated and used only\n\t * when registered for the first time. This means that features and other components can register a single observer\n\t * multiple times without caring whether it has been already added or not.\n\t *\n\t * @param {Function} Observer The constructor of an observer to add.\n\t * Should create an instance inheriting from {@link module:engine/view/observer/observer~Observer}.\n\t * @returns {module:engine/view/observer/observer~Observer} Added observer instance.\n\t */\n\taddObserver( Observer ) {\n\t\tlet observer = this._observers.get( Observer );\n\n\t\tif ( observer ) {\n\t\t\treturn observer;\n\t\t}\n\n\t\tobserver = new Observer( this );\n\n\t\tthis._observers.set( Observer, observer );\n\n\t\tfor ( const [ name, domElement ] of this.domRoots ) {\n\t\t\tobserver.observe( domElement, name );\n\t\t}\n\n\t\tobserver.enable();\n\n\t\treturn observer;\n\t}\n\n\t/**\n\t * Returns observer of the given type or `undefined` if such observer has not been added yet.\n\t *\n\t * @param {Function} Observer The constructor of an observer to get.\n\t * @returns {module:engine/view/observer/observer~Observer|undefined} Observer instance or undefined.\n\t */\n\tgetObserver( Observer ) {\n\t\treturn this._observers.get( Observer );\n\t}\n\n\t/**\n\t * Disables all added observers.\n\t */\n\tdisableObservers() {\n\t\tfor ( const observer of this._observers.values() ) {\n\t\t\tobserver.disable();\n\t\t}\n\t}\n\n\t/**\n\t * Enables all added observers.\n\t */\n\tenableObservers() {\n\t\tfor ( const observer of this._observers.values() ) {\n\t\t\tobserver.enable();\n\t\t}\n\t}\n\n\t/**\n\t * Scrolls the page viewport and {@link #domRoots} with their ancestors to reveal the\n\t * caret, if not already visible to the user.\n\t */\n\tscrollToTheSelection() {\n\t\tconst range = this.document.selection.getFirstRange();\n\n\t\tif ( range ) {\n\t\t\tscrollViewportToShowTarget( {\n\t\t\t\ttarget: this.domConverter.viewRangeToDom( range ),\n\t\t\t\tviewportOffset: 20\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * It will focus DOM element representing {@link module:engine/view/editableelement~EditableElement EditableElement}\n\t * that is currently having selection inside.\n\t */\n\tfocus() {\n\t\tif ( !this.document.isFocused ) {\n\t\t\tconst editable = this.document.selection.editableElement;\n\n\t\t\tif ( editable ) {\n\t\t\t\tthis.domConverter.focus( editable );\n\t\t\t\tthis.forceRender();\n\t\t\t} else {\n\t\t\t\t// Before focusing view document, selection should be placed inside one of the view's editables.\n\t\t\t\t// Normally its selection will be converted from model document (which have default selection), but\n\t\t\t\t// when using view document on its own, we need to manually place selection before focusing it.\n\t\t\t\t//\n\t\t\t\t// @if CK_DEBUG // console.warn( 'There is no selection in any editable to focus.' );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * The `change()` method is the primary way of changing the view. You should use it to modify any node in the view tree.\n\t * It makes sure that after all changes are made the view is rendered to the DOM (assuming that the view will be changed\n\t * inside the callback). It prevents situations when the DOM is updated when the view state is not yet correct. It allows\n\t * to nest calls one inside another and still performs a single rendering after all those changes are made.\n\t * It also returns the return value of its callback.\n\t *\n\t *\t\tconst text = view.change( writer => {\n\t *\t\t\tconst newText = writer.createText( 'foo' );\n\t *\t\t\twriter.insert( position1, newText );\n\t *\n\t *\t\t\tview.change( writer => {\n\t *\t\t\t\twriter.insert( position2, writer.createText( 'bar' ) );\n\t *\t\t\t} );\n\t *\n\t * \t\t\twriter.remove( range );\n\t *\n\t * \t\t\treturn newText;\n\t *\t\t} );\n\t *\n\t * When the outermost change block is done and rendering to the DOM is over the\n\t * {@link module:engine/view/view~View#event:render `View#render`} event is fired.\n\t *\n\t * This method throws a `applying-view-changes-on-rendering` error when\n\t * the change block is used after rendering to the DOM has started.\n\t *\n\t * @param {Function} callback Callback function which may modify the view.\n\t * @returns {*} Value returned by the callback.\n\t */\n\tchange( callback ) {\n\t\tif ( this.isRenderingInProgress || this._postFixersInProgress ) {\n\t\t\t/**\n\t\t\t * Thrown when there is an attempt to make changes to the view tree when it is in incorrect state. This may\n\t\t\t * cause some unexpected behaviour and inconsistency between the DOM and the view.\n\t\t\t * This may be caused by:\n\t\t\t *\n\t\t\t * * calling {@link #change} or {@link #forceRender} during rendering process,\n\t\t\t * * calling {@link #change} or {@link #forceRender} inside of\n\t\t\t *   {@link module:engine/view/document~Document#registerPostFixer post-fixer function}.\n\t\t\t *\n\t\t\t * @error cannot-change-view-tree\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'cannot-change-view-tree',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\ttry {\n\t\t\t// Recursive call to view.change() method - execute listener immediately.\n\t\t\tif ( this._ongoingChange ) {\n\t\t\t\treturn callback( this._writer );\n\t\t\t}\n\n\t\t\t// This lock will assure that all recursive calls to view.change() will end up in same block - one \"render\"\n\t\t\t// event for all nested calls.\n\t\t\tthis._ongoingChange = true;\n\t\t\tconst callbackResult = callback( this._writer );\n\t\t\tthis._ongoingChange = false;\n\n\t\t\t// This lock is used by editing controller to render changes from outer most model.change() once. As plugins might call\n\t\t\t// view.change() inside model.change() block - this will ensures that postfixers and rendering are called once after all\n\t\t\t// changes. Also, we don't need to render anything if there're no changes since last rendering.\n\t\t\tif ( !this._renderingDisabled && this._hasChangedSinceTheLastRendering ) {\n\t\t\t\tthis._postFixersInProgress = true;\n\t\t\t\tthis.document._callPostFixers( this._writer );\n\t\t\t\tthis._postFixersInProgress = false;\n\n\t\t\t\tthis.fire( 'render' );\n\t\t\t}\n\n\t\t\treturn callbackResult;\n\t\t} catch ( err ) {\n\t\t\t// @if CK_DEBUG // throw err;\n\t\t\t/* istanbul ignore next */\n\t\t\tCKEditorError.rethrowUnexpectedError( err, this );\n\t\t}\n\t}\n\n\t/**\n\t * Forces rendering {@link module:engine/view/document~Document view document} to DOM. If any view changes are\n\t * currently in progress, rendering will start after all {@link #change change blocks} are processed.\n\t *\n\t * Note that this method is dedicated for special cases. All view changes should be wrapped in the {@link #change}\n\t * block and the view will automatically check whether it needs to render DOM or not.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `applying-view-changes-on-rendering` when\n\t * trying to re-render when rendering to DOM has already started.\n\t */\n\tforceRender() {\n\t\tthis._hasChangedSinceTheLastRendering = true;\n\t\tthis.change( () => {} );\n\t}\n\n\t/**\n\t * Destroys this instance. Makes sure that all observers are destroyed and listeners removed.\n\t */\n\tdestroy() {\n\t\tfor ( const observer of this._observers.values() ) {\n\t\t\tobserver.destroy();\n\t\t}\n\n\t\tthis.document.destroy();\n\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/view/position~Position position},\n\t * * parent element and offset (offset defaults to `0`),\n\t * * parent element and `'end'` (sets position at the end of that element),\n\t * * {@link module:engine/view/item~Item view item} and `'before'` or `'after'` (sets position before or after given view item).\n\t *\n\t * This method is a shortcut to other constructors such as:\n\t *\n\t * * {@link #createPositionBefore},\n\t * * {@link #createPositionAfter},\n\t *\n\t * @param {module:engine/view/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tcreatePositionAt( itemOrPosition, offset ) {\n\t\treturn Position._createAt( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Creates a new position after given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item after which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionAfter( item ) {\n\t\treturn Position._createAfter( item );\n\t}\n\n\t/**\n\t * Creates a new position before given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item before which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionBefore( item ) {\n\t\treturn Position._createBefore( item );\n\t}\n\n\t/**\n\t * Creates a range spanning from `start` position to `end` position.\n\t *\n\t * **Note:** This factory method creates it's own {@link module:engine/view/position~Position} instances basing on passed values.\n\t *\n\t * @param {module:engine/view/position~Position} start Start position.\n\t * @param {module:engine/view/position~Position} [end] End position. If not set, range will be collapsed at `start` position.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRange( start, end ) {\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Creates a range that starts before given {@link module:engine/view/item~Item view item} and ends after it.\n\t *\n\t * @param {module:engine/view/item~Item} item\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeOn( item ) {\n\t\treturn Range._createOn( item );\n\t}\n\n\t/**\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * @param {module:engine/view/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeIn( element ) {\n\t\treturn Range._createIn( element );\n\t}\n\n\t/**\n\t Creates new {@link module:engine/view/selection~Selection} instance.\n\t *\n\t * \t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = view.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = view.createRange( start, end );\n\t *\t\tconst selection = view.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t * \t\tconst ranges = [ view.createRange( start1, end2 ), view.createRange( star2, end2 ) ];\n\t *\t\tconst selection = view.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\tconst otherSelection = view.createSelection();\n\t *\t\tconst selection = view.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the document selection.\n\t *\t\tconst selection = view.createSelection( editor.editing.view.document.selection );\n\t *\n\t * \t\t// Creates selection at the given position.\n\t *\t\tconst position = view.createPositionFromPath( root, path );\n\t *\t\tconst selection = view.createSelection( position );\n\t *\n\t *\t\t// Creates collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = view.createContainerElement( 'paragraph' );\n\t *\t\tconst selection = view.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/view/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = view.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = view.createSelection( paragraph, 'on' );\n\t *\n\t * `Selection`'s factory method allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = view.createSelection( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tconst selection = view.createSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} [selectable=null]\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Offset or place when selectable is an `Item`.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t * @returns {module:engine/view/selection~Selection}\n\t */\n\tcreateSelection( selectable, placeOrOffset, options ) {\n\t\treturn new Selection( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Disables or enables rendering. If the flag is set to `true` then the rendering will be disabled.\n\t * If the flag is set to `false` and if there was some change in the meantime, then the rendering action will be performed.\n\t *\n\t * @protected\n\t * @param {Boolean} flag A flag indicates whether the rendering should be disabled.\n\t */\n\t_disableRendering( flag ) {\n\t\tthis._renderingDisabled = flag;\n\n\t\tif ( flag == false ) {\n\t\t\t// Render when you stop blocking rendering.\n\t\t\tthis.change( () => {} );\n\t\t}\n\t}\n\n\t/**\n\t * Renders all changes. In order to avoid triggering the observers (e.g. mutations) all observers are disabled\n\t * before rendering and re-enabled after that.\n\t *\n\t * @private\n\t */\n\t_render() {\n\t\tthis.isRenderingInProgress = true;\n\t\tthis.disableObservers();\n\t\tthis._renderer.render();\n\t\tthis.enableObservers();\n\t\tthis.isRenderingInProgress = false;\n\t}\n\n\t/**\n\t * Fired after a topmost {@link module:engine/view/view~View#change change block} and all\n\t * {@link module:engine/view/document~Document#registerPostFixer post-fixers} are executed.\n\t *\n\t * Actual rendering is performed as a first listener on 'normal' priority.\n\t *\n\t *\t\tview.on( 'render', () => {\n\t *\t\t\t// Rendering to the DOM is complete.\n\t *\t\t} );\n\t *\n\t * This event is useful when you want to update interface elements after the rendering, e.g. position of the\n\t * balloon panel. If you wants to change view structure use\n\t * {@link module:engine/view/document~Document#registerPostFixer post-fixers}.\n\t *\n\t * @event module:engine/view/view~View#event:render\n\t */\n}\n\nmix( View, ObservableMixin );\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/node\n */\n\nimport toMap from '@ckeditor/ckeditor5-utils/src/tomap';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\n// To check if component is loaded more than once.\nimport '@ckeditor/ckeditor5-utils/src/version';\n\n/**\n * Model node. Most basic structure of model tree.\n *\n * This is an abstract class that is a base for other classes representing different nodes in model.\n *\n * **Note:** If a node is detached from the model tree, you can manipulate it using it's API.\n * However, it is **very important** that nodes already attached to model tree should be only changed through\n * {@link module:engine/model/writer~Writer Writer API}.\n *\n * Changes done by `Node` methods, like {@link module:engine/model/element~Element#_insertChild _insertChild} or\n * {@link module:engine/model/node~Node#_setAttribute _setAttribute}\n * do not generate {@link module:engine/model/operation/operation~Operation operations}\n * which are essential for correct editor work if you modify nodes in {@link module:engine/model/document~Document document} root.\n *\n * The flow of working on `Node` (and classes that inherits from it) is as such:\n * 1. You can create a `Node` instance, modify it using it's API.\n * 2. Add `Node` to the model using `Batch` API.\n * 3. Change `Node` that was already added to the model using `Batch` API.\n *\n * Similarly, you cannot use `Batch` API on a node that has not been added to the model tree, with the exception\n * of {@link module:engine/model/writer~Writer#insert inserting} that node to the model tree.\n *\n * Be aware that using {@link module:engine/model/writer~Writer#remove remove from Batch API} does not allow to use `Node` API because\n * the information about `Node` is still kept in model document.\n *\n * In case of {@link module:engine/model/element~Element element node}, adding and removing children also counts as changing a node and\n * follows same rules.\n */\nexport default class Node {\n\t/**\n\t * Creates a model node.\n\t *\n\t * This is an abstract class, so this constructor should not be used directly.\n\t *\n\t * @abstract\n\t * @param {Object} [attrs] Node's attributes. See {@link module:utils/tomap~toMap} for a list of accepted values.\n\t */\n\tconstructor( attrs ) {\n\t\t/**\n\t\t * Parent of this node. It could be {@link module:engine/model/element~Element}\n\t\t * or {@link module:engine/model/documentfragment~DocumentFragment}.\n\t\t * Equals to `null` if the node has no parent.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}\n\t\t */\n\t\tthis.parent = null;\n\n\t\t/**\n\t\t * Attributes set on this node.\n\t\t *\n\t\t * @private\n\t\t * @member {Map} module:engine/model/node~Node#_attrs\n\t\t */\n\t\tthis._attrs = toMap( attrs );\n\t}\n\n\t/**\n\t * Index of this node in it's parent or `null` if the node has no parent.\n\t *\n\t * Accessing this property throws an error if this node's parent element does not contain it.\n\t * This means that model tree got broken.\n\t *\n\t * @readonly\n\t * @type {Number|null}\n\t */\n\tget index() {\n\t\tlet pos;\n\n\t\tif ( !this.parent ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( ( pos = this.parent.getChildIndex( this ) ) === null ) {\n\t\t\tthrow new CKEditorError( 'model-node-not-found-in-parent', this );\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\t/**\n\t * Offset at which this node starts in it's parent. It is equal to the sum of {@link #offsetSize offsetSize}\n\t * of all it's previous siblings. Equals to `null` if node has no parent.\n\t *\n\t * Accessing this property throws an error if this node's parent element does not contain it.\n\t * This means that model tree got broken.\n\t *\n\t * @readonly\n\t * @type {Number|null}\n\t */\n\tget startOffset() {\n\t\tlet pos;\n\n\t\tif ( !this.parent ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( ( pos = this.parent.getChildStartOffset( this ) ) === null ) {\n\t\t\tthrow new CKEditorError( 'model-node-not-found-in-parent', this );\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\t/**\n\t * Offset size of this node. Represents how much \"offset space\" is occupied by the node in it's parent.\n\t * It is important for {@link module:engine/model/position~Position position}. When node has `offsetSize` greater than `1`, position\n\t * can be placed between that node start and end. `offsetSize` greater than `1` is for nodes that represents more\n\t * than one entity, i.e. {@link module:engine/model/text~Text text node}.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget offsetSize() {\n\t\treturn 1;\n\t}\n\n\t/**\n\t * Offset at which this node ends in it's parent. It is equal to the sum of this node's\n\t * {@link module:engine/model/node~Node#startOffset start offset} and {@link #offsetSize offset size}.\n\t * Equals to `null` if the node has no parent.\n\t *\n\t * @readonly\n\t * @type {Number|null}\n\t */\n\tget endOffset() {\n\t\tif ( !this.parent ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.startOffset + this.offsetSize;\n\t}\n\n\t/**\n\t * Node's next sibling or `null` if the node is a last child of it's parent or if the node has no parent.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|null}\n\t */\n\tget nextSibling() {\n\t\tconst index = this.index;\n\n\t\treturn ( index !== null && this.parent.getChild( index + 1 ) ) || null;\n\t}\n\n\t/**\n\t * Node's previous sibling or `null` if the node is a first child of it's parent or if the node has no parent.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|null}\n\t */\n\tget previousSibling() {\n\t\tconst index = this.index;\n\n\t\treturn ( index !== null && this.parent.getChild( index - 1 ) ) || null;\n\t}\n\n\t/**\n\t * The top-most ancestor of the node. If node has no parent it is the root itself. If the node is a part\n\t * of {@link module:engine/model/documentfragment~DocumentFragment}, it's `root` is equal to that `DocumentFragment`.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\tlet root = this; // eslint-disable-line consistent-this\n\n\t\twhile ( root.parent ) {\n\t\t\troot = root.parent;\n\t\t}\n\n\t\treturn root;\n\t}\n\n\t/**\n\t * Returns true if the node is in a tree rooted in the document (is a descendant of one of its roots).\n\t *\n\t * @returns {Boolean}\n\t */\n\tisAttached() {\n\t\treturn this.root.is( 'rootElement' );\n\t}\n\n\t/**\n\t * Gets path to the node. The path is an array containing starting offsets of consecutive ancestors of this node,\n\t * beginning from {@link module:engine/model/node~Node#root root}, down to this node's starting offset. The path can be used to\n\t * create {@link module:engine/model/position~Position Position} instance.\n\t *\n\t *\t\tconst abc = new Text( 'abc' );\n\t *\t\tconst foo = new Text( 'foo' );\n\t *\t\tconst h1 = new Element( 'h1', null, new Text( 'header' ) );\n\t *\t\tconst p = new Element( 'p', null, [ abc, foo ] );\n\t *\t\tconst div = new Element( 'div', null, [ h1, p ] );\n\t *\t\tfoo.getPath(); // Returns [ 1, 3 ]. `foo` is in `p` which is in `div`. `p` starts at offset 1, while `foo` at 3.\n\t *\t\th1.getPath(); // Returns [ 0 ].\n\t *\t\tdiv.getPath(); // Returns [].\n\t *\n\t * @returns {Array.<Number>} The path.\n\t */\n\tgetPath() {\n\t\tconst path = [];\n\t\tlet node = this; // eslint-disable-line consistent-this\n\n\t\twhile ( node.parent ) {\n\t\t\tpath.unshift( node.startOffset );\n\t\t\tnode = node.parent;\n\t\t}\n\n\t\treturn path;\n\t}\n\n\t/**\n\t * Returns ancestors array of this node.\n\t *\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` this node will be also included in parent's array.\n\t * @param {Boolean} [options.parentFirst=false] When set to `true`, array will be sorted from node's parent to root element,\n\t * otherwise root element will be the first item in the array.\n\t * @returns {Array} Array with ancestors.\n\t */\n\tgetAncestors( options = { includeSelf: false, parentFirst: false } ) {\n\t\tconst ancestors = [];\n\t\tlet parent = options.includeSelf ? this : this.parent;\n\n\t\twhile ( parent ) {\n\t\t\tancestors[ options.parentFirst ? 'push' : 'unshift' ]( parent );\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn ancestors;\n\t}\n\n\t/**\n\t * Returns a {@link module:engine/model/element~Element} or {@link module:engine/model/documentfragment~DocumentFragment}\n\t * which is a common ancestor of both nodes.\n\t *\n\t * @param {module:engine/model/node~Node} node The second node.\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` both nodes will be considered \"ancestors\" too.\n\t * Which means that if e.g. node A is inside B, then their common ancestor will be B.\n\t * @returns {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor( node, options = {} ) {\n\t\tconst ancestorsA = this.getAncestors( options );\n\t\tconst ancestorsB = node.getAncestors( options );\n\n\t\tlet i = 0;\n\n\t\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n\t}\n\n\t/**\n\t * Returns whether this node is before given node. `false` is returned if nodes are in different trees (for example,\n\t * in different {@link module:engine/model/documentfragment~DocumentFragment}s).\n\t *\n\t * @param {module:engine/model/node~Node} node Node to compare with.\n\t * @returns {Boolean}\n\t */\n\tisBefore( node ) {\n\t\t// Given node is not before this node if they are same.\n\t\tif ( this == node ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Return `false` if it is impossible to compare nodes.\n\t\tif ( this.root !== node.root ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst thisPath = this.getPath();\n\t\tconst nodePath = node.getPath();\n\n\t\tconst result = compareArrays( thisPath, nodePath );\n\n\t\tswitch ( result ) {\n\t\t\tcase 'prefix':\n\t\t\t\treturn true;\n\n\t\t\tcase 'extension':\n\t\t\t\treturn false;\n\n\t\t\tdefault:\n\t\t\t\treturn thisPath[ result ] < nodePath[ result ];\n\t\t}\n\t}\n\n\t/**\n\t * Returns whether this node is after given node. `false` is returned if nodes are in different trees (for example,\n\t * in different {@link module:engine/model/documentfragment~DocumentFragment}s).\n\t *\n\t * @param {module:engine/model/node~Node} node Node to compare with.\n\t * @returns {Boolean}\n\t */\n\tisAfter( node ) {\n\t\t// Given node is not before this node if they are same.\n\t\tif ( this == node ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Return `false` if it is impossible to compare nodes.\n\t\tif ( this.root !== node.root ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// In other cases, just check if the `node` is before, and return the opposite.\n\t\treturn !this.isBefore( node );\n\t}\n\n\t/**\n\t * Checks if the node has an attribute with given key.\n\t *\n\t * @param {String} key Key of attribute to check.\n\t * @returns {Boolean} `true` if attribute with given key is set on node, `false` otherwise.\n\t */\n\thasAttribute( key ) {\n\t\treturn this._attrs.has( key );\n\t}\n\n\t/**\n\t * Gets an attribute value for given key or `undefined` if that attribute is not set on node.\n\t *\n\t * @param {String} key Key of attribute to look for.\n\t * @returns {*} Attribute value or `undefined`.\n\t */\n\tgetAttribute( key ) {\n\t\treturn this._attrs.get( key );\n\t}\n\n\t/**\n\t * Returns iterator that iterates over this node's attributes.\n\t *\n\t * Attributes are returned as arrays containing two items. First one is attribute key and second is attribute value.\n\t * This format is accepted by native `Map` object and also can be passed in `Node` constructor.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\tgetAttributes() {\n\t\treturn this._attrs.entries();\n\t}\n\n\t/**\n\t * Returns iterator that iterates over this node's attribute keys.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetAttributeKeys() {\n\t\treturn this._attrs.keys();\n\t}\n\n\t/**\n\t * Converts `Node` to plain object and returns it.\n\t *\n\t * @returns {Object} `Node` converted to plain object.\n\t */\n\ttoJSON() {\n\t\tconst json = {};\n\n\t\t// Serializes attributes to the object.\n\t\t// attributes = { a: 'foo', b: 1, c: true }.\n\t\tif ( this._attrs.size ) {\n\t\t\tjson.attributes = Array.from( this._attrs ).reduce( ( result, attr ) => {\n\t\t\t\tresult[ attr[ 0 ] ] = attr[ 1 ];\n\n\t\t\t\treturn result;\n\t\t\t}, {} );\n\t\t}\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t * This method is useful when processing model objects that are of unknown type. For example, a function\n\t * may return a {@link module:engine/model/documentfragment~DocumentFragment} or a {@link module:engine/model/node~Node}\n\t * that can be either a text node or an element. This method can be used to check what kind of object is returned.\n\t *\n\t *\t\tsomeObject.is( 'element' ); // -> true if this is an element\n\t *\t\tsomeObject.is( 'node' ); // -> true if this is a node (a text node or an element)\n\t *\t\tsomeObject.is( 'documentFragment' ); // -> true if this is a document fragment\n\t *\n\t * Since this method is also available on a range of view objects, you can prefix the type of the object with\n\t * `model:` or `view:` to check, for example, if this is the model's or view's element:\n\t *\n\t *\t\tmodelElement.is( 'model:element' ); // -> true\n\t *\t\tmodelElement.is( 'view:element' ); // -> false\n\t *\n\t * By using this method it is also possible to check a name of an element:\n\t *\n\t *\t\timageElement.is( 'element', 'image' ); // -> true\n\t *\t\timageElement.is( 'element', 'image' ); // -> same as above\n\t *\t\timageElement.is( 'model:element', 'image' ); // -> same as above, but more precise\n\t *\n\t * The list of model objects which implement the `is()` method:\n\t *\n\t * * {@link module:engine/model/node~Node#is `Node#is()`}\n\t * * {@link module:engine/model/text~Text#is `Text#is()`}\n\t * * {@link module:engine/model/element~Element#is `Element#is()`}\n\t * * {@link module:engine/model/rootelement~RootElement#is `RootElement#is()`}\n\t * * {@link module:engine/model/position~Position#is `Position#is()`}\n\t * * {@link module:engine/model/liveposition~LivePosition#is `LivePosition#is()`}\n\t * * {@link module:engine/model/range~Range#is `Range#is()`}\n\t * * {@link module:engine/model/liverange~LiveRange#is `LiveRange#is()`}\n\t * * {@link module:engine/model/documentfragment~DocumentFragment#is `DocumentFragment#is()`}\n\t * * {@link module:engine/model/selection~Selection#is `Selection#is()`}\n\t * * {@link module:engine/model/documentselection~DocumentSelection#is `DocumentSelection#is()`}\n\t * * {@link module:engine/model/markercollection~Marker#is `Marker#is()`}\n\t * * {@link module:engine/model/textproxy~TextProxy#is `TextProxy#is()`}\n\t *\n\t * @method #is\n\t * @param {String} type Type to check.\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'node' || type === 'model:node';\n\t}\n\n\t/**\n\t * Creates a copy of this node, that is a node with exactly same attributes, and returns it.\n\t *\n\t * @protected\n\t * @returns {module:engine/model/node~Node} Node with same attributes as this node.\n\t */\n\t_clone() {\n\t\treturn new Node( this._attrs );\n\t}\n\n\t/**\n\t * Removes this node from it's parent.\n\t *\n\t * @see module:engine/model/writer~Writer#remove\n\t * @protected\n\t */\n\t_remove() {\n\t\tthis.parent._removeChildren( this.index );\n\t}\n\n\t/**\n\t * Sets attribute on the node. If attribute with the same key already is set, it's value is overwritten.\n\t *\n\t * @see module:engine/model/writer~Writer#setAttribute\n\t * @protected\n\t * @param {String} key Key of attribute to set.\n\t * @param {*} value Attribute value.\n\t */\n\t_setAttribute( key, value ) {\n\t\tthis._attrs.set( key, value );\n\t}\n\n\t/**\n\t * Removes all attributes from the node and sets given attributes.\n\t *\n\t * @see module:engine/model/writer~Writer#setAttributes\n\t * @protected\n\t * @param {Object} [attrs] Attributes to set. See {@link module:utils/tomap~toMap} for a list of accepted values.\n\t */\n\t_setAttributesTo( attrs ) {\n\t\tthis._attrs = toMap( attrs );\n\t}\n\n\t/**\n\t * Removes an attribute with given key from the node.\n\t *\n\t * @see module:engine/model/writer~Writer#removeAttribute\n\t * @protected\n\t * @param {String} key Key of attribute to remove.\n\t * @returns {Boolean} `true` if the attribute was set on the element, `false` otherwise.\n\t */\n\t_removeAttribute( key ) {\n\t\treturn this._attrs.delete( key );\n\t}\n\n\t/**\n\t * Removes all attributes from the node.\n\t *\n\t * @see module:engine/model/writer~Writer#clearAttributes\n\t * @protected\n\t */\n\t_clearAttributes() {\n\t\tthis._attrs.clear();\n\t}\n}\n\n/**\n * The node's parent does not contain this node.\n *\n * @error model-node-not-found-in-parent\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/text\n */\n\nimport Node from './node';\n\n// @if CK_DEBUG_ENGINE // const { convertMapToStringifiedObject } = require( '../dev-utils/utils' );\n\n/**\n * Model text node. Type of {@link module:engine/model/node~Node node} that contains {@link module:engine/model/text~Text#data text data}.\n *\n * **Important:** see {@link module:engine/model/node~Node} to read about restrictions using `Text` and `Node` API.\n *\n * **Note:** keep in mind that `Text` instances might indirectly got removed from model tree when model is changed.\n * This happens when {@link module:engine/model/writer~Writer model writer} is used to change model and the text node is merged with\n * another text node. Then, both text nodes are removed and a new text node is inserted into the model. Because of\n * this behavior, keeping references to `Text` is not recommended. Instead, consider creating\n * {@link module:engine/model/liveposition~LivePosition live position} placed before the text node.\n *\n * @extends module:engine/model/node~Node\n */\nexport default class Text extends Node {\n\t/**\n\t * Creates a text node.\n\t *\n\t * **Note:** Constructor of this class shouldn't be used directly in the code.\n\t * Use the {@link module:engine/model/writer~Writer#createText} method instead.\n\t *\n\t * @protected\n\t * @param {String} data Node's text.\n\t * @param {Object} [attrs] Node's attributes. See {@link module:utils/tomap~toMap} for a list of accepted values.\n\t */\n\tconstructor( data, attrs ) {\n\t\tsuper( attrs );\n\n\t\t/**\n\t\t * Text data contained in this text node.\n\t\t *\n\t\t * @protected\n\t\t * @type {String}\n\t\t */\n\t\tthis._data = data || '';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tget offsetSize() {\n\t\treturn this.data.length;\n\t}\n\n\t/**\n\t * Returns a text data contained in the node.\n\t *\n\t * @readonly\n\t * @type {String}\n\t */\n\tget data() {\n\t\treturn this._data;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\ttext.is( '$text' ); // -> true\n\t *\t\ttext.is( 'node' ); // -> true\n\t *\t\ttext.is( 'model:$text' ); // -> true\n\t *\t\ttext.is( 'model:node' ); // -> true\n\t *\n\t *\t\ttext.is( 'view:$text' ); // -> false\n\t *\t\ttext.is( 'documentSelection' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * **Note:** Until version 20.0.0 this method wasn't accepting `'$text'` type. The legacy `'text'` type is still\n\t * accepted for backward compatibility.\n\t *\n\t * @param {String} type Type to check.\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === '$text' || type === 'model:$text' ||\n\t\t\t// This are legacy values kept for backward compatibility.\n\t\t\ttype === 'text' || type === 'model:text' ||\n\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\ttype === 'node' || type === 'model:node';\n\t}\n\n\t/**\n\t * Converts `Text` instance to plain object and returns it.\n\t *\n\t * @returns {Object} `Text` instance converted to plain object.\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.data = this.data;\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Creates a copy of this text node and returns it. Created text node has same text data and attributes as original text node.\n\t *\n\t * @protected\n\t * @returns {module:engine/model/text~Text} `Text` instance created using given plain object.\n\t */\n\t_clone() {\n\t\treturn new Text( this.data, this.getAttributes() );\n\t}\n\n\t/**\n\t * Creates a `Text` instance from given plain object (i.e. parsed JSON string).\n\t *\n\t * @param {Object} json Plain object to be converted to `Text`.\n\t * @returns {module:engine/model/text~Text} `Text` instance created using given plain object.\n\t */\n\tstatic fromJSON( json ) {\n\t\treturn new Text( json.data, json.attributes );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `#${ this.data }`;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logExtended() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( `ModelText: ${ this }, attrs: ${ convertMapToStringifiedObject( this.getAttributes() ) }` );\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ModelText: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/textproxy\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n// @if CK_DEBUG_ENGINE // const { convertMapToStringifiedObject } = require( '../dev-utils/utils' );\n\n/**\n * `TextProxy` represents a part of {@link module:engine/model/text~Text text node}.\n *\n * Since {@link module:engine/model/position~Position positions} can be placed between characters of a text node,\n * {@link module:engine/model/range~Range ranges} may contain only parts of text nodes. When {@link module:engine/model/range~Range#getItems\n * getting items}\n * contained in such range, we need to represent a part of that text node, since returning the whole text node would be incorrect.\n * `TextProxy` solves this issue.\n *\n * `TextProxy` has an API similar to {@link module:engine/model/text~Text Text} and allows to do most of the common tasks performed\n * on model nodes.\n *\n * **Note:** Some `TextProxy` instances may represent whole text node, not just a part of it.\n * See {@link module:engine/model/textproxy~TextProxy#isPartial}.\n *\n * **Note:** `TextProxy` is not an instance of {@link module:engine/model/node~Node node}. Keep this in mind when using it as a\n * parameter of methods.\n *\n * **Note:** `TextProxy` is a readonly interface. If you want to perform changes on model data represented by a `TextProxy`\n * use {@link module:engine/model/writer~Writer model writer API}.\n *\n * **Note:** `TextProxy` instances are created on the fly, basing on the current state of model. Because of this, it is\n * highly unrecommended to store references to `TextProxy` instances. `TextProxy` instances are not refreshed when\n * model changes, so they might get invalidated. Instead, consider creating {@link module:engine/model/liveposition~LivePosition live\n * position}.\n *\n * `TextProxy` instances are created by {@link module:engine/model/treewalker~TreeWalker model tree walker}. You should not need to create\n * an instance of this class by your own.\n */\nexport default class TextProxy {\n\t/**\n\t * Creates a text proxy.\n\t *\n\t * @protected\n\t * @param {module:engine/model/text~Text} textNode Text node which part is represented by this text proxy.\n\t * @param {Number} offsetInText Offset in {@link module:engine/model/textproxy~TextProxy#textNode text node} from which the text proxy\n\t * starts.\n\t * @param {Number} length Text proxy length, that is how many text node's characters, starting from `offsetInText` it represents.\n\t * @constructor\n\t */\n\tconstructor( textNode, offsetInText, length ) {\n\t\t/**\n\t\t * Text node which part is represented by this text proxy.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/text~Text}\n\t\t */\n\t\tthis.textNode = textNode;\n\n\t\tif ( offsetInText < 0 || offsetInText > textNode.offsetSize ) {\n\t\t\t/**\n\t\t\t * Given `offsetInText` value is incorrect.\n\t\t\t *\n\t\t\t * @error model-textproxy-wrong-offsetintext\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-textproxy-wrong-offsetintext', this );\n\t\t}\n\n\t\tif ( length < 0 || offsetInText + length > textNode.offsetSize ) {\n\t\t\t/**\n\t\t\t * Given `length` value is incorrect.\n\t\t\t *\n\t\t\t * @error model-textproxy-wrong-length\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-textproxy-wrong-length', this );\n\t\t}\n\n\t\t/**\n\t\t * Text data represented by this text proxy.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String}\n\t\t */\n\t\tthis.data = textNode.data.substring( offsetInText, offsetInText + length );\n\n\t\t/**\n\t\t * Offset in {@link module:engine/model/textproxy~TextProxy#textNode text node} from which the text proxy starts.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number}\n\t\t */\n\t\tthis.offsetInText = offsetInText;\n\t}\n\n\t/**\n\t * Offset at which this text proxy starts in it's parent.\n\t *\n\t * @see module:engine/model/node~Node#startOffset\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget startOffset() {\n\t\treturn this.textNode.startOffset !== null ? this.textNode.startOffset + this.offsetInText : null;\n\t}\n\n\t/**\n\t * Offset size of this text proxy. Equal to the number of characters represented by the text proxy.\n\t *\n\t * @see module:engine/model/node~Node#offsetSize\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget offsetSize() {\n\t\treturn this.data.length;\n\t}\n\n\t/**\n\t * Offset at which this text proxy ends in it's parent.\n\t *\n\t * @see module:engine/model/node~Node#endOffset\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget endOffset() {\n\t\treturn this.startOffset !== null ? this.startOffset + this.offsetSize : null;\n\t}\n\n\t/**\n\t * Flag indicating whether `TextProxy` instance covers only part of the original {@link module:engine/model/text~Text text node}\n\t * (`true`) or the whole text node (`false`).\n\t *\n\t * This is `false` when text proxy starts at the very beginning of {@link module:engine/model/textproxy~TextProxy#textNode textNode}\n\t * ({@link module:engine/model/textproxy~TextProxy#offsetInText offsetInText} equals `0`) and text proxy sizes is equal to\n\t * text node size.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isPartial() {\n\t\treturn this.offsetSize !== this.textNode.offsetSize;\n\t}\n\n\t/**\n\t * Parent of this text proxy, which is same as parent of text node represented by this text proxy.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}\n\t */\n\tget parent() {\n\t\treturn this.textNode.parent;\n\t}\n\n\t/**\n\t * Root of this text proxy, which is same as root of text node represented by this text proxy.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this.textNode.root;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\ttextProxy.is( '$textProxy' ); // -> true\n\t *\t\ttextProxy.is( 'model:$textProxy' ); // -> true\n\t *\n\t *\t\ttextProxy.is( 'view:$textProxy' ); // -> false\n\t *\t\ttextProxy.is( 'range' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * **Note:** Until version 20.0.0 this method wasn't accepting `'$textProxy'` type. The legacy `'textProxt'` type is still\n\t * accepted for backward compatibility.\n\t *\n\t * @param {String} type Type to check.\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === '$textProxy' || type === 'model:$textProxy' ||\n\t\t\t// This are legacy values kept for backward compatibility.\n\t\t\ttype === 'textProxy' || type === 'model:textProxy';\n\t}\n\n\t/**\n\t * Gets path to this text proxy.\n\t *\n\t * @see module:engine/model/node~Node#getPath\n\t * @returns {Array.<Number>}\n\t */\n\tgetPath() {\n\t\tconst path = this.textNode.getPath();\n\n\t\tif ( path.length > 0 ) {\n\t\t\tpath[ path.length - 1 ] += this.offsetInText;\n\t\t}\n\n\t\treturn path;\n\t}\n\n\t/**\n\t * Returns ancestors array of this text proxy.\n\t *\n\t * @param {Object} options Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` this text proxy will be also included in parent's array.\n\t * @param {Boolean} [options.parentFirst=false] When set to `true`, array will be sorted from text proxy parent to root element,\n\t * otherwise root element will be the first item in the array.\n\t * @returns {Array} Array with ancestors.\n\t */\n\tgetAncestors( options = { includeSelf: false, parentFirst: false } ) {\n\t\tconst ancestors = [];\n\t\tlet parent = options.includeSelf ? this : this.parent;\n\n\t\twhile ( parent ) {\n\t\t\tancestors[ options.parentFirst ? 'push' : 'unshift' ]( parent );\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn ancestors;\n\t}\n\n\t/**\n\t * Checks if this text proxy has an attribute for given key.\n\t *\n\t * @param {String} key Key of attribute to check.\n\t * @returns {Boolean} `true` if attribute with given key is set on text proxy, `false` otherwise.\n\t */\n\thasAttribute( key ) {\n\t\treturn this.textNode.hasAttribute( key );\n\t}\n\n\t/**\n\t * Gets an attribute value for given key or `undefined` if that attribute is not set on text proxy.\n\t *\n\t * @param {String} key Key of attribute to look for.\n\t * @returns {*} Attribute value or `undefined`.\n\t */\n\tgetAttribute( key ) {\n\t\treturn this.textNode.getAttribute( key );\n\t}\n\n\t/**\n\t * Returns iterator that iterates over this node's attributes. Attributes are returned as arrays containing two\n\t * items. First one is attribute key and second is attribute value.\n\t *\n\t * This format is accepted by native `Map` object and also can be passed in `Node` constructor.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\tgetAttributes() {\n\t\treturn this.textNode.getAttributes();\n\t}\n\n\t/**\n\t * Returns iterator that iterates over this node's attribute keys.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetAttributeKeys() {\n\t\treturn this.textNode.getAttributeKeys();\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `#${ this.data }`;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ModelTextProxy: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logExtended() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( `ModelTextProxy: ${ this }, ` +\n\t// @if CK_DEBUG_ENGINE // \t\t`attrs: ${ convertMapToStringifiedObject( this.getAttributes() ) }` );\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/nodelist\n */\n\nimport Node from './node';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Provides an interface to operate on a list of {@link module:engine/model/node~Node nodes}. `NodeList` is used internally\n * in classes like {@link module:engine/model/element~Element Element}\n * or {@link module:engine/model/documentfragment~DocumentFragment DocumentFragment}.\n */\nexport default class NodeList {\n\t/**\n\t * Creates an empty node list.\n\t *\n\t * @protected\n\t * @param {Iterable.<module:engine/model/node~Node>} nodes Nodes contained in this node list.\n\t */\n\tconstructor( nodes ) {\n\t\t/**\n\t\t * Nodes contained in this node list.\n\t\t *\n\t\t * @private\n\t\t * @member {Array.<module:engine/model/node~Node>}\n\t\t */\n\t\tthis._nodes = [];\n\n\t\tif ( nodes ) {\n\t\t\tthis._insertNodes( 0, nodes );\n\t\t}\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over all nodes contained inside this node list.\n\t *\n\t * @returns {Iterable.<module:engine/model/node~Node>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this._nodes[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Number of nodes contained inside this node list.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget length() {\n\t\treturn this._nodes.length;\n\t}\n\n\t/**\n\t * Sum of {@link module:engine/model/node~Node#offsetSize offset sizes} of all nodes contained inside this node list.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget maxOffset() {\n\t\treturn this._nodes.reduce( ( sum, node ) => sum + node.offsetSize, 0 );\n\t}\n\n\t/**\n\t * Gets the node at the given index. Returns `null` if incorrect index was passed.\n\t *\n\t * @param {Number} index Index of node.\n\t * @returns {module:engine/model/node~Node|null} Node at given index.\n\t */\n\tgetNode( index ) {\n\t\treturn this._nodes[ index ] || null;\n\t}\n\n\t/**\n\t * Returns an index of the given node. Returns `null` if given node is not inside this node list.\n\t *\n\t * @param {module:engine/model/node~Node} node Child node to look for.\n\t * @returns {Number|null} Child node's index.\n\t */\n\tgetNodeIndex( node ) {\n\t\tconst index = this._nodes.indexOf( node );\n\n\t\treturn index == -1 ? null : index;\n\t}\n\n\t/**\n\t * Returns the starting offset of given node. Starting offset is equal to the sum of\n\t * {@link module:engine/model/node~Node#offsetSize offset sizes} of all nodes that are before this node in this node list.\n\t *\n\t * @param {module:engine/model/node~Node} node Node to look for.\n\t * @returns {Number|null} Node's starting offset.\n\t */\n\tgetNodeStartOffset( node ) {\n\t\tconst index = this.getNodeIndex( node );\n\n\t\treturn index === null ? null : this._nodes.slice( 0, index ).reduce( ( sum, node ) => sum + node.offsetSize, 0 );\n\t}\n\n\t/**\n\t * Converts index to offset in node list.\n\t *\n\t * Returns starting offset of a node that is at given index. Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError}\n\t * `model-nodelist-index-out-of-bounds` if given index is less than `0` or more than {@link #length}.\n\t *\n\t * @param {Number} index Node's index.\n\t * @returns {Number} Node's starting offset.\n\t */\n\tindexToOffset( index ) {\n\t\tif ( index == this._nodes.length ) {\n\t\t\treturn this.maxOffset;\n\t\t}\n\n\t\tconst node = this._nodes[ index ];\n\n\t\tif ( !node ) {\n\t\t\t/**\n\t\t\t * Given index cannot be found in the node list.\n\t\t\t *\n\t\t\t * @error model-nodelist-index-out-of-bounds\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-nodelist-index-out-of-bounds', this );\n\t\t}\n\n\t\treturn this.getNodeStartOffset( node );\n\t}\n\n\t/**\n\t * Converts offset in node list to index.\n\t *\n\t * Returns index of a node that occupies given offset. Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError}\n\t * `model-nodelist-offset-out-of-bounds` if given offset is less than `0` or more than {@link #maxOffset}.\n\t *\n\t * @param {Number} offset Offset to look for.\n\t * @returns {Number} Index of a node that occupies given offset.\n\t */\n\toffsetToIndex( offset ) {\n\t\tlet totalOffset = 0;\n\n\t\tfor ( const node of this._nodes ) {\n\t\t\tif ( offset >= totalOffset && offset < totalOffset + node.offsetSize ) {\n\t\t\t\treturn this.getNodeIndex( node );\n\t\t\t}\n\n\t\t\ttotalOffset += node.offsetSize;\n\t\t}\n\n\t\tif ( totalOffset != offset ) {\n\t\t\t/**\n\t\t\t * Given offset cannot be found in the node list.\n\t\t\t *\n\t\t\t * @error model-nodelist-offset-out-of-bounds\n\t\t\t * @param {Number} offset\n\t\t\t * @param {module:engine/model/nodelist~NodeList} nodeList Stringified node list.\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-nodelist-offset-out-of-bounds',\n\t\t\t\tthis,\n\t\t\t\t{\n\t\t\t\t\toffset,\n\t\t\t\t\tnodeList: this\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn this.length;\n\t}\n\n\t/**\n\t * Inserts given nodes at given index.\n\t *\n\t * @protected\n\t * @param {Number} index Index at which nodes should be inserted.\n\t * @param {Iterable.<module:engine/model/node~Node>} nodes Nodes to be inserted.\n\t */\n\t_insertNodes( index, nodes ) {\n\t\t// Validation.\n\t\tfor ( const node of nodes ) {\n\t\t\tif ( !( node instanceof Node ) ) {\n\t\t\t\t/**\n\t\t\t\t * Trying to insert an object which is not a Node instance.\n\t\t\t\t *\n\t\t\t\t * @error model-nodelist-insertnodes-not-node\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'model-nodelist-insertnodes-not-node', this );\n\t\t\t}\n\t\t}\n\n\t\tthis._nodes.splice( index, 0, ...nodes );\n\t}\n\n\t/**\n\t * Removes one or more nodes starting at the given index.\n\t *\n\t * @protected\n\t * @param {Number} indexStart Index of the first node to remove.\n\t * @param {Number} [howMany=1] Number of nodes to remove.\n\t * @returns {Array.<module:engine/model/node~Node>} Array containing removed nodes.\n\t */\n\t_removeNodes( indexStart, howMany = 1 ) {\n\t\treturn this._nodes.splice( indexStart, howMany );\n\t}\n\n\t/**\n\t * Converts `NodeList` instance to an array containing nodes that were inserted in the node list. Nodes\n\t * are also converted to their plain object representation.\n\t *\n\t * @returns {Array.<module:engine/model/node~Node>} `NodeList` instance converted to `Array`.\n\t */\n\ttoJSON() {\n\t\treturn this._nodes.map( node => node.toJSON() );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/element\n */\n\nimport Node from './node';\nimport NodeList from './nodelist';\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\n\n// @if CK_DEBUG_ENGINE // const { stringifyMap, convertMapToStringifiedObject, convertMapToTags } = require( '../dev-utils/utils' );\n\n/**\n * Model element. Type of {@link module:engine/model/node~Node node} that has a {@link module:engine/model/element~Element#name name} and\n * {@link module:engine/model/element~Element#getChildren child nodes}.\n *\n * **Important**: see {@link module:engine/model/node~Node} to read about restrictions using `Element` and `Node` API.\n *\n * @extends module:engine/model/node~Node\n */\nexport default class Element extends Node {\n\t/**\n\t * Creates a model element.\n\t *\n\t * **Note:** Constructor of this class shouldn't be used directly in the code.\n\t * Use the {@link module:engine/model/writer~Writer#createElement} method instead.\n\t *\n\t * @protected\n\t * @param {String} name Element's name.\n\t * @param {Object} [attrs] Element's attributes. See {@link module:utils/tomap~toMap} for a list of accepted values.\n\t * @param {module:engine/model/node~Node|Iterable.<module:engine/model/node~Node>} [children]\n\t * One or more nodes to be inserted as children of created element.\n\t */\n\tconstructor( name, attrs, children ) {\n\t\tsuper( attrs );\n\n\t\t/**\n\t\t * Element name.\n\t\t *\n\t\t * @readonly\n\t\t * @member {String} module:engine/model/element~Element#name\n\t\t */\n\t\tthis.name = name;\n\n\t\t/**\n\t\t * List of children nodes.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/nodelist~NodeList} module:engine/model/element~Element#_children\n\t\t */\n\t\tthis._children = new NodeList();\n\n\t\tif ( children ) {\n\t\t\tthis._insertChild( 0, children );\n\t\t}\n\t}\n\n\t/**\n\t * Number of this element's children.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget childCount() {\n\t\treturn this._children.length;\n\t}\n\n\t/**\n\t * Sum of {@link module:engine/model/node~Node#offsetSize offset sizes} of all of this element's children.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget maxOffset() {\n\t\treturn this._children.maxOffset;\n\t}\n\n\t/**\n\t * Is `true` if there are no nodes inside this element, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isEmpty() {\n\t\treturn this.childCount === 0;\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\telement.is( 'element' ); // -> true\n\t *\t\telement.is( 'node' ); // -> true\n\t *\t\telement.is( 'model:element' ); // -> true\n\t *\t\telement.is( 'model:node' ); // -> true\n\t *\n\t *\t\telement.is( 'view:element' ); // -> false\n\t *\t\telement.is( 'documentSelection' ); // -> false\n\t *\n\t * Assuming that the object being checked is an element, you can also check its\n\t * {@link module:engine/model/element~Element#name name}:\n\t *\n\t *\t\telement.is( 'element', 'image' ); // -> true if this is an <image> element\n\t *\t\telement.is( 'element', 'image' ); // -> same as above\n\t *\t\ttext.is( 'element', 'image' ); -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type Type to check.\n\t * @param {String} [name] Element name.\n\t * @returns {Boolean}\n\t */\n\tis( type, name = null ) {\n\t\tif ( !name ) {\n\t\t\treturn type === 'element' || type === 'model:element' ||\n\t\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\t\ttype === 'node' || type === 'model:node';\n\t\t}\n\n\t\treturn name === this.name && ( type === 'element' || type === 'model:element' );\n\t}\n\n\t/**\n\t * Gets the child at the given index.\n\t *\n\t * @param {Number} index Index of child.\n\t * @returns {module:engine/model/node~Node} Child node.\n\t */\n\tgetChild( index ) {\n\t\treturn this._children.getNode( index );\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all of this element's children.\n\t *\n\t * @returns {Iterable.<module:engine/model/node~Node>}\n\t */\n\tgetChildren() {\n\t\treturn this._children[ Symbol.iterator ]();\n\t}\n\n\t/**\n\t * Returns an index of the given child node. Returns `null` if given node is not a child of this element.\n\t *\n\t * @param {module:engine/model/node~Node} node Child node to look for.\n\t * @returns {Number} Child node's index in this element.\n\t */\n\tgetChildIndex( node ) {\n\t\treturn this._children.getNodeIndex( node );\n\t}\n\n\t/**\n\t * Returns the starting offset of given child. Starting offset is equal to the sum of\n\t * {@link module:engine/model/node~Node#offsetSize offset sizes} of all node's siblings that are before it. Returns `null` if\n\t * given node is not a child of this element.\n\t *\n\t * @param {module:engine/model/node~Node} node Child node to look for.\n\t * @returns {Number} Child node's starting offset.\n\t */\n\tgetChildStartOffset( node ) {\n\t\treturn this._children.getNodeStartOffset( node );\n\t}\n\n\t/**\n\t * Returns index of a node that occupies given offset. If given offset is too low, returns `0`. If given offset is\n\t * too high, returns {@link module:engine/model/element~Element#getChildIndex index after last child}.\n\t *\n\t *\t\tconst textNode = new Text( 'foo' );\n\t *\t\tconst pElement = new Element( 'p' );\n\t *\t\tconst divElement = new Element( [ textNode, pElement ] );\n\t *\t\tdivElement.offsetToIndex( -1 ); // Returns 0, because offset is too low.\n\t *\t\tdivElement.offsetToIndex( 0 ); // Returns 0, because offset 0 is taken by `textNode` which is at index 0.\n\t *\t\tdivElement.offsetToIndex( 1 ); // Returns 0, because `textNode` has `offsetSize` equal to 3, so it occupies offset 1 too.\n\t *\t\tdivElement.offsetToIndex( 2 ); // Returns 0.\n\t *\t\tdivElement.offsetToIndex( 3 ); // Returns 1.\n\t *\t\tdivElement.offsetToIndex( 4 ); // Returns 2. There are no nodes at offset 4, so last available index is returned.\n\t *\n\t * @param {Number} offset Offset to look for.\n\t * @returns {Number}\n\t */\n\toffsetToIndex( offset ) {\n\t\treturn this._children.offsetToIndex( offset );\n\t}\n\n\t/**\n\t * Returns a descendant node by its path relative to this element.\n\t *\n\t *\t\t// <this>a<b>c</b></this>\n\t *\t\tthis.getNodeByPath( [ 0 ] );     // -> \"a\"\n\t *\t\tthis.getNodeByPath( [ 1 ] );     // -> <b>\n\t *\t\tthis.getNodeByPath( [ 1, 0 ] );  // -> \"c\"\n\t *\n\t * @param {Array.<Number>} relativePath Path of the node to find, relative to this element.\n\t * @returns {module:engine/model/node~Node}\n\t */\n\tgetNodeByPath( relativePath ) {\n\t\tlet node = this; // eslint-disable-line consistent-this\n\n\t\tfor ( const index of relativePath ) {\n\t\t\tnode = node.getChild( node.offsetToIndex( index ) );\n\t\t}\n\n\t\treturn node;\n\t}\n\n\t/**\n\t * Returns the parent element of the given name. Returns null if the element is not inside the desired parent.\n\t *\n\t * @param {String} parentName The name of the parent element to find.\n\t * @param {Object} [options] Options object.\n\t * @param {Boolean} [options.includeSelf=false] When set to `true` this node will be also included while searching.\n\t * @returns {module:engine/model/element~Element|null}\n\t */\n\tfindAncestor( parentName, options = { includeSelf: false } ) {\n\t\tlet parent = options.includeSelf ? this : this.parent;\n\n\t\twhile ( parent ) {\n\t\t\tif ( parent.name === parentName ) {\n\t\t\t\treturn parent;\n\t\t\t}\n\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Converts `Element` instance to plain object and returns it. Takes care of converting all of this element's children.\n\t *\n\t * @returns {Object} `Element` instance converted to plain object.\n\t */\n\ttoJSON() {\n\t\tconst json = super.toJSON();\n\n\t\tjson.name = this.name;\n\n\t\tif ( this._children.length > 0 ) {\n\t\t\tjson.children = [];\n\n\t\t\tfor ( const node of this._children ) {\n\t\t\t\tjson.children.push( node.toJSON() );\n\t\t\t}\n\t\t}\n\n\t\treturn json;\n\t}\n\n\t/**\n\t * Creates a copy of this element and returns it. Created element has the same name and attributes as the original element.\n\t * If clone is deep, the original element's children are also cloned. If not, then empty element is returned.\n\t *\n\t * @protected\n\t * @param {Boolean} [deep=false] If set to `true` clones element and all its children recursively. When set to `false`,\n\t * element will be cloned without any child.\n\t */\n\t_clone( deep = false ) {\n\t\tconst children = deep ? Array.from( this._children ).map( node => node._clone( true ) ) : null;\n\n\t\treturn new Element( this.name, this.getAttributes(), children );\n\t}\n\n\t/**\n\t * {@link module:engine/model/element~Element#_insertChild Inserts} one or more nodes at the end of this element.\n\t *\n\t * @see module:engine/model/writer~Writer#append\n\t * @protected\n\t * @param {module:engine/model/item~Item|Iterable.<module:engine/model/item~Item>} nodes Nodes to be inserted.\n\t */\n\t_appendChild( nodes ) {\n\t\tthis._insertChild( this.childCount, nodes );\n\t}\n\n\t/**\n\t * Inserts one or more nodes at the given index and sets {@link module:engine/model/node~Node#parent parent} of these nodes\n\t * to this element.\n\t *\n\t * @see module:engine/model/writer~Writer#insert\n\t * @protected\n\t * @param {Number} index Index at which nodes should be inserted.\n\t * @param {module:engine/model/item~Item|Iterable.<module:engine/model/item~Item>} items Items to be inserted.\n\t */\n\t_insertChild( index, items ) {\n\t\tconst nodes = normalize( items );\n\n\t\tfor ( const node of nodes ) {\n\t\t\t// If node that is being added to this element is already inside another element, first remove it from the old parent.\n\t\t\tif ( node.parent !== null ) {\n\t\t\t\tnode._remove();\n\t\t\t}\n\n\t\t\tnode.parent = this;\n\t\t}\n\n\t\tthis._children._insertNodes( index, nodes );\n\t}\n\n\t/**\n\t * Removes one or more nodes starting at the given index and sets\n\t * {@link module:engine/model/node~Node#parent parent} of these nodes to `null`.\n\t *\n\t * @see module:engine/model/writer~Writer#remove\n\t * @protected\n\t * @param {Number} index Index of the first node to remove.\n\t * @param {Number} [howMany=1] Number of nodes to remove.\n\t * @returns {Array.<module:engine/model/node~Node>} Array containing removed nodes.\n\t */\n\t_removeChildren( index, howMany = 1 ) {\n\t\tconst nodes = this._children._removeNodes( index, howMany );\n\n\t\tfor ( const node of nodes ) {\n\t\t\tnode.parent = null;\n\t\t}\n\n\t\treturn nodes;\n\t}\n\n\t/**\n\t * Creates an `Element` instance from given plain object (i.e. parsed JSON string).\n\t * Converts `Element` children to proper nodes.\n\t *\n\t * @param {Object} json Plain object to be converted to `Element`.\n\t * @returns {module:engine/model/element~Element} `Element` instance created using given plain object.\n\t */\n\tstatic fromJSON( json ) {\n\t\tlet children = null;\n\n\t\tif ( json.children ) {\n\t\t\tchildren = [];\n\n\t\t\tfor ( const child of json.children ) {\n\t\t\t\tif ( child.name ) {\n\t\t\t\t\t// If child has name property, it is an Element.\n\t\t\t\t\tchildren.push( Element.fromJSON( child ) );\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise, it is a Text node.\n\t\t\t\t\tchildren.push( Text.fromJSON( child ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn new Element( json.name, json.attributes, children );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `<${ this.rootName || this.name }>`;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ModelElement: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logExtended() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( `ModelElement: ${ this }, ${ this.childCount } children,\n\t// @if CK_DEBUG_ENGINE //\t\tattrs: ${ convertMapToStringifiedObject( this.getAttributes() ) }` );\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logAll() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( '--------------------' );\n\t// @if CK_DEBUG_ENGINE //\n\t// @if CK_DEBUG_ENGINE // \tthis.logExtended();\n\t// @if CK_DEBUG_ENGINE //\tconsole.log( 'List of children:' );\n\t// @if CK_DEBUG_ENGINE //\n\t// @if CK_DEBUG_ENGINE // \tfor ( const child of this.getChildren() ) {\n\t// @if CK_DEBUG_ENGINE // \t\tchild.log();\n\t// @if CK_DEBUG_ENGINE // \t}\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // printTree( level = 0) {\n\t// @if CK_DEBUG_ENGINE // \tlet string = '';\n\n\t// @if CK_DEBUG_ENGINE // \tstring += '\\t'.repeat( level );\n\t// @if CK_DEBUG_ENGINE // \tstring += `<${ this.rootName || this.name }${ convertMapToTags( this.getAttributes() ) }>`;\n\n\t// @if CK_DEBUG_ENGINE // \tfor ( const child of this.getChildren() ) {\n\t// @if CK_DEBUG_ENGINE // \t\tstring += '\\n';\n\n\t// @if CK_DEBUG_ENGINE // \t\tif ( child.is( '$text' ) ) {\n\t// @if CK_DEBUG_ENGINE // \t\t\tconst textAttrs = convertMapToTags( child._attrs );\n\n\t// @if CK_DEBUG_ENGINE // \t\t\tstring += '\\t'.repeat( level + 1 );\n\n\t// @if CK_DEBUG_ENGINE // \t\t\tif ( textAttrs !== '' ) {\n\t// @if CK_DEBUG_ENGINE // \t\t\t\tstring += `<$text${ textAttrs }>` + child.data + '</$text>';\n\t// @if CK_DEBUG_ENGINE // \t\t\t} else {\n\t// @if CK_DEBUG_ENGINE // \t\t\t\tstring += child.data;\n\t// @if CK_DEBUG_ENGINE // \t\t\t}\n\t// @if CK_DEBUG_ENGINE // \t\t} else {\n\t// @if CK_DEBUG_ENGINE // \t\t\tstring += child.printTree( level + 1 );\n\t// @if CK_DEBUG_ENGINE // \t\t}\n\t// @if CK_DEBUG_ENGINE // \t}\n\n\t// @if CK_DEBUG_ENGINE // \tif ( this.childCount ) {\n\t// @if CK_DEBUG_ENGINE // \t\tstring += '\\n' + '\\t'.repeat( level );\n\t// @if CK_DEBUG_ENGINE // \t}\n\n\t// @if CK_DEBUG_ENGINE // \tstring += `</${ this.rootName || this.name }>`;\n\n\t// @if CK_DEBUG_ENGINE // \treturn string;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // logTree() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( this.printTree() );\n\t// @if CK_DEBUG_ENGINE // }\n}\n\n// Converts strings to Text and non-iterables to arrays.\n//\n// @param {String|module:engine/model/item~Item|Iterable.<String|module:engine/model/item~Item>}\n// @returns {Iterable.<module:engine/model/node~Node>}\nfunction normalize( nodes ) {\n\t// Separate condition because string is iterable.\n\tif ( typeof nodes == 'string' ) {\n\t\treturn [ new Text( nodes ) ];\n\t}\n\n\tif ( !isIterable( nodes ) ) {\n\t\tnodes = [ nodes ];\n\t}\n\n\t// Array.from to enable .map() on non-arrays.\n\treturn Array.from( nodes )\n\t\t.map( node => {\n\t\t\tif ( typeof node == 'string' ) {\n\t\t\t\treturn new Text( node );\n\t\t\t}\n\n\t\t\tif ( node instanceof TextProxy ) {\n\t\t\t\treturn new Text( node.data, node.getAttributes() );\n\t\t\t}\n\n\t\t\treturn node;\n\t\t} );\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/treewalker\n */\n\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport Element from './element';\nimport {\n\tdefault as Position,\n\tgetTextNodeAtPosition,\n\tgetNodeAfterPosition,\n\tgetNodeBeforePosition\n} from './position';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n/**\n * Position iterator class. It allows to iterate forward and backward over the document.\n */\nexport default class TreeWalker {\n\t/**\n\t * Creates a range iterator. All parameters are optional, but you have to specify either `boundaries` or `startPosition`.\n\t *\n\t * @constructor\n\t * @param {Object} [options={}] Object with configuration.\n\t * @param {'forward'|'backward'} [options.direction='forward'] Walking direction.\n\t * @param {module:engine/model/range~Range} [options.boundaries=null] Range to define boundaries of the iterator.\n\t * @param {module:engine/model/position~Position} [options.startPosition] Starting position.\n\t * @param {Boolean} [options.singleCharacters=false] Flag indicating whether all consecutive characters with the same attributes\n\t * should be returned one by one as multiple {@link module:engine/model/textproxy~TextProxy} (`true`) objects or as one\n\t * {@link module:engine/model/textproxy~TextProxy} (`false`).\n\t * @param {Boolean} [options.shallow=false] Flag indicating whether iterator should enter elements or not. If the\n\t * iterator is shallow child nodes of any iterated node will not be returned along with `elementEnd` tag.\n\t * @param {Boolean} [options.ignoreElementEnd=false] Flag indicating whether iterator should ignore `elementEnd`\n\t * tags. If the option is true walker will not return a parent node of start position. If this option is `true`\n\t * each {@link module:engine/model/element~Element} will be returned once, while if the option is `false` they might be returned\n\t * twice: for `'elementStart'` and `'elementEnd'`.\n\t */\n\tconstructor( options = {} ) {\n\t\tif ( !options.boundaries && !options.startPosition ) {\n\t\t\t/**\n\t\t\t * Neither boundaries nor starting position of a `TreeWalker` have been defined.\n\t\t\t *\n\t\t\t * @error model-tree-walker-no-start-position\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-tree-walker-no-start-position',\n\t\t\t\tnull\n\t\t\t);\n\t\t}\n\n\t\tconst direction = options.direction || 'forward';\n\n\t\tif ( direction != 'forward' && direction != 'backward' ) {\n\t\t\t/**\n\t\t\t * Only `backward` and `forward` direction allowed.\n\t\t\t *\n\t\t\t * @error model-tree-walker-unknown-direction\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-tree-walker-unknown-direction', options, { direction } );\n\t\t}\n\n\t\t/**\n\t\t * Walking direction. Defaults `'forward'`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {'backward'|'forward'} module:engine/model/treewalker~TreeWalker#direction\n\t\t */\n\t\tthis.direction = direction;\n\n\t\t/**\n\t\t * Iterator boundaries.\n\t\t *\n\t\t * When the iterator is walking `'forward'` on the end of boundary or is walking `'backward'`\n\t\t * on the start of boundary, then `{ done: true }` is returned.\n\t\t *\n\t\t * If boundaries are not defined they are set before first and after last child of the root node.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/range~Range} module:engine/model/treewalker~TreeWalker#boundaries\n\t\t */\n\t\tthis.boundaries = options.boundaries || null;\n\n\t\t/**\n\t\t * Iterator position. This is always static position, even if the initial position was a\n\t\t * {@link module:engine/model/liveposition~LivePosition live position}. If start position is not defined then position depends\n\t\t * on {@link #direction}. If direction is `'forward'` position starts form the beginning, when direction\n\t\t * is `'backward'` position starts from the end.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/position~Position} module:engine/model/treewalker~TreeWalker#position\n\t\t */\n\t\tif ( options.startPosition ) {\n\t\t\tthis.position = options.startPosition.clone();\n\t\t} else {\n\t\t\tthis.position = Position._createAt( this.boundaries[ this.direction == 'backward' ? 'end' : 'start' ] );\n\t\t}\n\n\t\t// Reset position stickiness in case it was set to other value, as the stickiness is kept after cloning.\n\t\tthis.position.stickiness = 'toNone';\n\n\t\t/**\n\t\t * Flag indicating whether all consecutive characters with the same attributes should be\n\t\t * returned as one {@link module:engine/model/textproxy~TextProxy} (`true`) or one by one (`false`).\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/model/treewalker~TreeWalker#singleCharacters\n\t\t */\n\t\tthis.singleCharacters = !!options.singleCharacters;\n\n\t\t/**\n\t\t * Flag indicating whether iterator should enter elements or not. If the iterator is shallow child nodes of any\n\t\t * iterated node will not be returned along with `elementEnd` tag.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/model/treewalker~TreeWalker#shallow\n\t\t */\n\t\tthis.shallow = !!options.shallow;\n\n\t\t/**\n\t\t * Flag indicating whether iterator should ignore `elementEnd` tags. If the option is true walker will not\n\t\t * return a parent node of the start position. If this option is `true` each {@link module:engine/model/element~Element} will\n\t\t * be returned once, while if the option is `false` they might be returned twice:\n\t\t * for `'elementStart'` and `'elementEnd'`.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} module:engine/model/treewalker~TreeWalker#ignoreElementEnd\n\t\t */\n\t\tthis.ignoreElementEnd = !!options.ignoreElementEnd;\n\n\t\t/**\n\t\t * Start boundary cached for optimization purposes.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/element~Element} module:engine/model/treewalker~TreeWalker#_boundaryStartParent\n\t\t */\n\t\tthis._boundaryStartParent = this.boundaries ? this.boundaries.start.parent : null;\n\n\t\t/**\n\t\t * End boundary cached for optimization purposes.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/element~Element} module:engine/model/treewalker~TreeWalker#_boundaryEndParent\n\t\t */\n\t\tthis._boundaryEndParent = this.boundaries ? this.boundaries.end.parent : null;\n\n\t\t/**\n\t\t * Parent of the most recently visited node. Cached for optimization purposes.\n\t\t *\n\t\t * @private\n\t\t * @member {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}\n\t\t * module:engine/model/treewalker~TreeWalker#_visitedParent\n\t\t */\n\t\tthis._visitedParent = this.position.parent;\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * @returns {Iterable.<module:engine/model/treewalker~TreeWalkerValue>}\n\t */\n\t[ Symbol.iterator ]() {\n\t\treturn this;\n\t}\n\n\t/**\n\t * Moves {@link #position} in the {@link #direction} skipping values as long as the callback function returns `true`.\n\t *\n\t * For example:\n\t *\n\t * \t\twalker.skip( value => value.type == 'text' ); // <paragraph>[]foo</paragraph> -> <paragraph>foo[]</paragraph>\n\t * \t\twalker.skip( () => true ); // Move the position to the end: <paragraph>[]foo</paragraph> -> <paragraph>foo</paragraph>[]\n\t * \t\twalker.skip( () => false ); // Do not move the position.\n\t *\n\t * @param {Function} skip Callback function. Gets {@link module:engine/model/treewalker~TreeWalkerValue} and should\n\t * return `true` if the value should be skipped or `false` if not.\n\t */\n\tskip( skip ) {\n\t\tlet done, value, prevPosition, prevVisitedParent;\n\n\t\tdo {\n\t\t\tprevPosition = this.position;\n\t\t\tprevVisitedParent = this._visitedParent;\n\n\t\t\t( { done, value } = this.next() );\n\t\t} while ( !done && skip( value ) );\n\n\t\tif ( !done ) {\n\t\t\tthis.position = prevPosition;\n\t\t\tthis._visitedParent = prevVisitedParent;\n\t\t}\n\t}\n\n\t/**\n\t * Gets the next tree walker's value.\n\t *\n\t * @returns {module:engine/model/treewalker~TreeWalkerValue} Next tree walker's value.\n\t */\n\tnext() {\n\t\tif ( this.direction == 'forward' ) {\n\t\t\treturn this._next();\n\t\t} else {\n\t\t\treturn this._previous();\n\t\t}\n\t}\n\n\t/**\n\t * Makes a step forward in model. Moves the {@link #position} to the next position and returns the encountered value.\n\t *\n\t * @private\n\t * @returns {Object}\n\t * @returns {Boolean} return.done True if iterator is done.\n\t * @returns {module:engine/model/treewalker~TreeWalkerValue} return.value Information about taken step.\n\t */\n\t_next() {\n\t\tconst previousPosition = this.position;\n\t\tconst position = this.position.clone();\n\t\tconst parent = this._visitedParent;\n\n\t\t// We are at the end of the root.\n\t\tif ( parent.parent === null && position.offset === parent.maxOffset ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// We reached the walker boundary.\n\t\tif ( parent === this._boundaryEndParent && position.offset == this.boundaries.end.offset ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// Get node just after the current position.\n\t\t// Use a highly optimized version instead of checking the text node first and then getting the node after. See #6582.\n\t\tconst positionParent = position.parent;\n\t\tconst textNodeAtPosition = getTextNodeAtPosition( position, positionParent );\n\t\tconst node = textNodeAtPosition ? textNodeAtPosition : getNodeAfterPosition( position, positionParent, textNodeAtPosition );\n\n\t\tif ( node instanceof Element ) {\n\t\t\tif ( !this.shallow ) {\n\t\t\t\t// Manual operations on path internals for optimization purposes. Here and in the rest of the method.\n\t\t\t\tposition.path.push( 0 );\n\t\t\t\tthis._visitedParent = node;\n\t\t\t} else {\n\t\t\t\tposition.offset++;\n\t\t\t}\n\n\t\t\tthis.position = position;\n\n\t\t\treturn formatReturnValue( 'elementStart', node, previousPosition, position, 1 );\n\t\t} else if ( node instanceof Text ) {\n\t\t\tlet charactersCount;\n\n\t\t\tif ( this.singleCharacters ) {\n\t\t\t\tcharactersCount = 1;\n\t\t\t} else {\n\t\t\t\tlet offset = node.endOffset;\n\n\t\t\t\tif ( this._boundaryEndParent == parent && this.boundaries.end.offset < offset ) {\n\t\t\t\t\toffset = this.boundaries.end.offset;\n\t\t\t\t}\n\n\t\t\t\tcharactersCount = offset - position.offset;\n\t\t\t}\n\n\t\t\tconst offsetInTextNode = position.offset - node.startOffset;\n\t\t\tconst item = new TextProxy( node, offsetInTextNode, charactersCount );\n\n\t\t\tposition.offset += charactersCount;\n\t\t\tthis.position = position;\n\n\t\t\treturn formatReturnValue( 'text', item, previousPosition, position, charactersCount );\n\t\t} else {\n\t\t\t// `node` is not set, we reached the end of current `parent`.\n\t\t\tposition.path.pop();\n\t\t\tposition.offset++;\n\t\t\tthis.position = position;\n\t\t\tthis._visitedParent = parent.parent;\n\n\t\t\tif ( this.ignoreElementEnd ) {\n\t\t\t\treturn this._next();\n\t\t\t} else {\n\t\t\t\treturn formatReturnValue( 'elementEnd', parent, previousPosition, position );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Makes a step backward in model. Moves the {@link #position} to the previous position and returns the encountered value.\n\t *\n\t * @private\n\t * @returns {Object}\n\t * @returns {Boolean} return.done True if iterator is done.\n\t * @returns {module:engine/model/treewalker~TreeWalkerValue} return.value Information about taken step.\n\t */\n\t_previous() {\n\t\tconst previousPosition = this.position;\n\t\tconst position = this.position.clone();\n\t\tconst parent = this._visitedParent;\n\n\t\t// We are at the beginning of the root.\n\t\tif ( parent.parent === null && position.offset === 0 ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// We reached the walker boundary.\n\t\tif ( parent == this._boundaryStartParent && position.offset == this.boundaries.start.offset ) {\n\t\t\treturn { done: true };\n\t\t}\n\n\t\t// Get node just before the current position.\n\t\t// Use a highly optimized version instead of checking the text node first and then getting the node before. See #6582.\n\t\tconst positionParent = position.parent;\n\t\tconst textNodeAtPosition = getTextNodeAtPosition( position, positionParent );\n\t\tconst node = textNodeAtPosition ? textNodeAtPosition : getNodeBeforePosition( position, positionParent, textNodeAtPosition );\n\n\t\tif ( node instanceof Element ) {\n\t\t\tposition.offset--;\n\n\t\t\tif ( !this.shallow ) {\n\t\t\t\tposition.path.push( node.maxOffset );\n\t\t\t\tthis.position = position;\n\t\t\t\tthis._visitedParent = node;\n\n\t\t\t\tif ( this.ignoreElementEnd ) {\n\t\t\t\t\treturn this._previous();\n\t\t\t\t} else {\n\t\t\t\t\treturn formatReturnValue( 'elementEnd', node, previousPosition, position );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.position = position;\n\n\t\t\t\treturn formatReturnValue( 'elementStart', node, previousPosition, position, 1 );\n\t\t\t}\n\t\t} else if ( node instanceof Text ) {\n\t\t\tlet charactersCount;\n\n\t\t\tif ( this.singleCharacters ) {\n\t\t\t\tcharactersCount = 1;\n\t\t\t} else {\n\t\t\t\tlet offset = node.startOffset;\n\n\t\t\t\tif ( this._boundaryStartParent == parent && this.boundaries.start.offset > offset ) {\n\t\t\t\t\toffset = this.boundaries.start.offset;\n\t\t\t\t}\n\n\t\t\t\tcharactersCount = position.offset - offset;\n\t\t\t}\n\n\t\t\tconst offsetInTextNode = position.offset - node.startOffset;\n\t\t\tconst item = new TextProxy( node, offsetInTextNode - charactersCount, charactersCount );\n\n\t\t\tposition.offset -= charactersCount;\n\t\t\tthis.position = position;\n\n\t\t\treturn formatReturnValue( 'text', item, previousPosition, position, charactersCount );\n\t\t} else {\n\t\t\t// `node` is not set, we reached the beginning of current `parent`.\n\t\t\tposition.path.pop();\n\t\t\tthis.position = position;\n\t\t\tthis._visitedParent = parent.parent;\n\n\t\t\treturn formatReturnValue( 'elementStart', parent, previousPosition, position, 1 );\n\t\t}\n\t}\n}\n\nfunction formatReturnValue( type, item, previousPosition, nextPosition, length ) {\n\treturn {\n\t\tdone: false,\n\t\tvalue: {\n\t\t\ttype,\n\t\t\titem,\n\t\t\tpreviousPosition,\n\t\t\tnextPosition,\n\t\t\tlength\n\t\t}\n\t};\n}\n\n/**\n * Type of the step made by {@link module:engine/model/treewalker~TreeWalker}.\n * Possible values: `'elementStart'` if walker is at the beginning of a node, `'elementEnd'` if walker is at the end of node,\n * `'character'` if walker traversed over a character, or `'text'` if walker traversed over multiple characters (available in\n * character merging mode, see {@link module:engine/model/treewalker~TreeWalker#constructor}).\n *\n * @typedef {'elementStart'|'elementEnd'|'character'|'text'} module:engine/model/treewalker~TreeWalkerValueType\n */\n\n/**\n * Object returned by {@link module:engine/model/treewalker~TreeWalker} when traversing tree model.\n *\n * @typedef {Object} module:engine/model/treewalker~TreeWalkerValue\n * @property {module:engine/model/treewalker~TreeWalkerValueType} type\n * @property {module:engine/model/item~Item} item Item between old and new positions of {@link module:engine/model/treewalker~TreeWalker}.\n * @property {module:engine/model/position~Position} previousPosition Previous position of the iterator.\n * * Forward iteration: For `'elementEnd'` it is the last position inside the element. For all other types it is the\n * position before the item.\n * * Backward iteration: For `'elementStart'` it is the first position inside the element. For all other types it is\n * the position after item.\n * @property {module:engine/model/position~Position} nextPosition Next position of the iterator.\n * * Forward iteration: For `'elementStart'` it is the first position inside the element. For all other types it is\n * the position after the item.\n * * Backward iteration: For `'elementEnd'` it is last position inside element. For all other types it is the position\n * before the item.\n * @property {Number} [length] Length of the item. For `'elementStart'` and `'character'` it is 1. For `'text'` it is\n * the length of the text. For `'elementEnd'` it is `undefined`.\n */\n\n/**\n * Tree walking directions.\n *\n * @typedef {'forward'|'backward'} module:engine/model/treewalker~TreeWalkerDirection\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/position\n */\n\nimport TreeWalker from './treewalker';\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\n\n// To check if component is loaded more than once.\nimport '@ckeditor/ckeditor5-utils/src/version';\n\n/**\n * Represents a position in the model tree.\n *\n * A position is represented by its {@link module:engine/model/position~Position#root} and\n * a {@link module:engine/model/position~Position#path} in that root.\n *\n * You can create position instances via its constructor or the `createPosition*()` factory methods of\n * {@link module:engine/model/model~Model} and {@link module:engine/model/writer~Writer}.\n *\n * **Note:** Position is based on offsets, not indexes. This means that a position between two text nodes\n * `foo` and `bar` has offset `3`, not `1`. See {@link module:engine/model/position~Position#path} for more information.\n *\n * Since a position in the model is represented by a {@link module:engine/model/position~Position#root position root} and\n * {@link module:engine/model/position~Position#path position path} it is possible to create positions placed in non-existing places.\n * This requirement is important for operational transformation algorithms.\n *\n * Also, {@link module:engine/model/operation/operation~Operation operations}\n * kept in the {@link module:engine/model/document~Document#history document history}\n * are storing positions (and ranges) which were correct when those operations were applied, but may not be correct\n * after the document has changed.\n *\n * When changes are applied to the model, it may also happen that {@link module:engine/model/position~Position#parent position parent}\n * will change even if position path has not changed. Keep in mind, that if a position leads to non-existing element,\n * {@link module:engine/model/position~Position#parent} and some other properties and methods will throw errors.\n *\n * In most cases, position with wrong path is caused by an error in code, but it is sometimes needed, as described above.\n */\nexport default class Position {\n\t/**\n\t * Creates a position.\n\t *\n\t * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} root Root of the position.\n\t * @param {Array.<Number>} path Position path. See {@link module:engine/model/position~Position#path}.\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone'] Position stickiness.\n\t * See {@link module:engine/model/position~PositionStickiness}.\n\t */\n\tconstructor( root, path, stickiness = 'toNone' ) {\n\t\tif ( !root.is( 'element' ) && !root.is( 'documentFragment' ) ) {\n\t\t\t/**\n\t\t\t * Position root is invalid.\n\t\t\t *\n\t\t\t * Positions can only be anchored in elements or document fragments.\n\t\t\t *\n\t\t\t * @error model-position-root-invalid\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-position-root-invalid',\n\t\t\t\troot\n\t\t\t);\n\t\t}\n\n\t\tif ( !( path instanceof Array ) || path.length === 0 ) {\n\t\t\t/**\n\t\t\t * Position path must be an array with at least one item.\n\t\t\t *\n\t\t\t * @error model-position-path-incorrect-format\n\t\t\t * @param path\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-position-path-incorrect-format',\n\t\t\t\troot,\n\t\t\t\t{ path }\n\t\t\t);\n\t\t}\n\n\t\t// Normalize the root and path when element (not root) is passed.\n\t\tif ( root.is( 'rootElement' ) ) {\n\t\t\tpath = path.slice();\n\t\t} else {\n\t\t\tpath = [ ...root.getPath(), ...path ];\n\t\t\troot = root.root;\n\t\t}\n\n\t\t/**\n\t\t * Root of the position path.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}\n\t\t * module:engine/model/position~Position#root\n\t\t */\n\t\tthis.root = root;\n\n\t\t/**\n\t\t * Position of the node in the tree. **Path contains offsets, not indexes.**\n\t\t *\n\t\t * Position can be placed before, after or in a {@link module:engine/model/node~Node node} if that node has\n\t\t * {@link module:engine/model/node~Node#offsetSize} greater than `1`. Items in position path are\n\t\t * {@link module:engine/model/node~Node#startOffset starting offsets} of position ancestors, starting from direct root children,\n\t\t * down to the position offset in it's parent.\n\t\t *\n\t\t *\t\t ROOT\n\t\t *\t\t  |- P            before: [ 0 ]         after: [ 1 ]\n\t\t *\t\t  |- UL           before: [ 1 ]         after: [ 2 ]\n\t\t *\t\t     |- LI        before: [ 1, 0 ]      after: [ 1, 1 ]\n\t\t *\t\t     |  |- foo    before: [ 1, 0, 0 ]   after: [ 1, 0, 3 ]\n\t\t *\t\t     |- LI        before: [ 1, 1 ]      after: [ 1, 2 ]\n\t\t *\t\t        |- bar    before: [ 1, 1, 0 ]   after: [ 1, 1, 3 ]\n\t\t *\n\t\t * `foo` and `bar` are representing {@link module:engine/model/text~Text text nodes}. Since text nodes has offset size\n\t\t * greater than `1` you can place position offset between their start and end:\n\t\t *\n\t\t *\t\t ROOT\n\t\t *\t\t  |- P\n\t\t *\t\t  |- UL\n\t\t *\t\t     |- LI\n\t\t *\t\t     |  |- f^o|o  ^ has path: [ 1, 0, 1 ]   | has path: [ 1, 0, 2 ]\n\t\t *\t\t     |- LI\n\t\t *\t\t        |- b^a|r  ^ has path: [ 1, 1, 1 ]   | has path: [ 1, 1, 2 ]\n\t\t *\n\t\t * @readonly\n\t\t * @member {Array.<Number>} module:engine/model/position~Position#path\n\t\t */\n\t\tthis.path = path;\n\n\t\t/**\n\t\t * Position stickiness. See {@link module:engine/model/position~PositionStickiness}.\n\t\t *\n\t\t * @member {module:engine/model/position~PositionStickiness} module:engine/model/position~Position#stickiness\n\t\t */\n\t\tthis.stickiness = stickiness;\n\t}\n\n\t/**\n\t * Offset at which this position is located in its {@link module:engine/model/position~Position#parent parent}. It is equal\n\t * to the last item in position {@link module:engine/model/position~Position#path path}.\n\t *\n\t * @type {Number}\n\t */\n\tget offset() {\n\t\treturn this.path[ this.path.length - 1 ];\n\t}\n\n\tset offset( newOffset ) {\n\t\tthis.path[ this.path.length - 1 ] = newOffset;\n\t}\n\n\t/**\n\t * Parent element of this position.\n\t *\n\t * Keep in mind that `parent` value is calculated when the property is accessed.\n\t * If {@link module:engine/model/position~Position#path position path}\n\t * leads to a non-existing element, `parent` property will throw error.\n\t *\n\t * Also it is a good idea to cache `parent` property if it is used frequently in an algorithm (i.e. in a long loop).\n\t *\n\t * @readonly\n\t * @type {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tget parent() {\n\t\tlet parent = this.root;\n\n\t\tfor ( let i = 0; i < this.path.length - 1; i++ ) {\n\t\t\tparent = parent.getChild( parent.offsetToIndex( this.path[ i ] ) );\n\n\t\t\tif ( !parent ) {\n\t\t\t\t/**\n\t\t\t\t * The position's path is incorrect. This means that a position does not point to\n\t\t\t\t * a correct place in the tree and hence, some of its methods and getters cannot work correctly.\n\t\t\t\t *\n\t\t\t\t * **Note**: Unlike DOM and view positions, in the model, the\n\t\t\t\t * {@link module:engine/model/position~Position#parent position's parent} is always an element or a document fragment.\n\t\t\t\t * The last offset in the {@link module:engine/model/position~Position#path position's path} is the point in this element\n\t\t\t\t * where this position points.\n\t\t\t\t *\n\t\t\t\t * Read more about model positions and offsets in\n\t\t\t\t * the {@glink framework/guides/architecture/editing-engine#indexes-and-offsets Editing engine architecture guide}.\n\t\t\t\t *\n\t\t\t\t * @error model-position-path-incorrect\n\t\t\t\t * @param {module:engine/model/position~Position} position The incorrect position.\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'model-position-path-incorrect', this, { position: this } );\n\t\t\t}\n\t\t}\n\n\t\tif ( parent.is( '$text' ) ) {\n\t\t\tthrow new CKEditorError( 'model-position-path-incorrect', this, { position: this } );\n\t\t}\n\n\t\treturn parent;\n\t}\n\n\t/**\n\t * Position {@link module:engine/model/position~Position#offset offset} converted to an index in position's parent node. It is\n\t * equal to the {@link module:engine/model/node~Node#index index} of a node after this position. If position is placed\n\t * in text node, position index is equal to the index of that text node.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget index() {\n\t\treturn this.parent.offsetToIndex( this.offset );\n\t}\n\n\t/**\n\t * Returns {@link module:engine/model/text~Text text node} instance in which this position is placed or `null` if this\n\t * position is not in a text node.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/text~Text|null}\n\t */\n\tget textNode() {\n\t\treturn getTextNodeAtPosition( this, this.parent );\n\t}\n\n\t/**\n\t * Node directly after this position or `null` if this position is in text node.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|null}\n\t */\n\tget nodeAfter() {\n\t\t// Cache the parent and reuse for performance reasons. See #6579 and #6582.\n\t\tconst parent = this.parent;\n\n\t\treturn getNodeAfterPosition( this, parent, getTextNodeAtPosition( this, parent ) );\n\t}\n\n\t/**\n\t * Node directly before this position or `null` if this position is in text node.\n\t *\n\t * @readonly\n\t * @type {module:engine/model/node~Node|null}\n\t */\n\tget nodeBefore() {\n\t\t// Cache the parent and reuse for performance reasons. See #6579 and #6582.\n\t\tconst parent = this.parent;\n\n\t\treturn getNodeBeforePosition( this, parent, getTextNodeAtPosition( this, parent ) );\n\t}\n\n\t/**\n\t * Is `true` if position is at the beginning of its {@link module:engine/model/position~Position#parent parent}, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isAtStart() {\n\t\treturn this.offset === 0;\n\t}\n\n\t/**\n\t * Is `true` if position is at the end of its {@link module:engine/model/position~Position#parent parent}, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isAtEnd() {\n\t\treturn this.offset == this.parent.maxOffset;\n\t}\n\n\t/**\n\t * Checks whether this position is before or after given position.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/position~Position} otherPosition Position to compare with.\n\t * @returns {module:engine/model/position~PositionRelation}\n\t */\n\tcompareWith( otherPosition ) {\n\t\tif ( this.root != otherPosition.root ) {\n\t\t\treturn 'different';\n\t\t}\n\n\t\tconst result = compareArrays( this.path, otherPosition.path );\n\n\t\tswitch ( result ) {\n\t\t\tcase 'same':\n\t\t\t\treturn 'same';\n\n\t\t\tcase 'prefix':\n\t\t\t\treturn 'before';\n\n\t\t\tcase 'extension':\n\t\t\t\treturn 'after';\n\n\t\t\tdefault:\n\t\t\t\treturn this.path[ result ] < otherPosition.path[ result ] ? 'before' : 'after';\n\t\t}\n\t}\n\n\t/**\n\t * Gets the farthest position which matches the callback using\n\t * {@link module:engine/model/treewalker~TreeWalker TreeWalker}.\n\t *\n\t * For example:\n\t *\n\t * \t\tgetLastMatchingPosition( value => value.type == 'text' );\n\t * \t\t// <paragraph>[]foo</paragraph> -> <paragraph>foo[]</paragraph>\n\t *\n\t * \t\tgetLastMatchingPosition( value => value.type == 'text', { direction: 'backward' } );\n\t * \t\t// <paragraph>foo[]</paragraph> -> <paragraph>[]foo</paragraph>\n\t *\n\t * \t\tgetLastMatchingPosition( value => false );\n\t * \t\t// Do not move the position.\n\t *\n\t * @param {Function} skip Callback function. Gets {@link module:engine/model/treewalker~TreeWalkerValue} and should\n\t * return `true` if the value should be skipped or `false` if not.\n\t * @param {Object} options Object with configuration options. See {@link module:engine/model/treewalker~TreeWalker}.\n\t *\n\t * @returns {module:engine/model/position~Position} The position after the last item which matches the `skip` callback test.\n\t */\n\tgetLastMatchingPosition( skip, options = {} ) {\n\t\toptions.startPosition = this;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\t\ttreeWalker.skip( skip );\n\n\t\treturn treeWalker.position;\n\t}\n\n\t/**\n\t * Returns a path to this position's parent. Parent path is equal to position {@link module:engine/model/position~Position#path path}\n\t * but without the last item.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @returns {Array.<Number>} Path to the parent.\n\t */\n\tgetParentPath() {\n\t\treturn this.path.slice( 0, -1 );\n\t}\n\n\t/**\n\t * Returns ancestors array of this position, that is this position's parent and its ancestors.\n\t *\n\t * @returns {Array.<module:engine/model/item~Item>} Array with ancestors.\n\t */\n\tgetAncestors() {\n\t\tconst parent = this.parent;\n\n\t\tif ( parent.is( 'documentFragment' ) ) {\n\t\t\treturn [ parent ];\n\t\t} else {\n\t\t\treturn parent.getAncestors( { includeSelf: true } );\n\t\t}\n\t}\n\n\t/**\n\t * Returns the parent element of the given name. Returns null if the position is not inside the desired parent.\n\t *\n\t * @param {String} parentName The name of the parent element to find.\n\t * @returns {module:engine/model/element~Element|null}\n\t */\n\tfindAncestor( parentName ) {\n\t\tconst parent = this.parent;\n\n\t\tif ( parent.is( 'element' ) ) {\n\t\t\treturn parent.findAncestor( parentName, { includeSelf: true } );\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Returns the slice of two position {@link #path paths} which is identical. The {@link #root roots}\n\t * of these two paths must be identical.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/position~Position} position The second position.\n\t * @returns {Array.<Number>} The common path.\n\t */\n\tgetCommonPath( position ) {\n\t\tif ( this.root != position.root ) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// We find on which tree-level start and end have the lowest common ancestor\n\t\tconst cmp = compareArrays( this.path, position.path );\n\t\t// If comparison returned string it means that arrays are same.\n\t\tconst diffAt = ( typeof cmp == 'string' ) ? Math.min( this.path.length, position.path.length ) : cmp;\n\n\t\treturn this.path.slice( 0, diffAt );\n\t}\n\n\t/**\n\t * Returns an {@link module:engine/model/element~Element} or {@link module:engine/model/documentfragment~DocumentFragment}\n\t * which is a common ancestor of both positions. The {@link #root roots} of these two positions must be identical.\n\t *\n\t * @param {module:engine/model/position~Position} position The second position.\n\t * @returns {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor( position ) {\n\t\tconst ancestorsA = this.getAncestors();\n\t\tconst ancestorsB = position.getAncestors();\n\n\t\tlet i = 0;\n\n\t\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n\t}\n\n\t/**\n\t * Returns a new instance of `Position`, that has same {@link #parent parent} but it's offset\n\t * is shifted by `shift` value (can be a negative value).\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {Number} shift Offset shift. Can be a negative value.\n\t * @returns {module:engine/model/position~Position} Shifted position.\n\t */\n\tgetShiftedBy( shift ) {\n\t\tconst shifted = this.clone();\n\n\t\tconst offset = shifted.offset + shift;\n\t\tshifted.offset = offset < 0 ? 0 : offset;\n\n\t\treturn shifted;\n\t}\n\n\t/**\n\t * Checks whether this position is after given position.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @see module:engine/model/position~Position#isBefore\n\t * @param {module:engine/model/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} True if this position is after given position.\n\t */\n\tisAfter( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'after';\n\t}\n\n\t/**\n\t * Checks whether this position is before given position.\n\t *\n\t * **Note:** watch out when using negation of the value returned by this method, because the negation will also\n\t * be `true` if positions are in different roots and you might not expect this. You should probably use\n\t * `a.isAfter( b ) || a.isEqual( b )` or `!a.isBefore( p ) && a.root == b.root` in most scenarios. If your\n\t * condition uses multiple `isAfter` and `isBefore` checks, build them so they do not use negated values, i.e.:\n\t *\n\t *\t\tif ( a.isBefore( b ) && c.isAfter( d ) ) {\n\t *\t\t\t// do A.\n\t *\t\t} else {\n\t *\t\t\t// do B.\n\t *\t\t}\n\t *\n\t * or, if you have only one if-branch:\n\t *\n\t *\t\tif ( !( a.isBefore( b ) && c.isAfter( d ) ) {\n\t *\t\t\t// do B.\n\t *\t\t}\n\t *\n\t * rather than:\n\t *\n\t *\t\tif ( !a.isBefore( b ) || && !c.isAfter( d ) ) {\n\t *\t\t\t// do B.\n\t *\t\t} else {\n\t *\t\t\t// do A.\n\t *\t\t}\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} True if this position is before given position.\n\t */\n\tisBefore( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'before';\n\t}\n\n\t/**\n\t * Checks whether this position is equal to given position.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} True if positions are same.\n\t */\n\tisEqual( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'same';\n\t}\n\n\t/**\n\t * Checks whether this position is touching given position. Positions touch when there are no text nodes\n\t * or empty nodes in a range between them. Technically, those positions are not equal but in many cases\n\t * they are very similar or even indistinguishable.\n\t *\n\t * @param {module:engine/model/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} True if positions touch.\n\t */\n\tisTouching( otherPosition ) {\n\t\tlet left = null;\n\t\tlet right = null;\n\t\tconst compare = this.compareWith( otherPosition );\n\n\t\tswitch ( compare ) {\n\t\t\tcase 'same':\n\t\t\t\treturn true;\n\n\t\t\tcase 'before':\n\t\t\t\tleft = Position._createAt( this );\n\t\t\t\tright = Position._createAt( otherPosition );\n\t\t\t\tbreak;\n\n\t\t\tcase 'after':\n\t\t\t\tleft = Position._createAt( otherPosition );\n\t\t\t\tright = Position._createAt( this );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\n\t\t// Cached for optimization purposes.\n\t\tlet leftParent = left.parent;\n\n\t\twhile ( left.path.length + right.path.length ) {\n\t\t\tif ( left.isEqual( right ) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ( left.path.length > right.path.length ) {\n\t\t\t\tif ( left.offset !== leftParent.maxOffset ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tleft.path = left.path.slice( 0, -1 );\n\t\t\t\tleftParent = leftParent.parent;\n\t\t\t\tleft.offset++;\n\t\t\t} else {\n\t\t\t\tif ( right.offset !== 0 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tright.path = right.path.slice( 0, -1 );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\tposition.is( 'position' ); // -> true\n\t *\t\tposition.is( 'model:position' ); // -> true\n\t *\n\t *\t\tposition.is( 'view:position' ); // -> false\n\t *\t\tposition.is( 'documentSelection' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'position' || type === 'model:position';\n\t}\n\n\t/**\n\t * Checks if two positions are in the same parent.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/position~Position} position Position to compare with.\n\t * @returns {Boolean} `true` if positions have the same parent, `false` otherwise.\n\t */\n\thasSameParentAs( position ) {\n\t\tif ( this.root !== position.root ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst thisParentPath = this.getParentPath();\n\t\tconst posParentPath = position.getParentPath();\n\n\t\treturn compareArrays( thisParentPath, posParentPath ) == 'same';\n\t}\n\n\t/**\n\t * Returns a copy of this position that is transformed by given `operation`.\n\t *\n\t * The new position's parameters are updated accordingly to the effect of the `operation`.\n\t *\n\t * For example, if `n` nodes are inserted before the position, the returned position {@link ~Position#offset} will be\n\t * increased by `n`. If the position was in a merged element, it will be accordingly moved to the new element, etc.\n\t *\n\t * This method is safe to use it on non-existing positions (for example during operational transformation).\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation Operation to transform by.\n\t * @returns {module:engine/model/position~Position} Transformed position.\n\t */\n\tgetTransformedByOperation( operation ) {\n\t\tlet result;\n\n\t\tswitch ( operation.type ) {\n\t\t\tcase 'insert':\n\t\t\t\tresult = this._getTransformedByInsertOperation( operation );\n\t\t\t\tbreak;\n\t\t\tcase 'move':\n\t\t\tcase 'remove':\n\t\t\tcase 'reinsert':\n\t\t\t\tresult = this._getTransformedByMoveOperation( operation );\n\t\t\t\tbreak;\n\t\t\tcase 'split':\n\t\t\t\tresult = this._getTransformedBySplitOperation( operation );\n\t\t\t\tbreak;\n\t\t\tcase 'merge':\n\t\t\t\tresult = this._getTransformedByMergeOperation( operation );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tresult = Position._createAt( this );\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns a copy of this position transformed by an insert operation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/insertoperation~InsertOperation} operation\n\t * @returns {module:engine/model/position~Position}\n\t */\n\t_getTransformedByInsertOperation( operation ) {\n\t\treturn this._getTransformedByInsertion( operation.position, operation.howMany );\n\t}\n\n\t/**\n\t * Returns a copy of this position transformed by a move operation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/moveoperation~MoveOperation} operation\n\t * @returns {module:engine/model/position~Position}\n\t */\n\t_getTransformedByMoveOperation( operation ) {\n\t\treturn this._getTransformedByMove( operation.sourcePosition, operation.targetPosition, operation.howMany );\n\t}\n\n\t/**\n\t * Returns a copy of this position transformed by a split operation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/splitoperation~SplitOperation} operation\n\t * @returns {module:engine/model/position~Position}\n\t */\n\t_getTransformedBySplitOperation( operation ) {\n\t\tconst movedRange = operation.movedRange;\n\n\t\tconst isContained = movedRange.containsPosition( this ) ||\n\t\t\t( movedRange.start.isEqual( this ) && this.stickiness == 'toNext' );\n\n\t\tif ( isContained ) {\n\t\t\treturn this._getCombined( operation.splitPosition, operation.moveTargetPosition );\n\t\t} else {\n\t\t\tif ( operation.graveyardPosition ) {\n\t\t\t\treturn this._getTransformedByMove( operation.graveyardPosition, operation.insertionPosition, 1 );\n\t\t\t} else {\n\t\t\t\treturn this._getTransformedByInsertion( operation.insertionPosition, 1 );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns a copy of this position transformed by merge operation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/mergeoperation~MergeOperation} operation\n\t * @returns {module:engine/model/position~Position}\n\t */\n\t_getTransformedByMergeOperation( operation ) {\n\t\tconst movedRange = operation.movedRange;\n\t\tconst isContained = movedRange.containsPosition( this ) || movedRange.start.isEqual( this );\n\n\t\tlet pos;\n\n\t\tif ( isContained ) {\n\t\t\tpos = this._getCombined( operation.sourcePosition, operation.targetPosition );\n\n\t\t\tif ( operation.sourcePosition.isBefore( operation.targetPosition ) ) {\n\t\t\t\t// Above happens during OT when the merged element is moved before the merged-to element.\n\t\t\t\tpos = pos._getTransformedByDeletion( operation.deletionPosition, 1 );\n\t\t\t}\n\t\t} else if ( this.isEqual( operation.deletionPosition ) ) {\n\t\t\tpos = Position._createAt( operation.deletionPosition );\n\t\t} else {\n\t\t\tpos = this._getTransformedByMove( operation.deletionPosition, operation.graveyardPosition, 1 );\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\t/**\n\t * Returns a copy of this position that is updated by removing `howMany` nodes starting from `deletePosition`.\n\t * It may happen that this position is in a removed node. If that is the case, `null` is returned instead.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} deletePosition Position before the first removed node.\n\t * @param {Number} howMany How many nodes are removed.\n\t * @returns {module:engine/model/position~Position|null} Transformed position or `null`.\n\t */\n\t_getTransformedByDeletion( deletePosition, howMany ) {\n\t\tconst transformed = Position._createAt( this );\n\n\t\t// This position can't be affected if deletion was in a different root.\n\t\tif ( this.root != deletePosition.root ) {\n\t\t\treturn transformed;\n\t\t}\n\n\t\tif ( compareArrays( deletePosition.getParentPath(), this.getParentPath() ) == 'same' ) {\n\t\t\t// If nodes are removed from the node that is pointed by this position...\n\t\t\tif ( deletePosition.offset < this.offset ) {\n\t\t\t\t// And are removed from before an offset of that position...\n\t\t\t\tif ( deletePosition.offset + howMany > this.offset ) {\n\t\t\t\t\t// Position is in removed range, it's no longer in the tree.\n\t\t\t\t\treturn null;\n\t\t\t\t} else {\n\t\t\t\t\t// Decrement the offset accordingly.\n\t\t\t\t\ttransformed.offset -= howMany;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( compareArrays( deletePosition.getParentPath(), this.getParentPath() ) == 'prefix' ) {\n\t\t\t// If nodes are removed from a node that is on a path to this position...\n\t\t\tconst i = deletePosition.path.length - 1;\n\n\t\t\tif ( deletePosition.offset <= this.path[ i ] ) {\n\t\t\t\t// And are removed from before next node of that path...\n\t\t\t\tif ( deletePosition.offset + howMany > this.path[ i ] ) {\n\t\t\t\t\t// If the next node of that path is removed return null\n\t\t\t\t\t// because the node containing this position got removed.\n\t\t\t\t\treturn null;\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise, decrement index on that path.\n\t\t\t\t\ttransformed.path[ i ] -= howMany;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn transformed;\n\t}\n\n\t/**\n\t * Returns a copy of this position that is updated by inserting `howMany` nodes at `insertPosition`.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} insertPosition Position where nodes are inserted.\n\t * @param {Number} howMany How many nodes are inserted.\n\t * @returns {module:engine/model/position~Position} Transformed position.\n\t */\n\t_getTransformedByInsertion( insertPosition, howMany ) {\n\t\tconst transformed = Position._createAt( this );\n\n\t\t// This position can't be affected if insertion was in a different root.\n\t\tif ( this.root != insertPosition.root ) {\n\t\t\treturn transformed;\n\t\t}\n\n\t\tif ( compareArrays( insertPosition.getParentPath(), this.getParentPath() ) == 'same' ) {\n\t\t\t// If nodes are inserted in the node that is pointed by this position...\n\t\t\tif ( insertPosition.offset < this.offset || ( insertPosition.offset == this.offset && this.stickiness != 'toPrevious' ) ) {\n\t\t\t\t// And are inserted before an offset of that position...\n\t\t\t\t// \"Push\" this positions offset.\n\t\t\t\ttransformed.offset += howMany;\n\t\t\t}\n\t\t} else if ( compareArrays( insertPosition.getParentPath(), this.getParentPath() ) == 'prefix' ) {\n\t\t\t// If nodes are inserted in a node that is on a path to this position...\n\t\t\tconst i = insertPosition.path.length - 1;\n\n\t\t\tif ( insertPosition.offset <= this.path[ i ] ) {\n\t\t\t\t// And are inserted before next node of that path...\n\t\t\t\t// \"Push\" the index on that path.\n\t\t\t\ttransformed.path[ i ] += howMany;\n\t\t\t}\n\t\t}\n\n\t\treturn transformed;\n\t}\n\n\t/**\n\t * Returns a copy of this position that is updated by moving `howMany` nodes from `sourcePosition` to `targetPosition`.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} sourcePosition Position before the first element to move.\n\t * @param {module:engine/model/position~Position} targetPosition Position where moved elements will be inserted.\n\t * @param {Number} howMany How many consecutive nodes to move, starting from `sourcePosition`.\n\t * @returns {module:engine/model/position~Position} Transformed position.\n\t */\n\t_getTransformedByMove( sourcePosition, targetPosition, howMany ) {\n\t\t// Update target position, as it could be affected by nodes removal.\n\t\ttargetPosition = targetPosition._getTransformedByDeletion( sourcePosition, howMany );\n\n\t\tif ( sourcePosition.isEqual( targetPosition ) ) {\n\t\t\t// If `targetPosition` is equal to `sourcePosition` this isn't really any move. Just return position as it is.\n\t\t\treturn Position._createAt( this );\n\t\t}\n\n\t\t// Moving a range removes nodes from their original position. We acknowledge this by proper transformation.\n\t\tconst transformed = this._getTransformedByDeletion( sourcePosition, howMany );\n\n\t\tconst isMoved = transformed === null ||\n\t\t\t( sourcePosition.isEqual( this ) && this.stickiness == 'toNext' ) ||\n\t\t\t( sourcePosition.getShiftedBy( howMany ).isEqual( this ) && this.stickiness == 'toPrevious' );\n\n\t\tif ( isMoved ) {\n\t\t\t// This position is inside moved range (or sticks to it).\n\t\t\t// In this case, we calculate a combination of this position, move source position and target position.\n\t\t\treturn this._getCombined( sourcePosition, targetPosition );\n\t\t} else {\n\t\t\t// This position is not inside a removed range.\n\t\t\t//\n\t\t\t// In next step, we simply reflect inserting `howMany` nodes, which might further affect the position.\n\t\t\treturn transformed._getTransformedByInsertion( targetPosition, howMany );\n\t\t}\n\t}\n\n\t/**\n\t * Returns a new position that is a combination of this position and given positions.\n\t *\n\t * The combined position is a copy of this position transformed by moving a range starting at `source` position\n\t * to the `target` position. It is expected that this position is inside the moved range.\n\t *\n\t * Example:\n\t *\n\t *\t\tlet original = model.createPositionFromPath( root, [ 2, 3, 1 ] );\n\t *\t\tlet source = model.createPositionFromPath( root, [ 2, 2 ] );\n\t *\t\tlet target = model.createPositionFromPath( otherRoot, [ 1, 1, 3 ] );\n\t *\t\toriginal._getCombined( source, target ); // path is [ 1, 1, 4, 1 ], root is `otherRoot`\n\t *\n\t * Explanation:\n\t *\n\t * We have a position `[ 2, 3, 1 ]` and move some nodes from `[ 2, 2 ]` to `[ 1, 1, 3 ]`. The original position\n\t * was inside moved nodes and now should point to the new place. The moved nodes will be after\n\t * positions `[ 1, 1, 3 ]`, `[ 1, 1, 4 ]`, `[ 1, 1, 5 ]`. Since our position was in the second moved node,\n\t * the transformed position will be in a sub-tree of a node at `[ 1, 1, 4 ]`. Looking at original path, we\n\t * took care of `[ 2, 3 ]` part of it. Now we have to add the rest of the original path to the transformed path.\n\t * Finally, the transformed position will point to `[ 1, 1, 4, 1 ]`.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} source Beginning of the moved range.\n\t * @param {module:engine/model/position~Position} target Position where the range is moved.\n\t * @returns {module:engine/model/position~Position} Combined position.\n\t */\n\t_getCombined( source, target ) {\n\t\tconst i = source.path.length - 1;\n\n\t\t// The first part of a path to combined position is a path to the place where nodes were moved.\n\t\tconst combined = Position._createAt( target );\n\t\tcombined.stickiness = this.stickiness;\n\n\t\t// Then we have to update the rest of the path.\n\n\t\t// Fix the offset because this position might be after `from` position and we have to reflect that.\n\t\tcombined.offset = combined.offset + this.path[ i ] - source.offset;\n\n\t\t// Then, add the rest of the path.\n\t\t// If this position is at the same level as `from` position nothing will get added.\n\t\tcombined.path = [ ...combined.path, ...this.path.slice( i + 1 ) ];\n\n\t\treturn combined;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\ttoJSON() {\n\t\treturn {\n\t\t\troot: this.root.toJSON(),\n\t\t\tpath: Array.from( this.path ),\n\t\t\tstickiness: this.stickiness\n\t\t};\n\t}\n\n\t/**\n\t * Returns a new position that is equal to current position.\n\t *\n\t * @returns {module:engine/model/position~Position}\n\t */\n\tclone() {\n\t\treturn new this.constructor( this.root, this.path, this.stickiness );\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/model/position~Position position},\n\t * * parent element and offset (offset defaults to `0`),\n\t * * parent element and `'end'` (sets position at the end of that element),\n\t * * {@link module:engine/model/item~Item model item} and `'before'` or `'after'` (sets position before or after given model item).\n\t *\n\t * This method is a shortcut to other factory methods such as:\n\t *\n\t * * {@link module:engine/model/position~Position._createBefore},\n\t * * {@link module:engine/model/position~Position._createAfter}.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when the\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone'] Position stickiness. Used only when the\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t * @protected\n\t */\n\tstatic _createAt( itemOrPosition, offset, stickiness = 'toNone' ) {\n\t\tif ( itemOrPosition instanceof Position ) {\n\t\t\treturn new Position( itemOrPosition.root, itemOrPosition.path, itemOrPosition.stickiness );\n\t\t} else {\n\t\t\tconst node = itemOrPosition;\n\n\t\t\tif ( offset == 'end' ) {\n\t\t\t\toffset = node.maxOffset;\n\t\t\t} else if ( offset == 'before' ) {\n\t\t\t\treturn this._createBefore( node, stickiness );\n\t\t\t} else if ( offset == 'after' ) {\n\t\t\t\treturn this._createAfter( node, stickiness );\n\t\t\t} else if ( offset !== 0 && !offset ) {\n\t\t\t\t/**\n\t\t\t\t * {@link module:engine/model/model~Model#createPositionAt `Model#createPositionAt()`}\n\t\t\t\t * requires the offset to be specified when the first parameter is a model item.\n\t\t\t\t *\n\t\t\t\t * @error model-createpositionat-offset-required\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'model-createpositionat-offset-required', [ this, itemOrPosition ] );\n\t\t\t}\n\n\t\t\tif ( !node.is( 'element' ) && !node.is( 'documentFragment' ) ) {\n\t\t\t\t/**\n\t\t\t\t * Position parent have to be a model element or model document fragment.\n\t\t\t\t *\n\t\t\t\t * @error model-position-parent-incorrect\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'model-position-parent-incorrect',\n\t\t\t\t\t[ this, itemOrPosition ]\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst path = node.getPath();\n\n\t\t\tpath.push( offset );\n\n\t\t\treturn new this( node.root, path, stickiness );\n\t\t}\n\t}\n\n\t/**\n\t * Creates a new position, after given {@link module:engine/model/item~Item model item}.\n\t *\n\t * @param {module:engine/model/item~Item} item Item after which the position should be placed.\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone'] Position stickiness.\n\t * @returns {module:engine/model/position~Position}\n\t * @protected\n\t */\n\tstatic _createAfter( item, stickiness ) {\n\t\tif ( !item.parent ) {\n\t\t\t/**\n\t\t\t * You can not make a position after a root element.\n\t\t\t *\n\t\t\t * @error model-position-after-root\n\t\t\t * @param {module:engine/model/item~Item} root\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-position-after-root',\n\t\t\t\t[ this, item ],\n\t\t\t\t{ root: item }\n\t\t\t);\n\t\t}\n\n\t\treturn this._createAt( item.parent, item.endOffset, stickiness );\n\t}\n\n\t/**\n\t * Creates a new position, before the given {@link module:engine/model/item~Item model item}.\n\t *\n\t * @param {module:engine/model/item~Item} item Item before which the position should be placed.\n\t * @param {module:engine/model/position~PositionStickiness} [stickiness='toNone'] Position stickiness.\n\t * @returns {module:engine/model/position~Position}\n\t * @protected\n\t */\n\tstatic _createBefore( item, stickiness ) {\n\t\tif ( !item.parent ) {\n\t\t\t/**\n\t\t\t * You can not make a position before a root element.\n\t\t\t *\n\t\t\t * @error model-position-before-root\n\t\t\t * @param {module:engine/model/item~Item} root\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-position-before-root',\n\t\t\t\titem,\n\t\t\t\t{ root: item }\n\t\t\t);\n\t\t}\n\n\t\treturn this._createAt( item.parent, item.startOffset, stickiness );\n\t}\n\n\t/**\n\t * Creates a `Position` instance from given plain object (i.e. parsed JSON string).\n\t *\n\t * @param {Object} json Plain object to be converted to `Position`.\n\t * @param {module:engine/model/document~Document} doc Document object that will be position owner.\n\t * @returns {module:engine/model/position~Position} `Position` instance created using given plain object.\n\t */\n\tstatic fromJSON( json, doc ) {\n\t\tif ( json.root === '$graveyard' ) {\n\t\t\tconst pos = new Position( doc.graveyard, json.path );\n\t\t\tpos.stickiness = json.stickiness;\n\n\t\t\treturn pos;\n\t\t}\n\n\t\tif ( !doc.getRoot( json.root ) ) {\n\t\t\t/**\n\t\t\t * Cannot create position for document. Root with specified name does not exist.\n\t\t\t *\n\t\t\t * @error model-position-fromjson-no-root\n\t\t\t * @param {String} rootName\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'model-position-fromjson-no-root',\n\t\t\t\tdoc,\n\t\t\t\t{ rootName: json.root }\n\t\t\t);\n\t\t}\n\n\t\treturn new Position( doc.getRoot( json.root ), json.path, json.stickiness );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `${ this.root } [ ${ this.path.join( ', ' ) } ]`;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ModelPosition: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n}\n\n/**\n * A flag indicating whether this position is `'before'` or `'after'` or `'same'` as given position.\n * If positions are in different roots `'different'` flag is returned.\n *\n * @typedef {String} module:engine/model/position~PositionRelation\n */\n\n/**\n * Represents how position is \"sticking\" with neighbour nodes. Used to define how position should be transformed (moved)\n * in edge cases. Possible values: `'toNone'`, `'toNext'`, `'toPrevious'`.\n *\n * Examples:\n *\n *\t\tInsert. Position is at | and nodes are inserted at the same position, marked as ^:\n *\n *\t\t- sticks to none:           <p>f^|oo</p>  ->  <p>fbar|oo</p>\n *\t\t- sticks to next node:      <p>f^|oo</p>  ->  <p>fbar|oo</p>\n *\t\t- sticks to previous node:  <p>f|^oo</p>  ->  <p>f|baroo</p>\n *\n *\n *\t\tMove. Position is at | and range [oo] is moved to position ^:\n *\n *\t\t- sticks to none:           <p>f|[oo]</p><p>b^ar</p>  ->  <p>f|</p><p>booar</p>\n *\t\t- sticks to none:           <p>f[oo]|</p><p>b^ar</p>  ->  <p>f|</p><p>booar</p>\n *\n *\t\t- sticks to next node:      <p>f|[oo]</p><p>b^ar</p>  ->  <p>f</p><p>b|ooar</p>\n *\t\t- sticks to next node:      <p>f[oo]|</p><p>b^ar</p>  ->  <p>f|</p><p>booar</p>\n *\n *\t\t- sticks to previous node:  <p>f|[oo]</p><p>b^ar</p>  ->  <p>f|</p><p>booar</p>\n *\t\t- sticks to previous node:  <p>f[oo]|</p><p>b^ar</p>  ->  <p>f</p><p>boo|ar</p>\n *\n * @typedef {String} module:engine/model/position~PositionStickiness\n */\n\n/**\n * Returns a text node at the given position.\n *\n * This is a helper function optimized to reuse the position parent instance for performance reasons.\n *\n * Normally, you should use {@link module:engine/model/position~Position#textNode `Position#textNode`}.\n * If you start hitting performance issues with {@link module:engine/model/position~Position#parent `Position#parent`}\n * check if your algorithm does not access it multiple times (which can happen directly or indirectly via other position properties).\n *\n * See https://github.com/ckeditor/ckeditor5/issues/6579.\n *\n * See also:\n *\n * * {@link module:engine/model/position~getNodeAfterPosition}\n * * {@link module:engine/model/position~getNodeBeforePosition}\n *\n * @param {module:engine/model/position~Position} position\n * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} positionParent The parent of the\n * given position.\n * @returns {module:engine/model/text~Text|null}\n */\nexport function getTextNodeAtPosition( position, positionParent ) {\n\tconst node = positionParent.getChild( positionParent.offsetToIndex( position.offset ) );\n\n\tif ( node && node.is( '$text' ) && node.startOffset < position.offset ) {\n\t\treturn node;\n\t}\n\n\treturn null;\n}\n\n/**\n * Returns the node after the given position.\n *\n * This is a helper function optimized to reuse the position parent instance and the calculation of the text node at the\n * specific position for performance reasons.\n *\n * Normally, you should use {@link module:engine/model/position~Position#nodeAfter `Position#nodeAfter`}.\n * If you start hitting performance issues with {@link module:engine/model/position~Position#parent `Position#parent`} and/or\n * {@link module:engine/model/position~Position#textNode `Position#textNode`}\n * check if your algorithm does not access those properties multiple times\n * (which can happen directly or indirectly via other position properties).\n *\n * See https://github.com/ckeditor/ckeditor5/issues/6579 and https://github.com/ckeditor/ckeditor5/issues/6582.\n *\n * See also:\n *\n * * {@link module:engine/model/position~getTextNodeAtPosition}\n * * {@link module:engine/model/position~getNodeBeforePosition}\n *\n * @param {module:engine/model/position~Position} position\n * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} positionParent The parent of the\n * given position.\n * @param {module:engine/model/text~Text|null} textNode Text node at the given position.\n * @returns {module:engine/model/node~Node|null}\n */\nexport function getNodeAfterPosition( position, positionParent, textNode ) {\n\tif ( textNode !== null ) {\n\t\treturn null;\n\t}\n\n\treturn positionParent.getChild( positionParent.offsetToIndex( position.offset ) );\n}\n\n/**\n * Returns the node before the given position.\n *\n * Refer to {@link module:engine/model/position~getNodeBeforePosition} for documentation on when to use this util method.\n *\n * See also:\n *\n * * {@link module:engine/model/position~getTextNodeAtPosition}\n * * {@link module:engine/model/position~getNodeAfterPosition}\n *\n * @param {module:engine/model/position~Position} position\n * @param {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment} positionParent The parent of the\n * given position.\n * @param {module:engine/model/text~Text|null} textNode Text node at the given position.\n * @returns {module:engine/model/node~Node|null}\n */\nexport function getNodeBeforePosition( position, positionParent, textNode ) {\n\tif ( textNode !== null ) {\n\t\treturn null;\n\t}\n\n\treturn positionParent.getChild( positionParent.offsetToIndex( position.offset ) - 1 );\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/range\n */\n\nimport Position from './position';\nimport TreeWalker from './treewalker';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\n\n/**\n * Represents a range in the model tree.\n *\n * A range is defined by its {@link module:engine/model/range~Range#start} and {@link module:engine/model/range~Range#end}\n * positions.\n *\n * You can create range instances via its constructor or the `createRange*()` factory methods of\n * {@link module:engine/model/model~Model} and {@link module:engine/model/writer~Writer}.\n */\nexport default class Range {\n\t/**\n\t * Creates a range spanning from `start` position to `end` position.\n\t *\n\t * @param {module:engine/model/position~Position} start Start position.\n\t * @param {module:engine/model/position~Position} [end] End position. If not set, range will be collapsed at `start` position.\n\t */\n\tconstructor( start, end = null ) {\n\t\t/**\n\t\t * Start position.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/position~Position}\n\t\t */\n\t\tthis.start = Position._createAt( start );\n\n\t\t/**\n\t\t * End position.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/model/position~Position}\n\t\t */\n\t\tthis.end = end ? Position._createAt( end ) : Position._createAt( start );\n\n\t\t// If the range is collapsed, treat in a similar way as a position and set its boundaries stickiness to 'toNone'.\n\t\t// In other case, make the boundaries stick to the \"inside\" of the range.\n\t\tthis.start.stickiness = this.isCollapsed ? 'toNone' : 'toNext';\n\t\tthis.end.stickiness = this.isCollapsed ? 'toNone' : 'toPrevious';\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Iterates over all {@link module:engine/model/item~Item items} that are in this range and returns\n\t * them together with additional information like length or {@link module:engine/model/position~Position positions},\n\t * grouped as {@link module:engine/model/treewalker~TreeWalkerValue}.\n\t * It iterates over all {@link module:engine/model/textproxy~TextProxy text contents} that are inside the range\n\t * and all the {@link module:engine/model/element~Element}s that are entered into when iterating over this range.\n\t *\n\t * This iterator uses {@link module:engine/model/treewalker~TreeWalker} with `boundaries` set to this range\n\t * and `ignoreElementEnd` option set to `true`.\n\t *\n\t * @returns {Iterable.<module:engine/model/treewalker~TreeWalkerValue>}\n\t */\n\t* [ Symbol.iterator ]() {\n\t\tyield* new TreeWalker( { boundaries: this, ignoreElementEnd: true } );\n\t}\n\n\t/**\n\t * Returns whether the range is collapsed, that is if {@link #start} and\n\t * {@link #end} positions are equal.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\treturn this.start.isEqual( this.end );\n\t}\n\n\t/**\n\t * Returns whether this range is flat, that is if {@link #start} position and\n\t * {@link #end} position are in the same {@link module:engine/model/position~Position#parent}.\n\t *\n\t * @type {Boolean}\n\t */\n\tget isFlat() {\n\t\tconst startParentPath = this.start.getParentPath();\n\t\tconst endParentPath = this.end.getParentPath();\n\n\t\treturn compareArrays( startParentPath, endParentPath ) == 'same';\n\t}\n\n\t/**\n\t * Range root element.\n\t *\n\t * @type {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this.start.root;\n\t}\n\n\t/**\n\t * Checks whether this range contains given {@link module:engine/model/position~Position position}.\n\t *\n\t * @param {module:engine/model/position~Position} position Position to check.\n\t * @returns {Boolean} `true` if given {@link module:engine/model/position~Position position} is contained\n\t * in this range,`false` otherwise.\n\t */\n\tcontainsPosition( position ) {\n\t\treturn position.isAfter( this.start ) && position.isBefore( this.end );\n\t}\n\n\t/**\n\t * Checks whether this range contains given {@link ~Range range}.\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to check.\n\t * @param {Boolean} [loose=false] Whether the check is loose or strict. If the check is strict (`false`), compared range cannot\n\t * start or end at the same position as this range boundaries. If the check is loose (`true`), compared range can start, end or\n\t * even be equal to this range. Note that collapsed ranges are always compared in strict mode.\n\t * @returns {Boolean} `true` if given {@link ~Range range} boundaries are contained by this range, `false` otherwise.\n\t */\n\tcontainsRange( otherRange, loose = false ) {\n\t\tif ( otherRange.isCollapsed ) {\n\t\t\tloose = false;\n\t\t}\n\n\t\tconst containsStart = this.containsPosition( otherRange.start ) || ( loose && this.start.isEqual( otherRange.start ) );\n\t\tconst containsEnd = this.containsPosition( otherRange.end ) || ( loose && this.end.isEqual( otherRange.end ) );\n\n\t\treturn containsStart && containsEnd;\n\t}\n\n\t/**\n\t * Checks whether given {@link module:engine/model/item~Item} is inside this range.\n\t *\n\t * @param {module:engine/model/item~Item} item Model item to check.\n\t */\n\tcontainsItem( item ) {\n\t\tconst pos = Position._createBefore( item );\n\n\t\treturn this.containsPosition( pos ) || this.start.isEqual( pos );\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\trange.is( 'range' ); // -> true\n\t *\t\trange.is( 'model:range' ); // -> true\n\t *\n\t *\t\trange.is( 'view:range' ); // -> false\n\t *\t\trange.is( 'documentSelection' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'range' || type === 'model:range';\n\t}\n\n\t/**\n\t * Two ranges are equal if their {@link #start} and {@link #end} positions are equal.\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to compare with.\n\t * @returns {Boolean} `true` if ranges are equal, `false` otherwise.\n\t */\n\tisEqual( otherRange ) {\n\t\treturn this.start.isEqual( otherRange.start ) && this.end.isEqual( otherRange.end );\n\t}\n\n\t/**\n\t * Checks and returns whether this range intersects with given range.\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to compare with.\n\t * @returns {Boolean} `true` if ranges intersect, `false` otherwise.\n\t */\n\tisIntersecting( otherRange ) {\n\t\treturn this.start.isBefore( otherRange.end ) && this.end.isAfter( otherRange.start );\n\t}\n\n\t/**\n\t * Computes which part(s) of this {@link ~Range range} is not a part of given {@link ~Range range}.\n\t * Returned array contains zero, one or two {@link ~Range ranges}.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet range = model.createRange(\n\t *\t\t\tmodel.createPositionFromPath( root, [ 2, 7 ] ),\n\t *\t\t\tmodel.createPositionFromPath( root, [ 4, 0, 1 ] )\n\t *\t\t);\n\t *\t\tlet otherRange = model.createRange( model.createPositionFromPath( root, [ 1 ] ), model.createPositionFromPath( root, [ 5 ] ) );\n\t *\t\tlet transformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has no ranges because `otherRange` contains `range`\n\t *\n\t *\t\totherRange = model.createRange( model.createPositionFromPath( root, [ 1 ] ), model.createPositionFromPath( root, [ 3 ] ) );\n\t *\t\ttransformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has one range: from [ 3 ] to [ 4, 0, 1 ]\n\t *\n\t *\t\totherRange = model.createRange( model.createPositionFromPath( root, [ 3 ] ), model.createPositionFromPath( root, [ 4 ] ) );\n\t *\t\ttransformed = range.getDifference( otherRange );\n\t *\t\t// transformed array has two ranges: from [ 2, 7 ] to [ 3 ] and from [ 4 ] to [ 4, 0, 1 ]\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to differentiate against.\n\t * @returns {Array.<module:engine/model/range~Range>} The difference between ranges.\n\t */\n\tgetDifference( otherRange ) {\n\t\tconst ranges = [];\n\n\t\tif ( this.isIntersecting( otherRange ) ) {\n\t\t\t// Ranges intersect.\n\n\t\t\tif ( this.containsPosition( otherRange.start ) ) {\n\t\t\t\t// Given range start is inside this range. This means that we have to\n\t\t\t\t// add shrunken range - from the start to the middle of this range.\n\t\t\t\tranges.push( new Range( this.start, otherRange.start ) );\n\t\t\t}\n\n\t\t\tif ( this.containsPosition( otherRange.end ) ) {\n\t\t\t\t// Given range end is inside this range. This means that we have to\n\t\t\t\t// add shrunken range - from the middle of this range to the end.\n\t\t\t\tranges.push( new Range( otherRange.end, this.end ) );\n\t\t\t}\n\t\t} else {\n\t\t\t// Ranges do not intersect, return the original range.\n\t\t\tranges.push( new Range( this.start, this.end ) );\n\t\t}\n\n\t\treturn ranges;\n\t}\n\n\t/**\n\t * Returns an intersection of this {@link ~Range range} and given {@link ~Range range}.\n\t * Intersection is a common part of both of those ranges. If ranges has no common part, returns `null`.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet range = model.createRange(\n\t *\t\t\tmodel.createPositionFromPath( root, [ 2, 7 ] ),\n\t *\t\t\tmodel.createPositionFromPath( root, [ 4, 0, 1 ] )\n\t *\t\t);\n\t *\t\tlet otherRange = model.createRange( model.createPositionFromPath( root, [ 1 ] ), model.createPositionFromPath( root, [ 2 ] ) );\n\t *\t\tlet transformed = range.getIntersection( otherRange ); // null - ranges have no common part\n\t *\n\t *\t\totherRange = model.createRange( model.createPositionFromPath( root, [ 3 ] ), model.createPositionFromPath( root, [ 5 ] ) );\n\t *\t\ttransformed = range.getIntersection( otherRange ); // range from [ 3 ] to [ 4, 0, 1 ]\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to check for intersection.\n\t * @returns {module:engine/model/range~Range|null} A common part of given ranges or `null` if ranges have no common part.\n\t */\n\tgetIntersection( otherRange ) {\n\t\tif ( this.isIntersecting( otherRange ) ) {\n\t\t\t// Ranges intersect, so a common range will be returned.\n\t\t\t// At most, it will be same as this range.\n\t\t\tlet commonRangeStart = this.start;\n\t\t\tlet commonRangeEnd = this.end;\n\n\t\t\tif ( this.containsPosition( otherRange.start ) ) {\n\t\t\t\t// Given range start is inside this range. This means thaNt we have to\n\t\t\t\t// shrink common range to the given range start.\n\t\t\t\tcommonRangeStart = otherRange.start;\n\t\t\t}\n\n\t\t\tif ( this.containsPosition( otherRange.end ) ) {\n\t\t\t\t// Given range end is inside this range. This means that we have to\n\t\t\t\t// shrink common range to the given range end.\n\t\t\t\tcommonRangeEnd = otherRange.end;\n\t\t\t}\n\n\t\t\treturn new Range( commonRangeStart, commonRangeEnd );\n\t\t}\n\n\t\t// Ranges do not intersect, so they do not have common part.\n\t\treturn null;\n\t}\n\n\t/**\n\t * Returns a range created by joining this {@link ~Range range} with the given {@link ~Range range}.\n\t * If ranges have no common part, returns `null`.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet range = model.createRange(\n\t *\t\t\tmodel.createPositionFromPath( root, [ 2, 7 ] ),\n\t *\t\t\tmodel.createPositionFromPath( root, [ 4, 0, 1 ] )\n\t *\t\t);\n\t *\t\tlet otherRange = model.createRange(\n\t *\t\t\tmodel.createPositionFromPath( root, [ 1 ] ),\n\t *\t\t\tmodel.createPositionFromPath( root, [ 2 ] )\n \t *\t\t);\n\t *\t\tlet transformed = range.getJoined( otherRange ); // null - ranges have no common part\n\t *\n\t *\t\totherRange = model.createRange(\n\t *\t\t\tmodel.createPositionFromPath( root, [ 3 ] ),\n\t *\t\t\tmodel.createPositionFromPath( root, [ 5 ] )\n\t *\t\t);\n\t *\t\ttransformed = range.getJoined( otherRange ); // range from [ 2, 7 ] to [ 5 ]\n\t *\n\t * @param {module:engine/model/range~Range} otherRange Range to be joined.\n\t * @param {Boolean} [loose=false] Whether the intersection check is loose or strict. If the check is strict (`false`),\n\t * ranges are tested for intersection or whether start/end positions are equal. If the check is loose (`true`),\n\t * compared range is also checked if it's {@link module:engine/model/position~Position#isTouching touching} current range.\n\t * @returns {module:engine/model/range~Range|null} A sum of given ranges or `null` if ranges have no common part.\n\t */\n\tgetJoined( otherRange, loose = false ) {\n\t\tlet shouldJoin = this.isIntersecting( otherRange );\n\n\t\tif ( !shouldJoin ) {\n\t\t\tif ( this.start.isBefore( otherRange.start ) ) {\n\t\t\t\tshouldJoin = loose ? this.end.isTouching( otherRange.start ) : this.end.isEqual( otherRange.start );\n\t\t\t} else {\n\t\t\t\tshouldJoin = loose ? otherRange.end.isTouching( this.start ) : otherRange.end.isEqual( this.start );\n\t\t\t}\n\t\t}\n\n\t\tif ( !shouldJoin ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet startPosition = this.start;\n\t\tlet endPosition = this.end;\n\n\t\tif ( otherRange.start.isBefore( startPosition ) ) {\n\t\t\tstartPosition = otherRange.start;\n\t\t}\n\n\t\tif ( otherRange.end.isAfter( endPosition ) ) {\n\t\t\tendPosition = otherRange.end;\n\t\t}\n\n\t\treturn new Range( startPosition, endPosition );\n\t}\n\n\t/**\n\t * Computes and returns the smallest set of {@link #isFlat flat} ranges, that covers this range in whole.\n\t *\n\t * See an example of a model structure (`[` and `]` are range boundaries):\n\t *\n\t *\t\troot                                                            root\n\t *\t\t |- element DIV                         DIV             P2              P3             DIV\n\t *\t\t |   |- element H                   H        P1        f o o           b a r       H         P4\n\t *\t\t |   |   |- \"fir[st\"             fir[st     lorem                               se]cond     ipsum\n\t *\t\t |   |- element P1\n\t *\t\t |   |   |- \"lorem\"                                              ||\n\t *\t\t |- element P2                                                   ||\n\t *\t\t |   |- \"foo\"                                                    VV\n\t *\t\t |- element P3\n\t *\t\t |   |- \"bar\"                                                   root\n\t *\t\t |- element DIV                         DIV             [P2             P3]             DIV\n\t *\t\t |   |- element H                   H       [P1]       f o o           b a r        H         P4\n\t *\t\t |   |   |- \"se]cond\"            fir[st]    lorem                               [se]cond     ipsum\n\t *\t\t |   |- element P4\n\t *\t\t |   |   |- \"ipsum\"\n\t *\n\t * As it can be seen, letters contained in the range are: `stloremfoobarse`, spread across different parents.\n\t * We are looking for minimal set of flat ranges that contains the same nodes.\n\t *\n\t * Minimal flat ranges for above range `( [ 0, 0, 3 ], [ 3, 0, 2 ] )` will be:\n\t *\n\t *\t\t( [ 0, 0, 3 ], [ 0, 0, 5 ] ) = \"st\"\n\t *\t\t( [ 0, 1 ], [ 0, 2 ] ) = element P1 (\"lorem\")\n\t *\t\t( [ 1 ], [ 3 ] ) = element P2, element P3 (\"foobar\")\n\t *\t\t( [ 3, 0, 0 ], [ 3, 0, 2 ] ) = \"se\"\n\t *\n\t * **Note:** if an {@link module:engine/model/element~Element element} is not wholly contained in this range, it won't be returned\n\t * in any of the returned flat ranges. See in the example how `H` elements at the beginning and at the end of the range\n\t * were omitted. Only their parts that were wholly in the range were returned.\n\t *\n\t * **Note:** this method is not returning flat ranges that contain no nodes.\n\t *\n\t * @returns {Array.<module:engine/model/range~Range>} Array of flat ranges covering this range.\n\t */\n\tgetMinimalFlatRanges() {\n\t\tconst ranges = [];\n\t\tconst diffAt = this.start.getCommonPath( this.end ).length;\n\n\t\tconst pos = Position._createAt( this.start );\n\t\tlet posParent = pos.parent;\n\n\t\t// Go up.\n\t\twhile ( pos.path.length > diffAt + 1 ) {\n\t\t\tconst howMany = posParent.maxOffset - pos.offset;\n\n\t\t\tif ( howMany !== 0 ) {\n\t\t\t\tranges.push( new Range( pos, pos.getShiftedBy( howMany ) ) );\n\t\t\t}\n\n\t\t\tpos.path = pos.path.slice( 0, -1 );\n\t\t\tpos.offset++;\n\t\t\tposParent = posParent.parent;\n\t\t}\n\n\t\t// Go down.\n\t\twhile ( pos.path.length <= this.end.path.length ) {\n\t\t\tconst offset = this.end.path[ pos.path.length - 1 ];\n\t\t\tconst howMany = offset - pos.offset;\n\n\t\t\tif ( howMany !== 0 ) {\n\t\t\t\tranges.push( new Range( pos, pos.getShiftedBy( howMany ) ) );\n\t\t\t}\n\n\t\t\tpos.offset = offset;\n\t\t\tpos.path.push( 0 );\n\t\t}\n\n\t\treturn ranges;\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/model/treewalker~TreeWalker TreeWalker} instance with this range as a boundary.\n\t *\n\t * For example, to iterate over all items in the entire document root:\n\t *\n\t *\t\t// Create a range spanning over the entire root content:\n\t *\t\tconst range = editor.model.createRangeIn( editor.model.document.getRoot() );\n\t *\n\t *\t\t// Iterate over all items in this range:\n\t *\t\tfor ( const value of range.getWalker() ) {\n\t *\t\t\tconsole.log( value.item );\n\t *\t\t}\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/model/treewalker~TreeWalker}.\n\t * @param {module:engine/model/position~Position} [options.startPosition]\n\t * @param {Boolean} [options.singleCharacters=false]\n\t * @param {Boolean} [options.shallow=false]\n\t * @param {Boolean} [options.ignoreElementEnd=false]\n\t */\n\tgetWalker( options = {} ) {\n\t\toptions.boundaries = this;\n\n\t\treturn new TreeWalker( options );\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all {@link module:engine/model/item~Item items} that are in this range and returns\n\t * them.\n\t *\n\t * This method uses {@link module:engine/model/treewalker~TreeWalker} with `boundaries` set to this range and `ignoreElementEnd` option\n\t * set to `true`. However it returns only {@link module:engine/model/item~Item model items},\n\t * not {@link module:engine/model/treewalker~TreeWalkerValue}.\n\t *\n\t * You may specify additional options for the tree walker. See {@link module:engine/model/treewalker~TreeWalker} for\n\t * a full list of available options.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/model/treewalker~TreeWalker}.\n\t * @returns {Iterable.<module:engine/model/item~Item>}\n\t */\n\t* getItems( options = {} ) {\n\t\toptions.boundaries = this;\n\t\toptions.ignoreElementEnd = true;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\n\t\tfor ( const value of treeWalker ) {\n\t\t\tyield value.item;\n\t\t}\n\t}\n\n\t/**\n\t * Returns an iterator that iterates over all {@link module:engine/model/position~Position positions} that are boundaries or\n\t * contained in this range.\n\t *\n\t * This method uses {@link module:engine/model/treewalker~TreeWalker} with `boundaries` set to this range. However it returns only\n\t * {@link module:engine/model/position~Position positions}, not {@link module:engine/model/treewalker~TreeWalkerValue}.\n\t *\n\t * You may specify additional options for the tree walker. See {@link module:engine/model/treewalker~TreeWalker} for\n\t * a full list of available options.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/model/treewalker~TreeWalker}.\n\t * @returns {Iterable.<module:engine/model/position~Position>}\n\t */\n\t* getPositions( options = {} ) {\n\t\toptions.boundaries = this;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\n\t\tyield treeWalker.position;\n\n\t\tfor ( const value of treeWalker ) {\n\t\t\tyield value.nextPosition;\n\t\t}\n\t}\n\n\t/**\n\t * Returns a range that is a result of transforming this range by given `operation`.\n\t *\n\t * **Note:** transformation may break one range into multiple ranges (for example, when a part of the range is\n\t * moved to a different part of document tree). For this reason, an array is returned by this method and it\n\t * may contain one or more `Range` instances.\n\t *\n\t * @param {module:engine/model/operation/operation~Operation} operation Operation to transform range by.\n\t * @returns {Array.<module:engine/model/range~Range>} Range which is the result of transformation.\n\t */\n\tgetTransformedByOperation( operation ) {\n\t\tswitch ( operation.type ) {\n\t\t\tcase 'insert':\n\t\t\t\treturn this._getTransformedByInsertOperation( operation );\n\t\t\tcase 'move':\n\t\t\tcase 'remove':\n\t\t\tcase 'reinsert':\n\t\t\t\treturn this._getTransformedByMoveOperation( operation );\n\t\t\tcase 'split':\n\t\t\t\treturn [ this._getTransformedBySplitOperation( operation ) ];\n\t\t\tcase 'merge':\n\t\t\t\treturn [ this._getTransformedByMergeOperation( operation ) ];\n\t\t}\n\n\t\treturn [ new Range( this.start, this.end ) ];\n\t}\n\n\t/**\n\t * Returns a range that is a result of transforming this range by multiple `operations`.\n\t *\n\t * @see ~Range#getTransformedByOperation\n\t * @param {Iterable.<module:engine/model/operation/operation~Operation>} operations Operations to transform the range by.\n\t * @returns {Array.<module:engine/model/range~Range>} Range which is the result of transformation.\n\t */\n\tgetTransformedByOperations( operations ) {\n\t\tconst ranges = [ new Range( this.start, this.end ) ];\n\n\t\tfor ( const operation of operations ) {\n\t\t\tfor ( let i = 0; i < ranges.length; i++ ) {\n\t\t\t\tconst result = ranges[ i ].getTransformedByOperation( operation );\n\n\t\t\t\tranges.splice( i, 1, ...result );\n\t\t\t\ti += result.length - 1;\n\t\t\t}\n\t\t}\n\n\t\t// It may happen that a range is split into two, and then the part of second \"piece\" is moved into first\n\t\t// \"piece\". In this case we will have incorrect third range, which should not be included in the result --\n\t\t// because it is already included in the first \"piece\". In this loop we are looking for all such ranges that\n\t\t// are inside other ranges and we simply remove them.\n\t\tfor ( let i = 0; i < ranges.length; i++ ) {\n\t\t\tconst range = ranges[ i ];\n\n\t\t\tfor ( let j = i + 1; j < ranges.length; j++ ) {\n\t\t\t\tconst next = ranges[ j ];\n\n\t\t\t\tif ( range.containsRange( next ) || next.containsRange( range ) || range.isEqual( next ) ) {\n\t\t\t\t\tranges.splice( j, 1 );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn ranges;\n\t}\n\n\t/**\n\t * Returns an {@link module:engine/model/element~Element} or {@link module:engine/model/documentfragment~DocumentFragment}\n\t * which is a common ancestor of the range's both ends (in which the entire range is contained).\n\t *\n\t * @returns {module:engine/model/element~Element|module:engine/model/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor() {\n\t\treturn this.start.getCommonAncestor( this.end );\n\t}\n\n\t/**\n\t * Returns an {@link module:engine/model/element~Element Element} contained by the range.\n\t * The element will be returned when it is the **only** node within the range and **fullycontained**\n\t * at the same time.\n\t *\n\t * @returns {module:engine/model/element~Element|null}\n\t */\n\tgetContainedElement() {\n\t\tif ( this.isCollapsed ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst nodeAfterStart = this.start.nodeAfter;\n\t\tconst nodeBeforeEnd = this.end.nodeBefore;\n\n\t\tif ( nodeAfterStart && nodeAfterStart.is( 'element' ) && nodeAfterStart === nodeBeforeEnd ) {\n\t\t\treturn nodeAfterStart;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Converts `Range` to plain object and returns it.\n\t *\n\t * @returns {Object} `Node` converted to plain object.\n\t */\n\ttoJSON() {\n\t\treturn {\n\t\t\tstart: this.start.toJSON(),\n\t\t\tend: this.end.toJSON()\n\t\t};\n\t}\n\n\t/**\n\t * Returns a new range that is equal to current range.\n\t *\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tclone() {\n\t\treturn new this.constructor( this.start, this.end );\n\t}\n\n\t/**\n\t * Returns a result of transforming a copy of this range by insert operation.\n\t *\n\t * One or more ranges may be returned as a result of this transformation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/insertoperation~InsertOperation} operation\n\t * @returns {Array.<module:engine/model/range~Range>}\n\t */\n\t_getTransformedByInsertOperation( operation, spread = false ) {\n\t\treturn this._getTransformedByInsertion( operation.position, operation.howMany, spread );\n\t}\n\n\t/**\n\t * Returns a result of transforming a copy of this range by move operation.\n\t *\n\t * One or more ranges may be returned as a result of this transformation.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/moveoperation~MoveOperation} operation\n\t * @returns {Array.<module:engine/model/range~Range>}\n\t */\n\t_getTransformedByMoveOperation( operation, spread = false ) {\n\t\tconst sourcePosition = operation.sourcePosition;\n\t\tconst howMany = operation.howMany;\n\t\tconst targetPosition = operation.targetPosition;\n\n\t\treturn this._getTransformedByMove( sourcePosition, targetPosition, howMany, spread );\n\t}\n\n\t/**\n\t * Returns a result of transforming a copy of this range by split operation.\n\t *\n\t * Always one range is returned. The transformation is done in a way to not break the range.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/splitoperation~SplitOperation} operation\n\t * @returns {module:engine/model/range~Range}\n\t */\n\t_getTransformedBySplitOperation( operation ) {\n\t\tconst start = this.start._getTransformedBySplitOperation( operation );\n\t\tlet end = this.end._getTransformedBySplitOperation( operation );\n\n\t\tif ( this.end.isEqual( operation.insertionPosition ) ) {\n\t\t\tend = this.end.getShiftedBy( 1 );\n\t\t}\n\n\t\t// Below may happen when range contains graveyard element used by split operation.\n\t\tif ( start.root != end.root ) {\n\t\t\t// End position was next to the moved graveyard element and was moved with it.\n\t\t\t// Fix it by using old `end` which has proper `root`.\n\t\t\tend = this.end.getShiftedBy( -1 );\n\t\t}\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Returns a result of transforming a copy of this range by merge operation.\n\t *\n\t * Always one range is returned. The transformation is done in a way to not break the range.\n\t *\n\t * @protected\n\t * @param {module:engine/model/operation/mergeoperation~MergeOperation} operation\n\t * @returns {module:engine/model/range~Range}\n\t */\n\t_getTransformedByMergeOperation( operation ) {\n\t\t// Special case when the marker is set on \"the closing tag\" of an element. Marker can be set like that during\n\t\t// transformations, especially when a content of a few block elements were removed. For example:\n\t\t//\n\t\t// {} is the transformed range, [] is the removed range.\n\t\t// <p>F[o{o</p><p>B}ar</p><p>Xy]z</p>\n\t\t//\n\t\t// <p>Fo{o</p><p>B}ar</p><p>z</p>\n\t\t// <p>F{</p><p>B}ar</p><p>z</p>\n\t\t// <p>F{</p>}<p>z</p>\n\t\t// <p>F{}z</p>\n\t\t//\n\t\tif ( this.start.isEqual( operation.targetPosition ) && this.end.isEqual( operation.deletionPosition ) ) {\n\t\t\treturn new Range( this.start );\n\t\t}\n\n\t\tlet start = this.start._getTransformedByMergeOperation( operation );\n\t\tlet end = this.end._getTransformedByMergeOperation( operation );\n\n\t\tif ( start.root != end.root ) {\n\t\t\t// This happens when the end position was next to the merged (deleted) element.\n\t\t\t// Then, the end position was moved to the graveyard root. In this case we need to fix\n\t\t\t// the range cause its boundaries would be in different roots.\n\t\t\tend = this.end.getShiftedBy( -1 );\n\t\t}\n\n\t\tif ( start.isAfter( end ) ) {\n\t\t\t// This happens in three following cases:\n\t\t\t//\n\t\t\t// Case 1: Merge operation source position is before the target position (due to some transformations, OT, etc.)\n\t\t\t//         This means that start can be moved before the end of the range.\n\t\t\t//\n\t\t\t// Before: <p>a{a</p><p>b}b</p><p>cc</p>\n\t\t\t// Merge:  <p>b}b</p><p>cca{a</p>\n\t\t\t// Fix:    <p>{b}b</p><p>ccaa</p>\n\t\t\t//\n\t\t\t// Case 2: Range start is before merged node but not directly.\n\t\t\t//         Result should include all nodes that were in the original range.\n\t\t\t//\n\t\t\t// Before: <p>aa</p>{<p>cc</p><p>b}b</p>\n\t\t\t// Merge:  <p>aab}b</p>{<p>cc</p>\n\t\t\t// Fix:    <p>aa{bb</p><p>cc</p>}\n\t\t\t//\n\t\t\t//         The range is expanded by an additional `b` letter but it is better than dropping the whole `cc` paragraph.\n\t\t\t//\n\t\t\t// Case 3: Range start is directly before merged node.\n\t\t\t//         Resulting range should include only nodes from the merged element:\n\t\t\t//\n\t\t\t// Before: <p>aa</p>{<p>b}b</p><p>cc</p>\n\t\t\t// Merge:  <p>aab}b</p>{<p>cc</p>\n\t\t\t// Fix:    <p>aa{b}b</p><p>cc</p>\n\t\t\t//\n\n\t\t\tif ( operation.sourcePosition.isBefore( operation.targetPosition ) ) {\n\t\t\t\t// Case 1.\n\t\t\t\tstart = Position._createAt( end );\n\t\t\t\tstart.offset = 0;\n\t\t\t} else {\n\t\t\t\tif ( !operation.deletionPosition.isEqual( start ) ) {\n\t\t\t\t\t// Case 2.\n\t\t\t\t\tend = operation.deletionPosition;\n\t\t\t\t}\n\n\t\t\t\t// In both case 2 and 3 start is at the end of the merge-to element.\n\t\t\t\tstart = operation.targetPosition;\n\t\t\t}\n\n\t\t\treturn new Range( start, end );\n\t\t}\n\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Returns an array containing one or two {@link ~Range ranges} that are a result of transforming this\n\t * {@link ~Range range} by inserting `howMany` nodes at `insertPosition`. Two {@link ~Range ranges} are\n\t * returned if the insertion was inside this {@link ~Range range} and `spread` is set to `true`.\n\t *\n\t * Examples:\n\t *\n\t *\t\tlet range = model.createRange(\n\t *\t\t\tmodel.createPositionFromPath( root, [ 2, 7 ] ),\n\t *\t\t\tmodel.createPositionFromPath( root, [ 4, 0, 1 ] )\n\t *\t\t);\n\t *\t\tlet transformed = range._getTransformedByInsertion( model.createPositionFromPath( root, [ 1 ] ), 2 );\n\t *\t\t// transformed array has one range from [ 4, 7 ] to [ 6, 0, 1 ]\n\t *\n\t *\t\ttransformed = range._getTransformedByInsertion( model.createPositionFromPath( root, [ 4, 0, 0 ] ), 4 );\n\t *\t\t// transformed array has one range from [ 2, 7 ] to [ 4, 0, 5 ]\n\t *\n\t *\t\ttransformed = range._getTransformedByInsertion( model.createPositionFromPath( root, [ 3, 2 ] ), 4 );\n\t *\t\t// transformed array has one range, which is equal to original range\n\t *\n\t *\t\ttransformed = range._getTransformedByInsertion( model.createPositionFromPath( root, [ 3, 2 ] ), 4, true );\n\t *\t\t// transformed array has two ranges: from [ 2, 7 ] to [ 3, 2 ] and from [ 3, 6 ] to [ 4, 0, 1 ]\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} insertPosition Position where nodes are inserted.\n\t * @param {Number} howMany How many nodes are inserted.\n\t * @param {Boolean} [spread] Flag indicating whether this {~Range range} should be spread if insertion\n\t * was inside the range. Defaults to `false`.\n\t * @returns {Array.<module:engine/model/range~Range>} Result of the transformation.\n\t */\n\t_getTransformedByInsertion( insertPosition, howMany, spread = false ) {\n\t\tif ( spread && this.containsPosition( insertPosition ) ) {\n\t\t\t// Range has to be spread. The first part is from original start to the spread point.\n\t\t\t// The other part is from spread point to the original end, but transformed by\n\t\t\t// insertion to reflect insertion changes.\n\n\t\t\treturn [\n\t\t\t\tnew Range( this.start, insertPosition ),\n\t\t\t\tnew Range(\n\t\t\t\t\tinsertPosition.getShiftedBy( howMany ),\n\t\t\t\t\tthis.end._getTransformedByInsertion( insertPosition, howMany )\n\t\t\t\t)\n\t\t\t];\n\t\t} else {\n\t\t\tconst range = new Range( this.start, this.end );\n\n\t\t\trange.start = range.start._getTransformedByInsertion( insertPosition, howMany );\n\t\t\trange.end = range.end._getTransformedByInsertion( insertPosition, howMany );\n\n\t\t\treturn [ range ];\n\t\t}\n\t}\n\n\t/**\n\t * Returns an array containing {@link ~Range ranges} that are a result of transforming this\n\t * {@link ~Range range} by moving `howMany` nodes from `sourcePosition` to `targetPosition`.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} sourcePosition Position from which nodes are moved.\n\t * @param {module:engine/model/position~Position} targetPosition Position to where nodes are moved.\n\t * @param {Number} howMany How many nodes are moved.\n\t * @param {Boolean} [spread=false] Whether the range should be spread if the move points inside the range.\n\t * @returns {Array.<module:engine/model/range~Range>} Result of the transformation.\n\t */\n\t_getTransformedByMove( sourcePosition, targetPosition, howMany, spread = false ) {\n\t\t// Special case for transforming a collapsed range. Just transform it like a position.\n\t\tif ( this.isCollapsed ) {\n\t\t\tconst newPos = this.start._getTransformedByMove( sourcePosition, targetPosition, howMany );\n\n\t\t\treturn [ new Range( newPos ) ];\n\t\t}\n\n\t\t// Special case for transformation when a part of the range is moved towards the range.\n\t\t//\n\t\t// Examples:\n\t\t//\n\t\t// <div><p>ab</p><p>c[d</p></div><p>e]f</p> --> <div><p>ab</p></div><p>c[d</p><p>e]f</p>\n\t\t// <p>e[f</p><div><p>a]b</p><p>cd</p></div> --> <p>e[f</p><p>a]b</p><div><p>cd</p></div>\n\t\t//\n\t\t// Without this special condition, the default algorithm leaves an \"artifact\" range from one of `differenceSet` parts:\n\t\t//\n\t\t// <div><p>ab</p><p>c[d</p></div><p>e]f</p> --> <div><p>ab</p>{</div>}<p>c[d</p><p>e]f</p>\n\t\t//\n\t\t// This special case is applied only if the range is to be kept together (not spread).\n\t\tconst moveRange = Range._createFromPositionAndShift( sourcePosition, howMany );\n\t\tconst insertPosition = targetPosition._getTransformedByDeletion( sourcePosition, howMany );\n\n\t\tif ( this.containsPosition( targetPosition ) && !spread ) {\n\t\t\tif ( moveRange.containsPosition( this.start ) || moveRange.containsPosition( this.end ) ) {\n\t\t\t\tconst start = this.start._getTransformedByMove( sourcePosition, targetPosition, howMany );\n\t\t\t\tconst end = this.end._getTransformedByMove( sourcePosition, targetPosition, howMany );\n\n\t\t\t\treturn [ new Range( start, end ) ];\n\t\t\t}\n\t\t}\n\n\t\t// Default algorithm.\n\t\tlet result;\n\n\t\tconst differenceSet = this.getDifference( moveRange );\n\t\tlet difference = null;\n\n\t\tconst common = this.getIntersection( moveRange );\n\n\t\tif ( differenceSet.length == 1 ) {\n\t\t\t// `moveRange` and this range may intersect but may be separate.\n\t\t\tdifference = new Range(\n\t\t\t\tdifferenceSet[ 0 ].start._getTransformedByDeletion( sourcePosition, howMany ),\n\t\t\t\tdifferenceSet[ 0 ].end._getTransformedByDeletion( sourcePosition, howMany )\n\t\t\t);\n\t\t} else if ( differenceSet.length == 2 ) {\n\t\t\t// `moveRange` is inside this range.\n\t\t\tdifference = new Range(\n\t\t\t\tthis.start,\n\t\t\t\tthis.end._getTransformedByDeletion( sourcePosition, howMany )\n\t\t\t);\n\t\t} // else, `moveRange` contains this range.\n\n\t\tif ( difference ) {\n\t\t\tresult = difference._getTransformedByInsertion( insertPosition, howMany, common !== null || spread );\n\t\t} else {\n\t\t\tresult = [];\n\t\t}\n\n\t\tif ( common ) {\n\t\t\tconst transformedCommon = new Range(\n\t\t\t\tcommon.start._getCombined( moveRange.start, insertPosition ),\n\t\t\t\tcommon.end._getCombined( moveRange.start, insertPosition )\n\t\t\t);\n\n\t\t\tif ( result.length == 2 ) {\n\t\t\t\tresult.splice( 1, 0, transformedCommon );\n\t\t\t} else {\n\t\t\t\tresult.push( transformedCommon );\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns a copy of this range that is transformed by deletion of `howMany` nodes from `deletePosition`.\n\t *\n\t * If the deleted range is intersecting with the transformed range, the transformed range will be shrank.\n\t *\n\t * If the deleted range contains transformed range, `null` will be returned.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} deletionPosition Position from which nodes are removed.\n\t * @param {Number} howMany How many nodes are removed.\n\t * @returns {module:engine/model/range~Range|null} Result of the transformation.\n\t */\n\t_getTransformedByDeletion( deletePosition, howMany ) {\n\t\tlet newStart = this.start._getTransformedByDeletion( deletePosition, howMany );\n\t\tlet newEnd = this.end._getTransformedByDeletion( deletePosition, howMany );\n\n\t\tif ( newStart == null && newEnd == null ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( newStart == null ) {\n\t\t\tnewStart = deletePosition;\n\t\t}\n\n\t\tif ( newEnd == null ) {\n\t\t\tnewEnd = deletePosition;\n\t\t}\n\n\t\treturn new Range( newStart, newEnd );\n\t}\n\n\t/**\n\t * Creates a new range, spreading from specified {@link module:engine/model/position~Position position} to a position moved by\n\t * given `shift`. If `shift` is a negative value, shifted position is treated as the beginning of the range.\n\t *\n\t * @protected\n\t * @param {module:engine/model/position~Position} position Beginning of the range.\n\t * @param {Number} shift How long the range should be.\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tstatic _createFromPositionAndShift( position, shift ) {\n\t\tconst start = position;\n\t\tconst end = position.getShiftedBy( shift );\n\n\t\treturn shift > 0 ? new this( start, end ) : new this( end, start );\n\t}\n\n\t/**\n\t * Creates a range inside an {@link module:engine/model/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * @protected\n\t * @param {module:engine/model/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tstatic _createIn( element ) {\n\t\treturn new this( Position._createAt( element, 0 ), Position._createAt( element, element.maxOffset ) );\n\t}\n\n\t/**\n\t * Creates a range that starts before given {@link module:engine/model/item~Item model item} and ends after it.\n\t *\n\t * @protected\n\t * @param {module:engine/model/item~Item} item\n\t * @returns {module:engine/model/range~Range}\n\t */\n\tstatic _createOn( item ) {\n\t\treturn this._createFromPositionAndShift( Position._createBefore( item ), item.offsetSize );\n\t}\n\n\t/**\n\t * Combines all ranges from the passed array into a one range. At least one range has to be passed.\n\t * Passed ranges must not have common parts.\n\t *\n\t * The first range from the array is a reference range. If other ranges start or end on the exactly same position where\n\t * the reference range, they get combined into one range.\n\t *\n\t *\t\t[  ][]  [    ][ ][             ][ ][]  [  ]  // Passed ranges, shown sorted\n\t *\t\t[    ]                                       // The result of the function if the first range was a reference range.\n\t *\t            [                           ]        // The result of the function if the third-to-seventh range was a reference range.\n\t *\t                                           [  ]  // The result of the function if the last range was a reference range.\n\t *\n\t * @param {Array.<module:engine/model/range~Range>} ranges Ranges to combine.\n\t * @returns {module:engine/model/range~Range} Combined range.\n\t */\n\tstatic _createFromRanges( ranges ) {\n\t\tif ( ranges.length === 0 ) {\n\t\t\t/**\n\t\t\t * At least one range has to be passed to\n\t\t\t * {@link module:engine/model/range~Range._createFromRanges `Range._createFromRanges()`}.\n\t\t\t *\n\t\t\t * @error range-create-from-ranges-empty-array\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'range-create-from-ranges-empty-array',\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if ( ranges.length == 1 ) {\n\t\t\treturn ranges[ 0 ].clone();\n\t\t}\n\n\t\t// 1. Set the first range in `ranges` array as a reference range.\n\t\t// If we are going to return just a one range, one of the ranges need to be the reference one.\n\t\t// Other ranges will be stuck to that range, if possible.\n\t\tconst ref = ranges[ 0 ];\n\n\t\t// 2. Sort all the ranges so it's easier to process them.\n\t\tranges.sort( ( a, b ) => {\n\t\t\treturn a.start.isAfter( b.start ) ? 1 : -1;\n\t\t} );\n\n\t\t// 3. Check at which index the reference range is now.\n\t\tconst refIndex = ranges.indexOf( ref );\n\n\t\t// 4. At this moment we don't need the original range.\n\t\t// We are going to modify the result and we need to return a new instance of Range.\n\t\t// We have to create a copy of the reference range.\n\t\tconst result = new this( ref.start, ref.end );\n\n\t\t// 5. Ranges should be checked and glued starting from the range that is closest to the reference range.\n\t\t// Since ranges are sorted, start with the range with index that is closest to reference range index.\n\t\tif ( refIndex > 0 ) {\n\t\t\tfor ( let i = refIndex - 1; true; i++ ) {\n\t\t\t\tif ( ranges[ i ].end.isEqual( result.start ) ) {\n\t\t\t\t\tresult.start = Position._createAt( ranges[ i ].start );\n\t\t\t\t} else {\n\t\t\t\t\t// If ranges are not starting/ending at the same position there is no point in looking further.\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// 6. Ranges should be checked and glued starting from the range that is closest to the reference range.\n\t\t// Since ranges are sorted, start with the range with index that is closest to reference range index.\n\t\tfor ( let i = refIndex + 1; i < ranges.length; i++ ) {\n\t\t\tif ( ranges[ i ].start.isEqual( result.end ) ) {\n\t\t\t\tresult.end = Position._createAt( ranges[ i ].end );\n\t\t\t} else {\n\t\t\t\t// If ranges are not starting/ending at the same position there is no point in looking further.\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Creates a `Range` instance from given plain object (i.e. parsed JSON string).\n\t *\n\t * @param {Object} json Plain object to be converted to `Range`.\n\t * @param {module:engine/model/document~Document} doc Document object that will be range owner.\n\t * @returns {module:engine/model/element~Element} `Range` instance created using given plain object.\n\t */\n\tstatic fromJSON( json, doc ) {\n\t\treturn new this( Position.fromJSON( json.start, doc ), Position.fromJSON( json.end, doc ) );\n\t}\n\n\t// @if CK_DEBUG_ENGINE // toString() {\n\t// @if CK_DEBUG_ENGINE // \treturn `${ this.root } [ ${ this.start.path.join( ', ' ) } ] - [ ${ this.end.path.join( ', ' ) } ]`;\n\t// @if CK_DEBUG_ENGINE // }\n\n\t// @if CK_DEBUG_ENGINE // log() {\n\t// @if CK_DEBUG_ENGINE // \tconsole.log( 'ModelPosition: ' + this );\n\t// @if CK_DEBUG_ENGINE // }\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/mapper\n */\n\nimport ModelPosition from '../model/position';\nimport ModelRange from '../model/range';\n\nimport ViewPosition from '../view/position';\nimport ViewRange from '../view/range';\nimport ViewText from '../view/text';\n\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * Maps elements, positions and markers between {@link module:engine/view/document~Document the view} and\n * {@link module:engine/model/model the model}.\n *\n * The instance of the Mapper used for the editing pipeline is available in\n * {@link module:engine/controller/editingcontroller~EditingController#mapper `editor.editing.mapper`}.\n *\n * Mapper uses bound elements to find corresponding elements and positions, so, to get proper results,\n * all model elements should be {@link module:engine/conversion/mapper~Mapper#bindElements bound}.\n *\n * To map complex model to/from view relations, you may provide custom callbacks for\n * {@link module:engine/conversion/mapper~Mapper#event:modelToViewPosition modelToViewPosition event} and\n * {@link module:engine/conversion/mapper~Mapper#event:viewToModelPosition viewToModelPosition event} that are fired whenever\n * a position mapping request occurs.\n * Those events are fired by {@link module:engine/conversion/mapper~Mapper#toViewPosition toViewPosition}\n * and {@link module:engine/conversion/mapper~Mapper#toModelPosition toModelPosition} methods. `Mapper` adds it's own default callbacks\n * with `'lowest'` priority. To override default `Mapper` mapping, add custom callback with higher priority and\n * stop the event.\n */\nexport default class Mapper {\n\t/**\n\t * Creates an instance of the mapper.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Model element to view element mapping.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap}\n\t\t */\n\t\tthis._modelToViewMapping = new WeakMap();\n\n\t\t/**\n\t\t * View element to model element mapping.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap}\n\t\t */\n\t\tthis._viewToModelMapping = new WeakMap();\n\n\t\t/**\n\t\t * A map containing callbacks between view element names and functions evaluating length of view elements\n\t\t * in model.\n\t\t *\n\t\t * @private\n\t\t * @member {Map}\n\t\t */\n\t\tthis._viewToModelLengthCallbacks = new Map();\n\n\t\t/**\n\t\t * Model marker name to view elements mapping.\n\t\t *\n\t\t * Keys are `String`s while values are `Set`s with {@link module:engine/view/element~Element view elements}.\n\t\t * One marker (name) can be mapped to multiple elements.\n\t\t *\n\t\t * @private\n\t\t * @member {Map}\n\t\t */\n\t\tthis._markerNameToElements = new Map();\n\n\t\t/**\n\t\t * View element to model marker names mapping.\n\t\t *\n\t\t * This is reverse to {@link ~Mapper#_markerNameToElements} map.\n\t\t *\n\t\t * @private\n\t\t * @member {Map}\n\t\t */\n\t\tthis._elementToMarkerNames = new Map();\n\n\t\t/**\n\t\t * Stores marker names of markers which has changed due to unbinding a view element (so it is assumed that the view element\n\t\t * has been removed, moved or renamed).\n\t\t *\n\t\t * @private\n\t\t * @member {Set.<module:engine/model/markercollection~Marker>}\n\t\t */\n\t\tthis._unboundMarkerNames = new Set();\n\n\t\t// Default mapper algorithm for mapping model position to view position.\n\t\tthis.on( 'modelToViewPosition', ( evt, data ) => {\n\t\t\tif ( data.viewPosition ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst viewContainer = this._modelToViewMapping.get( data.modelPosition.parent );\n\n\t\t\tdata.viewPosition = this.findPositionIn( viewContainer, data.modelPosition.offset );\n\t\t}, { priority: 'low' } );\n\n\t\t// Default mapper algorithm for mapping view position to model position.\n\t\tthis.on( 'viewToModelPosition', ( evt, data ) => {\n\t\t\tif ( data.modelPosition ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst viewBlock = this.findMappedViewAncestor( data.viewPosition );\n\t\t\tconst modelParent = this._viewToModelMapping.get( viewBlock );\n\t\t\tconst modelOffset = this._toModelOffset( data.viewPosition.parent, data.viewPosition.offset, viewBlock );\n\n\t\t\tdata.modelPosition = ModelPosition._createAt( modelParent, modelOffset );\n\t\t}, { priority: 'low' } );\n\t}\n\n\t/**\n\t * Marks model and view elements as corresponding. Corresponding elements can be retrieved by using\n\t * the {@link module:engine/conversion/mapper~Mapper#toModelElement toModelElement} and\n\t * {@link module:engine/conversion/mapper~Mapper#toViewElement toViewElement} methods.\n\t * The information that elements are bound is also used to translate positions.\n\t *\n\t * @param {module:engine/model/element~Element} modelElement Model element.\n\t * @param {module:engine/view/element~Element} viewElement View element.\n\t */\n\tbindElements( modelElement, viewElement ) {\n\t\tthis._modelToViewMapping.set( modelElement, viewElement );\n\t\tthis._viewToModelMapping.set( viewElement, modelElement );\n\t}\n\n\t/**\n\t * Unbinds given {@link module:engine/view/element~Element view element} from the map.\n\t *\n\t * **Note:** view-to-model binding will be removed, if it existed. However, corresponding model-to-view binding\n\t * will be removed only if model element is still bound to passed `viewElement`.\n\t *\n\t * This behavior lets for re-binding model element to another view element without fear of losing the new binding\n\t * when the previously bound view element is unbound.\n\t *\n\t * @param {module:engine/view/element~Element} viewElement View element to unbind.\n\t */\n\tunbindViewElement( viewElement ) {\n\t\tconst modelElement = this.toModelElement( viewElement );\n\n\t\tthis._viewToModelMapping.delete( viewElement );\n\n\t\tif ( this._elementToMarkerNames.has( viewElement ) ) {\n\t\t\tfor ( const markerName of this._elementToMarkerNames.get( viewElement ) ) {\n\t\t\t\tthis._unboundMarkerNames.add( markerName );\n\t\t\t}\n\t\t}\n\n\t\tif ( this._modelToViewMapping.get( modelElement ) == viewElement ) {\n\t\t\tthis._modelToViewMapping.delete( modelElement );\n\t\t}\n\t}\n\n\t/**\n\t * Unbinds given {@link module:engine/model/element~Element model element} from the map.\n\t *\n\t * **Note:** model-to-view binding will be removed, if it existed. However, corresponding view-to-model binding\n\t * will be removed only if view element is still bound to passed `modelElement`.\n\t *\n\t * This behavior lets for re-binding view element to another model element without fear of losing the new binding\n\t * when the previously bound model element is unbound.\n\t *\n\t * @param {module:engine/model/element~Element} modelElement Model element to unbind.\n\t */\n\tunbindModelElement( modelElement ) {\n\t\tconst viewElement = this.toViewElement( modelElement );\n\n\t\tthis._modelToViewMapping.delete( modelElement );\n\n\t\tif ( this._viewToModelMapping.get( viewElement ) == modelElement ) {\n\t\t\tthis._viewToModelMapping.delete( viewElement );\n\t\t}\n\t}\n\n\t/**\n\t * Binds given marker name with given {@link module:engine/view/element~Element view element}. The element\n\t * will be added to the current set of elements bound with given marker name.\n\t *\n\t * @param {module:engine/view/element~Element} element Element to bind.\n\t * @param {String} name Marker name.\n\t */\n\tbindElementToMarker( element, name ) {\n\t\tconst elements = this._markerNameToElements.get( name ) || new Set();\n\t\telements.add( element );\n\n\t\tconst names = this._elementToMarkerNames.get( element ) || new Set();\n\t\tnames.add( name );\n\n\t\tthis._markerNameToElements.set( name, elements );\n\t\tthis._elementToMarkerNames.set( element, names );\n\t}\n\n\t/**\n\t * Unbinds an element from given marker name.\n\t *\n\t * @param {module:engine/view/element~Element} element Element to unbind.\n\t * @param {String} name Marker name.\n\t */\n\tunbindElementFromMarkerName( element, name ) {\n\t\tconst nameToElements = this._markerNameToElements.get( name );\n\n\t\tif ( nameToElements ) {\n\t\t\tnameToElements.delete( element );\n\n\t\t\tif ( nameToElements.size == 0 ) {\n\t\t\t\tthis._markerNameToElements.delete( name );\n\t\t\t}\n\t\t}\n\n\t\tconst elementToNames = this._elementToMarkerNames.get( element );\n\n\t\tif ( elementToNames ) {\n\t\t\telementToNames.delete( name );\n\n\t\t\tif ( elementToNames.size == 0 ) {\n\t\t\t\tthis._elementToMarkerNames.delete( element );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns all marker names of markers which has changed due to unbinding a view element (so it is assumed that the view element\n\t * has been removed, moved or renamed) since the last flush. After returning, the marker names list is cleared.\n\t *\n\t * @returns {Array.<String>}\n\t */\n\tflushUnboundMarkerNames() {\n\t\tconst markerNames = Array.from( this._unboundMarkerNames );\n\n\t\tthis._unboundMarkerNames.clear();\n\n\t\treturn markerNames;\n\t}\n\n\t/**\n\t * Removes all model to view and view to model bindings.\n\t */\n\tclearBindings() {\n\t\tthis._modelToViewMapping = new WeakMap();\n\t\tthis._viewToModelMapping = new WeakMap();\n\t\tthis._markerNameToElements = new Map();\n\t\tthis._elementToMarkerNames = new Map();\n\t\tthis._unboundMarkerNames = new Set();\n\t}\n\n\t/**\n\t * Gets the corresponding model element.\n\t *\n\t * **Note:** {@link module:engine/view/uielement~UIElement} does not have corresponding element in model.\n\t *\n\t * @param {module:engine/view/element~Element} viewElement View element.\n\t * @returns {module:engine/model/element~Element|undefined} Corresponding model element or `undefined` if not found.\n\t */\n\ttoModelElement( viewElement ) {\n\t\treturn this._viewToModelMapping.get( viewElement );\n\t}\n\n\t/**\n\t * Gets the corresponding view element.\n\t *\n\t * @param {module:engine/model/element~Element} modelElement Model element.\n\t * @returns {module:engine/view/element~Element|undefined} Corresponding view element or `undefined` if not found.\n\t */\n\ttoViewElement( modelElement ) {\n\t\treturn this._modelToViewMapping.get( modelElement );\n\t}\n\n\t/**\n\t * Gets the corresponding model range.\n\t *\n\t * @param {module:engine/view/range~Range} viewRange View range.\n\t * @returns {module:engine/model/range~Range} Corresponding model range.\n\t */\n\ttoModelRange( viewRange ) {\n\t\treturn new ModelRange( this.toModelPosition( viewRange.start ), this.toModelPosition( viewRange.end ) );\n\t}\n\n\t/**\n\t * Gets the corresponding view range.\n\t *\n\t * @param {module:engine/model/range~Range} modelRange Model range.\n\t * @returns {module:engine/view/range~Range} Corresponding view range.\n\t */\n\ttoViewRange( modelRange ) {\n\t\treturn new ViewRange( this.toViewPosition( modelRange.start ), this.toViewPosition( modelRange.end ) );\n\t}\n\n\t/**\n\t * Gets the corresponding model position.\n\t *\n\t * @fires viewToModelPosition\n\t * @param {module:engine/view/position~Position} viewPosition View position.\n\t * @returns {module:engine/model/position~Position} Corresponding model position.\n\t */\n\ttoModelPosition( viewPosition ) {\n\t\tconst data = {\n\t\t\tviewPosition,\n\t\t\tmapper: this\n\t\t};\n\n\t\tthis.fire( 'viewToModelPosition', data );\n\n\t\treturn data.modelPosition;\n\t}\n\n\t/**\n\t * Gets the corresponding view position.\n\t *\n\t * @fires modelToViewPosition\n\t * @param {module:engine/model/position~Position} modelPosition Model position.\n\t * @param {Object} [options] Additional options for position mapping process.\n\t * @param {Boolean} [options.isPhantom=false] Should be set to `true` if the model position to map is pointing to a place\n\t * in model tree which no longer exists. For example, it could be an end of a removed model range.\n\t * @returns {module:engine/view/position~Position} Corresponding view position.\n\t */\n\ttoViewPosition( modelPosition, options = { isPhantom: false } ) {\n\t\tconst data = {\n\t\t\tmodelPosition,\n\t\t\tmapper: this,\n\t\t\tisPhantom: options.isPhantom\n\t\t};\n\n\t\tthis.fire( 'modelToViewPosition', data );\n\n\t\treturn data.viewPosition;\n\t}\n\n\t/**\n\t * Gets all view elements bound to the given marker name.\n\t *\n\t * @param {String} name Marker name.\n\t * @returns {Set.<module:engine/view/element~Element>|null} View elements bound with given marker name or `null`\n\t * if no elements are bound to given marker name.\n\t */\n\tmarkerNameToElements( name ) {\n\t\tconst boundElements = this._markerNameToElements.get( name );\n\n\t\tif ( !boundElements ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst elements = new Set();\n\n\t\tfor ( const element of boundElements ) {\n\t\t\tif ( element.is( 'attributeElement' ) ) {\n\t\t\t\tfor ( const clone of element.getElementsWithSameId() ) {\n\t\t\t\t\telements.add( clone );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\telements.add( element );\n\t\t\t}\n\t\t}\n\n\t\treturn elements;\n\t}\n\n\t/**\n\t * Registers a callback that evaluates the length in the model of a view element with given name.\n\t *\n\t * The callback is fired with one argument, which is a view element instance. The callback is expected to return\n\t * a number representing the length of view element in model.\n\t *\n\t *\t\t// List item in view may contain nested list, which have other list items. In model though,\n\t *\t\t// the lists are represented by flat structure. Because of those differences, length of list view element\n\t *\t\t// may be greater than one. In the callback it's checked how many nested list items are in evaluated list item.\n\t *\n\t *\t\tfunction getViewListItemLength( element ) {\n\t *\t\t\tlet length = 1;\n\t *\n\t *\t\t\tfor ( let child of element.getChildren() ) {\n\t *\t\t\t\tif ( child.name == 'ul' || child.name == 'ol' ) {\n\t *\t\t\t\t\tfor ( let item of child.getChildren() ) {\n\t *\t\t\t\t\t\tlength += getViewListItemLength( item );\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\n\t *\t\t\treturn length;\n\t *\t\t}\n\t *\n\t *\t\tmapper.registerViewToModelLength( 'li', getViewListItemLength );\n\t *\n\t * @param {String} viewElementName Name of view element for which callback is registered.\n\t * @param {Function} lengthCallback Function return a length of view element instance in model.\n\t */\n\tregisterViewToModelLength( viewElementName, lengthCallback ) {\n\t\tthis._viewToModelLengthCallbacks.set( viewElementName, lengthCallback );\n\t}\n\n\t/**\n\t * For given `viewPosition`, finds and returns the closest ancestor of this position that has a mapping to\n\t * the model.\n\t *\n\t * @param {module:engine/view/position~Position} viewPosition Position for which mapped ancestor should be found.\n\t * @returns {module:engine/view/element~Element}\n\t */\n\tfindMappedViewAncestor( viewPosition ) {\n\t\tlet parent = viewPosition.parent;\n\n\t\twhile ( !this._viewToModelMapping.has( parent ) ) {\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn parent;\n\t}\n\n\t/**\n\t * Calculates model offset based on the view position and the block element.\n\t *\n\t * Example:\n\t *\n\t *\t\t<p>foo<b>ba|r</b></p> // _toModelOffset( b, 2, p ) -> 5\n\t *\n\t * Is a sum of:\n\t *\n\t *\t\t<p>foo|<b>bar</b></p> // _toModelOffset( p, 3, p ) -> 3\n\t *\t\t<p>foo<b>ba|r</b></p> // _toModelOffset( b, 2, b ) -> 2\n\t *\n\t * @private\n\t * @param {module:engine/view/element~Element} viewParent Position parent.\n\t * @param {Number} viewOffset Position offset.\n\t * @param {module:engine/view/element~Element} viewBlock Block used as a base to calculate offset.\n\t * @returns {Number} Offset in the model.\n\t */\n\t_toModelOffset( viewParent, viewOffset, viewBlock ) {\n\t\tif ( viewBlock != viewParent ) {\n\t\t\t// See example.\n\t\t\tconst offsetToParentStart = this._toModelOffset( viewParent.parent, viewParent.index, viewBlock );\n\t\t\tconst offsetInParent = this._toModelOffset( viewParent, viewOffset, viewParent );\n\n\t\t\treturn offsetToParentStart + offsetInParent;\n\t\t}\n\n\t\t// viewBlock == viewParent, so we need to calculate the offset in the parent element.\n\n\t\t// If the position is a text it is simple (\"ba|r\" -> 2).\n\t\tif ( viewParent.is( '$text' ) ) {\n\t\t\treturn viewOffset;\n\t\t}\n\n\t\t// If the position is in an element we need to sum lengths of siblings ( <b> bar </b> foo | -> 3 + 3 = 6 ).\n\t\tlet modelOffset = 0;\n\n\t\tfor ( let i = 0; i < viewOffset; i++ ) {\n\t\t\tmodelOffset += this.getModelLength( viewParent.getChild( i ) );\n\t\t}\n\n\t\treturn modelOffset;\n\t}\n\n\t/**\n\t * Gets the length of the view element in the model.\n\t *\n\t * The length is calculated as follows:\n\t * * if {@link #registerViewToModelLength length mapping callback} is provided for given `viewNode` it is used to\n\t * evaluate model length (`viewNode` is used as first and only parameter passed to the callback),\n\t * * length of a {@link module:engine/view/text~Text text node} is equal to the length of it's\n\t * {@link module:engine/view/text~Text#data data},\n\t * * length of a {@link module:engine/view/uielement~UIElement ui element} is equal to 0,\n\t * * length of a mapped {@link module:engine/view/element~Element element} is equal to 1,\n\t * * length of a not-mapped {@link module:engine/view/element~Element element} is equal to the length of it's children.\n\t *\n\t * Examples:\n\t *\n\t *\t\tfoo                          -> 3 // Text length is equal to it's data length.\n\t *\t\t<p>foo</p>                   -> 1 // Length of an element which is mapped is by default equal to 1.\n\t *\t\t<b>foo</b>                   -> 3 // Length of an element which is not mapped is a length of its children.\n\t *\t\t<div><p>x</p><p>y</p></div>  -> 2 // Assuming that <div> is not mapped and <p> are mapped.\n\t *\n\t * @param {module:engine/view/element~Element} viewNode View node.\n\t * @returns {Number} Length of the node in the tree model.\n\t */\n\tgetModelLength( viewNode ) {\n\t\tif ( this._viewToModelLengthCallbacks.get( viewNode.name ) ) {\n\t\t\tconst callback = this._viewToModelLengthCallbacks.get( viewNode.name );\n\n\t\t\treturn callback( viewNode );\n\t\t} else if ( this._viewToModelMapping.has( viewNode ) ) {\n\t\t\treturn 1;\n\t\t} else if ( viewNode.is( '$text' ) ) {\n\t\t\treturn viewNode.data.length;\n\t\t} else if ( viewNode.is( 'uiElement' ) ) {\n\t\t\treturn 0;\n\t\t} else {\n\t\t\tlet len = 0;\n\n\t\t\tfor ( const child of viewNode.getChildren() ) {\n\t\t\t\tlen += this.getModelLength( child );\n\t\t\t}\n\n\t\t\treturn len;\n\t\t}\n\t}\n\n\t/**\n\t * Finds the position in the view node (or its children) with the expected model offset.\n\t *\n\t * Example:\n\t *\n\t *\t\t<p>fo<b>bar</b>bom</p> -> expected offset: 4\n\t *\n\t *\t\tfindPositionIn( p, 4 ):\n\t *\t\t<p>|fo<b>bar</b>bom</p> -> expected offset: 4, actual offset: 0\n\t *\t\t<p>fo|<b>bar</b>bom</p> -> expected offset: 4, actual offset: 2\n\t *\t\t<p>fo<b>bar</b>|bom</p> -> expected offset: 4, actual offset: 5 -> we are too far\n\t *\n\t *\t\tfindPositionIn( b, 4 - ( 5 - 3 ) ):\n\t *\t\t<p>fo<b>|bar</b>bom</p> -> expected offset: 2, actual offset: 0\n\t *\t\t<p>fo<b>bar|</b>bom</p> -> expected offset: 2, actual offset: 3 -> we are too far\n\t *\n\t *\t\tfindPositionIn( bar, 2 - ( 3 - 3 ) ):\n\t *\t\tWe are in the text node so we can simple find the offset.\n\t *\t\t<p>fo<b>ba|r</b>bom</p> -> expected offset: 2, actual offset: 2 -> position found\n\t *\n\t * @param {module:engine/view/element~Element} viewParent Tree view element in which we are looking for the position.\n\t * @param {Number} expectedOffset Expected offset.\n\t * @returns {module:engine/view/position~Position} Found position.\n\t */\n\tfindPositionIn( viewParent, expectedOffset ) {\n\t\t// Last scanned view node.\n\t\tlet viewNode;\n\t\t// Length of the last scanned view node.\n\t\tlet lastLength = 0;\n\n\t\tlet modelOffset = 0;\n\t\tlet viewOffset = 0;\n\n\t\t// In the text node it is simple: offset in the model equals offset in the text.\n\t\tif ( viewParent.is( '$text' ) ) {\n\t\t\treturn new ViewPosition( viewParent, expectedOffset );\n\t\t}\n\n\t\t// In other cases we add lengths of child nodes to find the proper offset.\n\n\t\t// If it is smaller we add the length.\n\t\twhile ( modelOffset < expectedOffset ) {\n\t\t\tviewNode = viewParent.getChild( viewOffset );\n\t\t\tlastLength = this.getModelLength( viewNode );\n\t\t\tmodelOffset += lastLength;\n\t\t\tviewOffset++;\n\t\t}\n\n\t\t// If it equals we found the position.\n\t\tif ( modelOffset == expectedOffset ) {\n\t\t\treturn this._moveViewPositionToTextNode( new ViewPosition( viewParent, viewOffset ) );\n\t\t}\n\t\t// If it is higher we need to enter last child.\n\t\telse {\n\t\t\t// ( modelOffset - lastLength ) is the offset to the child we enter,\n\t\t\t// so we subtract it from the expected offset to fine the offset in the child.\n\t\t\treturn this.findPositionIn( viewNode, expectedOffset - ( modelOffset - lastLength ) );\n\t\t}\n\t}\n\n\t/**\n\t * Because we prefer positions in text nodes over positions next to text node moves view position to the text node\n\t * if it was next to it.\n\t *\n\t *\t\t<p>[]<b>foo</b></p> -> <p>[]<b>foo</b></p> // do not touch if position is not directly next to text\n\t *\t\t<p>foo[]<b>foo</b></p> -> <p>foo{}<b>foo</b></p> // move to text node\n\t *\t\t<p><b>[]foo</b></p> -> <p><b>{}foo</b></p> // move to text node\n\t *\n\t * @private\n\t * @param {module:engine/view/position~Position} viewPosition Position potentially next to text node.\n\t * @returns {module:engine/view/position~Position} Position in text node if possible.\n\t */\n\t_moveViewPositionToTextNode( viewPosition ) {\n\t\t// If the position is just after text node, put it at the end of that text node.\n\t\t// If the position is just before text node, put it at the beginning of that text node.\n\t\tconst nodeBefore = viewPosition.nodeBefore;\n\t\tconst nodeAfter = viewPosition.nodeAfter;\n\n\t\tif ( nodeBefore instanceof ViewText ) {\n\t\t\treturn new ViewPosition( nodeBefore, nodeBefore.data.length );\n\t\t} else if ( nodeAfter instanceof ViewText ) {\n\t\t\treturn new ViewPosition( nodeAfter, 0 );\n\t\t}\n\n\t\t// Otherwise, just return the given position.\n\t\treturn viewPosition;\n\t}\n\n\t/**\n\t * Fired for each model-to-view position mapping request. The purpose of this event is to enable custom model-to-view position\n\t * mapping. Callbacks added to this event take {@link module:engine/model/position~Position model position} and are expected to\n\t * calculate {@link module:engine/view/position~Position view position}. Calculated view position should be added as `viewPosition`\n\t * value in `data` object that is passed as one of parameters to the event callback.\n\t *\n\t * \t\t// Assume that \"captionedImage\" model element is converted to <img> and following <span> elements in view,\n\t * \t\t// and the model element is bound to <img> element. Force mapping model positions inside \"captionedImage\" to that\n\t * \t\t// <span> element.\n\t *\t\tmapper.on( 'modelToViewPosition', ( evt, data ) => {\n\t *\t\t\tconst positionParent = modelPosition.parent;\n\t *\n\t *\t\t\tif ( positionParent.name == 'captionedImage' ) {\n\t *\t\t\t\tconst viewImg = data.mapper.toViewElement( positionParent );\n\t *\t\t\t\tconst viewCaption = viewImg.nextSibling; // The <span> element.\n\t *\n\t *\t\t\t\tdata.viewPosition = new ViewPosition( viewCaption, modelPosition.offset );\n\t *\n\t *\t\t\t\t// Stop the event if other callbacks should not modify calculated value.\n\t *\t\t\t\tevt.stop();\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * **Note:** keep in mind that sometimes a \"phantom\" model position is being converted. \"Phantom\" model position is\n\t * a position that points to a non-existing place in model. Such position might still be valid for conversion, though\n\t * (it would point to a correct place in view when converted). One example of such situation is when a range is\n\t * removed from model, there may be a need to map the range's end (which is no longer valid model position). To\n\t * handle such situation, check `data.isPhantom` flag:\n\t *\n\t * \t\t// Assume that there is \"customElement\" model element and whenever position is before it, we want to move it\n\t * \t\t// to the inside of the view element bound to \"customElement\".\n\t *\t\tmapper.on( 'modelToViewPosition', ( evt, data ) => {\n\t *\t\t\tif ( data.isPhantom ) {\n\t *\t\t\t\treturn;\n\t *\t\t\t}\n\t *\n\t *\t\t\t// Below line might crash for phantom position that does not exist in model.\n\t *\t\t\tconst sibling = data.modelPosition.nodeBefore;\n\t *\n\t *\t\t\t// Check if this is the element we are interested in.\n\t *\t\t\tif ( !sibling.is( 'element', 'customElement' ) ) {\n\t *\t\t\t\treturn;\n\t *\t\t\t}\n\t *\n\t *\t\t\tconst viewElement = data.mapper.toViewElement( sibling );\n\t *\n\t *\t\t\tdata.viewPosition = new ViewPosition( sibling, 0 );\n\t *\n\t *\t\t\tevt.stop();\n\t *\t\t} );\n\t *\n\t * **Note:** default mapping callback is provided with `low` priority setting and does not cancel the event, so it is possible to\n\t * attach a custom callback after default callback and also use `data.viewPosition` calculated by default callback\n\t * (for example to fix it).\n\t *\n\t * **Note:** default mapping callback will not fire if `data.viewPosition` is already set.\n\t *\n\t * **Note:** these callbacks are called **very often**. For efficiency reasons, it is advised to use them only when position\n\t * mapping between given model and view elements is unsolvable using just elements mapping and default algorithm. Also,\n\t * the condition that checks if special case scenario happened should be as simple as possible.\n\t *\n\t * @event modelToViewPosition\n\t * @param {Object} data Data pipeline object that can store and pass data between callbacks. The callback should add\n\t * `viewPosition` value to that object with calculated {@link module:engine/view/position~Position view position}.\n\t * @param {module:engine/conversion/mapper~Mapper} data.mapper Mapper instance that fired the event.\n\t */\n\n\t/**\n\t * Fired for each view-to-model position mapping request. See {@link module:engine/conversion/mapper~Mapper#event:modelToViewPosition}.\n\t *\n\t * \t\t// See example in `modelToViewPosition` event description.\n\t * \t\t// This custom mapping will map positions from <span> element next to <img> to the \"captionedImage\" element.\n\t *\t\tmapper.on( 'viewToModelPosition', ( evt, data ) => {\n\t *\t\t\tconst positionParent = viewPosition.parent;\n\t *\n\t *\t\t\tif ( positionParent.hasClass( 'image-caption' ) ) {\n\t *\t\t\t\tconst viewImg = positionParent.previousSibling;\n\t *\t\t\t\tconst modelImg = data.mapper.toModelElement( viewImg );\n\t *\n\t *\t\t\t\tdata.modelPosition = new ModelPosition( modelImg, viewPosition.offset );\n\t *\t\t\t\tevt.stop();\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * **Note:** default mapping callback is provided with `low` priority setting and does not cancel the event, so it is possible to\n\t * attach a custom callback after default callback and also use `data.modelPosition` calculated by default callback\n\t * (for example to fix it).\n\t *\n\t * **Note:** default mapping callback will not fire if `data.modelPosition` is already set.\n\t *\n\t * **Note:** these callbacks are called **very often**. For efficiency reasons, it is advised to use them only when position\n\t * mapping between given model and view elements is unsolvable using just elements mapping and default algorithm. Also,\n\t * the condition that checks if special case scenario happened should be as simple as possible.\n\t *\n\t * @event viewToModelPosition\n\t * @param {Object} data Data pipeline object that can store and pass data between callbacks. The callback should add\n\t * `modelPosition` value to that object with calculated {@link module:engine/model/position~Position model position}.\n\t * @param {module:engine/conversion/mapper~Mapper} data.mapper Mapper instance that fired the event.\n\t */\n}\n\nmix( Mapper, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/modelconsumable\n */\n\nimport TextProxy from '../model/textproxy';\n\n/**\n * Manages a list of consumable values for {@link module:engine/model/item~Item model items}.\n *\n * Consumables are various aspects of the model. A model item can be broken down into singular properties that might be\n * taken into consideration when converting that item.\n *\n * `ModelConsumable` is used by {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher} while analyzing changed\n * parts of {@link module:engine/model/document~Document the document}. The added / changed / removed model items are broken down\n * into singular properties (the item itself and it's attributes). All those parts are saved in `ModelConsumable`. Then,\n * during conversion, when given part of model item is converted (i.e. the view element has been inserted into the view,\n * but without attributes), consumable value is removed from `ModelConsumable`.\n *\n * For model items, `ModelConsumable` stores consumable values of one of following types: `insert`, `addattribute:<attributeKey>`,\n * `changeattributes:<attributeKey>`, `removeattributes:<attributeKey>`.\n *\n * In most cases, it is enough to let {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}\n * gather consumable values, so there is no need to use\n * {@link module:engine/conversion/modelconsumable~ModelConsumable#add add method} directly.\n * However, it is important to understand how consumable values can be\n * {@link module:engine/conversion/modelconsumable~ModelConsumable#consume consumed}.\n * See {@link module:engine/conversion/downcasthelpers default downcast converters} for more information.\n *\n * Keep in mind, that one conversion event may have multiple callbacks (converters) attached to it. Each of those is\n * able to convert one or more parts of the model. However, when one of those callbacks actually converts\n * something, other should not, because they would duplicate the results. Using `ModelConsumable` helps avoiding\n * this situation, because callbacks should only convert those values, which were not yet consumed from `ModelConsumable`.\n *\n * Consuming multiple values in a single callback:\n *\n *\t\t// Converter for custom `image` element that might have a `caption` element inside which changes\n *\t\t// how the image is displayed in the view:\n *\t\t//\n *\t\t// Model:\n *\t\t//\n *\t\t// [image]\n *\t\t//    [caption]\n *\t\t//        foo\n *\t\t//\n *\t\t// View:\n *\t\t//\n *\t\t// <figure>\n *\t\t//    <img />\n *\t\t//    <caption>\n *\t\t//        foo\n *\t\tmodelConversionDispatcher.on( 'insert:image', ( evt, data, conversionApi ) => {\n *\t\t\t// First, consume the `image` element.\n *\t\t\tconversionApi.consumable.consume( data.item, 'insert' );\n *\n *\t\t\t// Just create normal image element for the view.\n *\t\t\t// Maybe it will be \"decorated\" later.\n *\t\t\tconst viewImage = new ViewElement( 'img' );\n *\t\t\tconst insertPosition = conversionApi.mapper.toViewPosition( data.range.start );\n *\t\t\tconst viewWriter = conversionApi.writer;\n *\n *\t\t\t// Check if the `image` element has children.\n *\t\t\tif ( data.item.childCount > 0 ) {\n *\t\t\t\tconst modelCaption = data.item.getChild( 0 );\n *\n *\t\t\t\t// `modelCaption` insertion change is consumed from consumable values.\n *\t\t\t\t// It will not be converted by other converters, but it's children (probably some text) will be.\n *\t\t\t\t// Through mapping, converters for text will know where to insert contents of `modelCaption`.\n *\t\t\t\tif ( conversionApi.consumable.consume( modelCaption, 'insert' ) ) {\n *\t\t\t\t\tconst viewCaption = new ViewElement( 'figcaption' );\n *\n *\t\t\t\t\tconst viewImageHolder = new ViewElement( 'figure', null, [ viewImage, viewCaption ] );\n *\n *\t\t\t\t\tconversionApi.mapper.bindElements( modelCaption, viewCaption );\n *\t\t\t\t\tconversionApi.mapper.bindElements( data.item, viewImageHolder );\n *\t\t\t\t\tviewWriter.insert( insertPosition, viewImageHolder );\n *\t\t\t\t}\n *\t\t\t} else {\n *\t\t\t\tconversionApi.mapper.bindElements( data.item, viewImage );\n *\t\t\t\tviewWriter.insert( insertPosition, viewImage );\n *\t\t\t}\n *\n *\t\t\tevt.stop();\n *\t\t} );\n */\nexport default class ModelConsumable {\n\t/**\n\t * Creates an empty consumables list.\n\t */\n\tconstructor() {\n\t\t/**\n\t\t * Contains list of consumable values.\n\t\t *\n\t\t * @private\n\t\t * @member {Map} module:engine/conversion/modelconsumable~ModelConsumable#_consumable\n\t\t */\n\t\tthis._consumable = new Map();\n\n\t\t/**\n\t\t * For each {@link module:engine/model/textproxy~TextProxy} added to `ModelConsumable`, this registry holds parent\n\t\t * of that `TextProxy` and start and end indices of that `TextProxy`. This allows identification of `TextProxy`\n\t\t * instances that points to the same part of the model but are different instances. Each distinct `TextProxy`\n\t\t * is given unique `Symbol` which is then registered as consumable. This process is transparent for `ModelConsumable`\n\t\t * API user because whenever `TextProxy` is added, tested, consumed or reverted, internal mechanisms of\n\t\t * `ModelConsumable` translates `TextProxy` to that unique `Symbol`.\n\t\t *\n\t\t * @private\n\t\t * @member {Map} module:engine/conversion/modelconsumable~ModelConsumable#_textProxyRegistry\n\t\t */\n\t\tthis._textProxyRegistry = new Map();\n\t}\n\n\t/**\n\t * Adds a consumable value to the consumables list and links it with given model item.\n\t *\n\t *\t\tmodelConsumable.add( modelElement, 'insert' ); // Add `modelElement` insertion change to consumable values.\n\t *\t\tmodelConsumable.add( modelElement, 'addAttribute:bold' ); // Add `bold` attribute insertion on `modelElement` change.\n\t *\t\tmodelConsumable.add( modelElement, 'removeAttribute:bold' ); // Add `bold` attribute removal on `modelElement` change.\n\t *\t\tmodelConsumable.add( modelSelection, 'selection' ); // Add `modelSelection` to consumable values.\n\t *\t\tmodelConsumable.add( modelRange, 'range' ); // Add `modelRange` to consumable values.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/selection~Selection|module:engine/model/range~Range} item\n\t * Model item, range or selection that has the consumable.\n\t * @param {String} type Consumable type. Will be normalized to a proper form, that is either `<word>` or `<part>:<part>`.\n\t * Second colon and everything after will be cut. Passing event name is a safe and good practice.\n\t */\n\tadd( item, type ) {\n\t\ttype = _normalizeConsumableType( type );\n\n\t\tif ( item instanceof TextProxy ) {\n\t\t\titem = this._getSymbolForTextProxy( item );\n\t\t}\n\n\t\tif ( !this._consumable.has( item ) ) {\n\t\t\tthis._consumable.set( item, new Map() );\n\t\t}\n\n\t\tthis._consumable.get( item ).set( type, true );\n\t}\n\n\t/**\n\t * Removes given consumable value from given model item.\n\t *\n\t *\t\tmodelConsumable.consume( modelElement, 'insert' ); // Remove `modelElement` insertion change from consumable values.\n\t *\t\tmodelConsumable.consume( modelElement, 'addAttribute:bold' ); // Remove `bold` attribute insertion on `modelElement` change.\n\t *\t\tmodelConsumable.consume( modelElement, 'removeAttribute:bold' ); // Remove `bold` attribute removal on `modelElement` change.\n\t *\t\tmodelConsumable.consume( modelSelection, 'selection' ); // Remove `modelSelection` from consumable values.\n\t *\t\tmodelConsumable.consume( modelRange, 'range' ); // Remove 'modelRange' from consumable values.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/selection~Selection|module:engine/model/range~Range} item\n\t * Model item, range or selection from which consumable will be consumed.\n\t * @param {String} type Consumable type. Will be normalized to a proper form, that is either `<word>` or `<part>:<part>`.\n\t * Second colon and everything after will be cut. Passing event name is a safe and good practice.\n\t * @returns {Boolean} `true` if consumable value was available and was consumed, `false` otherwise.\n\t */\n\tconsume( item, type ) {\n\t\ttype = _normalizeConsumableType( type );\n\n\t\tif ( item instanceof TextProxy ) {\n\t\t\titem = this._getSymbolForTextProxy( item );\n\t\t}\n\n\t\tif ( this.test( item, type ) ) {\n\t\t\tthis._consumable.get( item ).set( type, false );\n\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Tests whether there is a consumable value of given type connected with given model item.\n\t *\n\t *\t\tmodelConsumable.test( modelElement, 'insert' ); // Check for `modelElement` insertion change.\n\t *\t\tmodelConsumable.test( modelElement, 'addAttribute:bold' ); // Check for `bold` attribute insertion on `modelElement` change.\n\t *\t\tmodelConsumable.test( modelElement, 'removeAttribute:bold' ); // Check for `bold` attribute removal on `modelElement` change.\n\t *\t\tmodelConsumable.test( modelSelection, 'selection' ); // Check if `modelSelection` is consumable.\n\t *\t\tmodelConsumable.test( modelRange, 'range' ); // Check if `modelRange` is consumable.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/selection~Selection|module:engine/model/range~Range} item\n\t * Model item, range or selection to be tested.\n\t * @param {String} type Consumable type. Will be normalized to a proper form, that is either `<word>` or `<part>:<part>`.\n\t * Second colon and everything after will be cut. Passing event name is a safe and good practice.\n\t * @returns {null|Boolean} `null` if such consumable was never added, `false` if the consumable values was\n\t * already consumed or `true` if it was added and not consumed yet.\n\t */\n\ttest( item, type ) {\n\t\ttype = _normalizeConsumableType( type );\n\n\t\tif ( item instanceof TextProxy ) {\n\t\t\titem = this._getSymbolForTextProxy( item );\n\t\t}\n\n\t\tconst itemConsumables = this._consumable.get( item );\n\n\t\tif ( itemConsumables === undefined ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst value = itemConsumables.get( type );\n\n\t\tif ( value === undefined ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t/**\n\t * Reverts consuming of consumable value.\n\t *\n\t *\t\tmodelConsumable.revert( modelElement, 'insert' ); // Revert consuming `modelElement` insertion change.\n\t *\t\tmodelConsumable.revert( modelElement, 'addAttribute:bold' ); // Revert consuming `bold` attribute insert from `modelElement`.\n\t *\t\tmodelConsumable.revert( modelElement, 'removeAttribute:bold' ); // Revert consuming `bold` attribute remove from `modelElement`.\n\t *\t\tmodelConsumable.revert( modelSelection, 'selection' ); // Revert consuming `modelSelection`.\n\t *\t\tmodelConsumable.revert( modelRange, 'range' ); // Revert consuming `modelRange`.\n\t *\n\t * @param {module:engine/model/item~Item|module:engine/model/selection~Selection|module:engine/model/range~Range} item\n\t * Model item, range or selection to be reverted.\n\t * @param {String} type Consumable type.\n\t * @returns {null|Boolean} `true` if consumable has been reversed, `false` otherwise. `null` if the consumable has\n\t * never been added.\n\t */\n\trevert( item, type ) {\n\t\ttype = _normalizeConsumableType( type );\n\n\t\tif ( item instanceof TextProxy ) {\n\t\t\titem = this._getSymbolForTextProxy( item );\n\t\t}\n\n\t\tconst test = this.test( item, type );\n\n\t\tif ( test === false ) {\n\t\t\tthis._consumable.get( item ).set( type, true );\n\n\t\t\treturn true;\n\t\t} else if ( test === true ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Gets a unique symbol for passed {@link module:engine/model/textproxy~TextProxy} instance. All `TextProxy` instances that\n\t * have same parent, same start index and same end index will get the same symbol.\n\t *\n\t * Used internally to correctly consume `TextProxy` instances.\n\t *\n\t * @private\n\t * @param {module:engine/model/textproxy~TextProxy} textProxy `TextProxy` instance to get a symbol for.\n\t * @returns {Symbol} Symbol representing all equal instances of `TextProxy`.\n\t */\n\t_getSymbolForTextProxy( textProxy ) {\n\t\tlet symbol = null;\n\n\t\tconst startMap = this._textProxyRegistry.get( textProxy.startOffset );\n\n\t\tif ( startMap ) {\n\t\t\tconst endMap = startMap.get( textProxy.endOffset );\n\n\t\t\tif ( endMap ) {\n\t\t\t\tsymbol = endMap.get( textProxy.parent );\n\t\t\t}\n\t\t}\n\n\t\tif ( !symbol ) {\n\t\t\tsymbol = this._addSymbolForTextProxy( textProxy.startOffset, textProxy.endOffset, textProxy.parent );\n\t\t}\n\n\t\treturn symbol;\n\t}\n\n\t/**\n\t * Adds a symbol for given properties that characterizes a {@link module:engine/model/textproxy~TextProxy} instance.\n\t *\n\t * Used internally to correctly consume `TextProxy` instances.\n\t *\n\t * @private\n\t * @param {Number} startIndex Text proxy start index in it's parent.\n\t * @param {Number} endIndex Text proxy end index in it's parent.\n\t * @param {module:engine/model/element~Element} parent Text proxy parent.\n\t * @returns {Symbol} Symbol generated for given properties.\n\t */\n\t_addSymbolForTextProxy( start, end, parent ) {\n\t\tconst symbol = Symbol( 'textProxySymbol' );\n\t\tlet startMap, endMap;\n\n\t\tstartMap = this._textProxyRegistry.get( start );\n\n\t\tif ( !startMap ) {\n\t\t\tstartMap = new Map();\n\t\t\tthis._textProxyRegistry.set( start, startMap );\n\t\t}\n\n\t\tendMap = startMap.get( end );\n\n\t\tif ( !endMap ) {\n\t\t\tendMap = new Map();\n\t\t\tstartMap.set( end, endMap );\n\t\t}\n\n\t\tendMap.set( parent, symbol );\n\n\t\treturn symbol;\n\t}\n}\n\n// Returns a normalized consumable type name from given string. A normalized consumable type name is a string that has\n// at most one colon, for example: `insert` or `addMarker:highlight`. If string to normalize has more \"parts\" (more colons),\n// the other parts are dropped, for example: `addattribute:bold:$text` -> `addattributes:bold`.\n//\n// @param {String} type Consumable type.\n// @returns {String} Normalized consumable type.\nfunction _normalizeConsumableType( type ) {\n\tconst parts = type.split( ':' );\n\n\treturn parts.length > 1 ? parts[ 0 ] + ':' + parts[ 1 ] : parts[ 0 ];\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/downcastdispatcher\n */\n\nimport Consumable from './modelconsumable';\nimport Range from '../model/range';\nimport Position, { getNodeAfterPosition, getTextNodeAtPosition } from '../model/position';\n\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * The downcast dispatcher is a central point of downcasting (conversion from the model to the view), which is a process of reacting\n * to changes in the model and firing a set of events. Callbacks listening to these events are called converters. The\n * converters' role is to convert the model changes to changes in view (for example, adding view nodes or\n * changing attributes on view elements).\n *\n * During the conversion process, downcast dispatcher fires events basing on the state of the model and prepares\n * data for these events. It is important to understand that the events are connected with the changes done on the model,\n * for example: \"a node has been inserted\" or \"an attribute has changed\". This is in contrary to upcasting (a view-to-model conversion)\n * where you convert the view state (view nodes) to a model tree.\n *\n * The events are prepared basing on a diff created by {@link module:engine/model/differ~Differ Differ}, which buffers them\n * and then passes to the downcast dispatcher as a diff between the old model state and the new model state.\n *\n * Note that because the changes are converted, there is a need to have a mapping between the model structure and the view structure.\n * To map positions and elements during the downcast (a model-to-view conversion), use {@link module:engine/conversion/mapper~Mapper}.\n *\n * Downcast dispatcher fires the following events for model tree changes:\n *\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert `insert`} &ndash;\n * If a range of nodes was inserted to the model tree.\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:remove `remove`} &ndash;\n * If a range of nodes was removed from the model tree.\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute `attribute`} &ndash;\n * If an attribute was added, changed or removed from a model node.\n *\n * For {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert `insert`}\n * and {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute `attribute`},\n * downcast dispatcher generates {@link module:engine/conversion/modelconsumable~ModelConsumable consumables}.\n * These are used to have control over which changes have already been consumed. It is useful when some converters\n * overwrite others or convert multiple changes (for example, it converts an insertion of an element and also converts that\n * element's attributes during the insertion).\n *\n * Additionally, downcast dispatcher fires events for {@link module:engine/model/markercollection~Marker marker} changes:\n *\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker} &ndash; If a marker was added.\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:removeMarker} &ndash; If a marker was removed.\n *\n * Note that changing a marker is done through removing the marker from the old range and adding it to the new range,\n * so both events are fired.\n *\n * Finally, downcast dispatcher also handles firing events for the {@link module:engine/model/selection model selection}\n * conversion:\n *\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:selection}\n * &ndash; Converts the selection from the model to the view.\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute}\n * &ndash; Fired for every selection attribute.\n * * {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:addMarker}\n * &ndash; Fired for every marker that contains a selection.\n *\n * Unlike the model tree and the markers, the events for selection are not fired for changes but for a selection state.\n *\n * When providing custom listeners for a downcast dispatcher, remember to check whether a given change has not been\n * {@link module:engine/conversion/modelconsumable~ModelConsumable#consume consumed} yet.\n *\n * When providing custom listeners for downcast dispatcher, keep in mind that any callback that has\n * {@link module:engine/conversion/modelconsumable~ModelConsumable#consume consumed} a value from a consumable and\n * converted the change should also stop the event (for efficiency purposes).\n *\n * When providing custom listeners for downcast dispatcher, remember to use the provided\n * {@link module:engine/view/downcastwriter~DowncastWriter view downcast writer} to apply changes to the view document.\n *\n * You can read more about conversion in the following guides:\n *\n * * {@glink framework/guides/deep-dive/conversion/conversion-introduction Advanced conversion concepts &mdash; attributes}\n * * {@glink framework/guides/deep-dive/conversion/conversion-extending-output Extending the editor output }\n * * {@glink framework/guides/deep-dive/conversion/custom-element-conversion Custom element conversion}\n *\n * An example of a custom converter for the downcast dispatcher:\n *\n *\t\t// You will convert inserting a \"paragraph\" model element into the model.\n *\t\tdowncastDispatcher.on( 'insert:paragraph', ( evt, data, conversionApi ) => {\n *\t\t\t// Remember to check whether the change has not been consumed yet and consume it.\n *\t\t\tif ( conversionApi.consumable.consume( data.item, 'insert' ) ) {\n *\t\t\t\treturn;\n *\t\t\t}\n *\n *\t\t\t// Translate the position in the model to a position in the view.\n *\t\t\tconst viewPosition = conversionApi.mapper.toViewPosition( data.range.start );\n *\n *\t\t\t// Create a <p> element that will be inserted into the view at the `viewPosition`.\n *\t\t\tconst viewElement = conversionApi.writer.createContainerElement( 'p' );\n *\n *\t\t\t// Bind the newly created view element to the model element so positions will map accordingly in the future.\n *\t\t\tconversionApi.mapper.bindElements( data.item, viewElement );\n *\n *\t\t\t// Add the newly created view element to the view.\n *\t\t\tconversionApi.writer.insert( viewPosition, viewElement );\n *\n *\t\t\t// Remember to stop the event propagation.\n *\t\t\tevt.stop();\n *\t\t} );\n */\nexport default class DowncastDispatcher {\n\t/**\n\t * Creates a downcast dispatcher instance.\n\t *\n\t * @see module:engine/conversion/downcastdispatcher~DowncastConversionApi\n\t * @param {Object} conversionApi Additional properties for an interface that will be passed to events fired\n\t * by the downcast dispatcher.\n\t */\n\tconstructor( conversionApi ) {\n\t\t/**\n\t\t * An interface passed by the dispatcher to the event callbacks.\n\t\t *\n\t\t * @member {module:engine/conversion/downcastdispatcher~DowncastConversionApi}\n\t\t */\n\t\tthis.conversionApi = Object.assign( { dispatcher: this }, conversionApi );\n\n\t\t/**\n\t\t * Maps conversion event names that will trigger element reconversion for a given element name.\n\t\t *\n\t\t * @type {Map<String, String>}\n\t\t * @private\n\t\t */\n\t\tthis._reconversionEventsMapping = new Map();\n\t}\n\n\t/**\n\t * Takes a {@link module:engine/model/differ~Differ model differ} object with buffered changes and fires conversion basing on it.\n\t *\n\t * @param {module:engine/model/differ~Differ} differ The differ object with buffered changes.\n\t * @param {module:engine/model/markercollection~MarkerCollection} markers Markers connected with the converted model.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer The view writer that should be used to modify the view document.\n\t */\n\tconvertChanges( differ, markers, writer ) {\n\t\t// Before the view is updated, remove markers which have changed.\n\t\tfor ( const change of differ.getMarkersToRemove() ) {\n\t\t\tthis.convertMarkerRemove( change.name, change.range, writer );\n\t\t}\n\n\t\tconst changes = this._mapChangesWithAutomaticReconversion( differ );\n\n\t\t// Convert changes that happened on model tree.\n\t\tfor ( const entry of changes ) {\n\t\t\tif ( entry.type === 'insert' ) {\n\t\t\t\tthis.convertInsert( Range._createFromPositionAndShift( entry.position, entry.length ), writer );\n\t\t\t} else if ( entry.type === 'remove' ) {\n\t\t\t\tthis.convertRemove( entry.position, entry.length, entry.name, writer );\n\t\t\t} else if ( entry.type === 'reconvert' ) {\n\t\t\t\tthis.reconvertElement( entry.element, writer );\n\t\t\t} else {\n\t\t\t\t// Defaults to 'attribute' change.\n\t\t\t\tthis.convertAttribute( entry.range, entry.attributeKey, entry.attributeOldValue, entry.attributeNewValue, writer );\n\t\t\t}\n\t\t}\n\n\t\tfor ( const markerName of this.conversionApi.mapper.flushUnboundMarkerNames() ) {\n\t\t\tconst markerRange = markers.get( markerName ).getRange();\n\n\t\t\tthis.convertMarkerRemove( markerName, markerRange, writer );\n\t\t\tthis.convertMarkerAdd( markerName, markerRange, writer );\n\t\t}\n\n\t\t// After the view is updated, convert markers which have changed.\n\t\tfor ( const change of differ.getMarkersToAdd() ) {\n\t\t\tthis.convertMarkerAdd( change.name, change.range, writer );\n\t\t}\n\t}\n\n\t/**\n\t * Starts a conversion of a range insertion.\n\t *\n\t * For each node in the range, {@link #event:insert `insert` event is fired}. For each attribute on each node,\n\t * {@link #event:attribute `attribute` event is fired}.\n\t *\n\t * @fires insert\n\t * @fires attribute\n\t * @param {module:engine/model/range~Range} range The inserted range.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer The view writer that should be used to modify the view document.\n\t */\n\tconvertInsert( range, writer ) {\n\t\tthis.conversionApi.writer = writer;\n\n\t\t// Create a list of things that can be consumed, consisting of nodes and their attributes.\n\t\tthis.conversionApi.consumable = this._createInsertConsumable( range );\n\n\t\t// Fire a separate insert event for each node and text fragment contained in the range.\n\t\tfor ( const data of Array.from( range ).map( walkerValueToEventData ) ) {\n\t\t\tthis._convertInsertWithAttributes( data );\n\t\t}\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Fires conversion of a single node removal. Fires {@link #event:remove remove event} with provided data.\n\t *\n\t * @param {module:engine/model/position~Position} position Position from which node was removed.\n\t * @param {Number} length Offset size of removed node.\n\t * @param {String} name Name of removed node.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify view document.\n\t */\n\tconvertRemove( position, length, name, writer ) {\n\t\tthis.conversionApi.writer = writer;\n\n\t\tthis.fire( 'remove:' + name, { position, length }, this.conversionApi );\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Starts a conversion of an attribute change on a given `range`.\n\t *\n\t * For each node in the given `range`, {@link #event:attribute attribute event} is fired with the passed data.\n\t *\n\t * @fires attribute\n\t * @param {module:engine/model/range~Range} range Changed range.\n\t * @param {String} key Key of the attribute that has changed.\n\t * @param {*} oldValue Attribute value before the change or `null` if the attribute has not been set before.\n\t * @param {*} newValue New attribute value or `null` if the attribute has been removed.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify view document.\n\t */\n\tconvertAttribute( range, key, oldValue, newValue, writer ) {\n\t\tthis.conversionApi.writer = writer;\n\n\t\t// Create a list with attributes to consume.\n\t\tthis.conversionApi.consumable = this._createConsumableForRange( range, `attribute:${ key }` );\n\n\t\t// Create a separate attribute event for each node in the range.\n\t\tfor ( const value of range ) {\n\t\t\tconst item = value.item;\n\t\t\tconst itemRange = Range._createFromPositionAndShift( value.previousPosition, value.length );\n\t\t\tconst data = {\n\t\t\t\titem,\n\t\t\t\trange: itemRange,\n\t\t\t\tattributeKey: key,\n\t\t\t\tattributeOldValue: oldValue,\n\t\t\t\tattributeNewValue: newValue\n\t\t\t};\n\n\t\t\tthis._testAndFire( `attribute:${ key }`, data );\n\t\t}\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Starts the reconversion of an element. It will:\n\t *\n\t * * Fire an {@link #event:insert `insert` event} for the element to reconvert.\n\t * * Fire an {@link #event:attribute `attribute` event} for element attributes.\n\t *\n\t * This will not reconvert children of the element if they have existing (already converted) views. For newly inserted child elements\n\t * it will behave the same as {@link #convertInsert}.\n\t *\n\t * Element reconversion is defined by the `triggerBy` configuration for the\n\t * {@link module:engine/conversion/downcasthelpers~DowncastHelpers#elementToElement `elementToElement()`} conversion helper.\n\t *\n\t * @fires insert\n\t * @fires attribute\n\t * @param {module:engine/model/element~Element} element The element to be reconverted.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer The view writer that should be used to modify the view document.\n\t */\n\treconvertElement( element, writer ) {\n\t\tconst elementRange = Range._createOn( element );\n\n\t\tthis.conversionApi.writer = writer;\n\n\t\t// Create a list of things that can be consumed, consisting of nodes and their attributes.\n\t\tthis.conversionApi.consumable = this._createInsertConsumable( elementRange );\n\n\t\tconst mapper = this.conversionApi.mapper;\n\t\tconst currentView = mapper.toViewElement( element );\n\n\t\t// Remove the old view but do not remove mapper mappings - those will be used to revive existing elements.\n\t\twriter.remove( currentView );\n\n\t\t// Convert the element - without converting children.\n\t\tthis._convertInsertWithAttributes( {\n\t\t\titem: element,\n\t\t\trange: elementRange\n\t\t} );\n\n\t\tconst convertedViewElement = mapper.toViewElement( element );\n\n\t\t// Iterate over children of reconverted element in order to...\n\t\tfor ( const value of Range._createIn( element ) ) {\n\t\t\tconst { item } = value;\n\n\t\t\tconst view = elementOrTextProxyToView( item, mapper );\n\n\t\t\t// ...either bring back previously converted view...\n\t\t\tif ( view ) {\n\t\t\t\t// Do not move views that are already in converted element - those might be created by the main element converter in case\n\t\t\t\t// when main element converts also its direct children.\n\t\t\t\tif ( view.root !== convertedViewElement.root ) {\n\t\t\t\t\twriter.move(\n\t\t\t\t\t\twriter.createRangeOn( view ),\n\t\t\t\t\t\tmapper.toViewPosition( Position._createBefore( item ) )\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// ... or by converting newly inserted elements.\n\t\t\telse {\n\t\t\t\tthis._convertInsertWithAttributes( walkerValueToEventData( value ) );\n\t\t\t}\n\t\t}\n\n\t\t// After reconversion is done we can unbind the old view.\n\t\tmapper.unbindViewElement( currentView );\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Starts the model selection conversion.\n\t *\n\t * Fires events for a given {@link module:engine/model/selection~Selection selection} to start the selection conversion.\n\t *\n\t * @fires selection\n\t * @fires addMarker\n\t * @fires attribute\n\t * @param {module:engine/model/selection~Selection} selection The selection to convert.\n\t * @param {module:engine/model/markercollection~MarkerCollection} markers Markers connected with the converted model.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify the view document.\n\t */\n\tconvertSelection( selection, markers, writer ) {\n\t\tconst markersAtSelection = Array.from( markers.getMarkersAtPosition( selection.getFirstPosition() ) );\n\n\t\tthis.conversionApi.writer = writer;\n\t\tthis.conversionApi.consumable = this._createSelectionConsumable( selection, markersAtSelection );\n\n\t\tthis.fire( 'selection', { selection }, this.conversionApi );\n\n\t\tif ( !selection.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( const marker of markersAtSelection ) {\n\t\t\tconst markerRange = marker.getRange();\n\n\t\t\tif ( !shouldMarkerChangeBeConverted( selection.getFirstPosition(), marker, this.conversionApi.mapper ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst data = {\n\t\t\t\titem: selection,\n\t\t\t\tmarkerName: marker.name,\n\t\t\t\tmarkerRange\n\t\t\t};\n\n\t\t\tif ( this.conversionApi.consumable.test( selection, 'addMarker:' + marker.name ) ) {\n\t\t\t\tthis.fire( 'addMarker:' + marker.name, data, this.conversionApi );\n\t\t\t}\n\t\t}\n\n\t\tfor ( const key of selection.getAttributeKeys() ) {\n\t\t\tconst data = {\n\t\t\t\titem: selection,\n\t\t\t\trange: selection.getFirstRange(),\n\t\t\t\tattributeKey: key,\n\t\t\t\tattributeOldValue: null,\n\t\t\t\tattributeNewValue: selection.getAttribute( key )\n\t\t\t};\n\n\t\t\t// Do not fire event if the attribute has been consumed.\n\t\t\tif ( this.conversionApi.consumable.test( selection, 'attribute:' + data.attributeKey ) ) {\n\t\t\t\tthis.fire( 'attribute:' + data.attributeKey + ':$text', data, this.conversionApi );\n\t\t\t}\n\t\t}\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Converts the added marker. Fires the {@link #event:addMarker `addMarker`} event for each item\n\t * in the marker's range. If the range is collapsed, a single event is dispatched. See the event description for more details.\n\t *\n\t * @fires addMarker\n\t * @param {String} markerName Marker name.\n\t * @param {module:engine/model/range~Range} markerRange The marker range.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify the view document.\n\t */\n\tconvertMarkerAdd( markerName, markerRange, writer ) {\n\t\t// Do not convert if range is in graveyard or not in the document (e.g. in DocumentFragment).\n\t\tif ( !markerRange.root.document || markerRange.root.rootName == '$graveyard' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.conversionApi.writer = writer;\n\n\t\t// In markers' case, event name == consumable name.\n\t\tconst eventName = 'addMarker:' + markerName;\n\n\t\t//\n\t\t// First, fire an event for the whole marker.\n\t\t//\n\t\tconst consumable = new Consumable();\n\t\tconsumable.add( markerRange, eventName );\n\n\t\tthis.conversionApi.consumable = consumable;\n\n\t\tthis.fire( eventName, { markerName, markerRange }, this.conversionApi );\n\n\t\t//\n\t\t// Do not fire events for each item inside the range if the range got consumed.\n\t\t//\n\t\tif ( !consumable.test( markerRange, eventName ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t//\n\t\t// Then, fire an event for each item inside the marker range.\n\t\t//\n\t\tthis.conversionApi.consumable = this._createConsumableForRange( markerRange, eventName );\n\n\t\tfor ( const item of markerRange.getItems() ) {\n\t\t\t// Do not fire event for already consumed items.\n\t\t\tif ( !this.conversionApi.consumable.test( item, eventName ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst data = { item, range: Range._createOn( item ), markerName, markerRange };\n\n\t\t\tthis.fire( eventName, data, this.conversionApi );\n\t\t}\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Fires the conversion of the marker removal. Fires the {@link #event:removeMarker `removeMarker`} event with the provided data.\n\t *\n\t * @fires removeMarker\n\t * @param {String} markerName Marker name.\n\t * @param {module:engine/model/range~Range} markerRange The marker range.\n\t * @param {module:engine/view/downcastwriter~DowncastWriter} writer View writer that should be used to modify the view document.\n\t */\n\tconvertMarkerRemove( markerName, markerRange, writer ) {\n\t\t// Do not convert if range is in graveyard or not in the document (e.g. in DocumentFragment).\n\t\tif ( !markerRange.root.document || markerRange.root.rootName == '$graveyard' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.conversionApi.writer = writer;\n\n\t\tthis.fire( 'removeMarker:' + markerName, { markerName, markerRange }, this.conversionApi );\n\n\t\tthis._clearConversionApi();\n\t}\n\n\t/**\n\t * Maps the model element \"insert\" reconversion for given event names. The event names must be fully specified:\n\t *\n\t * * For \"attribute\" change event, it should include the main element name, i.e: `'attribute:attributeName:elementName'`.\n\t * * For child node change events, these should use the child event name as well, i.e:\n\t *     * For adding a node: `'insert:childElementName'`.\n\t *     * For removing a node: `'remove:childElementName'`.\n\t *\n\t * **Note**: This method should not be used directly. The reconversion is defined by the `triggerBy()` configuration of the\n\t * `elementToElement()` conversion helper.\n\t *\n\t * @protected\n\t * @param {String} modelName The name of the main model element for which the events will trigger the reconversion.\n\t * @param {String} eventName The name of an event that would trigger conversion for a given model element.\n\t */\n\t_mapReconversionTriggerEvent( modelName, eventName ) {\n\t\tthis._reconversionEventsMapping.set( eventName, modelName );\n\t}\n\n\t/**\n\t * Creates {@link module:engine/conversion/modelconsumable~ModelConsumable} with values to consume from a given range,\n\t * assuming that the range has just been inserted to the model.\n\t *\n\t * @private\n\t * @param {module:engine/model/range~Range} range The inserted range.\n\t * @returns {module:engine/conversion/modelconsumable~ModelConsumable} The values to consume.\n\t */\n\t_createInsertConsumable( range ) {\n\t\tconst consumable = new Consumable();\n\n\t\tfor ( const value of range ) {\n\t\t\tconst item = value.item;\n\n\t\t\tconsumable.add( item, 'insert' );\n\n\t\t\tfor ( const key of item.getAttributeKeys() ) {\n\t\t\t\tconsumable.add( item, 'attribute:' + key );\n\t\t\t}\n\t\t}\n\n\t\treturn consumable;\n\t}\n\n\t/**\n\t * Creates {@link module:engine/conversion/modelconsumable~ModelConsumable} with values to consume for a given range.\n\t *\n\t * @private\n\t * @param {module:engine/model/range~Range} range The affected range.\n\t * @param {String} type Consumable type.\n\t * @returns {module:engine/conversion/modelconsumable~ModelConsumable} The values to consume.\n\t */\n\t_createConsumableForRange( range, type ) {\n\t\tconst consumable = new Consumable();\n\n\t\tfor ( const item of range.getItems() ) {\n\t\t\tconsumable.add( item, type );\n\t\t}\n\n\t\treturn consumable;\n\t}\n\n\t/**\n\t * Creates {@link module:engine/conversion/modelconsumable~ModelConsumable} with selection consumable values.\n\t *\n\t * @private\n\t * @param {module:engine/model/selection~Selection} selection The selection to create the consumable from.\n\t * @param {Iterable.<module:engine/model/markercollection~Marker>} markers Markers that contain the selection.\n\t * @returns {module:engine/conversion/modelconsumable~ModelConsumable} The values to consume.\n\t */\n\t_createSelectionConsumable( selection, markers ) {\n\t\tconst consumable = new Consumable();\n\n\t\tconsumable.add( selection, 'selection' );\n\n\t\tfor ( const marker of markers ) {\n\t\t\tconsumable.add( selection, 'addMarker:' + marker.name );\n\t\t}\n\n\t\tfor ( const key of selection.getAttributeKeys() ) {\n\t\t\tconsumable.add( selection, 'attribute:' + key );\n\t\t}\n\n\t\treturn consumable;\n\t}\n\n\t/**\n\t * Tests passed `consumable` to check whether given event can be fired and if so, fires it.\n\t *\n\t * @private\n\t * @fires insert\n\t * @fires attribute\n\t * @param {String} type Event type.\n\t * @param {Object} data Event data.\n\t */\n\t_testAndFire( type, data ) {\n\t\tif ( !this.conversionApi.consumable.test( data.item, type ) ) {\n\t\t\t// Do not fire event if the item was consumed.\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fire( getEventName( type, data ), data, this.conversionApi );\n\t}\n\n\t/**\n\t * Clears the conversion API object.\n\t *\n\t * @private\n\t */\n\t_clearConversionApi() {\n\t\tdelete this.conversionApi.writer;\n\t\tdelete this.conversionApi.consumable;\n\t}\n\n\t/**\n\t * Internal method for converting element insertion. It will fire events for the inserted element and events for its attributes.\n\t *\n\t * @private\n\t * @fires insert\n\t * @fires attribute\n\t * @param {Object} data Event data.\n\t */\n\t_convertInsertWithAttributes( data ) {\n\t\tthis._testAndFire( 'insert', data );\n\n\t\t// Fire a separate addAttribute event for each attribute that was set on inserted items.\n\t\t// This is important because most attributes converters will listen only to add/change/removeAttribute events.\n\t\t// If we would not add this part, attributes on inserted nodes would not be converted.\n\t\tfor ( const key of data.item.getAttributeKeys() ) {\n\t\t\tdata.attributeKey = key;\n\t\t\tdata.attributeOldValue = null;\n\t\t\tdata.attributeNewValue = data.item.getAttribute( key );\n\n\t\t\tthis._testAndFire( `attribute:${ key }`, data );\n\t\t}\n\t}\n\n\t/**\n\t * Returns differ changes together with added \"reconvert\" type changes for {@link #reconvertElement}. These are defined by\n\t * a the `triggerBy()` configuration for the\n\t * {@link module:engine/conversion/downcasthelpers~DowncastHelpers#elementToElement `elementToElement()`} conversion helper.\n\t *\n\t * This method will remove every mapped insert or remove change with a single \"reconvert\" change.\n\t *\n\t * For instance: Having a `triggerBy()` configuration defined for the `<complex>` element that issues this element reconversion on\n\t * `foo` and `bar` attributes change, and a set of changes for this element:\n\t *\n\t *\t\tconst differChanges = [\n\t *\t\t\t{ type: 'attribute', attributeKey: 'foo', ... },\n\t *\t\t\t{ type: 'attribute', attributeKey: 'bar', ... },\n\t *\t\t\t{ type: 'attribute', attributeKey: 'baz', ... }\n\t *\t\t];\n\t *\n\t * This method will return:\n\t *\n\t *\t\tconst updatedChanges = [\n\t *\t\t\t{ type: 'reconvert', element: complexElementInstance },\n\t *\t\t\t{ type: 'attribute', attributeKey: 'baz', ... }\n\t *\t\t];\n\t *\n\t * In the example above, the `'baz'` attribute change will fire an {@link #event:attribute attribute event}\n\t *\n\t * @param {module:engine/model/differ~Differ} differ The differ object with buffered changes.\n\t * @returns {Array.<Object>} Updated set of changes.\n\t * @private\n\t */\n\t_mapChangesWithAutomaticReconversion( differ ) {\n\t\tconst itemsToReconvert = new Set();\n\t\tconst updated = [];\n\n\t\tfor ( const entry of differ.getChanges() ) {\n\t\t\tconst position = entry.position || entry.range.start;\n\t\t\t// Cached parent - just in case. See https://github.com/ckeditor/ckeditor5/issues/6579.\n\t\t\tconst positionParent = position.parent;\n\t\t\tconst textNode = getTextNodeAtPosition( position, positionParent );\n\n\t\t\t// Reconversion is done only on elements so skip text changes.\n\t\t\tif ( textNode ) {\n\t\t\t\tupdated.push( entry );\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst element = entry.type === 'attribute' ? getNodeAfterPosition( position, positionParent, null ) : positionParent;\n\n\t\t\t// Case of text node set directly in root. For now used only in tests but can be possible when enabled in paragraph-like roots.\n\t\t\t// See: https://github.com/ckeditor/ckeditor5/issues/762.\n\t\t\tif ( element.is( '$text' ) ) {\n\t\t\t\tupdated.push( entry );\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet eventName;\n\n\t\t\tif ( entry.type === 'attribute' ) {\n\t\t\t\teventName = `attribute:${ entry.attributeKey }:${ element.name }`;\n\t\t\t} else {\n\t\t\t\teventName = `${ entry.type }:${ entry.name }`;\n\t\t\t}\n\n\t\t\tif ( this._isReconvertTriggerEvent( eventName, element.name ) ) {\n\t\t\t\tif ( itemsToReconvert.has( element ) ) {\n\t\t\t\t\t// Element is already reconverted, so skip this change.\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\titemsToReconvert.add( element );\n\n\t\t\t\t// Add special \"reconvert\" change.\n\t\t\t\tupdated.push( { type: 'reconvert', element } );\n\t\t\t} else {\n\t\t\t\tupdated.push( entry );\n\t\t\t}\n\t\t}\n\n\t\treturn updated;\n\t}\n\n\t/**\n\t * Checks if the resulting change should trigger element reconversion.\n\t *\n\t * These are defined by a `triggerBy()` configuration for the\n\t * {@link module:engine/conversion/downcasthelpers~DowncastHelpers#elementToElement `elementToElement()`} conversion helper.\n\t *\n\t * @private\n\t * @param {String} eventName The event name to check.\n\t * @param {String} elementName The element name to check.\n\t * @returns {Boolean}\n\t */\n\t_isReconvertTriggerEvent( eventName, elementName ) {\n\t\treturn this._reconversionEventsMapping.get( eventName ) === elementName;\n\t}\n\n\t/**\n\t * Fired for inserted nodes.\n\t *\n\t * `insert` is a namespace for a class of events. Names of actually called events follow this pattern:\n\t * `insert:name`. `name` is either `'$text'`, when {@link module:engine/model/text~Text a text node} has been inserted,\n\t * or {@link module:engine/model/element~Element#name name} of inserted element.\n\t *\n\t * This way listeners can either listen to a general `insert` event or specific event (for example `insert:paragraph`).\n\t *\n\t * @event insert\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/model/item~Item} data.item Inserted item.\n\t * @param {module:engine/model/range~Range} data.range Range spanning over inserted item.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n\n\t/**\n\t * Fired for removed nodes.\n\t *\n\t * `remove` is a namespace for a class of events. Names of actually called events follow this pattern:\n\t * `remove:name`. `name` is either `'$text'`, when {@link module:engine/model/text~Text a text node} has been removed,\n\t * or the {@link module:engine/model/element~Element#name name} of removed element.\n\t *\n\t * This way listeners can either listen to a general `remove` event or specific event (for example `remove:paragraph`).\n\t *\n\t * @event remove\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/model/position~Position} data.position Position from which the node has been removed.\n\t * @param {Number} data.length Offset size of the removed node.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n\n\t/**\n\t * Fired in the following cases:\n\t *\n\t * * when an attribute has been added, changed, or removed from a node,\n\t * * when a node with an attribute is inserted,\n\t * * when collapsed model selection attribute is converted.\n\t *\n\t * `attribute` is a namespace for a class of events. Names of actually called events follow this pattern:\n\t * `attribute:attributeKey:name`. `attributeKey` is the key of added/changed/removed attribute.\n\t * `name` is either `'$text'` if change was on {@link module:engine/model/text~Text a text node},\n\t * or the {@link module:engine/model/element~Element#name name} of element which attribute has changed.\n\t *\n\t * This way listeners can either listen to a general `attribute:bold` event or specific event (for example `attribute:src:image`).\n\t *\n\t * @event attribute\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/model/item~Item|module:engine/model/documentselection~DocumentSelection} data.item Changed item\n\t * or converted selection.\n\t * @param {module:engine/model/range~Range} data.range Range spanning over changed item or selection range.\n\t * @param {String} data.attributeKey Attribute key.\n\t * @param {*} data.attributeOldValue Attribute value before the change. This is `null` when selection attribute is converted.\n\t * @param {*} data.attributeNewValue New attribute value.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n\n\t/**\n\t * Fired for {@link module:engine/model/selection~Selection selection} changes.\n\t *\n\t * @event selection\n\t * @param {module:engine/model/selection~Selection} selection Selection that is converted.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n\n\t/**\n\t * Fired when a new marker is added to the model. Also fired when a collapsed model selection that is inside a marker is converted.\n\t *\n\t * `addMarker` is a namespace for a class of events. Names of actually called events follow this pattern:\n\t * `addMarker:markerName`. By specifying certain marker names, you can make the events even more gradual. For example,\n\t * if markers are named `foo:abc`, `foo:bar`, then it is possible to listen to `addMarker:foo` or `addMarker:foo:abc` and\n\t * `addMarker:foo:bar` events.\n\t *\n\t * If the marker range is not collapsed:\n\t *\n\t * * the event is fired for each item in the marker range one by one,\n\t * * `conversionApi.consumable` includes each item of the marker range and the consumable value is same as the event name.\n\t *\n\t * If the marker range is collapsed:\n\t *\n\t * * there is only one event,\n\t * * `conversionApi.consumable` includes marker range with the event name.\n\t *\n\t * If the selection inside a marker is converted:\n\t *\n\t * * there is only one event,\n\t * * `conversionApi.consumable` includes the selection instance with the event name.\n\t *\n\t * @event addMarker\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/model/item~Item|module:engine/model/selection~Selection} data.item Item inside the new marker or\n\t * the selection that is being converted.\n\t * @param {module:engine/model/range~Range} [data.range] Range spanning over converted item. Available only in marker conversion, if\n\t * the marker range was not collapsed.\n\t * @param {module:engine/model/range~Range} data.markerRange Marker range.\n\t * @param {String} data.markerName Marker name.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n\n\t/**\n\t * Fired when a marker is removed from the model.\n\t *\n\t * `removeMarker` is a namespace for a class of events. Names of actually called events follow this pattern:\n\t * `removeMarker:markerName`. By specifying certain marker names, you can make the events even more gradual. For example,\n\t * if markers are named `foo:abc`, `foo:bar`, then it is possible to listen to `removeMarker:foo` or `removeMarker:foo:abc` and\n\t * `removeMarker:foo:bar` events.\n\t *\n\t * @event removeMarker\n\t * @param {Object} data Additional information about the change.\n\t * @param {module:engine/model/range~Range} data.markerRange Marker range.\n\t * @param {String} data.markerName Marker name.\n\t * @param {module:engine/conversion/downcastdispatcher~DowncastConversionApi} conversionApi Conversion interface\n\t * to be used by callback, passed in `DowncastDispatcher` constructor.\n\t */\n}\n\nmix( DowncastDispatcher, EmitterMixin );\n\n// Helper function, checks whether change of `marker` at `modelPosition` should be converted. Marker changes are not\n// converted if they happen inside an element with custom conversion method.\n//\n// @param {module:engine/model/position~Position} modelPosition\n// @param {module:engine/model/markercollection~Marker} marker\n// @param {module:engine/conversion/mapper~Mapper} mapper\n// @returns {Boolean}\nfunction shouldMarkerChangeBeConverted( modelPosition, marker, mapper ) {\n\tconst range = marker.getRange();\n\tconst ancestors = Array.from( modelPosition.getAncestors() );\n\tancestors.shift(); // Remove root element. It cannot be passed to `model.Range#containsItem`.\n\tancestors.reverse();\n\n\tconst hasCustomHandling = ancestors.some( element => {\n\t\tif ( range.containsItem( element ) ) {\n\t\t\tconst viewElement = mapper.toViewElement( element );\n\n\t\t\treturn !!viewElement.getCustomProperty( 'addHighlight' );\n\t\t}\n\t} );\n\n\treturn !hasCustomHandling;\n}\n\nfunction getEventName( type, data ) {\n\tconst name = data.item.name || '$text';\n\n\treturn `${ type }:${ name }`;\n}\n\nfunction walkerValueToEventData( value ) {\n\tconst item = value.item;\n\tconst itemRange = Range._createFromPositionAndShift( value.previousPosition, value.length );\n\n\treturn {\n\t\titem,\n\t\trange: itemRange\n\t};\n}\n\nfunction elementOrTextProxyToView( item, mapper ) {\n\tif ( item.is( 'textProxy' ) ) {\n\t\tconst mappedPosition = mapper.toViewPosition( Position._createBefore( item ) );\n\t\tconst positionParent = mappedPosition.parent;\n\n\t\treturn positionParent.is( '$text' ) ? positionParent : null;\n\t}\n\n\treturn mapper.toViewElement( item );\n}\n\n/**\n * Conversion interface that is registered for given {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}\n * and is passed as one of parameters when {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher dispatcher}\n * fires its events.\n *\n * @interface module:engine/conversion/downcastdispatcher~DowncastConversionApi\n */\n\n/**\n * The {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher} instance.\n *\n * @member {module:engine/conversion/downcastdispatcher~DowncastDispatcher} #dispatcher\n */\n\n/**\n * Stores the information about what parts of a processed model item are still waiting to be handled. After a piece of a model item was\n * converted, an appropriate consumable value should be {@link module:engine/conversion/modelconsumable~ModelConsumable#consume consumed}.\n *\n * @member {module:engine/conversion/modelconsumable~ModelConsumable} #consumable\n */\n\n/**\n * The {@link module:engine/conversion/mapper~Mapper} instance.\n *\n * @member {module:engine/conversion/mapper~Mapper} #mapper\n */\n\n/**\n * The {@link module:engine/model/schema~Schema} instance set for the model that is downcast.\n *\n * @member {module:engine/model/schema~Schema} #schema\n */\n\n/**\n * The {@link module:engine/view/downcastwriter~DowncastWriter} instance used to manipulate the data during conversion.\n *\n * @member {module:engine/view/downcastwriter~DowncastWriter} #writer\n */\n\n/**\n * An object with an additional configuration which can be used during the conversion process. Available only for data downcast conversion.\n *\n * @member {Object} #options\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/selection\n */\n\nimport Position from './position';\nimport Node from './node';\nimport Range from './range';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport isIterable from '@ckeditor/ckeditor5-utils/src/isiterable';\n\n/**\n * Selection is a set of {@link module:engine/model/range~Range ranges}. It has a direction specified by its\n * {@link module:engine/model/selection~Selection#anchor anchor} and {@link module:engine/model/selection~Selection#focus focus}\n * (it can be {@link module:engine/model/selection~Selection#isBackward forward or backward}).\n * Additionally, selection may have its own attributes (think  whether text typed in in this selection\n * should have those attributes  e.g. whether you type a bolded text).\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class Selection {\n\t/**\n\t * Creates a new selection instance based on the given {@link module:engine/model/selection~Selectable selectable}\n\t * or creates an empty selection if no arguments were passed.\n\t *\n\t *\t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = writer.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tconst selection = writer.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t *\t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tconst selection = writer.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\t// Note: It doesn't copies selection attributes.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tconst selection = writer.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the given document selection.\n\t *\t\t// Note: It doesn't copies selection attributes.\n\t *\t\tconst documentSelection = model.document.selection;\n\t *\t\tconst selection = writer.createSelection( documentSelection );\n\t *\n\t *\t\t// Creates selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\tconst selection = writer.createSelection( position );\n\t *\n\t *\t\t// Creates selection at the given offset in the given element.\n\t *\t\tconst paragraph = writer.createElement( 'paragraph' );\n\t *\t\tconst selection = writer.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/model/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/model/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = writer.createSelection( paragraph, 'on' );\n\t *\n\t * Selection's constructor allow passing additional options (`'backward'`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = writer.createSelection( range, { backward: true } );\n\t *\n\t * @param {module:engine/model/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t */\n\tconstructor( selectable, placeOrOffset, options ) {\n\t\t/**\n\t\t * Specifies whether the last added range was added as a backward or forward range.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._lastRangeBackward = false;\n\n\t\t/**\n\t\t * Stores selection ranges.\n\t\t *\n\t\t * @protected\n\t\t * @type {Array.<module:engine/model/range~Range>}\n\t\t */\n\t\tthis._ranges = [];\n\n\t\t/**\n\t\t * List of attributes set on current selection.\n\t\t *\n\t\t * @protected\n\t\t * @type {Map.<String,*>}\n\t\t */\n\t\tthis._attrs = new Map();\n\n\t\tif ( selectable ) {\n\t\t\tthis.setTo( selectable, placeOrOffset, options );\n\t\t}\n\t}\n\n\t/**\n\t * Selection anchor. Anchor is the position from which the selection was started. If a user is making a selection\n\t * by dragging the mouse, the anchor is where the user pressed the mouse button (the beginning of the selection).\n\t *\n\t * Anchor and {@link #focus} define the direction of the selection, which is important\n\t * when expanding/shrinking selection. The focus moves, while the anchor should remain in the same place.\n\t *\n\t * Anchor is always set to the {@link module:engine/model/range~Range#start start} or\n\t * {@link module:engine/model/range~Range#end end} position of the last of selection's ranges. Whether it is\n\t * the `start` or `end` depends on the specified `options.backward`. See the {@link #setTo `setTo()`} method.\n\t *\n\t * May be set to `null` if there are no ranges in the selection.\n\t *\n\t * @see #focus\n\t * @readonly\n\t * @type {module:engine/model/position~Position|null}\n\t */\n\tget anchor() {\n\t\tif ( this._ranges.length > 0 ) {\n\t\t\tconst range = this._ranges[ this._ranges.length - 1 ];\n\n\t\t\treturn this._lastRangeBackward ? range.end : range.start;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Selection focus. Focus is the position where the selection ends. If a user is making a selection\n\t * by dragging the mouse, the focus is where the mouse cursor is.\n\t *\n\t * May be set to `null` if there are no ranges in the selection.\n\t *\n\t * @see #anchor\n\t * @readonly\n\t * @type {module:engine/model/position~Position|null}\n\t */\n\tget focus() {\n\t\tif ( this._ranges.length > 0 ) {\n\t\t\tconst range = this._ranges[ this._ranges.length - 1 ];\n\n\t\t\treturn this._lastRangeBackward ? range.start : range.end;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Whether the selection is collapsed. Selection is collapsed when there is exactly one range in it\n\t * and it is collapsed.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\tconst length = this._ranges.length;\n\n\t\tif ( length === 1 ) {\n\t\t\treturn this._ranges[ 0 ].isCollapsed;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the number of ranges in the selection.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget rangeCount() {\n\t\treturn this._ranges.length;\n\t}\n\n\t/**\n\t * Specifies whether the selection's {@link #focus} precedes the selection's {@link #anchor}.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isBackward() {\n\t\treturn !this.isCollapsed && this._lastRangeBackward;\n\t}\n\n\t/**\n\t * Checks whether this selection is equal to the given selection. Selections are equal if they have the same directions,\n\t * the same number of ranges and all ranges from one selection equal to ranges from the another selection.\n\t *\n\t * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} otherSelection\n\t * Selection to compare with.\n\t * @returns {Boolean} `true` if selections are equal, `false` otherwise.\n\t */\n\tisEqual( otherSelection ) {\n\t\tif ( this.rangeCount != otherSelection.rangeCount ) {\n\t\t\treturn false;\n\t\t} else if ( this.rangeCount === 0 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( !this.anchor.isEqual( otherSelection.anchor ) || !this.focus.isEqual( otherSelection.focus ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor ( const thisRange of this._ranges ) {\n\t\t\tlet found = false;\n\n\t\t\tfor ( const otherRange of otherSelection._ranges ) {\n\t\t\t\tif ( thisRange.isEqual( otherRange ) ) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !found ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns an iterable object that iterates over copies of selection ranges.\n\t *\n\t * @returns {Iterable.<module:engine/model/range~Range>}\n\t */\n\t* getRanges() {\n\t\tfor ( const range of this._ranges ) {\n\t\t\tyield new Range( range.start, range.end );\n\t\t}\n\t}\n\n\t/**\n\t * Returns a copy of the first range in the selection.\n\t * First range is the one which {@link module:engine/model/range~Range#start start} position\n\t * {@link module:engine/model/position~Position#isBefore is before} start position of all other ranges\n\t * (not to confuse with the first range added to the selection).\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/range~Range|null}\n\t */\n\tgetFirstRange() {\n\t\tlet first = null;\n\n\t\tfor ( const range of this._ranges ) {\n\t\t\tif ( !first || range.start.isBefore( first.start ) ) {\n\t\t\t\tfirst = range;\n\t\t\t}\n\t\t}\n\n\t\treturn first ? new Range( first.start, first.end ) : null;\n\t}\n\n\t/**\n\t * Returns a copy of the last range in the selection.\n\t * Last range is the one which {@link module:engine/model/range~Range#end end} position\n\t * {@link module:engine/model/position~Position#isAfter is after} end position of all other ranges (not to confuse with the range most\n\t * recently added to the selection).\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/range~Range|null}\n\t */\n\tgetLastRange() {\n\t\tlet last = null;\n\n\t\tfor ( const range of this._ranges ) {\n\t\t\tif ( !last || range.end.isAfter( last.end ) ) {\n\t\t\t\tlast = range;\n\t\t\t}\n\t\t}\n\n\t\treturn last ? new Range( last.start, last.end ) : null;\n\t}\n\n\t/**\n\t * Returns the first position in the selection.\n\t * First position is the position that {@link module:engine/model/position~Position#isBefore is before}\n\t * any other position in the selection.\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/position~Position|null}\n\t */\n\tgetFirstPosition() {\n\t\tconst first = this.getFirstRange();\n\n\t\treturn first ? first.start.clone() : null;\n\t}\n\n\t/**\n\t * Returns the last position in the selection.\n\t * Last position is the position that {@link module:engine/model/position~Position#isAfter is after}\n\t * any other position in the selection.\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/position~Position|null}\n\t */\n\tgetLastPosition() {\n\t\tconst lastRange = this.getLastRange();\n\n\t\treturn lastRange ? lastRange.end.clone() : null;\n\t}\n\n\t/**\n\t * Sets this selection's ranges and direction to the specified location based on the given\n\t * {@link module:engine/model/selection~Selectable selectable}.\n\t *\n\t *\t\t// Removes all selection's ranges.\n\t *\t\tselection.setTo( null );\n\t *\n\t *\t\t// Sets selection to the given range.\n\t *\t\tconst range = writer.createRange( start, end );\n\t *\t\tselection.setTo( range );\n\t *\n\t *\t\t// Sets selection to given ranges.\n\t *\t\tconst ranges = [ writer.createRange( start1, end2 ), writer.createRange( star2, end2 ) ];\n\t *\t\tselection.setTo( ranges );\n\t *\n\t *\t\t// Sets selection to other selection.\n\t *\t\t// Note: It doesn't copies selection attributes.\n\t *\t\tconst otherSelection = writer.createSelection();\n\t *\t\tselection.setTo( otherSelection );\n\t *\n\t *\t\t// Sets selection to the given document selection.\n\t *\t\t// Note: It doesn't copies selection attributes.\n\t *\t\tconst documentSelection = new DocumentSelection( doc );\n\t *\t\tselection.setTo( documentSelection );\n\t *\n\t *\t\t// Sets collapsed selection at the given position.\n\t *\t\tconst position = writer.createPositionFromPath( root, path );\n\t *\t\tselection.setTo( position );\n\t *\n\t *\t\t// Sets collapsed selection at the position of the given node and an offset.\n\t *\t\tselection.setTo( paragraph, offset );\n\t *\n\t * Creates a range inside an {@link module:engine/model/element~Element element} which starts before the first child of\n \t * that element and ends after the last child of that element.\n\t *\n\t *\t\tselection.setTo( paragraph, 'in' );\n\t *\n\t * Creates a range on an {@link module:engine/model/item~Item item} which starts before the item and ends just after the item.\n\t *\n\t *\t\tselection.setTo( paragraph, 'on' );\n\t *\n\t * `Selection#setTo()`' method allow passing additional options (`backward`) as the last argument.\n\t *\n\t *\t\t// Sets backward selection.\n\t *\t\tconst selection = writer.createSelection( range, { backward: true } );\n\t *\n\t * @param {module:engine/model/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t */\n\tsetTo( selectable, placeOrOffset, options ) {\n\t\tif ( selectable === null ) {\n\t\t\tthis._setRanges( [] );\n\t\t} else if ( selectable instanceof Selection ) {\n\t\t\tthis._setRanges( selectable.getRanges(), selectable.isBackward );\n\t\t} else if ( selectable && typeof selectable.getRanges == 'function' ) {\n\t\t\t// We assume that the selectable is a DocumentSelection.\n\t\t\t// It can't be imported here, because it would lead to circular imports.\n\t\t\tthis._setRanges( selectable.getRanges(), selectable.isBackward );\n\t\t} else if ( selectable instanceof Range ) {\n\t\t\tthis._setRanges( [ selectable ], !!placeOrOffset && !!placeOrOffset.backward );\n\t\t} else if ( selectable instanceof Position ) {\n\t\t\tthis._setRanges( [ new Range( selectable ) ] );\n\t\t} else if ( selectable instanceof Node ) {\n\t\t\tconst backward = !!options && !!options.backward;\n\t\t\tlet range;\n\n\t\t\tif ( placeOrOffset == 'in' ) {\n\t\t\t\trange = Range._createIn( selectable );\n\t\t\t} else if ( placeOrOffset == 'on' ) {\n\t\t\t\trange = Range._createOn( selectable );\n\t\t\t} else if ( placeOrOffset !== undefined ) {\n\t\t\t\trange = new Range( Position._createAt( selectable, placeOrOffset ) );\n\t\t\t} else {\n\t\t\t\t/**\n\t\t\t\t * selection.setTo requires the second parameter when the first parameter is a node.\n\t\t\t\t *\n\t\t\t\t * @error model-selection-setto-required-second-parameter\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'model-selection-setto-required-second-parameter', [ this, selectable ] );\n\t\t\t}\n\n\t\t\tthis._setRanges( [ range ], backward );\n\t\t} else if ( isIterable( selectable ) ) {\n\t\t\t// We assume that the selectable is an iterable of ranges.\n\t\t\tthis._setRanges( selectable, placeOrOffset && !!placeOrOffset.backward );\n\t\t} else {\n\t\t\t/**\n\t\t\t * Cannot set the selection to the given place.\n\t\t\t *\n\t\t\t * Invalid parameters were specified when setting the selection. Common issues:\n\t\t\t *\n\t\t\t * * A {@link module:engine/model/textproxy~TextProxy} instance was passed instead of\n\t\t\t * a real {@link module:engine/model/text~Text}.\n\t\t\t * * View nodes were passed instead of model nodes.\n\t\t\t * * `null`/`undefined` was passed.\n\t\t\t *\n\t\t\t * @error model-selection-setto-not-selectable\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-selection-setto-not-selectable', [ this, selectable ] );\n\t\t}\n\t}\n\n\t/**\n\t * Replaces all ranges that were added to the selection with given array of ranges. Last range of the array\n\t * is treated like the last added range and is used to set {@link module:engine/model/selection~Selection#anchor} and\n\t * {@link module:engine/model/selection~Selection#focus}. Accepts a flag describing in which direction the selection is made.\n\t *\n\t * @protected\n\t * @fires change:range\n\t * @param {Iterable.<module:engine/model/range~Range>} newRanges Ranges to set.\n\t * @param {Boolean} [isLastBackward=false] Flag describing if last added range was selected forward - from start to end (`false`)\n\t * or backward - from end to start (`true`).\n\t */\n\t_setRanges( newRanges, isLastBackward = false ) {\n\t\tnewRanges = Array.from( newRanges );\n\n\t\t// Check whether there is any range in new ranges set that is different than all already added ranges.\n\t\tconst anyNewRange = newRanges.some( newRange => {\n\t\t\tif ( !( newRange instanceof Range ) ) {\n\t\t\t\t/**\n\t\t\t\t * Selection range set to an object that is not an instance of {@link module:engine/model/range~Range}.\n\t\t\t\t *\n\t\t\t\t * Only {@link module:engine/model/range~Range} instances can be used to set a selection.\n\t\t\t\t * Common mistakes leading to this error are:\n\t\t\t\t *\n\t\t\t\t * * using DOM `Range` object,\n\t\t\t\t * * incorrect CKEditor 5 installation with multiple `ckeditor5-engine` packages having different versions.\n\t\t\t\t *\n\t\t\t\t * @error model-selection-set-ranges-not-range\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'model-selection-set-ranges-not-range',\n\t\t\t\t\t[ this, newRanges ]\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn this._ranges.every( oldRange => {\n\t\t\t\treturn !oldRange.isEqual( newRange );\n\t\t\t} );\n\t\t} );\n\n\t\t// Don't do anything if nothing changed.\n\t\tif ( newRanges.length === this._ranges.length && !anyNewRange ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._removeAllRanges();\n\n\t\tfor ( const range of newRanges ) {\n\t\t\tthis._pushRange( range );\n\t\t}\n\n\t\tthis._lastRangeBackward = !!isLastBackward;\n\n\t\tthis.fire( 'change:range', { directChange: true } );\n\t}\n\n\t/**\n\t * Moves {@link module:engine/model/selection~Selection#focus} to the specified location.\n\t *\n\t * The location can be specified in the same form as\n\t * {@link module:engine/model/writer~Writer#createPositionAt writer.createPositionAt()} parameters.\n\t *\n\t * @fires change:range\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\tsetFocus( itemOrPosition, offset ) {\n\t\tif ( this.anchor === null ) {\n\t\t\t/**\n\t\t\t * Cannot set selection focus if there are no ranges in selection.\n\t\t\t *\n\t\t\t * @error model-selection-setfocus-no-ranges\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'model-selection-setfocus-no-ranges', [ this, itemOrPosition ] );\n\t\t}\n\n\t\tconst newFocus = Position._createAt( itemOrPosition, offset );\n\n\t\tif ( newFocus.compareWith( this.focus ) == 'same' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst anchor = this.anchor;\n\n\t\tif ( this._ranges.length ) {\n\t\t\tthis._popRange();\n\t\t}\n\n\t\tif ( newFocus.compareWith( anchor ) == 'before' ) {\n\t\t\tthis._pushRange( new Range( newFocus, anchor ) );\n\t\t\tthis._lastRangeBackward = true;\n\t\t} else {\n\t\t\tthis._pushRange( new Range( anchor, newFocus ) );\n\t\t\tthis._lastRangeBackward = false;\n\t\t}\n\n\t\tthis.fire( 'change:range', { directChange: true } );\n\t}\n\n\t/**\n\t * Gets an attribute value for given key or `undefined` if that attribute is not set on the selection.\n\t *\n\t * @param {String} key Key of attribute to look for.\n\t * @returns {*} Attribute value or `undefined`.\n\t */\n\tgetAttribute( key ) {\n\t\treturn this._attrs.get( key );\n\t}\n\n\t/**\n\t * Returns iterable that iterates over this selection's attributes.\n\t *\n\t * Attributes are returned as arrays containing two items. First one is attribute key and second is attribute value.\n\t * This format is accepted by native `Map` object and also can be passed in `Node` constructor.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\tgetAttributes() {\n\t\treturn this._attrs.entries();\n\t}\n\n\t/**\n\t * Returns iterable that iterates over this selection's attribute keys.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetAttributeKeys() {\n\t\treturn this._attrs.keys();\n\t}\n\n\t/**\n\t * Checks if the selection has an attribute for given key.\n\t *\n\t * @param {String} key Key of attribute to check.\n\t * @returns {Boolean} `true` if attribute with given key is set on selection, `false` otherwise.\n\t */\n\thasAttribute( key ) {\n\t\treturn this._attrs.has( key );\n\t}\n\n\t/**\n\t * Removes an attribute with given key from the selection.\n\t *\n\t * If given attribute was set on the selection, fires the {@link #event:change:range} event with\n\t * removed attribute key.\n\t *\n\t * @fires change:attribute\n\t * @param {String} key Key of attribute to remove.\n\t */\n\tremoveAttribute( key ) {\n\t\tif ( this.hasAttribute( key ) ) {\n\t\t\tthis._attrs.delete( key );\n\n\t\t\tthis.fire( 'change:attribute', { attributeKeys: [ key ], directChange: true } );\n\t\t}\n\t}\n\n\t/**\n\t * Sets attribute on the selection. If attribute with the same key already is set, it's value is overwritten.\n\t *\n\t * If the attribute value has changed, fires the {@link #event:change:range} event with\n\t * the attribute key.\n\t *\n\t * @fires change:attribute\n\t * @param {String} key Key of attribute to set.\n\t * @param {*} value Attribute value.\n\t */\n\tsetAttribute( key, value ) {\n\t\tif ( this.getAttribute( key ) !== value ) {\n\t\t\tthis._attrs.set( key, value );\n\n\t\t\tthis.fire( 'change:attribute', { attributeKeys: [ key ], directChange: true } );\n\t\t}\n\t}\n\n\t/**\n\t * Returns the selected element. {@link module:engine/model/element~Element Element} is considered as selected if there is only\n\t * one range in the selection, and that range contains exactly one element.\n\t * Returns `null` if there is no selected element.\n\t *\n\t * @returns {module:engine/model/element~Element|null}\n\t */\n\tgetSelectedElement() {\n\t\tif ( this.rangeCount !== 1 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.getFirstRange().getContainedElement();\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\tselection.is( 'selection' ); // -> true\n\t *\t\tselection.is( 'model:selection' ); // -> true\n\t *\n\t *\t\tselection.is( 'view:selection' ); // -> false\n\t *\t\tselection.is( 'range' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'selection' || type === 'model:selection';\n\t}\n\n\t/**\n\t * Gets elements of type {@link module:engine/model/schema~Schema#isBlock \"block\"} touched by the selection.\n\t *\n\t * This method's result can be used for example to apply block styling to all blocks covered by this selection.\n\t *\n\t * **Note:** `getSelectedBlocks()` returns blocks that are nested in other non-block elements\n\t * but will not return blocks nested in other blocks.\n\t *\n\t * In this case the function will return exactly all 3 paragraphs (note: `<blockQuote>` is not a block itself):\n\t *\n\t *\t\t<paragraph>[a</paragraph>\n\t *\t\t<blockQuote>\n\t *\t\t\t<paragraph>b</paragraph>\n\t *\t\t</blockQuote>\n\t *\t\t<paragraph>c]d</paragraph>\n\t *\n\t * In this case the paragraph will also be returned, despite the collapsed selection:\n\t *\n\t *\t\t<paragraph>[]a</paragraph>\n\t *\n\t * In such a scenario, however, only blocks A, B & E will be returned as blocks C & D are nested in block B:\n\t *\n\t *\t\t[<blockA></blockA>\n\t *\t\t<blockB>\n\t *\t\t\t<blockC></blockC>\n\t *\t\t\t<blockD></blockD>\n\t *\t\t</blockB>\n\t *\t\t<blockE></blockE>]\n\t *\n\t * If the selection is inside a block all the inner blocks (A & B) are returned:\n\t *\n\t * \t\t<block>\n\t *\t\t\t<blockA>[a</blockA>\n\t * \t\t\t<blockB>b]</blockB>\n\t * \t\t</block>\n\t *\n\t * **Special case**: If a selection ends at the beginning of a block, that block is not returned as from user perspective\n\t * this block wasn't selected. See [#984](https://github.com/ckeditor/ckeditor5-engine/issues/984) for more details.\n\t *\n\t *\t\t<paragraph>[a</paragraph>\n\t *\t\t<paragraph>b</paragraph>\n\t *\t\t<paragraph>]c</paragraph> // this block will not be returned\n\t *\n\t * @returns {Iterable.<module:engine/model/element~Element>}\n\t */\n\t* getSelectedBlocks() {\n\t\tconst visited = new WeakSet();\n\n\t\tfor ( const range of this.getRanges() ) {\n\t\t\t// Get start block of range in case of a collapsed range.\n\t\t\tconst startBlock = getParentBlock( range.start, visited );\n\n\t\t\tif ( startBlock && isTopBlockInRange( startBlock, range ) ) {\n\t\t\t\tyield startBlock;\n\t\t\t}\n\n\t\t\tfor ( const value of range.getWalker() ) {\n\t\t\t\tconst block = value.item;\n\n\t\t\t\tif ( value.type == 'elementEnd' && isUnvisitedTopBlock( block, visited, range ) ) {\n\t\t\t\t\tyield block;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst endBlock = getParentBlock( range.end, visited );\n\n\t\t\t// #984. Don't return the end block if the range ends right at its beginning.\n\t\t\tif ( endBlock && !range.end.isTouching( Position._createAt( endBlock, 0 ) ) && isTopBlockInRange( endBlock, range ) ) {\n\t\t\t\tyield endBlock;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks whether the selection contains the entire content of the given element. This means that selection must start\n\t * at a position {@link module:engine/model/position~Position#isTouching touching} the element's start and ends at position\n\t * touching the element's end.\n\t *\n\t * By default, this method will check whether the entire content of the selection's current root is selected.\n\t * Useful to check if e.g. the user has just pressed <kbd>Ctrl</kbd> + <kbd>A</kbd>.\n\t *\n\t * @param {module:engine/model/element~Element} [element=this.anchor.root]\n\t * @returns {Boolean}\n\t */\n\tcontainsEntireContent( element = this.anchor.root ) {\n\t\tconst limitStartPosition = Position._createAt( element, 0 );\n\t\tconst limitEndPosition = Position._createAt( element, 'end' );\n\n\t\treturn limitStartPosition.isTouching( this.getFirstPosition() ) &&\n\t\t\tlimitEndPosition.isTouching( this.getLastPosition() );\n\t}\n\n\t/**\n\t * Adds given range to internal {@link #_ranges ranges array}. Throws an error\n\t * if given range is intersecting with any range that is already stored in this selection.\n\t *\n\t * @protected\n\t * @param {module:engine/model/range~Range} range Range to add.\n\t */\n\t_pushRange( range ) {\n\t\tthis._checkRange( range );\n\t\tthis._ranges.push( new Range( range.start, range.end ) );\n\t}\n\n\t/**\n\t * Checks if given range intersects with ranges that are already in the selection. Throws an error if it does.\n\t *\n\t * @protected\n\t * @param {module:engine/model/range~Range} range Range to check.\n\t */\n\t_checkRange( range ) {\n\t\tfor ( let i = 0; i < this._ranges.length; i++ ) {\n\t\t\tif ( range.isIntersecting( this._ranges[ i ] ) ) {\n\t\t\t\t/**\n\t\t\t\t * Trying to add a range that intersects with another range in the selection.\n\t\t\t\t *\n\t\t\t\t * @error model-selection-range-intersects\n\t\t\t\t * @param {module:engine/model/range~Range} addedRange Range that was added to the selection.\n\t\t\t\t * @param {module:engine/model/range~Range} intersectingRange Range in the selection that intersects with `addedRange`.\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'model-selection-range-intersects',\n\t\t\t\t\t[ this, range ],\n\t\t\t\t\t{ addedRange: range, intersectingRange: this._ranges[ i ] }\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Deletes ranges from internal range array. Uses {@link #_popRange _popRange} to\n\t * ensure proper ranges removal.\n\t *\n\t * @protected\n\t */\n\t_removeAllRanges() {\n\t\twhile ( this._ranges.length > 0 ) {\n\t\t\tthis._popRange();\n\t\t}\n\t}\n\n\t/**\n\t * Removes most recently added range from the selection.\n\t *\n\t * @protected\n\t */\n\t_popRange() {\n\t\tthis._ranges.pop();\n\t}\n\n\t/**\n\t * Fired when selection range(s) changed.\n\t *\n\t * @event change:range\n\t * @param {Boolean} directChange In case of {@link module:engine/model/selection~Selection} class it is always set\n\t * to `true` which indicates that the selection change was caused by a direct use of selection's API.\n\t * The {@link module:engine/model/documentselection~DocumentSelection}, however, may change because its position\n\t * was directly changed through the {@link module:engine/model/writer~Writer writer} or because its position was\n\t * changed because the structure of the model has been changed (which means an indirect change).\n\t * The indirect change does not occur in case of normal (detached) selections because they are \"static\" (as \"not live\")\n\t * which mean that they are not updated once the document changes.\n\t */\n\n\t/**\n\t * Fired when selection attribute changed.\n\t *\n\t * @event change:attribute\n\t * @param {Boolean} directChange In case of {@link module:engine/model/selection~Selection} class it is always set\n\t * to `true` which indicates that the selection change was caused by a direct use of selection's API.\n\t * The {@link module:engine/model/documentselection~DocumentSelection}, however, may change because its attributes\n\t * were directly changed through the {@link module:engine/model/writer~Writer writer} or because its position was\n\t * changed in the model and its attributes were refreshed (which means an indirect change).\n\t * The indirect change does not occur in case of normal (detached) selections because they are \"static\" (as \"not live\")\n\t * which mean that they are not updated once the document changes.\n\t * @param {Array.<String>} attributeKeys Array containing keys of attributes that changed.\n\t */\n}\n\nmix( Selection, EmitterMixin );\n\n// Checks whether the given element extends $block in the schema and has a parent (is not a root).\n// Marks it as already visited.\nfunction isUnvisitedBlock( element, visited ) {\n\tif ( visited.has( element ) ) {\n\t\treturn false;\n\t}\n\n\tvisited.add( element );\n\n\treturn element.root.document.model.schema.isBlock( element ) && element.parent;\n}\n\n// Checks if the given element is a $block was not previously visited and is a top block in a range.\nfunction isUnvisitedTopBlock( element, visited, range ) {\n\treturn isUnvisitedBlock( element, visited ) && isTopBlockInRange( element, range );\n}\n\n// Finds the lowest element in position's ancestors which is a block.\n// It will search until first ancestor that is a limit element.\n// Marks all ancestors as already visited to not include any of them later on.\nfunction getParentBlock( position, visited ) {\n\tconst element = position.parent;\n\tconst schema = element.root.document.model.schema;\n\n\tconst ancestors = position.parent.getAncestors( { parentFirst: true, includeSelf: true } );\n\n\tlet hasParentLimit = false;\n\n\tconst block = ancestors.find( element => {\n\t\t// Stop searching after first parent node that is limit element.\n\t\tif ( hasParentLimit ) {\n\t\t\treturn false;\n\t\t}\n\n\t\thasParentLimit = schema.isLimit( element );\n\n\t\treturn !hasParentLimit && isUnvisitedBlock( element, visited );\n\t} );\n\n\t// Mark all ancestors of this position's parent, because find() might've stopped early and\n\t// the found block may be a child of another block.\n\tancestors.forEach( element => visited.add( element ) );\n\n\treturn block;\n}\n\n// Checks if the blocks is not nested in other block inside a range.\n//\n// @param {module:engine/model/element~Element} block Block to check.\n// @param {module:engine/model/range~Range} range Range to check.\nfunction isTopBlockInRange( block, range ) {\n\tconst parentBlock = findAncestorBlock( block );\n\n\tif ( !parentBlock ) {\n\t\treturn true;\n\t}\n\n\t// Add loose flag to check as parentRange can be equal to range.\n\tconst isParentInRange = range.containsRange( Range._createOn( parentBlock ), true );\n\n\treturn !isParentInRange;\n}\n\n// Returns first ancestor block of a node.\n//\n// @param {module:engine/model/node~Node} node\n// @returns {module:engine/model/node~Node|undefined}\nfunction findAncestorBlock( node ) {\n\tconst schema = node.root.document.model.schema;\n\n\tlet parent = node.parent;\n\n\twhile ( parent ) {\n\t\tif ( schema.isBlock( parent ) ) {\n\t\t\treturn parent;\n\t\t}\n\n\t\tparent = parent.parent;\n\t}\n}\n\n/**\n * An entity that is used to set selection.\n *\n * See also {@link module:engine/model/selection~Selection#setTo}\n *\n * @typedef {\n *     module:engine/model/selection~Selection|\n *     module:engine/model/documentselection~DocumentSelection|\n *     module:engine/model/position~Position|\n *     module:engine/model/range~Range|\n *     module:engine/model/node~Node|\n *     Iterable.<module:engine/model/range~Range>|\n *     null\n * } module:engine/model/selection~Selectable\n */\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/liverange\n */\n\nimport Range from './range';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * `LiveRange` is a type of {@link module:engine/model/range~Range Range}\n * that updates itself as {@link module:engine/model/document~Document document}\n * is changed through operations. It may be used as a bookmark.\n *\n * **Note:** Be very careful when dealing with `LiveRange`. Each `LiveRange` instance bind events that might\n * have to be unbound. Use {@link module:engine/model/liverange~LiveRange#detach detach} whenever you don't need `LiveRange` anymore.\n */\nexport default class LiveRange extends Range {\n\t/**\n\t * Creates a live range.\n\t *\n\t * @see module:engine/model/range~Range\n\t */\n\tconstructor( start, end ) {\n\t\tsuper( start, end );\n\n\t\tbindWithDocument.call( this );\n\t}\n\n\t/**\n\t * Unbinds all events previously bound by `LiveRange`. Use it whenever you don't need `LiveRange` instance\n\t * anymore (i.e. when leaving scope in which it was declared or before re-assigning variable that was\n\t * referring to it).\n\t */\n\tdetach() {\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Checks whether this object is of the given.\n\t *\n\t *\t\tliveRange.is( 'range' ); // -> true\n\t *\t\tliveRange.is( 'model:range' ); // -> true\n\t *\t\tliveRange.is( 'liveRange' ); // -> true\n\t *\t\tliveRange.is( 'model:liveRange' ); // -> true\n\t *\n\t *\t\tliveRange.is( 'view:range' ); // -> false\n\t *\t\tliveRange.is( 'documentSelection' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'liveRange' || type === 'model:liveRange' ||\n\t\t\t// From super.is(). This is highly utilised method and cannot call super. See ckeditor/ckeditor5#6529.\n\t\t\ttype == 'range' || type === 'model:range';\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/model/range~Range range instance} that is equal to this live range.\n\t *\n\t * @returns {module:engine/model/range~Range}\n\t */\n\ttoRange() {\n\t\treturn new Range( this.start, this.end );\n\t}\n\n\t/**\n\t * Creates a `LiveRange` instance that is equal to the given range.\n\t *\n\t * @param {module:engine/model/range~Range} range\n\t * @returns {module:engine/model/liverange~LiveRange}\n\t */\n\tstatic fromRange( range ) {\n\t\treturn new LiveRange( range.start, range.end );\n\t}\n\n\t/**\n\t * @see module:engine/model/range~Range._createIn\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liverange~LiveRange._createIn\n\t * @param {module:engine/model/element~Element} element\n\t * @returns {module:engine/model/liverange~LiveRange}\n\t */\n\n\t/**\n\t * @see module:engine/model/range~Range._createOn\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liverange~LiveRange._createOn\n\t * @param {module:engine/model/element~Element} element\n\t * @returns {module:engine/model/liverange~LiveRange}\n\t */\n\n\t/**\n\t * @see module:engine/model/range~Range._createFromPositionAndShift\n\t * @static\n\t * @protected\n\t * @method module:engine/model/liverange~LiveRange._createFromPositionAndShift\n\t * @param {module:engine/model/position~Position} position\n\t * @param {Number} shift\n\t * @returns {module:engine/model/liverange~LiveRange}\n\t */\n\n\t/**\n\t * Fired when `LiveRange` instance boundaries have changed due to changes in the\n\t * {@link module:engine/model/document~Document document}.\n\t *\n\t * @event change:range\n\t * @param {module:engine/model/range~Range} oldRange Range with start and end position equal to start and end position of this live\n\t * range before it got changed.\n\t * @param {Object} data Object with additional information about the change.\n\t * @param {module:engine/model/position~Position|null} data.deletionPosition Source position for remove and merge changes.\n\t * Available if the range was moved to the graveyard root, `null` otherwise.\n\t */\n\n\t/**\n\t * Fired when `LiveRange` instance boundaries have not changed after a change in {@link module:engine/model/document~Document document}\n\t * but the change took place inside the range, effectively changing its content.\n\t *\n\t * @event change:content\n\t * @param {module:engine/model/range~Range} range Range with start and end position equal to start and end position of\n\t * change range.\n\t * @param {Object} data Object with additional information about the change.\n\t * @param {null} data.deletionPosition Due to the nature of this event, this property is always set to `null`. It is passed\n\t * for compatibility with the {@link module:engine/model/liverange~LiveRange#event:change:range} event.\n\t */\n}\n\n// Binds this `LiveRange` to the {@link module:engine/model/document~Document document}\n// that owns this range's {@link module:engine/model/range~Range#root root}.\n//\n// @private\nfunction bindWithDocument() {\n\tthis.listenTo(\n\t\tthis.root.document.model,\n\t\t'applyOperation',\n\t\t( event, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\tif ( !operation.isDocumentOperation ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttransform.call( this, operation );\n\t\t},\n\t\t{ priority: 'low' }\n\t);\n}\n\n// Updates this range accordingly to the updates applied to the model. Bases on change events.\n//\n// @private\n// @param {module:engine/model/operation/operation~Operation} operation Executed operation.\nfunction transform( operation ) {\n\t// Transform the range by the operation. Join the result ranges if needed.\n\tconst ranges = this.getTransformedByOperation( operation );\n\tconst result = Range._createFromRanges( ranges );\n\n\tconst boundariesChanged = !result.isEqual( this );\n\tconst contentChanged = doesOperationChangeRangeContent( this, operation );\n\n\tlet deletionPosition = null;\n\n\tif ( boundariesChanged ) {\n\t\t// If range boundaries have changed, fire `change:range` event.\n\t\t//\n\t\tif ( result.root.rootName == '$graveyard' ) {\n\t\t\t// If the range was moved to the graveyard root, set `deletionPosition`.\n\t\t\tif ( operation.type == 'remove' ) {\n\t\t\t\tdeletionPosition = operation.sourcePosition;\n\t\t\t} else {\n\t\t\t\t// Merge operation.\n\t\t\t\tdeletionPosition = operation.deletionPosition;\n\t\t\t}\n\t\t}\n\n\t\tconst oldRange = this.toRange();\n\n\t\tthis.start = result.start;\n\t\tthis.end = result.end;\n\n\t\tthis.fire( 'change:range', oldRange, { deletionPosition } );\n\t} else if ( contentChanged ) {\n\t\t// If range boundaries have not changed, but there was change inside the range, fire `change:content` event.\n\t\tthis.fire( 'change:content', this.toRange(), { deletionPosition } );\n\t}\n}\n\n// Checks whether given operation changes something inside the range (even if it does not change boundaries).\n//\n// @private\n// @param {module:engine/model/range~Range} range Range to check.\n// @param {module:engine/model/operation/operation~Operation} operation Executed operation.\n// @returns {Boolean}\nfunction doesOperationChangeRangeContent( range, operation ) {\n\tswitch ( operation.type ) {\n\t\tcase 'insert':\n\t\t\treturn range.containsPosition( operation.position );\n\t\tcase 'move':\n\t\tcase 'remove':\n\t\tcase 'reinsert':\n\t\tcase 'merge':\n\t\t\treturn range.containsPosition( operation.sourcePosition ) ||\n\t\t\t\trange.start.isEqual( operation.sourcePosition ) ||\n\t\t\t\trange.containsPosition( operation.targetPosition );\n\t\tcase 'split':\n\t\t\treturn range.containsPosition( operation.splitPosition ) || range.containsPosition( operation.insertionPosition );\n\t}\n\n\treturn false;\n}\n\nmix( LiveRange, EmitterMixin );\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/documentselection\n */\n\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\n\nimport Selection from './selection';\nimport LiveRange from './liverange';\nimport Text from './text';\nimport TextProxy from './textproxy';\nimport toMap from '@ckeditor/ckeditor5-utils/src/tomap';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport uid from '@ckeditor/ckeditor5-utils/src/uid';\n\nconst storePrefix = 'selection:';\n\n/**\n * `DocumentSelection` is a special selection which is used as the\n * {@link module:engine/model/document~Document#selection document's selection}.\n * There can be only one instance of `DocumentSelection` per document.\n *\n * Document selection can only be changed by using the {@link module:engine/model/writer~Writer} instance\n * inside the {@link module:engine/model/model~Model#change `change()`} block, as it provides a secure way to modify model.\n *\n * `DocumentSelection` is automatically updated upon changes in the {@link module:engine/model/document~Document document}\n * to always contain valid ranges. Its attributes are inherited from the text unless set explicitly.\n *\n * Differences between {@link module:engine/model/selection~Selection} and `DocumentSelection` are:\n * * there is always a range in `DocumentSelection` - even if no ranges were added there is a \"default range\"\n * present in the selection,\n * * ranges added to this selection updates automatically when the document changes,\n * * attributes of `DocumentSelection` are updated automatically according to selection ranges.\n *\n * Since `DocumentSelection` uses {@link module:engine/model/liverange~LiveRange live ranges}\n * and is updated when {@link module:engine/model/document~Document document}\n * changes, it cannot be set on {@link module:engine/model/node~Node nodes}\n * that are inside {@link module:engine/model/documentfragment~DocumentFragment document fragment}.\n * If you need to represent a selection in document fragment,\n * use {@link module:engine/model/selection~Selection Selection class} instead.\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class DocumentSelection {\n\t/**\n\t * Creates an empty live selection for given {@link module:engine/model/document~Document}.\n\t *\n\t * @param {module:engine/model/document~Document} doc Document which owns this selection.\n\t */\n\tconstructor( doc ) {\n\t\t/**\n\t\t * Selection used internally by that class (`DocumentSelection` is a proxy to that selection).\n\t\t *\n\t\t * @protected\n\t\t */\n\t\tthis._selection = new LiveSelection( doc );\n\n\t\tthis._selection.delegate( 'change:range' ).to( this );\n\t\tthis._selection.delegate( 'change:attribute' ).to( this );\n\t\tthis._selection.delegate( 'change:marker' ).to( this );\n\t}\n\n\t/**\n\t * Returns whether the selection is collapsed. Selection is collapsed when there is exactly one range which is\n\t * collapsed.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isCollapsed() {\n\t\treturn this._selection.isCollapsed;\n\t}\n\n\t/**\n\t * Selection anchor. Anchor may be described as a position where the most recent part of the selection starts.\n\t * Together with {@link #focus} they define the direction of selection, which is important\n\t * when expanding/shrinking selection. Anchor is always {@link module:engine/model/range~Range#start start} or\n\t * {@link module:engine/model/range~Range#end end} position of the most recently added range.\n\t *\n\t * Is set to `null` if there are no ranges in selection.\n\t *\n\t * @see #focus\n\t * @readonly\n\t * @type {module:engine/model/position~Position|null}\n\t */\n\tget anchor() {\n\t\treturn this._selection.anchor;\n\t}\n\n\t/**\n\t * Selection focus. Focus is a position where the selection ends.\n\t *\n\t * Is set to `null` if there are no ranges in selection.\n\t *\n\t * @see #anchor\n\t * @readonly\n\t * @type {module:engine/model/position~Position|null}\n\t */\n\tget focus() {\n\t\treturn this._selection.focus;\n\t}\n\n\t/**\n\t * Returns number of ranges in selection.\n\t *\n\t * @readonly\n\t * @type {Number}\n\t */\n\tget rangeCount() {\n\t\treturn this._selection.rangeCount;\n\t}\n\n\t/**\n\t * Describes whether `Documentselection` has own range(s) set, or if it is defaulted to\n\t * {@link module:engine/model/document~Document#_getDefaultRange document's default range}.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget hasOwnRange() {\n\t\treturn this._selection.hasOwnRange;\n\t}\n\n\t/**\n\t * Specifies whether the {@link #focus}\n\t * precedes {@link #anchor}.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isBackward() {\n\t\treturn this._selection.isBackward;\n\t}\n\n\t/**\n\t * Describes whether the gravity is overridden (using {@link module:engine/model/writer~Writer#overrideSelectionGravity}) or not.\n\t *\n\t * Note that the gravity remains overridden as long as will not be restored the same number of times as it was overridden.\n\t *\n\t * @readonly\n\t * @returns {Boolean}\n\t */\n\tget isGravityOverridden() {\n\t\treturn this._selection.isGravityOverridden;\n\t}\n\n\t/**\n\t * A collection of selection {@link module:engine/model/markercollection~Marker markers}.\n\t * Marker is a selection marker when selection range is inside the marker range.\n\t *\n\t * **Note**: Only markers from {@link ~DocumentSelection#observeMarkers observed markers groups} are collected.\n\t *\n\t * @readonly\n\t * @type {module:utils/collection~Collection}\n\t */\n\tget markers() {\n\t\treturn this._selection.markers;\n\t}\n\n\t/**\n\t * Used for the compatibility with the {@link module:engine/model/selection~Selection#isEqual} method.\n\t *\n\t * @protected\n\t */\n\tget _ranges() {\n\t\treturn this._selection._ranges;\n\t}\n\n\t/**\n\t * Returns an iterable that iterates over copies of selection ranges.\n\t *\n\t * @returns {Iterable.<module:engine/model/range~Range>}\n\t */\n\tgetRanges() {\n\t\treturn this._selection.getRanges();\n\t}\n\n\t/**\n\t * Returns the first position in the selection.\n\t * First position is the position that {@link module:engine/model/position~Position#isBefore is before}\n\t * any other position in the selection.\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/position~Position|null}\n\t */\n\tgetFirstPosition() {\n\t\treturn this._selection.getFirstPosition();\n\t}\n\n\t/**\n\t * Returns the last position in the selection.\n\t * Last position is the position that {@link module:engine/model/position~Position#isAfter is after}\n\t * any other position in the selection.\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/position~Position|null}\n\t */\n\tgetLastPosition() {\n\t\treturn this._selection.getLastPosition();\n\t}\n\n\t/**\n\t * Returns a copy of the first range in the selection.\n\t * First range is the one which {@link module:engine/model/range~Range#start start} position\n\t * {@link module:engine/model/position~Position#isBefore is before} start position of all other ranges\n\t * (not to confuse with the first range added to the selection).\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/range~Range|null}\n\t */\n\tgetFirstRange() {\n\t\treturn this._selection.getFirstRange();\n\t}\n\n\t/**\n\t * Returns a copy of the last range in the selection.\n\t * Last range is the one which {@link module:engine/model/range~Range#end end} position\n\t * {@link module:engine/model/position~Position#isAfter is after} end position of all other ranges (not to confuse with the range most\n\t * recently added to the selection).\n\t *\n\t * Returns `null` if there are no ranges in selection.\n\t *\n\t * @returns {module:engine/model/range~Range|null}\n\t */\n\tgetLastRange() {\n\t\treturn this._selection.getLastRange();\n\t}\n\n\t/**\n\t * Gets elements of type {@link module:engine/model/schema~Schema#isBlock \"block\"} touched by the selection.\n\t *\n\t * This method's result can be used for example to apply block styling to all blocks covered by this selection.\n\t *\n\t * **Note:** `getSelectedBlocks()` returns blocks that are nested in other non-block elements\n\t * but will not return blocks nested in other blocks.\n\t *\n\t * In this case the function will return exactly all 3 paragraphs (note: `<blockQuote>` is not a block itself):\n\t *\n\t *\t\t<paragraph>[a</paragraph>\n\t *\t\t<blockQuote>\n\t *\t\t\t<paragraph>b</paragraph>\n\t *\t\t</blockQuote>\n\t *\t\t<paragraph>c]d</paragraph>\n\t *\n\t * In this case the paragraph will also be returned, despite the collapsed selection:\n\t *\n\t *\t\t<paragraph>[]a</paragraph>\n\t *\n\t * In such a scenario, however, only blocks A, B & E will be returned as blocks C & D are nested in block B:\n\t *\n\t *\t\t[<blockA></blockA>\n\t *\t\t<blockB>\n\t *\t\t\t<blockC></blockC>\n\t *\t\t\t<blockD></blockD>\n\t *\t\t</blockB>\n\t *\t\t<blockE></blockE>]\n\t *\n\t * If the selection is inside a block all the inner blocks (A & B) are returned:\n\t *\n\t * \t\t<block>\n\t *\t\t\t<blockA>[a</blockA>\n\t * \t\t\t<blockB>b]</blockB>\n\t * \t\t</block>\n\t *\n\t * **Special case**: If a selection ends at the beginning of a block, that block is not returned as from user perspective\n\t * this block wasn't selected. See [#984](https://github.com/ckeditor/ckeditor5-engine/issues/984) for more details.\n\t *\n\t *\t\t<paragraph>[a</paragraph>\n\t *\t\t<paragraph>b</paragraph>\n\t *\t\t<paragraph>]c</paragraph> // this block will not be returned\n\t *\n\t * @returns {Iterable.<module:engine/model/element~Element>}\n\t */\n\tgetSelectedBlocks() {\n\t\treturn this._selection.getSelectedBlocks();\n\t}\n\n\t/**\n\t * Returns the selected element. {@link module:engine/model/element~Element Element} is considered as selected if there is only\n\t * one range in the selection, and that range contains exactly one element.\n\t * Returns `null` if there is no selected element.\n\t *\n\t * @returns {module:engine/model/element~Element|null}\n\t */\n\tgetSelectedElement() {\n\t\treturn this._selection.getSelectedElement();\n\t}\n\n\t/**\n\t * Checks whether the selection contains the entire content of the given element. This means that selection must start\n\t * at a position {@link module:engine/model/position~Position#isTouching touching} the element's start and ends at position\n\t * touching the element's end.\n\t *\n\t * By default, this method will check whether the entire content of the selection's current root is selected.\n\t * Useful to check if e.g. the user has just pressed <kbd>Ctrl</kbd> + <kbd>A</kbd>.\n\t *\n\t * @param {module:engine/model/element~Element} [element=this.anchor.root]\n\t * @returns {Boolean}\n\t */\n\tcontainsEntireContent( element ) {\n\t\treturn this._selection.containsEntireContent( element );\n\t}\n\n\t/**\n\t * Unbinds all events previously bound by document selection.\n\t */\n\tdestroy() {\n\t\tthis._selection.destroy();\n\t}\n\n\t/**\n\t * Returns iterable that iterates over this selection's attribute keys.\n\t *\n\t * @returns {Iterable.<String>}\n\t */\n\tgetAttributeKeys() {\n\t\treturn this._selection.getAttributeKeys();\n\t}\n\n\t/**\n\t * Returns iterable that iterates over this selection's attributes.\n\t *\n\t * Attributes are returned as arrays containing two items. First one is attribute key and second is attribute value.\n\t * This format is accepted by native `Map` object and also can be passed in `Node` constructor.\n\t *\n\t * @returns {Iterable.<*>}\n\t */\n\tgetAttributes() {\n\t\treturn this._selection.getAttributes();\n\t}\n\n\t/**\n\t * Gets an attribute value for given key or `undefined` if that attribute is not set on the selection.\n\t *\n\t * @param {String} key Key of attribute to look for.\n\t * @returns {*} Attribute value or `undefined`.\n\t */\n\tgetAttribute( key ) {\n\t\treturn this._selection.getAttribute( key );\n\t}\n\n\t/**\n\t * Checks if the selection has an attribute for given key.\n\t *\n\t * @param {String} key Key of attribute to check.\n\t * @returns {Boolean} `true` if attribute with given key is set on selection, `false` otherwise.\n\t */\n\thasAttribute( key ) {\n\t\treturn this._selection.hasAttribute( key );\n\t}\n\n\t/**\n\t * Refreshes selection attributes and markers according to the current position in the model.\n\t */\n\trefresh() {\n\t\tthis._selection._updateMarkers();\n\t\tthis._selection._updateAttributes( false );\n\t}\n\n\t/**\n\t * Registers marker group prefix or marker name to be collected in {@link ~DocumentSelection#markers selection markers collection}.\n\t *\n\t * See also {@link module:engine/model/markercollection~MarkerCollection#getMarkersGroup `MarkerCollection#getMarkersGroup()`}.\n\t *\n\t * @param {String} prefixOrName Marker group prefix or marker name.\n\t */\n\tobserveMarkers( prefixOrName ) {\n\t\tthis._selection.observeMarkers( prefixOrName );\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\tselection.is( 'selection' ); // -> true\n\t *\t\tselection.is( 'documentSelection' ); // -> true\n\t *\t\tselection.is( 'model:selection' ); // -> true\n\t *\t\tselection.is( 'model:documentSelection' ); // -> true\n\t *\n\t *\t\tselection.is( 'view:selection' ); // -> false\n\t *\t\tselection.is( 'element' ); // -> false\n\t *\t\tselection.is( 'node' ); // -> false\n\t *\n\t * {@link module:engine/model/node~Node#is Check the entire list of model objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'selection' ||\n\t\t\ttype == 'model:selection' ||\n\t\t\ttype == 'documentSelection' ||\n\t\t\ttype == 'model:documentSelection';\n\t}\n\n\t/**\n\t * Moves {@link module:engine/model/documentselection~DocumentSelection#focus} to the specified location.\n\t * Should be used only within the {@link module:engine/model/writer~Writer#setSelectionFocus} method.\n\t *\n\t * The location can be specified in the same form as\n\t * {@link module:engine/model/writer~Writer#createPositionAt writer.createPositionAt()} parameters.\n\t *\n\t * @see module:engine/model/writer~Writer#setSelectionFocus\n\t * @protected\n\t * @param {module:engine/model/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/model/item~Item model item}.\n\t */\n\t_setFocus( itemOrPosition, offset ) {\n\t\tthis._selection.setFocus( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Sets this selection's ranges and direction to the specified location based on the given\n\t * {@link module:engine/model/selection~Selectable selectable}.\n\t * Should be used only within the {@link module:engine/model/writer~Writer#setSelection} method.\n\t *\n\t * @see module:engine/model/writer~Writer#setSelection\n\t * @protected\n\t * @param {module:engine/model/selection~Selectable} selectable\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Sets place or offset of the selection.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t */\n\t_setTo( selectable, placeOrOffset, options ) {\n\t\tthis._selection.setTo( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Sets attribute on the selection. If attribute with the same key already is set, it's value is overwritten.\n\t * Should be used only within the {@link module:engine/model/writer~Writer#setSelectionAttribute} method.\n\t *\n\t * @see module:engine/model/writer~Writer#setSelectionAttribute\n\t * @protected\n\t * @param {String} key Key of the attribute to set.\n\t * @param {*} value Attribute value.\n\t */\n\t_setAttribute( key, value ) {\n\t\tthis._selection.setAttribute( key, value );\n\t}\n\n\t/**\n\t * Removes an attribute with given key from the selection.\n\t * If the given attribute was set on the selection, fires the {@link module:engine/model/selection~Selection#event:change:range}\n\t * event with removed attribute key.\n\t * Should be used only within the {@link module:engine/model/writer~Writer#removeSelectionAttribute} method.\n\t *\n\t * @see module:engine/model/writer~Writer#removeSelectionAttribute\n\t * @protected\n\t * @param {String} key Key of the attribute to remove.\n\t */\n\t_removeAttribute( key ) {\n\t\tthis._selection.removeAttribute( key );\n\t}\n\n\t/**\n\t * Returns an iterable that iterates through all selection attributes stored in current selection's parent.\n\t *\n\t * @protected\n\t * @returns {Iterable.<*>}\n\t */\n\t_getStoredAttributes() {\n\t\treturn this._selection._getStoredAttributes();\n\t}\n\n\t/**\n\t * Temporarily changes the gravity of the selection from the left to the right.\n\t *\n\t * The gravity defines from which direction the selection inherits its attributes. If it's the default left\n\t * gravity, the selection (after being moved by the the user) inherits attributes from its left hand side.\n\t * This method allows to temporarily override this behavior by forcing the gravity to the right.\n\t *\n\t * It returns an unique identifier which is required to restore the gravity. It guarantees the symmetry\n\t * of the process.\n\t *\n\t * @see module:engine/model/writer~Writer#overrideSelectionGravity\n\t * @protected\n\t * @returns {String} The unique id which allows restoring the gravity.\n\t */\n\t_overrideGravity() {\n\t\treturn this._selection.overrideGravity();\n\t}\n\n\t/**\n\t * Restores the {@link ~DocumentSelection#_overrideGravity overridden gravity}.\n\t *\n\t * Restoring the gravity is only possible using the unique identifier returned by\n\t * {@link ~DocumentSelection#_overrideGravity}. Note that the gravity remains overridden as long as won't be restored\n\t * the same number of times it was overridden.\n\t *\n\t * @see module:engine/model/writer~Writer#restoreSelectionGravity\n\t * @protected\n\t * @param {String} uid The unique id returned by {@link #_overrideGravity}.\n\t */\n\t_restoreGravity( uid ) {\n\t\tthis._selection.restoreGravity( uid );\n\t}\n\n\t/**\n\t * Generates and returns an attribute key for selection attributes store, basing on original attribute key.\n\t *\n\t * @protected\n\t * @param {String} key Attribute key to convert.\n\t * @returns {String} Converted attribute key, applicable for selection store.\n\t */\n\tstatic _getStoreAttributeKey( key ) {\n\t\treturn storePrefix + key;\n\t}\n\n\t/**\n\t * Checks whether the given attribute key is an attribute stored on an element.\n\t *\n\t * @protected\n\t * @param {String} key\n\t * @returns {Boolean}\n\t */\n\tstatic _isStoreAttributeKey( key ) {\n\t\treturn key.startsWith( storePrefix );\n\t}\n}\n\nmix( DocumentSelection, EmitterMixin );\n\n/**\n * Fired when selection range(s) changed.\n *\n * @event change:range\n * @param {Boolean} directChange In case of {@link module:engine/model/selection~Selection} class it is always set\n * to `true` which indicates that the selection change was caused by a direct use of selection's API.\n * The {@link module:engine/model/documentselection~DocumentSelection}, however, may change because its position\n * was directly changed through the {@link module:engine/model/writer~Writer writer} or because its position was\n * changed because the structure of the model has been changed (which means an indirect change).\n * The indirect change does not occur in case of normal (detached) selections because they are \"static\" (as \"not live\")\n * which mean that they are not updated once the document changes.\n */\n\n/**\n * Fired when selection attribute changed.\n *\n * @event change:attribute\n * @param {Boolean} directChange In case of {@link module:engine/model/selection~Selection} class it is always set\n * to `true` which indicates that the selection change was caused by a direct use of selection's API.\n * The {@link module:engine/model/documentselection~DocumentSelection}, however, may change because its attributes\n * were directly changed through the {@link module:engine/model/writer~Writer writer} or because its position was\n * changed in the model and its attributes were refreshed (which means an indirect change).\n * The indirect change does not occur in case of normal (detached) selections because they are \"static\" (as \"not live\")\n * which mean that they are not updated once the document changes.\n * @param {Array.<String>} attributeKeys Array containing keys of attributes that changed.\n */\n\n/**\n * Fired when selection marker(s) changed.\n *\n * @event change:marker\n * @param {Boolean} directChange This is always set to `false` in case of `change:marker` event as there is no possibility\n * to change markers directly through {@link module:engine/model/documentselection~DocumentSelection} API.\n * See also {@link module:engine/model/documentselection~DocumentSelection#event:change:range} and\n * {@link module:engine/model/documentselection~DocumentSelection#event:change:attribute}.\n * @param {Array.<module:engine/model/markercollection~Marker>} oldMarkers Markers in which the selection was before the change.\n */\n\n// `LiveSelection` is used internally by {@link module:engine/model/documentselection~DocumentSelection} and shouldn't be used directly.\n//\n// LiveSelection` is automatically updated upon changes in the {@link module:engine/model/document~Document document}\n// to always contain valid ranges. Its attributes are inherited from the text unless set explicitly.\n//\n// Differences between {@link module:engine/model/selection~Selection} and `LiveSelection` are:\n// * there is always a range in `LiveSelection` - even if no ranges were added there is a \"default range\"\n// present in the selection,\n// * ranges added to this selection updates automatically when the document changes,\n// * attributes of `LiveSelection` are updated automatically according to selection ranges.\n//\n// @extends module:engine/model/selection~Selection\n//\nclass LiveSelection extends Selection {\n\t// Creates an empty live selection for given {@link module:engine/model/document~Document}.\n\t// @param {module:engine/model/document~Document} doc Document which owns this selection.\n\tconstructor( doc ) {\n\t\tsuper();\n\n\t\t// List of selection markers.\n\t\t// Marker is a selection marker when selection range is inside the marker range.\n\t\t//\n\t\t// @type {module:utils/collection~Collection}\n\t\tthis.markers = new Collection( { idProperty: 'name' } );\n\n\t\t// Document which owns this selection.\n\t\t//\n\t\t// @protected\n\t\t// @member {module:engine/model/model~Model}\n\t\tthis._model = doc.model;\n\n\t\t// Document which owns this selection.\n\t\t//\n\t\t// @protected\n\t\t// @member {module:engine/model/document~Document}\n\t\tthis._document = doc;\n\n\t\t// Keeps mapping of attribute name to priority with which the attribute got modified (added/changed/removed)\n\t\t// last time. Possible values of priority are: `'low'` and `'normal'`.\n\t\t//\n\t\t// Priorities are used by internal `LiveSelection` mechanisms. All attributes set using `LiveSelection`\n\t\t// attributes API are set with `'normal'` priority.\n\t\t//\n\t\t// @private\n\t\t// @member {Map} module:engine/model/liveselection~LiveSelection#_attributePriority\n\t\tthis._attributePriority = new Map();\n\n\t\t// Position to which the selection should be set if the last selection range was moved to the graveyard.\n\t\t// @private\n\t\t// @member {module:engine/model/position~Position} module:engine/model/liveselection~LiveSelection#_selectionRestorePosition\n\t\tthis._selectionRestorePosition = null;\n\n\t\t// Flag that informs whether the selection ranges have changed. It is changed on true when `LiveRange#change:range` event is fired.\n\t\t// @private\n\t\t// @member {Array} module:engine/model/liveselection~LiveSelection#_hasChangedRange\n\t\tthis._hasChangedRange = false;\n\n\t\t// Each overriding gravity adds an UID to the set and each removal removes it.\n\t\t// Gravity is overridden when there's at least one UID in the set.\n\t\t// Gravity is restored when the set is empty.\n\t\t// This is to prevent conflicts when gravity is overridden by more than one feature at the same time.\n\t\t// @private\n\t\t// @type {Set}\n\t\tthis._overriddenGravityRegister = new Set();\n\n\t\t// Prefixes of marker names that should affect `LiveSelection#markers` collection.\n\t\t// @private\n\t\t// @type {Set}\n\t\tthis._observedMarkers = new Set();\n\n\t\t// Ensure selection is correct after each operation.\n\t\tthis.listenTo( this._model, 'applyOperation', ( evt, args ) => {\n\t\t\tconst operation = args[ 0 ];\n\n\t\t\tif ( !operation.isDocumentOperation || operation.type == 'marker' || operation.type == 'rename' || operation.type == 'noop' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Fix selection if the last range was removed from it and we have a position to which we can restore the selection.\n\t\t\tif ( this._ranges.length == 0 && this._selectionRestorePosition ) {\n\t\t\t\tthis._fixGraveyardSelection( this._selectionRestorePosition );\n\t\t\t}\n\n\t\t\t// \"Forget\" the restore position even if it was not \"used\".\n\t\t\tthis._selectionRestorePosition = null;\n\n\t\t\tif ( this._hasChangedRange ) {\n\t\t\t\tthis._hasChangedRange = false;\n\t\t\t\tthis.fire( 'change:range', { directChange: false } );\n\t\t\t}\n\t\t}, { priority: 'lowest' } );\n\n\t\t// Ensure selection is correct and up to date after each range change.\n\t\tthis.on( 'change:range', () => {\n\t\t\tfor ( const range of this.getRanges() ) {\n\t\t\t\tif ( !this._document._validateSelectionRange( range ) ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * Range from {@link module:engine/model/documentselection~DocumentSelection document selection}\n\t\t\t\t\t * starts or ends at incorrect position.\n\t\t\t\t\t *\n\t\t\t\t\t * @error document-selection-wrong-position\n\t\t\t\t\t * @param {module:engine/model/range~Range} range\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t\t'document-selection-wrong-position',\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\t{ range }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\t// Update markers data stored by the selection after each marker change.\n\t\t// This handles only marker changes done through marker operations (not model tree changes).\n\t\tthis.listenTo( this._model.markers, 'update', ( evt, marker, oldRange, newRange ) => {\n\t\t\tthis._updateMarker( marker, newRange );\n\t\t} );\n\n\t\t// Ensure selection is up to date after each change block.\n\t\tthis.listenTo( this._document, 'change', ( evt, batch ) => {\n\t\t\tclearAttributesStoredInElement( this._model, batch );\n\t\t} );\n\t}\n\n\tget isCollapsed() {\n\t\tconst length = this._ranges.length;\n\n\t\treturn length === 0 ? this._document._getDefaultRange().isCollapsed : super.isCollapsed;\n\t}\n\n\tget anchor() {\n\t\treturn super.anchor || this._document._getDefaultRange().start;\n\t}\n\n\tget focus() {\n\t\treturn super.focus || this._document._getDefaultRange().end;\n\t}\n\n\tget rangeCount() {\n\t\treturn this._ranges.length ? this._ranges.length : 1;\n\t}\n\n\t// Describes whether `LiveSelection` has own range(s) set, or if it is defaulted to\n\t// {@link module:engine/model/document~Document#_getDefaultRange document's default range}.\n\t//\n\t// @readonly\n\t// @type {Boolean}\n\tget hasOwnRange() {\n\t\treturn this._ranges.length > 0;\n\t}\n\n\t// When set to `true` then selection attributes on node before the caret won't be taken\n\t// into consideration while updating selection attributes.\n\t//\n\t// @protected\n\t// @type {Boolean}\n\tget isGravityOverridden() {\n\t\treturn !!this._overriddenGravityRegister.size;\n\t}\n\n\t// Unbinds all events previously bound by live selection.\n\tdestroy() {\n\t\tfor ( let i = 0; i < this._ranges.length; i++ ) {\n\t\t\tthis._ranges[ i ].detach();\n\t\t}\n\n\t\tthis.stopListening();\n\t}\n\n\t* getRanges() {\n\t\tif ( this._ranges.length ) {\n\t\t\tyield* super.getRanges();\n\t\t} else {\n\t\t\tyield this._document._getDefaultRange();\n\t\t}\n\t}\n\n\tgetFirstRange() {\n\t\treturn super.getFirstRange() || this._document._getDefaultRange();\n\t}\n\n\tgetLastRange() {\n\t\treturn super.getLastRange() || this._document._getDefaultRange();\n\t}\n\n\tsetTo( selectable, optionsOrPlaceOrOffset, options ) {\n\t\tsuper.setTo( selectable, optionsOrPlaceOrOffset, options );\n\t\tthis._updateAttributes( true );\n\t\tthis._updateMarkers();\n\t}\n\n\tsetFocus( itemOrPosition, offset ) {\n\t\tsuper.setFocus( itemOrPosition, offset );\n\t\tthis._updateAttributes( true );\n\t\tthis._updateMarkers();\n\t}\n\n\tsetAttribute( key, value ) {\n\t\tif ( this._setAttribute( key, value ) ) {\n\t\t\t// Fire event with exact data.\n\t\t\tconst attributeKeys = [ key ];\n\t\t\tthis.fire( 'change:attribute', { attributeKeys, directChange: true } );\n\t\t}\n\t}\n\n\tremoveAttribute( key ) {\n\t\tif ( this._removeAttribute( key ) ) {\n\t\t\t// Fire event with exact data.\n\t\t\tconst attributeKeys = [ key ];\n\t\t\tthis.fire( 'change:attribute', { attributeKeys, directChange: true } );\n\t\t}\n\t}\n\n\toverrideGravity() {\n\t\tconst overrideUid = uid();\n\n\t\t// Remember that another overriding has been requested. It will need to be removed\n\t\t// before the gravity is to be restored.\n\t\tthis._overriddenGravityRegister.add( overrideUid );\n\n\t\tif ( this._overriddenGravityRegister.size === 1 ) {\n\t\t\tthis._updateAttributes( true );\n\t\t}\n\n\t\treturn overrideUid;\n\t}\n\n\trestoreGravity( uid ) {\n\t\tif ( !this._overriddenGravityRegister.has( uid ) ) {\n\t\t\t/**\n\t\t\t * Restoring gravity for an unknown UID is not possible. Make sure you are using a correct\n\t\t\t * UID obtained from the {@link module:engine/model/writer~Writer#overrideSelectionGravity} to restore.\n\t\t\t *\n\t\t\t * @error document-selection-gravity-wrong-restore\n\t\t\t * @param {String} uid The unique identifier returned by\n\t\t\t * {@link module:engine/model/documentselection~DocumentSelection#_overrideGravity}.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'document-selection-gravity-wrong-restore',\n\t\t\t\tthis,\n\t\t\t\t{ uid }\n\t\t\t);\n\t\t}\n\n\t\tthis._overriddenGravityRegister.delete( uid );\n\n\t\t// Restore gravity only when all overriding have been restored.\n\t\tif ( !this.isGravityOverridden ) {\n\t\t\tthis._updateAttributes( true );\n\t\t}\n\t}\n\n\tobserveMarkers( prefixOrName ) {\n\t\tthis._observedMarkers.add( prefixOrName );\n\t\tthis._updateMarkers();\n\t}\n\n\t_popRange() {\n\t\tthis._ranges.pop().detach();\n\t}\n\n\t_pushRange( range ) {\n\t\tconst liveRange = this._prepareRange( range );\n\n\t\t// `undefined` is returned when given `range` is in graveyard root.\n\t\tif ( liveRange ) {\n\t\t\tthis._ranges.push( liveRange );\n\t\t}\n\t}\n\n\t// Prepares given range to be added to selection. Checks if it is correct,\n\t// converts it to {@link module:engine/model/liverange~LiveRange LiveRange}\n\t// and sets listeners listening to the range's change event.\n\t//\n\t// @private\n\t// @param {module:engine/model/range~Range} range\n\t_prepareRange( range ) {\n\t\tthis._checkRange( range );\n\n\t\tif ( range.root == this._document.graveyard ) {\n\t\t\t// @if CK_DEBUG // console.warn( 'Trying to add a Range that is in the graveyard root. Range rejected.' );\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst liveRange = LiveRange.fromRange( range );\n\n\t\t// If selection range is moved to the graveyard remove it from the selection object.\n\t\t// Also, save some data that can be used to restore selection later, on `Model#applyOperation` event.\n\t\tliveRange.on( 'change:range', ( evt, oldRange, data ) => {\n\t\t\tthis._hasChangedRange = true;\n\n\t\t\tif ( liveRange.root == this._document.graveyard ) {\n\t\t\t\tthis._selectionRestorePosition = data.deletionPosition;\n\n\t\t\t\tconst index = this._ranges.indexOf( liveRange );\n\t\t\t\tthis._ranges.splice( index, 1 );\n\t\t\t\tliveRange.detach();\n\t\t\t}\n\t\t} );\n\n\t\treturn liveRange;\n\t}\n\n\t_updateMarkers() {\n\t\tif ( !this._observedMarkers.size ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst markers = [];\n\t\tlet changed = false;\n\n\t\tfor ( const marker of this._model.markers ) {\n\t\t\tconst markerGroup = marker.name.split( ':', 1 )[ 0 ];\n\n\t\t\tif ( !this._observedMarkers.has( markerGroup ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst markerRange = marker.getRange();\n\n\t\t\tfor ( const selectionRange of this.getRanges() ) {\n\t\t\t\tif ( markerRange.containsRange( selectionRange, !selectionRange.isCollapsed ) ) {\n\t\t\t\t\tmarkers.push( marker );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst oldMarkers = Array.from( this.markers );\n\n\t\tfor ( const marker of markers ) {\n\t\t\tif ( !this.markers.has( marker ) ) {\n\t\t\t\tthis.markers.add( marker );\n\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t}\n\n\t\tfor ( const marker of Array.from( this.markers ) ) {\n\t\t\tif ( !markers.includes( marker ) ) {\n\t\t\t\tthis.markers.remove( marker );\n\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t}\n\n\t\tif ( changed ) {\n\t\t\tthis.fire( 'change:marker', { oldMarkers, directChange: false } );\n\t\t}\n\t}\n\n\t_updateMarker( marker, markerRange ) {\n\t\tconst markerGroup = marker.name.split( ':', 1 )[ 0 ];\n\n\t\tif ( !this._observedMarkers.has( markerGroup ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet changed = false;\n\n\t\tconst oldMarkers = Array.from( this.markers );\n\t\tconst hasMarker = this.markers.has( marker );\n\n\t\tif ( !markerRange ) {\n\t\t\tif ( hasMarker ) {\n\t\t\t\tthis.markers.remove( marker );\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t} else {\n\t\t\tlet contained = false;\n\n\t\t\tfor ( const selectionRange of this.getRanges() ) {\n\t\t\t\tif ( markerRange.containsRange( selectionRange, !selectionRange.isCollapsed ) ) {\n\t\t\t\t\tcontained = true;\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( contained && !hasMarker ) {\n\t\t\t\tthis.markers.add( marker );\n\n\t\t\t\tchanged = true;\n\t\t\t} else if ( !contained && hasMarker ) {\n\t\t\t\tthis.markers.remove( marker );\n\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t}\n\n\t\tif ( changed ) {\n\t\t\tthis.fire( 'change:marker', { oldMarkers, directChange: false } );\n\t\t}\n\t}\n\n\t// Updates this selection attributes according to its ranges and the {@link module:engine/model/document~Document model document}.\n\t//\n\t// @protected\n\t// @param {Boolean} clearAll\n\t// @fires change:attribute\n\t_updateAttributes( clearAll ) {\n\t\tconst newAttributes = toMap( this._getSurroundingAttributes() );\n\t\tconst oldAttributes = toMap( this.getAttributes() );\n\n\t\tif ( clearAll ) {\n\t\t\t// If `clearAll` remove all attributes and reset priorities.\n\t\t\tthis._attributePriority = new Map();\n\t\t\tthis._attrs = new Map();\n\t\t} else {\n\t\t\t// If not, remove only attributes added with `low` priority.\n\t\t\tfor ( const [ key, priority ] of this._attributePriority ) {\n\t\t\t\tif ( priority == 'low' ) {\n\t\t\t\t\tthis._attrs.delete( key );\n\t\t\t\t\tthis._attributePriority.delete( key );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._setAttributesTo( newAttributes );\n\n\t\t// Let's evaluate which attributes really changed.\n\t\tconst changed = [];\n\n\t\t// First, loop through all attributes that are set on selection right now.\n\t\t// Check which of them are different than old attributes.\n\t\tfor ( const [ newKey, newValue ] of this.getAttributes() ) {\n\t\t\tif ( !oldAttributes.has( newKey ) || oldAttributes.get( newKey ) !== newValue ) {\n\t\t\t\tchanged.push( newKey );\n\t\t\t}\n\t\t}\n\n\t\t// Then, check which of old attributes got removed.\n\t\tfor ( const [ oldKey ] of oldAttributes ) {\n\t\t\tif ( !this.hasAttribute( oldKey ) ) {\n\t\t\t\tchanged.push( oldKey );\n\t\t\t}\n\t\t}\n\n\t\t// Fire event with exact data (fire only if anything changed).\n\t\tif ( changed.length > 0 ) {\n\t\t\tthis.fire( 'change:attribute', { attributeKeys: changed, directChange: false } );\n\t\t}\n\t}\n\n\t// Internal method for setting `LiveSelection` attribute. Supports attribute priorities (through `directChange`\n\t// parameter).\n\t//\n\t// @private\n\t// @param {String} key Attribute key.\n\t// @param {*} value Attribute value.\n\t// @param {Boolean} [directChange=true] `true` if the change is caused by `Selection` API, `false` if change\n\t// is caused by `Batch` API.\n\t// @returns {Boolean} Whether value has changed.\n\t_setAttribute( key, value, directChange = true ) {\n\t\tconst priority = directChange ? 'normal' : 'low';\n\n\t\tif ( priority == 'low' && this._attributePriority.get( key ) == 'normal' ) {\n\t\t\t// Priority too low.\n\t\t\treturn false;\n\t\t}\n\n\t\tconst oldValue = super.getAttribute( key );\n\n\t\t// Don't do anything if value has not changed.\n\t\tif ( oldValue === value ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._attrs.set( key, value );\n\n\t\t// Update priorities map.\n\t\tthis._attributePriority.set( key, priority );\n\n\t\treturn true;\n\t}\n\n\t// Internal method for removing `LiveSelection` attribute. Supports attribute priorities (through `directChange`\n\t// parameter).\n\t//\n\t// NOTE: Even if attribute is not present in the selection but is provided to this method, it's priority will\n\t// be changed according to `directChange` parameter.\n\t//\n\t// @private\n\t// @param {String} key Attribute key.\n\t// @param {Boolean} [directChange=true] `true` if the change is caused by `Selection` API, `false` if change\n\t// is caused by `Batch` API.\n\t// @returns {Boolean} Whether attribute was removed. May not be true if such attributes didn't exist or the\n\t// existing attribute had higher priority.\n\t_removeAttribute( key, directChange = true ) {\n\t\tconst priority = directChange ? 'normal' : 'low';\n\n\t\tif ( priority == 'low' && this._attributePriority.get( key ) == 'normal' ) {\n\t\t\t// Priority too low.\n\t\t\treturn false;\n\t\t}\n\n\t\t// Update priorities map.\n\t\tthis._attributePriority.set( key, priority );\n\n\t\t// Don't do anything if value has not changed.\n\t\tif ( !super.hasAttribute( key ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._attrs.delete( key );\n\n\t\treturn true;\n\t}\n\n\t// Internal method for setting multiple `LiveSelection` attributes. Supports attribute priorities (through\n\t// `directChange` parameter).\n\t//\n\t// @private\n\t// @param {Map.<String,*>} attrs Iterable object containing attributes to be set.\n\t// @returns {Set.<String>} Changed attribute keys.\n\t_setAttributesTo( attrs ) {\n\t\tconst changed = new Set();\n\n\t\tfor ( const [ oldKey, oldValue ] of this.getAttributes() ) {\n\t\t\t// Do not remove attribute if attribute with same key and value is about to be set.\n\t\t\tif ( attrs.get( oldKey ) === oldValue ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// All rest attributes will be removed so changed attributes won't change .\n\t\t\tthis._removeAttribute( oldKey, false );\n\t\t}\n\n\t\tfor ( const [ key, value ] of attrs ) {\n\t\t\t// Attribute may not be set because of attributes or because same key/value is already added.\n\t\t\tconst gotAdded = this._setAttribute( key, value, false );\n\n\t\t\tif ( gotAdded ) {\n\t\t\t\tchanged.add( key );\n\t\t\t}\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\t// Returns an iterable that iterates through all selection attributes stored in current selection's parent.\n\t//\n\t// @protected\n\t// @returns {Iterable.<*>}\n\t* _getStoredAttributes() {\n\t\tconst selectionParent = this.getFirstPosition().parent;\n\n\t\tif ( this.isCollapsed && selectionParent.isEmpty ) {\n\t\t\tfor ( const key of selectionParent.getAttributeKeys() ) {\n\t\t\t\tif ( key.startsWith( storePrefix ) ) {\n\t\t\t\t\tconst realKey = key.substr( storePrefix.length );\n\n\t\t\t\t\tyield [ realKey, selectionParent.getAttribute( key ) ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Checks model text nodes that are closest to the selection's first position and returns attributes of first\n\t// found element. If there are no text nodes in selection's first position parent, it returns selection\n\t// attributes stored in that parent.\n\t//\n\t// @private\n\t// @returns {Iterable.<*>} Collection of attributes.\n\t_getSurroundingAttributes() {\n\t\tconst position = this.getFirstPosition();\n\t\tconst schema = this._model.schema;\n\n\t\tlet attrs = null;\n\n\t\tif ( !this.isCollapsed ) {\n\t\t\t// 1. If selection is a range...\n\t\t\tconst range = this.getFirstRange();\n\n\t\t\t// ...look for a first character node in that range and take attributes from it.\n\t\t\tfor ( const value of range ) {\n\t\t\t\t// If the item is an object, we don't want to get attributes from its children.\n\t\t\t\tif ( value.item.is( 'element' ) && schema.isObject( value.item ) ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif ( value.type == 'text' ) {\n\t\t\t\t\tattrs = value.item.getAttributes();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// 2. If the selection is a caret or the range does not contain a character node...\n\n\t\t\tconst nodeBefore = position.textNode ? position.textNode : position.nodeBefore;\n\t\t\tconst nodeAfter = position.textNode ? position.textNode : position.nodeAfter;\n\n\t\t\t// When gravity is overridden then don't take node before into consideration.\n\t\t\tif ( !this.isGravityOverridden ) {\n\t\t\t\t// ...look at the node before caret and take attributes from it if it is a character node.\n\t\t\t\tattrs = getAttrsIfCharacter( nodeBefore );\n\t\t\t}\n\n\t\t\t// 3. If not, look at the node after caret...\n\t\t\tif ( !attrs ) {\n\t\t\t\tattrs = getAttrsIfCharacter( nodeAfter );\n\t\t\t}\n\n\t\t\t// 4. If not, try to find the first character on the left, that is in the same node.\n\t\t\t// When gravity is overridden then don't take node before into consideration.\n\t\t\tif ( !this.isGravityOverridden && !attrs ) {\n\t\t\t\tlet node = nodeBefore;\n\n\t\t\t\twhile ( node && !schema.isInline( node ) && !attrs ) {\n\t\t\t\t\tnode = node.previousSibling;\n\t\t\t\t\tattrs = getAttrsIfCharacter( node );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 5. If not found, try to find the first character on the right, that is in the same node.\n\t\t\tif ( !attrs ) {\n\t\t\t\tlet node = nodeAfter;\n\n\t\t\t\twhile ( node && !schema.isInline( node ) && !attrs ) {\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t\tattrs = getAttrsIfCharacter( node );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 6. If not found, selection should retrieve attributes from parent.\n\t\t\tif ( !attrs ) {\n\t\t\t\tattrs = this._getStoredAttributes();\n\t\t\t}\n\t\t}\n\n\t\treturn attrs;\n\t}\n\n\t// Fixes the selection after all its ranges got removed.\n\t//\n\t// @private\n\t// @param {module:engine/model/position~Position} deletionPosition Position where the deletion happened.\n\t_fixGraveyardSelection( deletionPosition ) {\n\t\t// Find a range that is a correct selection range and is closest to the position where the deletion happened.\n\t\tconst selectionRange = this._model.schema.getNearestSelectionRange( deletionPosition );\n\n\t\t// If nearest valid selection range has been found - add it in the place of old range.\n\t\tif ( selectionRange ) {\n\t\t\t// Check the range, convert it to live range, bind events, etc.\n\t\t\tthis._pushRange( selectionRange );\n\t\t}\n\t\t// If nearest valid selection range cannot be found don't add any range. Selection will be set to the default range.\n\t}\n}\n\n// Helper function for {@link module:engine/model/liveselection~LiveSelection#_updateAttributes}.\n//\n// It takes model item, checks whether it is a text node (or text proxy) and, if so, returns it's attributes. If not, returns `null`.\n//\n// @param {module:engine/model/item~Item|null}  node\n// @returns {Boolean}\nfunction getAttrsIfCharacter( node ) {\n\tif ( node instanceof TextProxy || node instanceof Text ) {\n\t\treturn node.getAttributes();\n\t}\n\n\treturn null;\n}\n\n// Removes selection attributes from element which is not empty anymore.\n//\n// @param {module:engine/model/model~Model} model\n// @param {module:engine/model/batch~Batch} batch\nfunction clearAttributesStoredInElement( model, batch ) {\n\tconst differ = model.document.differ;\n\n\tfor ( const entry of differ.getChanges() ) {\n\t\tif ( entry.type != 'insert' ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst changeParent = entry.position.parent;\n\t\tconst isNoLongerEmpty = entry.length === changeParent.maxOffset;\n\n\t\tif ( isNoLongerEmpty ) {\n\t\t\tmodel.enqueueChange( batch, writer => {\n\t\t\t\tconst storedAttributes = Array.from( changeParent.getAttributeKeys() )\n\t\t\t\t\t.filter( key => key.startsWith( storePrefix ) );\n\n\t\t\t\tfor ( const key of storedAttributes ) {\n\t\t\t\t\twriter.removeAttribute( key, changeParent );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/conversion/conversionhelpers\n */\n\n/**\n * Base class for conversion helpers.\n */\nexport default class ConversionHelpers {\n\t/**\n\t * Creates a conversion helpers instance.\n\t *\n\t * @param {Array.<module:engine/conversion/downcastdispatcher~DowncastDispatcher|\n\t * module:engine/conversion/upcastdispatcher~UpcastDispatcher>} dispatchers\n\t */\n\tconstructor( dispatchers ) {\n\t\tthis._dispatchers = dispatchers;\n\t}\n\n\t/**\n\t * Registers a conversion helper.\n\t *\n\t * **Note**: See full usage example in the `{@link module:engine/conversion/conversion~Conversion#for conversion.for()}`\n\t * method description.\n\t *\n\t * @param {Function} conversionHelper The function to be called on event.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers|module:engine/conversion/upcasthelpers~UpcastHelpers}\n\t */\n\tadd( conversionHelper ) {\n\t\tfor ( const dispatcher of this._dispatchers ) {\n\t\t\tconversionHelper( dispatcher );\n\t\t}\n\n\t\treturn this;\n\t}\n}\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n","/**\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * Contains downcast (model-to-view) converters for {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher}.\n *\n * @module engine/conversion/downcasthelpers\n */\n\nimport ModelRange from '../model/range';\nimport ModelSelection from '../model/selection';\nimport ModelElement from '../model/element';\n\nimport ViewAttributeElement from '../view/attributeelement';\nimport DocumentSelection from '../model/documentselection';\nimport ConversionHelpers from './conversionhelpers';\n\nimport { cloneDeep } from 'lodash-es';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport toArray from '@ckeditor/ckeditor5-utils/src/toarray';\n\n/**\n * Downcast conversion helper functions.\n *\n * @extends module:engine/conversion/conversionhelpers~ConversionHelpers\n */\nexport default class DowncastHelpers extends ConversionHelpers {\n\t/**\n\t * Model element to view element conversion helper.\n\t *\n\t * This conversion results in creating a view element. For example, model `<paragraph>Foo</paragraph>` becomes `<p>Foo</p>` in the view.\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).elementToElement( {\n\t *\t\t\tmodel: 'paragraph',\n\t *\t\t\tview: 'p'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).elementToElement( {\n\t *\t\t\tmodel: 'paragraph',\n\t *\t\t\tview: 'div',\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).elementToElement( {\n\t *\t\t\tmodel: 'fancyParagraph',\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'p',\n\t *\t\t\t\tclasses: 'fancy'\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).elementToElement( {\n\t *\t\t\tmodel: 'heading',\n\t *\t\t\tview: ( modelElement, conversionApi ) => {\n\t *\t\t\t\tconst { writer } = conversionApi;\n\t *\n\t *\t\t\t\treturn writer.createContainerElement( 'h' + modelElement.getAttribute( 'level' ) );\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * The element-to-element conversion supports the reconversion mechanism. This is helpful in the conversion to complex view structures\n\t * where multiple atomic element-to-element and attribute-to-attribute or attribute-to-element could be used. By specifying\n\t * `triggerBy()` events you can trigger reconverting the model to full view tree structures at once.\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).elementToElement( {\n\t *\t\t\tmodel: 'complex',\n\t *\t\t\tview: ( modelElement, conversionApi ) => createComplexViewFromModel( modelElement, conversionApi ),\n\t *\t\t\ttriggerBy: {\n\t *\t\t\t\tattributes: [ 'foo', 'bar' ],\n\t *\t\t\t\tchildren: [ 'slot' ]\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * You can read more about element-to-element conversion in the\n\t * {@glink framework/guides/deep-dive/conversion/custom-element-conversion Custom element conversion} guide.\n\t *\n\t * @method #elementToElement\n\t * @param {Object} config Conversion configuration.\n\t * @param {String} config.model The name of the model element to convert.\n\t * @param {module:engine/view/elementdefinition~ElementDefinition|Function} config.view A view element definition or a function\n\t * that takes the model element and {@link module:engine/conversion/downcastdispatcher~DowncastConversionApi downcast conversion API}\n\t * as parameters and returns a view container element.\n\t * @param {Object} [config.triggerBy] Reconversion triggers. At least one trigger must be defined.\n\t * @param {Array.<String>} config.triggerBy.attributes The name of the element's attributes whose change will trigger element\n\t * reconversion.\n\t * @param {Array.<String>} config.triggerBy.children The name of direct children whose adding or removing will trigger element\n\t * reconversion.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers}\n\t */\n\telementToElement( config ) {\n\t\treturn this.add( downcastElementToElement( config ) );\n\t}\n\n\t/**\n\t * Model attribute to view element conversion helper.\n\t *\n\t * This conversion results in wrapping view nodes with a view attribute element. For example, a model text node with\n\t * `\"Foo\"` as data and the `bold` attribute becomes `<strong>Foo</strong>` in the view.\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: 'bold',\n\t *\t\t\tview: 'strong'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: 'bold',\n\t *\t\t\tview: 'b',\n\t *\t\t\tconverterPriority: 'high'\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: 'invert',\n\t *\t\t\tview: {\n\t *\t\t\t\tname: 'span',\n\t *\t\t\t\tclasses: [ 'font-light', 'bg-dark' ]\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'fontSize',\n\t *\t\t\t\tvalues: [ 'big', 'small' ]\n\t *\t\t\t},\n\t *\t\t\tview: {\n\t *\t\t\t\tbig: {\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'font-size': '1.2em'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t},\n\t *\t\t\t\tsmall: {\n\t *\t\t\t\t\tname: 'span',\n\t *\t\t\t\t\tstyles: {\n\t *\t\t\t\t\t\t'font-size': '0.8em'\n\t *\t\t\t\t\t}\n\t *\t\t\t\t}\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: 'bold',\n\t *\t\t\tview: ( modelAttributeValue, conversionApi ) => {\n\t *\t\t\t\tconst { writer } = conversionApi;\n\t *\n\t *\t\t\t\treturn writer.createAttributeElement( 'span', {\n\t *\t\t\t\t\tstyle: 'font-weight:' + modelAttributeValue\n\t *\t\t\t\t} );\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t *\t\teditor.conversion.for( 'downcast' ).attributeToElement( {\n\t *\t\t\tmodel: {\n\t *\t\t\t\tkey: 'color',\n\t *\t\t\t\tname: '$text'\n\t *\t\t\t},\n\t *\t\t\tview: ( modelAttributeValue, conversionApi ) => {\n\t *\t\t\t\tconst { writer } = conversionApi;\n\t *\n\t *\t\t\t\treturn writer.createAttributeElement( 'span', {\n\t *\t\t\t\t\tstyle: 'color:' + modelAttributeValue\n\t *\t\t\t\t} );\n\t *\t\t\t}\n\t *\t\t} );\n\t *\n\t * See {@link module:engine/conversion/conversion~Conversion#for `conversion.for()`} to learn how to add a converter\n\t * to the conversion process.\n\t *\n\t * @method #attributeToElement\n\t * @param {Object} config Conversion configuration.\n\t * @param {String|Object} config.model The key of the attribute to convert from or a `{ key, values }` object. `values` is an array\n\t * of `String`s with possible values if the model attribute is an enumerable.\n\t * @param {module:engine/view/elementdefinition~ElementDefinition|Function|Object} config.view A view element definition or a function\n\t * that takes the model attribute value and\n\t * {@link module:engine/conversion/downcastdispatcher~DowncastConversionApi downcast conversion API} as parameters and returns a view\n\t * attribute element. If `config.model.values` is given, `config.view` should be an object assigning values from `config.model.values`\n\t * to view element definitions or functions.\n\t * @param {module:utils/priorities~PriorityString} [config.converterPriority='normal'] Converter priority.\n\t * @returns {module:engine/conversion/downcasthelpers~DowncastHelpers}\n\t */\n\tattributeToElement( config ) {\n\t\treturn this.add( downcastAttributeToElement( config ) );\n\t}\n\n\t/**\n\t * Model attribute to view attribute conversion helper.\n\t *\n\t * This conversion results in adding an attribute to a view node, basing on an attribute from a model node. For example,\n\t * `<image src='https://cdn.ckeditor.com/ckeditor5/40.2.0/classic/ckeditor.js';\nimport { getSelectedTableWidget, getTableWidgetAncestor } from './utils/ui/widget';\n\n/**\n * The table toolbar class. It creates toolbars for the table feature and its content (for now only for the table cell content).\n *\n * The table toolbar shows up when a table widget is selected. Its components (e.g. buttons) are created based on the\n * {@link module:table/table~TableConfig#tableToolbar `table.tableToolbar` configuration option}.\n *\n * Table content toolbar shows up when the selection is inside the content of a table. It creates its component based on the\n * {@link module:table/table~TableConfig#contentToolbar `table.contentToolbar` configuration option}.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class TableToolbar extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ WidgetToolbarRepository ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'TableToolbar';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tafterInit() {\n\t\tconst editor = this.editor;\n\t\tconst t = editor.t;\n\t\tconst widgetToolbarRepository = editor.plugins.get( WidgetToolbarRepository );\n\n\t\tconst tableContentToolbarItems = editor.config.get( 'table.contentToolbar' );\n\n\t\tconst tableToolbarItems = editor.config.get( 'table.tableToolbar' );\n\n\t\tif ( tableContentToolbarItems ) {\n\t\t\twidgetToolbarRepository.register( 'tableContent', {\n\t\t\t\tariaLabel: t( 'Table toolbar' ),\n\t\t\t\titems: tableContentToolbarItems,\n\t\t\t\tgetRelatedElement: getTableWidgetAncestor\n\t\t\t} );\n\t\t}\n\n\t\tif ( tableToolbarItems ) {\n\t\t\twidgetToolbarRepository.register( 'table', {\n\t\t\t\tariaLabel: t( 'Table toolbar' ),\n\t\t\t\titems: tableToolbarItems,\n\t\t\t\tgetRelatedElement: getSelectedTableWidget\n\t\t\t} );\n\t\t}\n\t}\n}\n\n/**\n * Items to be placed in the table content toolbar.\n * The {@link module:table/tabletoolbar~TableToolbar} plugin is required to make this toolbar work.\n *\n * Assuming that you use the {@link module:table/tableui~TableUI} feature, the following toolbar items will be available\n * in {@link module:ui/componentfactory~ComponentFactory}:\n *\n * * `'tableRow'`,\n * * `'tableColumn'`,\n * * `'mergeTableCells'`.\n *\n * You can thus configure the toolbar like this:\n *\n *\t\tconst tableConfig = {\n *\t\t\tcontentToolbar: [ 'tableRow', 'tableColumn', 'mergeTableCells' ]\n *\t\t};\n *\n * Of course, the same buttons can also be used in the\n * {@link module:core/editor/editorconfig~EditorConfig#toolbar main editor toolbar}.\n *\n * Read more about configuring the toolbar in {@link module:core/editor/editorconfig~EditorConfig#toolbar}.\n *\n * @member {Array.<String>} module:table/table~TableConfig#contentToolbar\n */\n\n/**\n * Items to be placed in the table toolbar.\n * The {@link module:table/tabletoolbar~TableToolbar} plugin is required to make this toolbar work.\n *\n * You can thus configure the toolbar like this:\n *\n *\t\tconst tableConfig = {\n *\t\t\ttableToolbar: [ 'blockQuote' ]\n *\t\t};\n *\n * Of course, the same buttons can also be used in the\n * {@link module:core/editor/editorconfig~EditorConfig#toolbar main editor toolbar}.\n *\n * Read more about configuring the toolbar in {@link module:core/editor/editorconfig~EditorConfig#toolbar}.\n *\n * @member {Array.<String>} module:table/table~TableConfig#tableToolbar\n */\n"],"sourceRoot":""}